"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@react-aria";
exports.ids = ["vendor-chunks/@react-aria"];
exports.modules = {

/***/ "(ssr)/./node_modules/@react-aria/focus/dist/import.mjs":
/*!********************************************************!*\
  !*** ./node_modules/@react-aria/focus/dist/import.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FocusRing: () => (/* binding */ $907718708eab68af$export$1a38b4ad7f578e1d),\n/* harmony export */   FocusScope: () => (/* binding */ $9bf71ea28793e738$export$20e40289641fbbb6),\n/* harmony export */   FocusableProvider: () => (/* binding */ $e6afbd83fe6ebbd2$export$13f3202a3e5ddd5),\n/* harmony export */   createFocusManager: () => (/* binding */ $9bf71ea28793e738$export$c5251b9e124bf29),\n/* harmony export */   focusSafely: () => (/* binding */ $6a99195332edec8b$export$80f3e147d781571c),\n/* harmony export */   getFocusableTreeWalker: () => (/* binding */ $9bf71ea28793e738$export$2d6ec8fc375ceafa),\n/* harmony export */   isElementInChildOfActiveScope: () => (/* binding */ $9bf71ea28793e738$export$1258395f99bf9cbf),\n/* harmony export */   useFocusManager: () => (/* binding */ $9bf71ea28793e738$export$10c5169755ce7bd7),\n/* harmony export */   useFocusRing: () => (/* binding */ $f7dceffc5ad7768b$export$4e328f61c538687f),\n/* harmony export */   useFocusable: () => (/* binding */ $e6afbd83fe6ebbd2$export$4c014de7c8940b4c),\n/* harmony export */   useHasTabbableChild: () => (/* binding */ $83013635b024ae3d$export$eac1895992b9f3d6)\n/* harmony export */ });\n/* harmony import */ var _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @react-aria/utils */ \"(ssr)/./node_modules/@react-aria/utils/dist/import.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _react_aria_interactions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @react-aria/interactions */ \"(ssr)/./node_modules/@react-aria/interactions/dist/import.mjs\");\n/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! clsx */ \"(ssr)/./node_modules/@react-aria/focus/node_modules/clsx/dist/clsx.mjs\");\n\r\n\r\n\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ /*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ /*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the 'License');\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an 'AS IS' BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n\r\nfunction $6a99195332edec8b$export$80f3e147d781571c(element) {\r\n    // If the user is interacting with a virtual cursor, e.g. screen reader, then\r\n    // wait until after any animated transitions that are currently occurring on\r\n    // the page before shifting focus. This avoids issues with VoiceOver on iOS\r\n    // causing the page to scroll when moving focus if the element is transitioning\r\n    // from off the screen.\r\n    const ownerDocument = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.getOwnerDocument)(element);\r\n    if ((0, _react_aria_interactions__WEBPACK_IMPORTED_MODULE_3__.getInteractionModality)() === \"virtual\") {\r\n        let lastFocusedElement = ownerDocument.activeElement;\r\n        (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.runAfterTransition)(()=>{\r\n            // If focus did not move and the element is still in the document, focus it.\r\n            if (ownerDocument.activeElement === lastFocusedElement && element.isConnected) (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.focusWithoutScrolling)(element);\r\n        });\r\n    } else (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.focusWithoutScrolling)(element);\r\n}\r\n\r\n\r\n\r\n/*\r\n * Copyright 2021 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\nfunction $645f2e67b85a24c9$var$isStyleVisible(element) {\r\n    const windowObject = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.getOwnerWindow)(element);\r\n    if (!(element instanceof windowObject.HTMLElement) && !(element instanceof windowObject.SVGElement)) return false;\r\n    let { display: display, visibility: visibility } = element.style;\r\n    let isVisible = display !== \"none\" && visibility !== \"hidden\" && visibility !== \"collapse\";\r\n    if (isVisible) {\r\n        const { getComputedStyle: getComputedStyle } = element.ownerDocument.defaultView;\r\n        let { display: computedDisplay, visibility: computedVisibility } = getComputedStyle(element);\r\n        isVisible = computedDisplay !== \"none\" && computedVisibility !== \"hidden\" && computedVisibility !== \"collapse\";\r\n    }\r\n    return isVisible;\r\n}\r\nfunction $645f2e67b85a24c9$var$isAttributeVisible(element, childElement) {\r\n    return !element.hasAttribute(\"hidden\") && (element.nodeName === \"DETAILS\" && childElement && childElement.nodeName !== \"SUMMARY\" ? element.hasAttribute(\"open\") : true);\r\n}\r\nfunction $645f2e67b85a24c9$export$e989c0fffaa6b27a(element, childElement) {\r\n    return element.nodeName !== \"#comment\" && $645f2e67b85a24c9$var$isStyleVisible(element) && $645f2e67b85a24c9$var$isAttributeVisible(element, childElement) && (!element.parentElement || $645f2e67b85a24c9$export$e989c0fffaa6b27a(element.parentElement, element));\r\n}\r\n\r\n\r\n\r\nconst $9bf71ea28793e738$var$FocusContext = /*#__PURE__*/ (0, react__WEBPACK_IMPORTED_MODULE_0__).createContext(null);\r\nlet $9bf71ea28793e738$var$activeScope = null;\r\nfunction $9bf71ea28793e738$export$20e40289641fbbb6(props) {\r\n    let { children: children, contain: contain, restoreFocus: restoreFocus, autoFocus: autoFocus } = props;\r\n    let startRef = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\r\n    let endRef = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\r\n    let scopeRef = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]);\r\n    let { parentNode: parentNode } = (0, react__WEBPACK_IMPORTED_MODULE_0__.useContext)($9bf71ea28793e738$var$FocusContext) || {};\r\n    // Create a tree node here so we can add children to it even before it is added to the tree.\r\n    let node = (0, react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>new $9bf71ea28793e738$var$TreeNode({\r\n            scopeRef: scopeRef\r\n        }), [\r\n        scopeRef\r\n    ]);\r\n    (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.useLayoutEffect)(()=>{\r\n        // If a new scope mounts outside the active scope, (e.g. DialogContainer launched from a menu),\r\n        // use the active scope as the parent instead of the parent from context. Layout effects run bottom\r\n        // up, so if the parent is not yet added to the tree, don't do this. Only the outer-most FocusScope\r\n        // that is being added should get the activeScope as its parent.\r\n        let parent = parentNode || $9bf71ea28793e738$export$d06fae2ee68b101e.root;\r\n        if ($9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode(parent.scopeRef) && $9bf71ea28793e738$var$activeScope && !$9bf71ea28793e738$var$isAncestorScope($9bf71ea28793e738$var$activeScope, parent.scopeRef)) {\r\n            let activeNode = $9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode($9bf71ea28793e738$var$activeScope);\r\n            if (activeNode) parent = activeNode;\r\n        }\r\n        // Add the node to the parent, and to the tree.\r\n        parent.addChild(node);\r\n        $9bf71ea28793e738$export$d06fae2ee68b101e.addNode(node);\r\n    }, [\r\n        node,\r\n        parentNode\r\n    ]);\r\n    (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.useLayoutEffect)(()=>{\r\n        let node = $9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode(scopeRef);\r\n        if (node) node.contain = !!contain;\r\n    }, [\r\n        contain\r\n    ]);\r\n    (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.useLayoutEffect)(()=>{\r\n        var _startRef_current;\r\n        // Find all rendered nodes between the sentinels and add them to the scope.\r\n        let node = (_startRef_current = startRef.current) === null || _startRef_current === void 0 ? void 0 : _startRef_current.nextSibling;\r\n        let nodes = [];\r\n        while(node && node !== endRef.current){\r\n            nodes.push(node);\r\n            node = node.nextSibling;\r\n        }\r\n        scopeRef.current = nodes;\r\n    }, [\r\n        children\r\n    ]);\r\n    $9bf71ea28793e738$var$useActiveScopeTracker(scopeRef, restoreFocus, contain);\r\n    $9bf71ea28793e738$var$useFocusContainment(scopeRef, contain);\r\n    $9bf71ea28793e738$var$useRestoreFocus(scopeRef, restoreFocus, contain);\r\n    $9bf71ea28793e738$var$useAutoFocus(scopeRef, autoFocus);\r\n    // This needs to be an effect so that activeScope is updated after the FocusScope tree is complete.\r\n    // It cannot be a useLayoutEffect because the parent of this node hasn't been attached in the tree yet.\r\n    (0, react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\r\n        const activeElement = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.getOwnerDocument)(scopeRef.current ? scopeRef.current[0] : undefined).activeElement;\r\n        let scope = null;\r\n        if ($9bf71ea28793e738$var$isElementInScope(activeElement, scopeRef.current)) {\r\n            // We need to traverse the focusScope tree and find the bottom most scope that\r\n            // contains the active element and set that as the activeScope.\r\n            for (let node of $9bf71ea28793e738$export$d06fae2ee68b101e.traverse())if (node.scopeRef && $9bf71ea28793e738$var$isElementInScope(activeElement, node.scopeRef.current)) scope = node;\r\n            if (scope === $9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode(scopeRef)) $9bf71ea28793e738$var$activeScope = scope.scopeRef;\r\n        }\r\n    }, [\r\n        scopeRef\r\n    ]);\r\n    // This layout effect cleanup is so that the tree node is removed synchronously with react before the RAF\r\n    // in useRestoreFocus cleanup runs.\r\n    (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.useLayoutEffect)(()=>{\r\n        return ()=>{\r\n            var _focusScopeTree_getTreeNode_parent, _focusScopeTree_getTreeNode;\r\n            var _focusScopeTree_getTreeNode_parent_scopeRef;\r\n            // Scope may have been re-parented.\r\n            let parentScope = (_focusScopeTree_getTreeNode_parent_scopeRef = (_focusScopeTree_getTreeNode = $9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode(scopeRef)) === null || _focusScopeTree_getTreeNode === void 0 ? void 0 : (_focusScopeTree_getTreeNode_parent = _focusScopeTree_getTreeNode.parent) === null || _focusScopeTree_getTreeNode_parent === void 0 ? void 0 : _focusScopeTree_getTreeNode_parent.scopeRef) !== null && _focusScopeTree_getTreeNode_parent_scopeRef !== void 0 ? _focusScopeTree_getTreeNode_parent_scopeRef : null;\r\n            if ((scopeRef === $9bf71ea28793e738$var$activeScope || $9bf71ea28793e738$var$isAncestorScope(scopeRef, $9bf71ea28793e738$var$activeScope)) && (!parentScope || $9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode(parentScope))) $9bf71ea28793e738$var$activeScope = parentScope;\r\n            $9bf71ea28793e738$export$d06fae2ee68b101e.removeTreeNode(scopeRef);\r\n        };\r\n    }, [\r\n        scopeRef\r\n    ]);\r\n    let focusManager = (0, react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>$9bf71ea28793e738$var$createFocusManagerForScope(scopeRef), []);\r\n    let value = (0, react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>({\r\n            focusManager: focusManager,\r\n            parentNode: node\r\n        }), [\r\n        node,\r\n        focusManager\r\n    ]);\r\n    return /*#__PURE__*/ (0, react__WEBPACK_IMPORTED_MODULE_0__).createElement($9bf71ea28793e738$var$FocusContext.Provider, {\r\n        value: value\r\n    }, /*#__PURE__*/ (0, react__WEBPACK_IMPORTED_MODULE_0__).createElement(\"span\", {\r\n        \"data-focus-scope-start\": true,\r\n        hidden: true,\r\n        ref: startRef\r\n    }), children, /*#__PURE__*/ (0, react__WEBPACK_IMPORTED_MODULE_0__).createElement(\"span\", {\r\n        \"data-focus-scope-end\": true,\r\n        hidden: true,\r\n        ref: endRef\r\n    }));\r\n}\r\nfunction $9bf71ea28793e738$export$10c5169755ce7bd7() {\r\n    var _useContext;\r\n    return (_useContext = (0, react__WEBPACK_IMPORTED_MODULE_0__.useContext)($9bf71ea28793e738$var$FocusContext)) === null || _useContext === void 0 ? void 0 : _useContext.focusManager;\r\n}\r\nfunction $9bf71ea28793e738$var$createFocusManagerForScope(scopeRef) {\r\n    return {\r\n        focusNext (opts = {}) {\r\n            let scope = scopeRef.current;\r\n            let { from: from, tabbable: tabbable, wrap: wrap, accept: accept } = opts;\r\n            let node = from || (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.getOwnerDocument)(scope[0]).activeElement;\r\n            let sentinel = scope[0].previousElementSibling;\r\n            let scopeRoot = $9bf71ea28793e738$var$getScopeRoot(scope);\r\n            let walker = $9bf71ea28793e738$export$2d6ec8fc375ceafa(scopeRoot, {\r\n                tabbable: tabbable,\r\n                accept: accept\r\n            }, scope);\r\n            walker.currentNode = $9bf71ea28793e738$var$isElementInScope(node, scope) ? node : sentinel;\r\n            let nextNode = walker.nextNode();\r\n            if (!nextNode && wrap) {\r\n                walker.currentNode = sentinel;\r\n                nextNode = walker.nextNode();\r\n            }\r\n            if (nextNode) $9bf71ea28793e738$var$focusElement(nextNode, true);\r\n            return nextNode;\r\n        },\r\n        focusPrevious (opts = {}) {\r\n            let scope = scopeRef.current;\r\n            let { from: from, tabbable: tabbable, wrap: wrap, accept: accept } = opts;\r\n            let node = from || (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.getOwnerDocument)(scope[0]).activeElement;\r\n            let sentinel = scope[scope.length - 1].nextElementSibling;\r\n            let scopeRoot = $9bf71ea28793e738$var$getScopeRoot(scope);\r\n            let walker = $9bf71ea28793e738$export$2d6ec8fc375ceafa(scopeRoot, {\r\n                tabbable: tabbable,\r\n                accept: accept\r\n            }, scope);\r\n            walker.currentNode = $9bf71ea28793e738$var$isElementInScope(node, scope) ? node : sentinel;\r\n            let previousNode = walker.previousNode();\r\n            if (!previousNode && wrap) {\r\n                walker.currentNode = sentinel;\r\n                previousNode = walker.previousNode();\r\n            }\r\n            if (previousNode) $9bf71ea28793e738$var$focusElement(previousNode, true);\r\n            return previousNode;\r\n        },\r\n        focusFirst (opts = {}) {\r\n            let scope = scopeRef.current;\r\n            let { tabbable: tabbable, accept: accept } = opts;\r\n            let scopeRoot = $9bf71ea28793e738$var$getScopeRoot(scope);\r\n            let walker = $9bf71ea28793e738$export$2d6ec8fc375ceafa(scopeRoot, {\r\n                tabbable: tabbable,\r\n                accept: accept\r\n            }, scope);\r\n            walker.currentNode = scope[0].previousElementSibling;\r\n            let nextNode = walker.nextNode();\r\n            if (nextNode) $9bf71ea28793e738$var$focusElement(nextNode, true);\r\n            return nextNode;\r\n        },\r\n        focusLast (opts = {}) {\r\n            let scope = scopeRef.current;\r\n            let { tabbable: tabbable, accept: accept } = opts;\r\n            let scopeRoot = $9bf71ea28793e738$var$getScopeRoot(scope);\r\n            let walker = $9bf71ea28793e738$export$2d6ec8fc375ceafa(scopeRoot, {\r\n                tabbable: tabbable,\r\n                accept: accept\r\n            }, scope);\r\n            walker.currentNode = scope[scope.length - 1].nextElementSibling;\r\n            let previousNode = walker.previousNode();\r\n            if (previousNode) $9bf71ea28793e738$var$focusElement(previousNode, true);\r\n            return previousNode;\r\n        }\r\n    };\r\n}\r\nconst $9bf71ea28793e738$var$focusableElements = [\r\n    \"input:not([disabled]):not([type=hidden])\",\r\n    \"select:not([disabled])\",\r\n    \"textarea:not([disabled])\",\r\n    \"button:not([disabled])\",\r\n    \"a[href]\",\r\n    \"area[href]\",\r\n    \"summary\",\r\n    \"iframe\",\r\n    \"object\",\r\n    \"embed\",\r\n    \"audio[controls]\",\r\n    \"video[controls]\",\r\n    \"[contenteditable]\"\r\n];\r\nconst $9bf71ea28793e738$var$FOCUSABLE_ELEMENT_SELECTOR = $9bf71ea28793e738$var$focusableElements.join(\":not([hidden]),\") + \",[tabindex]:not([disabled]):not([hidden])\";\r\n$9bf71ea28793e738$var$focusableElements.push('[tabindex]:not([tabindex=\"-1\"]):not([disabled])');\r\nconst $9bf71ea28793e738$var$TABBABLE_ELEMENT_SELECTOR = $9bf71ea28793e738$var$focusableElements.join(':not([hidden]):not([tabindex=\"-1\"]),');\r\nfunction $9bf71ea28793e738$var$getScopeRoot(scope) {\r\n    return scope[0].parentElement;\r\n}\r\nfunction $9bf71ea28793e738$var$shouldContainFocus(scopeRef) {\r\n    let scope = $9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode($9bf71ea28793e738$var$activeScope);\r\n    while(scope && scope.scopeRef !== scopeRef){\r\n        if (scope.contain) return false;\r\n        scope = scope.parent;\r\n    }\r\n    return true;\r\n}\r\nfunction $9bf71ea28793e738$var$useFocusContainment(scopeRef, contain) {\r\n    let focusedNode = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\r\n    let raf = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\r\n    (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.useLayoutEffect)(()=>{\r\n        let scope = scopeRef.current;\r\n        if (!contain) {\r\n            // if contain was changed, then we should cancel any ongoing waits to pull focus back into containment\r\n            if (raf.current) {\r\n                cancelAnimationFrame(raf.current);\r\n                raf.current = undefined;\r\n            }\r\n            return;\r\n        }\r\n        const ownerDocument = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.getOwnerDocument)(scope ? scope[0] : undefined);\r\n        // Handle the Tab key to contain focus within the scope\r\n        let onKeyDown = (e)=>{\r\n            if (e.key !== \"Tab\" || e.altKey || e.ctrlKey || e.metaKey || !$9bf71ea28793e738$var$shouldContainFocus(scopeRef)) return;\r\n            let focusedElement = ownerDocument.activeElement;\r\n            let scope = scopeRef.current;\r\n            if (!scope || !$9bf71ea28793e738$var$isElementInScope(focusedElement, scope)) return;\r\n            let scopeRoot = $9bf71ea28793e738$var$getScopeRoot(scope);\r\n            let walker = $9bf71ea28793e738$export$2d6ec8fc375ceafa(scopeRoot, {\r\n                tabbable: true\r\n            }, scope);\r\n            if (!focusedElement) return;\r\n            walker.currentNode = focusedElement;\r\n            let nextElement = e.shiftKey ? walker.previousNode() : walker.nextNode();\r\n            if (!nextElement) {\r\n                walker.currentNode = e.shiftKey ? scope[scope.length - 1].nextElementSibling : scope[0].previousElementSibling;\r\n                nextElement = e.shiftKey ? walker.previousNode() : walker.nextNode();\r\n            }\r\n            e.preventDefault();\r\n            if (nextElement) $9bf71ea28793e738$var$focusElement(nextElement, true);\r\n        };\r\n        let onFocus = (e)=>{\r\n            // If focusing an element in a child scope of the currently active scope, the child becomes active.\r\n            // Moving out of the active scope to an ancestor is not allowed.\r\n            if ((!$9bf71ea28793e738$var$activeScope || $9bf71ea28793e738$var$isAncestorScope($9bf71ea28793e738$var$activeScope, scopeRef)) && $9bf71ea28793e738$var$isElementInScope(e.target, scopeRef.current)) {\r\n                $9bf71ea28793e738$var$activeScope = scopeRef;\r\n                focusedNode.current = e.target;\r\n            } else if ($9bf71ea28793e738$var$shouldContainFocus(scopeRef) && !$9bf71ea28793e738$var$isElementInChildScope(e.target, scopeRef)) {\r\n                // If a focus event occurs outside the active scope (e.g. user tabs from browser location bar),\r\n                // restore focus to the previously focused node or the first tabbable element in the active scope.\r\n                if (focusedNode.current) focusedNode.current.focus();\r\n                else if ($9bf71ea28793e738$var$activeScope && $9bf71ea28793e738$var$activeScope.current) $9bf71ea28793e738$var$focusFirstInScope($9bf71ea28793e738$var$activeScope.current);\r\n            } else if ($9bf71ea28793e738$var$shouldContainFocus(scopeRef)) focusedNode.current = e.target;\r\n        };\r\n        let onBlur = (e)=>{\r\n            // Firefox doesn't shift focus back to the Dialog properly without this\r\n            if (raf.current) cancelAnimationFrame(raf.current);\r\n            raf.current = requestAnimationFrame(()=>{\r\n                // Use document.activeElement instead of e.relatedTarget so we can tell if user clicked into iframe\r\n                if (ownerDocument.activeElement && $9bf71ea28793e738$var$shouldContainFocus(scopeRef) && !$9bf71ea28793e738$var$isElementInChildScope(ownerDocument.activeElement, scopeRef)) {\r\n                    $9bf71ea28793e738$var$activeScope = scopeRef;\r\n                    if (ownerDocument.body.contains(e.target)) {\r\n                        var _focusedNode_current;\r\n                        focusedNode.current = e.target;\r\n                        (_focusedNode_current = focusedNode.current) === null || _focusedNode_current === void 0 ? void 0 : _focusedNode_current.focus();\r\n                    } else if ($9bf71ea28793e738$var$activeScope.current) $9bf71ea28793e738$var$focusFirstInScope($9bf71ea28793e738$var$activeScope.current);\r\n                }\r\n            });\r\n        };\r\n        ownerDocument.addEventListener(\"keydown\", onKeyDown, false);\r\n        ownerDocument.addEventListener(\"focusin\", onFocus, false);\r\n        scope === null || scope === void 0 ? void 0 : scope.forEach((element)=>element.addEventListener(\"focusin\", onFocus, false));\r\n        scope === null || scope === void 0 ? void 0 : scope.forEach((element)=>element.addEventListener(\"focusout\", onBlur, false));\r\n        return ()=>{\r\n            ownerDocument.removeEventListener(\"keydown\", onKeyDown, false);\r\n            ownerDocument.removeEventListener(\"focusin\", onFocus, false);\r\n            scope === null || scope === void 0 ? void 0 : scope.forEach((element)=>element.removeEventListener(\"focusin\", onFocus, false));\r\n            scope === null || scope === void 0 ? void 0 : scope.forEach((element)=>element.removeEventListener(\"focusout\", onBlur, false));\r\n        };\r\n    }, [\r\n        scopeRef,\r\n        contain\r\n    ]);\r\n    // This is a useLayoutEffect so it is guaranteed to run before our async synthetic blur\r\n    // eslint-disable-next-line arrow-body-style\r\n    (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.useLayoutEffect)(()=>{\r\n        return ()=>{\r\n            if (raf.current) cancelAnimationFrame(raf.current);\r\n        };\r\n    }, [\r\n        raf\r\n    ]);\r\n}\r\nfunction $9bf71ea28793e738$var$isElementInAnyScope(element) {\r\n    return $9bf71ea28793e738$var$isElementInChildScope(element);\r\n}\r\nfunction $9bf71ea28793e738$var$isElementInScope(element, scope) {\r\n    if (!element) return false;\r\n    if (!scope) return false;\r\n    return scope.some((node)=>node.contains(element));\r\n}\r\nfunction $9bf71ea28793e738$var$isElementInChildScope(element, scope = null) {\r\n    // If the element is within a top layer element (e.g. toasts), always allow moving focus there.\r\n    if (element instanceof Element && element.closest(\"[data-react-aria-top-layer]\")) return true;\r\n    // node.contains in isElementInScope covers child scopes that are also DOM children,\r\n    // but does not cover child scopes in portals.\r\n    for (let { scopeRef: s } of $9bf71ea28793e738$export$d06fae2ee68b101e.traverse($9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode(scope))){\r\n        if (s && $9bf71ea28793e738$var$isElementInScope(element, s.current)) return true;\r\n    }\r\n    return false;\r\n}\r\nfunction $9bf71ea28793e738$export$1258395f99bf9cbf(element) {\r\n    return $9bf71ea28793e738$var$isElementInChildScope(element, $9bf71ea28793e738$var$activeScope);\r\n}\r\nfunction $9bf71ea28793e738$var$isAncestorScope(ancestor, scope) {\r\n    var _focusScopeTree_getTreeNode;\r\n    let parent = (_focusScopeTree_getTreeNode = $9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode(scope)) === null || _focusScopeTree_getTreeNode === void 0 ? void 0 : _focusScopeTree_getTreeNode.parent;\r\n    while(parent){\r\n        if (parent.scopeRef === ancestor) return true;\r\n        parent = parent.parent;\r\n    }\r\n    return false;\r\n}\r\nfunction $9bf71ea28793e738$var$focusElement(element, scroll = false) {\r\n    if (element != null && !scroll) try {\r\n        (0, $6a99195332edec8b$export$80f3e147d781571c)(element);\r\n    } catch (err) {\r\n    // ignore\r\n    }\r\n    else if (element != null) try {\r\n        element.focus();\r\n    } catch (err) {\r\n    // ignore\r\n    }\r\n}\r\nfunction $9bf71ea28793e738$var$focusFirstInScope(scope, tabbable = true) {\r\n    let sentinel = scope[0].previousElementSibling;\r\n    let scopeRoot = $9bf71ea28793e738$var$getScopeRoot(scope);\r\n    let walker = $9bf71ea28793e738$export$2d6ec8fc375ceafa(scopeRoot, {\r\n        tabbable: tabbable\r\n    }, scope);\r\n    walker.currentNode = sentinel;\r\n    let nextNode = walker.nextNode();\r\n    // If the scope does not contain a tabbable element, use the first focusable element.\r\n    if (tabbable && !nextNode) {\r\n        scopeRoot = $9bf71ea28793e738$var$getScopeRoot(scope);\r\n        walker = $9bf71ea28793e738$export$2d6ec8fc375ceafa(scopeRoot, {\r\n            tabbable: false\r\n        }, scope);\r\n        walker.currentNode = sentinel;\r\n        nextNode = walker.nextNode();\r\n    }\r\n    $9bf71ea28793e738$var$focusElement(nextNode);\r\n}\r\nfunction $9bf71ea28793e738$var$useAutoFocus(scopeRef, autoFocus) {\r\n    const autoFocusRef = (0, react__WEBPACK_IMPORTED_MODULE_0__).useRef(autoFocus);\r\n    (0, react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\r\n        if (autoFocusRef.current) {\r\n            $9bf71ea28793e738$var$activeScope = scopeRef;\r\n            const ownerDocument = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.getOwnerDocument)(scopeRef.current ? scopeRef.current[0] : undefined);\r\n            if (!$9bf71ea28793e738$var$isElementInScope(ownerDocument.activeElement, $9bf71ea28793e738$var$activeScope.current) && scopeRef.current) $9bf71ea28793e738$var$focusFirstInScope(scopeRef.current);\r\n        }\r\n        autoFocusRef.current = false;\r\n    }, [\r\n        scopeRef\r\n    ]);\r\n}\r\nfunction $9bf71ea28793e738$var$useActiveScopeTracker(scopeRef, restore, contain) {\r\n    // tracks the active scope, in case restore and contain are both false.\r\n    // if either are true, this is tracked in useRestoreFocus or useFocusContainment.\r\n    (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.useLayoutEffect)(()=>{\r\n        if (restore || contain) return;\r\n        let scope = scopeRef.current;\r\n        const ownerDocument = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.getOwnerDocument)(scope ? scope[0] : undefined);\r\n        let onFocus = (e)=>{\r\n            let target = e.target;\r\n            if ($9bf71ea28793e738$var$isElementInScope(target, scopeRef.current)) $9bf71ea28793e738$var$activeScope = scopeRef;\r\n            else if (!$9bf71ea28793e738$var$isElementInAnyScope(target)) $9bf71ea28793e738$var$activeScope = null;\r\n        };\r\n        ownerDocument.addEventListener(\"focusin\", onFocus, false);\r\n        scope === null || scope === void 0 ? void 0 : scope.forEach((element)=>element.addEventListener(\"focusin\", onFocus, false));\r\n        return ()=>{\r\n            ownerDocument.removeEventListener(\"focusin\", onFocus, false);\r\n            scope === null || scope === void 0 ? void 0 : scope.forEach((element)=>element.removeEventListener(\"focusin\", onFocus, false));\r\n        };\r\n    }, [\r\n        scopeRef,\r\n        restore,\r\n        contain\r\n    ]);\r\n}\r\nfunction $9bf71ea28793e738$var$shouldRestoreFocus(scopeRef) {\r\n    let scope = $9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode($9bf71ea28793e738$var$activeScope);\r\n    while(scope && scope.scopeRef !== scopeRef){\r\n        if (scope.nodeToRestore) return false;\r\n        scope = scope.parent;\r\n    }\r\n    return (scope === null || scope === void 0 ? void 0 : scope.scopeRef) === scopeRef;\r\n}\r\nfunction $9bf71ea28793e738$var$useRestoreFocus(scopeRef, restoreFocus, contain) {\r\n    // create a ref during render instead of useLayoutEffect so the active element is saved before a child with autoFocus=true mounts.\r\n    // eslint-disable-next-line no-restricted-globals\r\n    const nodeToRestoreRef = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)(typeof document !== \"undefined\" ? (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.getOwnerDocument)(scopeRef.current ? scopeRef.current[0] : undefined).activeElement : null);\r\n    // restoring scopes should all track if they are active regardless of contain, but contain already tracks it plus logic to contain the focus\r\n    // restoring-non-containing scopes should only care if they become active so they can perform the restore\r\n    (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.useLayoutEffect)(()=>{\r\n        let scope = scopeRef.current;\r\n        const ownerDocument = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.getOwnerDocument)(scope ? scope[0] : undefined);\r\n        if (!restoreFocus || contain) return;\r\n        let onFocus = ()=>{\r\n            // If focusing an element in a child scope of the currently active scope, the child becomes active.\r\n            // Moving out of the active scope to an ancestor is not allowed.\r\n            if ((!$9bf71ea28793e738$var$activeScope || $9bf71ea28793e738$var$isAncestorScope($9bf71ea28793e738$var$activeScope, scopeRef)) && $9bf71ea28793e738$var$isElementInScope(ownerDocument.activeElement, scopeRef.current)) $9bf71ea28793e738$var$activeScope = scopeRef;\r\n        };\r\n        ownerDocument.addEventListener(\"focusin\", onFocus, false);\r\n        scope === null || scope === void 0 ? void 0 : scope.forEach((element)=>element.addEventListener(\"focusin\", onFocus, false));\r\n        return ()=>{\r\n            ownerDocument.removeEventListener(\"focusin\", onFocus, false);\r\n            scope === null || scope === void 0 ? void 0 : scope.forEach((element)=>element.removeEventListener(\"focusin\", onFocus, false));\r\n        };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [\r\n        scopeRef,\r\n        contain\r\n    ]);\r\n    (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.useLayoutEffect)(()=>{\r\n        const ownerDocument = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.getOwnerDocument)(scopeRef.current ? scopeRef.current[0] : undefined);\r\n        if (!restoreFocus) return;\r\n        // Handle the Tab key so that tabbing out of the scope goes to the next element\r\n        // after the node that had focus when the scope mounted. This is important when\r\n        // using portals for overlays, so that focus goes to the expected element when\r\n        // tabbing out of the overlay.\r\n        let onKeyDown = (e)=>{\r\n            if (e.key !== \"Tab\" || e.altKey || e.ctrlKey || e.metaKey || !$9bf71ea28793e738$var$shouldContainFocus(scopeRef)) return;\r\n            let focusedElement = ownerDocument.activeElement;\r\n            if (!$9bf71ea28793e738$var$isElementInScope(focusedElement, scopeRef.current)) return;\r\n            let treeNode = $9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode(scopeRef);\r\n            if (!treeNode) return;\r\n            let nodeToRestore = treeNode.nodeToRestore;\r\n            // Create a DOM tree walker that matches all tabbable elements\r\n            let walker = $9bf71ea28793e738$export$2d6ec8fc375ceafa(ownerDocument.body, {\r\n                tabbable: true\r\n            });\r\n            // Find the next tabbable element after the currently focused element\r\n            walker.currentNode = focusedElement;\r\n            let nextElement = e.shiftKey ? walker.previousNode() : walker.nextNode();\r\n            if (!nodeToRestore || !ownerDocument.body.contains(nodeToRestore) || nodeToRestore === ownerDocument.body) {\r\n                nodeToRestore = undefined;\r\n                treeNode.nodeToRestore = undefined;\r\n            }\r\n            // If there is no next element, or it is outside the current scope, move focus to the\r\n            // next element after the node to restore to instead.\r\n            if ((!nextElement || !$9bf71ea28793e738$var$isElementInScope(nextElement, scopeRef.current)) && nodeToRestore) {\r\n                walker.currentNode = nodeToRestore;\r\n                // Skip over elements within the scope, in case the scope immediately follows the node to restore.\r\n                do nextElement = e.shiftKey ? walker.previousNode() : walker.nextNode();\r\n                while ($9bf71ea28793e738$var$isElementInScope(nextElement, scopeRef.current));\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                if (nextElement) $9bf71ea28793e738$var$focusElement(nextElement, true);\r\n                else // If there is no next element and the nodeToRestore isn't within a FocusScope (i.e. we are leaving the top level focus scope)\r\n                // then move focus to the body.\r\n                // Otherwise restore focus to the nodeToRestore (e.g menu within a popover -> tabbing to close the menu should move focus to menu trigger)\r\n                if (!$9bf71ea28793e738$var$isElementInAnyScope(nodeToRestore)) focusedElement.blur();\r\n                else $9bf71ea28793e738$var$focusElement(nodeToRestore, true);\r\n            }\r\n        };\r\n        if (!contain) ownerDocument.addEventListener(\"keydown\", onKeyDown, true);\r\n        return ()=>{\r\n            if (!contain) ownerDocument.removeEventListener(\"keydown\", onKeyDown, true);\r\n        };\r\n    }, [\r\n        scopeRef,\r\n        restoreFocus,\r\n        contain\r\n    ]);\r\n    // useLayoutEffect instead of useEffect so the active element is saved synchronously instead of asynchronously.\r\n    (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.useLayoutEffect)(()=>{\r\n        const ownerDocument = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.getOwnerDocument)(scopeRef.current ? scopeRef.current[0] : undefined);\r\n        if (!restoreFocus) return;\r\n        let treeNode = $9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode(scopeRef);\r\n        if (!treeNode) return;\r\n        var _nodeToRestoreRef_current;\r\n        treeNode.nodeToRestore = (_nodeToRestoreRef_current = nodeToRestoreRef.current) !== null && _nodeToRestoreRef_current !== void 0 ? _nodeToRestoreRef_current : undefined;\r\n        return ()=>{\r\n            let treeNode = $9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode(scopeRef);\r\n            if (!treeNode) return;\r\n            let nodeToRestore = treeNode.nodeToRestore;\r\n            // if we already lost focus to the body and this was the active scope, then we should attempt to restore\r\n            if (restoreFocus && nodeToRestore && // eslint-disable-next-line react-hooks/exhaustive-deps\r\n            ($9bf71ea28793e738$var$isElementInScope(ownerDocument.activeElement, scopeRef.current) || ownerDocument.activeElement === ownerDocument.body && $9bf71ea28793e738$var$shouldRestoreFocus(scopeRef))) {\r\n                // freeze the focusScopeTree so it persists after the raf, otherwise during unmount nodes are removed from it\r\n                let clonedTree = $9bf71ea28793e738$export$d06fae2ee68b101e.clone();\r\n                requestAnimationFrame(()=>{\r\n                    // Only restore focus if we've lost focus to the body, the alternative is that focus has been purposefully moved elsewhere\r\n                    if (ownerDocument.activeElement === ownerDocument.body) {\r\n                        // look up the tree starting with our scope to find a nodeToRestore still in the DOM\r\n                        let treeNode = clonedTree.getTreeNode(scopeRef);\r\n                        while(treeNode){\r\n                            if (treeNode.nodeToRestore && treeNode.nodeToRestore.isConnected) {\r\n                                $9bf71ea28793e738$var$focusElement(treeNode.nodeToRestore);\r\n                                return;\r\n                            }\r\n                            treeNode = treeNode.parent;\r\n                        }\r\n                        // If no nodeToRestore was found, focus the first element in the nearest\r\n                        // ancestor scope that is still in the tree.\r\n                        treeNode = clonedTree.getTreeNode(scopeRef);\r\n                        while(treeNode){\r\n                            if (treeNode.scopeRef && treeNode.scopeRef.current && $9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode(treeNode.scopeRef)) {\r\n                                $9bf71ea28793e738$var$focusFirstInScope(treeNode.scopeRef.current, true);\r\n                                return;\r\n                            }\r\n                            treeNode = treeNode.parent;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    }, [\r\n        scopeRef,\r\n        restoreFocus\r\n    ]);\r\n}\r\nfunction $9bf71ea28793e738$export$2d6ec8fc375ceafa(root, opts, scope) {\r\n    let selector = (opts === null || opts === void 0 ? void 0 : opts.tabbable) ? $9bf71ea28793e738$var$TABBABLE_ELEMENT_SELECTOR : $9bf71ea28793e738$var$FOCUSABLE_ELEMENT_SELECTOR;\r\n    let walker = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.getOwnerDocument)(root).createTreeWalker(root, NodeFilter.SHOW_ELEMENT, {\r\n        acceptNode (node) {\r\n            var _opts_from;\r\n            // Skip nodes inside the starting node.\r\n            if (opts === null || opts === void 0 ? void 0 : (_opts_from = opts.from) === null || _opts_from === void 0 ? void 0 : _opts_from.contains(node)) return NodeFilter.FILTER_REJECT;\r\n            if (node.matches(selector) && (0, $645f2e67b85a24c9$export$e989c0fffaa6b27a)(node) && (!scope || $9bf71ea28793e738$var$isElementInScope(node, scope)) && (!(opts === null || opts === void 0 ? void 0 : opts.accept) || opts.accept(node))) return NodeFilter.FILTER_ACCEPT;\r\n            return NodeFilter.FILTER_SKIP;\r\n        }\r\n    });\r\n    if (opts === null || opts === void 0 ? void 0 : opts.from) walker.currentNode = opts.from;\r\n    return walker;\r\n}\r\nfunction $9bf71ea28793e738$export$c5251b9e124bf29(ref, defaultOptions = {}) {\r\n    return {\r\n        focusNext (opts = {}) {\r\n            let root = ref.current;\r\n            if (!root) return null;\r\n            let { from: from, tabbable: tabbable = defaultOptions.tabbable, wrap: wrap = defaultOptions.wrap, accept: accept = defaultOptions.accept } = opts;\r\n            let node = from || (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.getOwnerDocument)(root).activeElement;\r\n            let walker = $9bf71ea28793e738$export$2d6ec8fc375ceafa(root, {\r\n                tabbable: tabbable,\r\n                accept: accept\r\n            });\r\n            if (root.contains(node)) walker.currentNode = node;\r\n            let nextNode = walker.nextNode();\r\n            if (!nextNode && wrap) {\r\n                walker.currentNode = root;\r\n                nextNode = walker.nextNode();\r\n            }\r\n            if (nextNode) $9bf71ea28793e738$var$focusElement(nextNode, true);\r\n            return nextNode;\r\n        },\r\n        focusPrevious (opts = defaultOptions) {\r\n            let root = ref.current;\r\n            if (!root) return null;\r\n            let { from: from, tabbable: tabbable = defaultOptions.tabbable, wrap: wrap = defaultOptions.wrap, accept: accept = defaultOptions.accept } = opts;\r\n            let node = from || (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.getOwnerDocument)(root).activeElement;\r\n            let walker = $9bf71ea28793e738$export$2d6ec8fc375ceafa(root, {\r\n                tabbable: tabbable,\r\n                accept: accept\r\n            });\r\n            if (root.contains(node)) walker.currentNode = node;\r\n            else {\r\n                let next = $9bf71ea28793e738$var$last(walker);\r\n                if (next) $9bf71ea28793e738$var$focusElement(next, true);\r\n                return next !== null && next !== void 0 ? next : null;\r\n            }\r\n            let previousNode = walker.previousNode();\r\n            if (!previousNode && wrap) {\r\n                walker.currentNode = root;\r\n                let lastNode = $9bf71ea28793e738$var$last(walker);\r\n                if (!lastNode) // couldn't wrap\r\n                return null;\r\n                previousNode = lastNode;\r\n            }\r\n            if (previousNode) $9bf71ea28793e738$var$focusElement(previousNode, true);\r\n            return previousNode !== null && previousNode !== void 0 ? previousNode : null;\r\n        },\r\n        focusFirst (opts = defaultOptions) {\r\n            let root = ref.current;\r\n            if (!root) return null;\r\n            let { tabbable: tabbable = defaultOptions.tabbable, accept: accept = defaultOptions.accept } = opts;\r\n            let walker = $9bf71ea28793e738$export$2d6ec8fc375ceafa(root, {\r\n                tabbable: tabbable,\r\n                accept: accept\r\n            });\r\n            let nextNode = walker.nextNode();\r\n            if (nextNode) $9bf71ea28793e738$var$focusElement(nextNode, true);\r\n            return nextNode;\r\n        },\r\n        focusLast (opts = defaultOptions) {\r\n            let root = ref.current;\r\n            if (!root) return null;\r\n            let { tabbable: tabbable = defaultOptions.tabbable, accept: accept = defaultOptions.accept } = opts;\r\n            let walker = $9bf71ea28793e738$export$2d6ec8fc375ceafa(root, {\r\n                tabbable: tabbable,\r\n                accept: accept\r\n            });\r\n            let next = $9bf71ea28793e738$var$last(walker);\r\n            if (next) $9bf71ea28793e738$var$focusElement(next, true);\r\n            return next !== null && next !== void 0 ? next : null;\r\n        }\r\n    };\r\n}\r\nfunction $9bf71ea28793e738$var$last(walker) {\r\n    let next = undefined;\r\n    let last;\r\n    do {\r\n        last = walker.lastChild();\r\n        if (last) next = last;\r\n    }while (last);\r\n    return next;\r\n}\r\nclass $9bf71ea28793e738$var$Tree {\r\n    get size() {\r\n        return this.fastMap.size;\r\n    }\r\n    getTreeNode(data) {\r\n        return this.fastMap.get(data);\r\n    }\r\n    addTreeNode(scopeRef, parent, nodeToRestore) {\r\n        let parentNode = this.fastMap.get(parent !== null && parent !== void 0 ? parent : null);\r\n        if (!parentNode) return;\r\n        let node = new $9bf71ea28793e738$var$TreeNode({\r\n            scopeRef: scopeRef\r\n        });\r\n        parentNode.addChild(node);\r\n        node.parent = parentNode;\r\n        this.fastMap.set(scopeRef, node);\r\n        if (nodeToRestore) node.nodeToRestore = nodeToRestore;\r\n    }\r\n    addNode(node) {\r\n        this.fastMap.set(node.scopeRef, node);\r\n    }\r\n    removeTreeNode(scopeRef) {\r\n        // never remove the root\r\n        if (scopeRef === null) return;\r\n        let node = this.fastMap.get(scopeRef);\r\n        if (!node) return;\r\n        let parentNode = node.parent;\r\n        // when we remove a scope, check if any sibling scopes are trying to restore focus to something inside the scope we're removing\r\n        // if we are, then replace the siblings restore with the restore from the scope we're removing\r\n        for (let current of this.traverse())if (current !== node && node.nodeToRestore && current.nodeToRestore && node.scopeRef && node.scopeRef.current && $9bf71ea28793e738$var$isElementInScope(current.nodeToRestore, node.scopeRef.current)) current.nodeToRestore = node.nodeToRestore;\r\n        let children = node.children;\r\n        if (parentNode) {\r\n            parentNode.removeChild(node);\r\n            if (children.size > 0) children.forEach((child)=>parentNode && parentNode.addChild(child));\r\n        }\r\n        this.fastMap.delete(node.scopeRef);\r\n    }\r\n    // Pre Order Depth First\r\n    *traverse(node = this.root) {\r\n        if (node.scopeRef != null) yield node;\r\n        if (node.children.size > 0) for (let child of node.children)yield* this.traverse(child);\r\n    }\r\n    clone() {\r\n        var _node_parent;\r\n        let newTree = new $9bf71ea28793e738$var$Tree();\r\n        var _node_parent_scopeRef;\r\n        for (let node of this.traverse())newTree.addTreeNode(node.scopeRef, (_node_parent_scopeRef = (_node_parent = node.parent) === null || _node_parent === void 0 ? void 0 : _node_parent.scopeRef) !== null && _node_parent_scopeRef !== void 0 ? _node_parent_scopeRef : null, node.nodeToRestore);\r\n        return newTree;\r\n    }\r\n    constructor(){\r\n        this.fastMap = new Map();\r\n        this.root = new $9bf71ea28793e738$var$TreeNode({\r\n            scopeRef: null\r\n        });\r\n        this.fastMap.set(null, this.root);\r\n    }\r\n}\r\nclass $9bf71ea28793e738$var$TreeNode {\r\n    addChild(node) {\r\n        this.children.add(node);\r\n        node.parent = this;\r\n    }\r\n    removeChild(node) {\r\n        this.children.delete(node);\r\n        node.parent = undefined;\r\n    }\r\n    constructor(props){\r\n        this.children = new Set();\r\n        this.contain = false;\r\n        this.scopeRef = props.scopeRef;\r\n    }\r\n}\r\nlet $9bf71ea28793e738$export$d06fae2ee68b101e = new $9bf71ea28793e738$var$Tree();\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n\r\n\r\n\r\n\r\nfunction $f7dceffc5ad7768b$export$4e328f61c538687f(props = {}) {\r\n    let { autoFocus: autoFocus = false, isTextInput: isTextInput, within: within } = props;\r\n    let state = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)({\r\n        isFocused: false,\r\n        isFocusVisible: autoFocus || (0, _react_aria_interactions__WEBPACK_IMPORTED_MODULE_3__.isFocusVisible)()\r\n    });\r\n    let [isFocused, setFocused] = (0, react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\r\n    let [isFocusVisibleState, setFocusVisible] = (0, react__WEBPACK_IMPORTED_MODULE_0__.useState)(()=>state.current.isFocused && state.current.isFocusVisible);\r\n    let updateState = (0, react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>setFocusVisible(state.current.isFocused && state.current.isFocusVisible), []);\r\n    let onFocusChange = (0, react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((isFocused)=>{\r\n        state.current.isFocused = isFocused;\r\n        setFocused(isFocused);\r\n        updateState();\r\n    }, [\r\n        updateState\r\n    ]);\r\n    (0, _react_aria_interactions__WEBPACK_IMPORTED_MODULE_3__.useFocusVisibleListener)((isFocusVisible)=>{\r\n        state.current.isFocusVisible = isFocusVisible;\r\n        updateState();\r\n    }, [], {\r\n        isTextInput: isTextInput\r\n    });\r\n    let { focusProps: focusProps } = (0, _react_aria_interactions__WEBPACK_IMPORTED_MODULE_3__.useFocus)({\r\n        isDisabled: within,\r\n        onFocusChange: onFocusChange\r\n    });\r\n    let { focusWithinProps: focusWithinProps } = (0, _react_aria_interactions__WEBPACK_IMPORTED_MODULE_3__.useFocusWithin)({\r\n        isDisabled: !within,\r\n        onFocusWithinChange: onFocusChange\r\n    });\r\n    return {\r\n        isFocused: isFocused,\r\n        isFocusVisible: isFocusVisibleState,\r\n        focusProps: within ? focusWithinProps : focusProps\r\n    };\r\n}\r\n\r\n\r\nfunction $907718708eab68af$export$1a38b4ad7f578e1d(props) {\r\n    let { children: children, focusClass: focusClass, focusRingClass: focusRingClass } = props;\r\n    let { isFocused: isFocused, isFocusVisible: isFocusVisible, focusProps: focusProps } = (0, $f7dceffc5ad7768b$export$4e328f61c538687f)(props);\r\n    let child = (0, react__WEBPACK_IMPORTED_MODULE_0__).Children.only(children);\r\n    return /*#__PURE__*/ (0, react__WEBPACK_IMPORTED_MODULE_0__).cloneElement(child, (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.mergeProps)(child.props, {\r\n        ...focusProps,\r\n        className: (0, clsx__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\r\n            [focusClass || \"\"]: isFocused,\r\n            [focusRingClass || \"\"]: isFocusVisible\r\n        })\r\n    }));\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n\r\n\r\n\r\nlet $e6afbd83fe6ebbd2$var$FocusableContext = /*#__PURE__*/ (0, react__WEBPACK_IMPORTED_MODULE_0__).createContext(null);\r\nfunction $e6afbd83fe6ebbd2$var$useFocusableContext(ref) {\r\n    let context = (0, react__WEBPACK_IMPORTED_MODULE_0__.useContext)($e6afbd83fe6ebbd2$var$FocusableContext) || {};\r\n    (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.useSyncRef)(context, ref);\r\n    // eslint-disable-next-line\r\n    let { ref: _, ...otherProps } = context;\r\n    return otherProps;\r\n}\r\n/**\r\n * Provides DOM props to the nearest focusable child.\r\n */ function $e6afbd83fe6ebbd2$var$FocusableProvider(props, ref) {\r\n    let { children: children, ...otherProps } = props;\r\n    let objRef = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.useObjectRef)(ref);\r\n    let context = {\r\n        ...otherProps,\r\n        ref: objRef\r\n    };\r\n    return /*#__PURE__*/ (0, react__WEBPACK_IMPORTED_MODULE_0__).createElement($e6afbd83fe6ebbd2$var$FocusableContext.Provider, {\r\n        value: context\r\n    }, children);\r\n}\r\nlet $e6afbd83fe6ebbd2$export$13f3202a3e5ddd5 = /*#__PURE__*/ (0, react__WEBPACK_IMPORTED_MODULE_0__).forwardRef($e6afbd83fe6ebbd2$var$FocusableProvider);\r\nfunction $e6afbd83fe6ebbd2$export$4c014de7c8940b4c(props, domRef) {\r\n    let { focusProps: focusProps } = (0, _react_aria_interactions__WEBPACK_IMPORTED_MODULE_3__.useFocus)(props);\r\n    let { keyboardProps: keyboardProps } = (0, _react_aria_interactions__WEBPACK_IMPORTED_MODULE_3__.useKeyboard)(props);\r\n    let interactions = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.mergeProps)(focusProps, keyboardProps);\r\n    let domProps = $e6afbd83fe6ebbd2$var$useFocusableContext(domRef);\r\n    let interactionProps = props.isDisabled ? {} : domProps;\r\n    let autoFocusRef = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)(props.autoFocus);\r\n    (0, react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\r\n        if (autoFocusRef.current && domRef.current) (0, $6a99195332edec8b$export$80f3e147d781571c)(domRef.current);\r\n        autoFocusRef.current = false;\r\n    }, [\r\n        domRef\r\n    ]);\r\n    return {\r\n        focusableProps: (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.mergeProps)({\r\n            ...interactions,\r\n            tabIndex: props.excludeFromTabOrder && !props.isDisabled ? -1 : undefined\r\n        }, interactionProps)\r\n    };\r\n}\r\n\r\n\r\n\r\n\r\n/*\r\n * Copyright 2022 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n\r\n\r\nfunction $83013635b024ae3d$export$eac1895992b9f3d6(ref, options) {\r\n    let isDisabled = options === null || options === void 0 ? void 0 : options.isDisabled;\r\n    let [hasTabbableChild, setHasTabbableChild] = (0, react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\r\n    (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.useLayoutEffect)(()=>{\r\n        if ((ref === null || ref === void 0 ? void 0 : ref.current) && !isDisabled) {\r\n            let update = ()=>{\r\n                if (ref.current) {\r\n                    let walker = (0, $9bf71ea28793e738$export$2d6ec8fc375ceafa)(ref.current, {\r\n                        tabbable: true\r\n                    });\r\n                    setHasTabbableChild(!!walker.nextNode());\r\n                }\r\n            };\r\n            update();\r\n            // Update when new elements are inserted, or the tabIndex/disabled attribute updates.\r\n            let observer = new MutationObserver(update);\r\n            observer.observe(ref.current, {\r\n                subtree: true,\r\n                childList: true,\r\n                attributes: true,\r\n                attributeFilter: [\r\n                    \"tabIndex\",\r\n                    \"disabled\"\r\n                ]\r\n            });\r\n            return ()=>{\r\n                // Disconnect mutation observer when a React update occurs on the top-level component\r\n                // so we update synchronously after re-rendering. Otherwise React will emit act warnings\r\n                // in tests since mutation observers fire asynchronously. The mutation observer is necessary\r\n                // so we also update if a child component re-renders and adds/removes something tabbable.\r\n                observer.disconnect();\r\n            };\r\n        }\r\n    });\r\n    return isDisabled ? false : hasTabbableChild;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n//# sourceMappingURL=module.js.map\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvZm9jdXMvZGlzdC9pbXBvcnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFpWDtBQUMxSjtBQUN1RjtBQUMvUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsK0RBQXVCO0FBQ3JELFlBQVksNEVBQTZCO0FBQ3pDO0FBQ0EsWUFBWSxpRUFBeUI7QUFDckM7QUFDQSwrRkFBK0Ysb0VBQTRCO0FBQzNILFNBQVM7QUFDVCxNQUFNLFNBQVMsb0VBQTRCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDZEQUFxQjtBQUNsRDtBQUNBLFVBQVUsMkNBQTJDO0FBQ3JEO0FBQ0E7QUFDQSxnQkFBZ0IscUNBQXFDO0FBQ3JELGNBQWMsMkRBQTJEO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELGtDQUFZO0FBQ3pFO0FBQ0E7QUFDQSxVQUFVLHlGQUF5RjtBQUNuRyx1QkFBdUIseUNBQWE7QUFDcEMscUJBQXFCLHlDQUFhO0FBQ2xDLHVCQUF1Qix5Q0FBYTtBQUNwQyxVQUFVLHlCQUF5QixNQUFNLDZDQUFpQjtBQUMxRDtBQUNBLG1CQUFtQiwwQ0FBYztBQUNqQztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsUUFBUSw4REFBc0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFFBQVEsOERBQXNCO0FBQzlCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFFBQVEsOERBQXNCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw0Q0FBZ0I7QUFDeEIsa0NBQWtDLCtEQUF1QjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsOERBQXNCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDJCQUEyQiwwQ0FBYztBQUN6QyxvQkFBb0IsMENBQWM7QUFDbEM7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsa0NBQVk7QUFDekM7QUFDQSxLQUFLLG9CQUFvQixrQ0FBWTtBQUNyQztBQUNBO0FBQ0E7QUFDQSxLQUFLLCtCQUErQixrQ0FBWTtBQUNoRDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDZDQUFpQjtBQUMvQztBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQSxrQkFBa0IsNkRBQTZEO0FBQy9FLG1DQUFtQywrREFBdUI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGdDQUFnQztBQUNoQztBQUNBLGtCQUFrQiw2REFBNkQ7QUFDL0UsbUNBQW1DLCtEQUF1QjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsNkJBQTZCO0FBQzdCO0FBQ0Esa0JBQWtCLHFDQUFxQztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCw0QkFBNEI7QUFDNUI7QUFDQSxrQkFBa0IscUNBQXFDO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHlDQUFhO0FBQ3ZDLGtCQUFrQix5Q0FBYTtBQUMvQixRQUFRLDhEQUFzQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsK0RBQXVCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw4REFBc0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxjQUFjO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGtDQUFZO0FBQ3pDLFFBQVEsNENBQWdCO0FBQ3hCO0FBQ0E7QUFDQSxzQ0FBc0MsK0RBQXVCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDhEQUFzQjtBQUM5QjtBQUNBO0FBQ0Esa0NBQWtDLCtEQUF1QjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLHlDQUFhLHdDQUF3QywrREFBdUI7QUFDN0c7QUFDQTtBQUNBLFFBQVEsOERBQXNCO0FBQzlCO0FBQ0Esa0NBQWtDLCtEQUF1QjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxRQUFRLDhEQUFzQjtBQUM5QixrQ0FBa0MsK0RBQXVCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw4REFBc0I7QUFDOUIsa0NBQWtDLCtEQUF1QjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiwrREFBdUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsMEVBQTBFO0FBQzFFO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQSxrQkFBa0IscUlBQXFJO0FBQ3ZKLG1DQUFtQywrREFBdUI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHFJQUFxSTtBQUN2SixtQ0FBbUMsK0RBQXVCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsdUZBQXVGO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVGQUF1RjtBQUN6RztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZEO0FBQzdELFVBQVUseUVBQXlFO0FBQ25GLG9CQUFvQix5Q0FBYTtBQUNqQztBQUNBLHlDQUF5QyxvRUFBcUI7QUFDOUQsS0FBSztBQUNMLHNDQUFzQywyQ0FBZTtBQUNyRCxxREFBcUQsMkNBQWU7QUFDcEUsMEJBQTBCLDhDQUFrQjtBQUM1Qyw0QkFBNEIsOENBQWtCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsUUFBUSw2RUFBOEI7QUFDdEM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTCxVQUFVLHlCQUF5QixNQUFNLDhEQUFlO0FBQ3hEO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsVUFBVSxxQ0FBcUMsTUFBTSxvRUFBcUI7QUFDMUU7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDZFQUE2RTtBQUN2RixVQUFVLCtFQUErRTtBQUN6RixvQkFBb0Isa0NBQVk7QUFDaEMsNkJBQTZCLGtDQUFZLDBCQUEwQix5REFBaUI7QUFDcEY7QUFDQSx1QkFBdUIsNENBQVc7QUFDbEM7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCxrQ0FBWTtBQUMzRTtBQUNBLHNCQUFzQiw2Q0FBaUI7QUFDdkMsUUFBUSx5REFBaUI7QUFDekI7QUFDQSxVQUFVLHdCQUF3QjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxvQ0FBb0M7QUFDOUMscUJBQXFCLDJEQUFtQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixrQ0FBWTtBQUN6QztBQUNBLEtBQUs7QUFDTDtBQUNBLGlFQUFpRSxrQ0FBWTtBQUM3RTtBQUNBLFVBQVUseUJBQXlCLE1BQU0sOERBQWU7QUFDeEQsVUFBVSwrQkFBK0IsTUFBTSxpRUFBa0I7QUFDakUsMkJBQTJCLHlEQUFpQjtBQUM1QztBQUNBLGlEQUFpRDtBQUNqRCwyQkFBMkIseUNBQWE7QUFDeEMsUUFBUSw0Q0FBZ0I7QUFDeEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIseURBQWlCO0FBQzdDO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELDJDQUFlO0FBQ3JFLFFBQVEsOERBQXNCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUN5ckI7QUFDenJCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnV0cmktc21hcnQvLi9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvZm9jdXMvZGlzdC9pbXBvcnQubWpzPzk4YjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHt1c2VMYXlvdXRFZmZlY3QgYXMgJDZuZkZDJHVzZUxheW91dEVmZmVjdCwgZ2V0T3duZXJEb2N1bWVudCBhcyAkNm5mRkMkZ2V0T3duZXJEb2N1bWVudCwgcnVuQWZ0ZXJUcmFuc2l0aW9uIGFzICQ2bmZGQyRydW5BZnRlclRyYW5zaXRpb24sIGZvY3VzV2l0aG91dFNjcm9sbGluZyBhcyAkNm5mRkMkZm9jdXNXaXRob3V0U2Nyb2xsaW5nLCBnZXRPd25lcldpbmRvdyBhcyAkNm5mRkMkZ2V0T3duZXJXaW5kb3csIG1lcmdlUHJvcHMgYXMgJDZuZkZDJG1lcmdlUHJvcHMsIHVzZVN5bmNSZWYgYXMgJDZuZkZDJHVzZVN5bmNSZWYsIHVzZU9iamVjdFJlZiBhcyAkNm5mRkMkdXNlT2JqZWN0UmVmfSBmcm9tIFwiQHJlYWN0LWFyaWEvdXRpbHNcIjtcclxuaW1wb3J0ICQ2bmZGQyRyZWFjdCwge3VzZVJlZiBhcyAkNm5mRkMkdXNlUmVmLCB1c2VDb250ZXh0IGFzICQ2bmZGQyR1c2VDb250ZXh0LCB1c2VNZW1vIGFzICQ2bmZGQyR1c2VNZW1vLCB1c2VFZmZlY3QgYXMgJDZuZkZDJHVzZUVmZmVjdCwgdXNlU3RhdGUgYXMgJDZuZkZDJHVzZVN0YXRlLCB1c2VDYWxsYmFjayBhcyAkNm5mRkMkdXNlQ2FsbGJhY2t9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQge2dldEludGVyYWN0aW9uTW9kYWxpdHkgYXMgJDZuZkZDJGdldEludGVyYWN0aW9uTW9kYWxpdHksIGlzRm9jdXNWaXNpYmxlIGFzICQ2bmZGQyRpc0ZvY3VzVmlzaWJsZSwgdXNlRm9jdXNWaXNpYmxlTGlzdGVuZXIgYXMgJDZuZkZDJHVzZUZvY3VzVmlzaWJsZUxpc3RlbmVyLCB1c2VGb2N1cyBhcyAkNm5mRkMkdXNlRm9jdXMsIHVzZUZvY3VzV2l0aGluIGFzICQ2bmZGQyR1c2VGb2N1c1dpdGhpbiwgdXNlS2V5Ym9hcmQgYXMgJDZuZkZDJHVzZUtleWJvYXJkfSBmcm9tIFwiQHJlYWN0LWFyaWEvaW50ZXJhY3Rpb25zXCI7XHJcbmltcG9ydCAkNm5mRkMkY2xzeCBmcm9tIFwiY2xzeFwiO1xyXG5cclxuLypcclxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gLypcclxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gLypcclxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICdMaWNlbnNlJyk7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICdBUyBJUycgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyBcclxuXHJcbmZ1bmN0aW9uICQ2YTk5MTk1MzMyZWRlYzhiJGV4cG9ydCQ4MGYzZTE0N2Q3ODE1NzFjKGVsZW1lbnQpIHtcclxuICAgIC8vIElmIHRoZSB1c2VyIGlzIGludGVyYWN0aW5nIHdpdGggYSB2aXJ0dWFsIGN1cnNvciwgZS5nLiBzY3JlZW4gcmVhZGVyLCB0aGVuXHJcbiAgICAvLyB3YWl0IHVudGlsIGFmdGVyIGFueSBhbmltYXRlZCB0cmFuc2l0aW9ucyB0aGF0IGFyZSBjdXJyZW50bHkgb2NjdXJyaW5nIG9uXHJcbiAgICAvLyB0aGUgcGFnZSBiZWZvcmUgc2hpZnRpbmcgZm9jdXMuIFRoaXMgYXZvaWRzIGlzc3VlcyB3aXRoIFZvaWNlT3ZlciBvbiBpT1NcclxuICAgIC8vIGNhdXNpbmcgdGhlIHBhZ2UgdG8gc2Nyb2xsIHdoZW4gbW92aW5nIGZvY3VzIGlmIHRoZSBlbGVtZW50IGlzIHRyYW5zaXRpb25pbmdcclxuICAgIC8vIGZyb20gb2ZmIHRoZSBzY3JlZW4uXHJcbiAgICBjb25zdCBvd25lckRvY3VtZW50ID0gKDAsICQ2bmZGQyRnZXRPd25lckRvY3VtZW50KShlbGVtZW50KTtcclxuICAgIGlmICgoMCwgJDZuZkZDJGdldEludGVyYWN0aW9uTW9kYWxpdHkpKCkgPT09IFwidmlydHVhbFwiKSB7XHJcbiAgICAgICAgbGV0IGxhc3RGb2N1c2VkRWxlbWVudCA9IG93bmVyRG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcclxuICAgICAgICAoMCwgJDZuZkZDJHJ1bkFmdGVyVHJhbnNpdGlvbikoKCk9PntcclxuICAgICAgICAgICAgLy8gSWYgZm9jdXMgZGlkIG5vdCBtb3ZlIGFuZCB0aGUgZWxlbWVudCBpcyBzdGlsbCBpbiB0aGUgZG9jdW1lbnQsIGZvY3VzIGl0LlxyXG4gICAgICAgICAgICBpZiAob3duZXJEb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBsYXN0Rm9jdXNlZEVsZW1lbnQgJiYgZWxlbWVudC5pc0Nvbm5lY3RlZCkgKDAsICQ2bmZGQyRmb2N1c1dpdGhvdXRTY3JvbGxpbmcpKGVsZW1lbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlICgwLCAkNm5mRkMkZm9jdXNXaXRob3V0U2Nyb2xsaW5nKShlbGVtZW50KTtcclxufVxyXG5cclxuXHJcblxyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAyMSBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxyXG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyBcclxuZnVuY3Rpb24gJDY0NWYyZTY3Yjg1YTI0YzkkdmFyJGlzU3R5bGVWaXNpYmxlKGVsZW1lbnQpIHtcclxuICAgIGNvbnN0IHdpbmRvd09iamVjdCA9ICgwLCAkNm5mRkMkZ2V0T3duZXJXaW5kb3cpKGVsZW1lbnQpO1xyXG4gICAgaWYgKCEoZWxlbWVudCBpbnN0YW5jZW9mIHdpbmRvd09iamVjdC5IVE1MRWxlbWVudCkgJiYgIShlbGVtZW50IGluc3RhbmNlb2Ygd2luZG93T2JqZWN0LlNWR0VsZW1lbnQpKSByZXR1cm4gZmFsc2U7XHJcbiAgICBsZXQgeyBkaXNwbGF5OiBkaXNwbGF5LCB2aXNpYmlsaXR5OiB2aXNpYmlsaXR5IH0gPSBlbGVtZW50LnN0eWxlO1xyXG4gICAgbGV0IGlzVmlzaWJsZSA9IGRpc3BsYXkgIT09IFwibm9uZVwiICYmIHZpc2liaWxpdHkgIT09IFwiaGlkZGVuXCIgJiYgdmlzaWJpbGl0eSAhPT0gXCJjb2xsYXBzZVwiO1xyXG4gICAgaWYgKGlzVmlzaWJsZSkge1xyXG4gICAgICAgIGNvbnN0IHsgZ2V0Q29tcHV0ZWRTdHlsZTogZ2V0Q29tcHV0ZWRTdHlsZSB9ID0gZWxlbWVudC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xyXG4gICAgICAgIGxldCB7IGRpc3BsYXk6IGNvbXB1dGVkRGlzcGxheSwgdmlzaWJpbGl0eTogY29tcHV0ZWRWaXNpYmlsaXR5IH0gPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xyXG4gICAgICAgIGlzVmlzaWJsZSA9IGNvbXB1dGVkRGlzcGxheSAhPT0gXCJub25lXCIgJiYgY29tcHV0ZWRWaXNpYmlsaXR5ICE9PSBcImhpZGRlblwiICYmIGNvbXB1dGVkVmlzaWJpbGl0eSAhPT0gXCJjb2xsYXBzZVwiO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGlzVmlzaWJsZTtcclxufVxyXG5mdW5jdGlvbiAkNjQ1ZjJlNjdiODVhMjRjOSR2YXIkaXNBdHRyaWJ1dGVWaXNpYmxlKGVsZW1lbnQsIGNoaWxkRWxlbWVudCkge1xyXG4gICAgcmV0dXJuICFlbGVtZW50Lmhhc0F0dHJpYnV0ZShcImhpZGRlblwiKSAmJiAoZWxlbWVudC5ub2RlTmFtZSA9PT0gXCJERVRBSUxTXCIgJiYgY2hpbGRFbGVtZW50ICYmIGNoaWxkRWxlbWVudC5ub2RlTmFtZSAhPT0gXCJTVU1NQVJZXCIgPyBlbGVtZW50Lmhhc0F0dHJpYnV0ZShcIm9wZW5cIikgOiB0cnVlKTtcclxufVxyXG5mdW5jdGlvbiAkNjQ1ZjJlNjdiODVhMjRjOSRleHBvcnQkZTk4OWMwZmZmYWE2YjI3YShlbGVtZW50LCBjaGlsZEVsZW1lbnQpIHtcclxuICAgIHJldHVybiBlbGVtZW50Lm5vZGVOYW1lICE9PSBcIiNjb21tZW50XCIgJiYgJDY0NWYyZTY3Yjg1YTI0YzkkdmFyJGlzU3R5bGVWaXNpYmxlKGVsZW1lbnQpICYmICQ2NDVmMmU2N2I4NWEyNGM5JHZhciRpc0F0dHJpYnV0ZVZpc2libGUoZWxlbWVudCwgY2hpbGRFbGVtZW50KSAmJiAoIWVsZW1lbnQucGFyZW50RWxlbWVudCB8fCAkNjQ1ZjJlNjdiODVhMjRjOSRleHBvcnQkZTk4OWMwZmZmYWE2YjI3YShlbGVtZW50LnBhcmVudEVsZW1lbnQsIGVsZW1lbnQpKTtcclxufVxyXG5cclxuXHJcblxyXG5jb25zdCAkOWJmNzFlYTI4NzkzZTczOCR2YXIkRm9jdXNDb250ZXh0ID0gLyojX19QVVJFX18qLyAoMCwgJDZuZkZDJHJlYWN0KS5jcmVhdGVDb250ZXh0KG51bGwpO1xyXG5sZXQgJDliZjcxZWEyODc5M2U3MzgkdmFyJGFjdGl2ZVNjb3BlID0gbnVsbDtcclxuZnVuY3Rpb24gJDliZjcxZWEyODc5M2U3MzgkZXhwb3J0JDIwZTQwMjg5NjQxZmJiYjYocHJvcHMpIHtcclxuICAgIGxldCB7IGNoaWxkcmVuOiBjaGlsZHJlbiwgY29udGFpbjogY29udGFpbiwgcmVzdG9yZUZvY3VzOiByZXN0b3JlRm9jdXMsIGF1dG9Gb2N1czogYXV0b0ZvY3VzIH0gPSBwcm9wcztcclxuICAgIGxldCBzdGFydFJlZiA9ICgwLCAkNm5mRkMkdXNlUmVmKShudWxsKTtcclxuICAgIGxldCBlbmRSZWYgPSAoMCwgJDZuZkZDJHVzZVJlZikobnVsbCk7XHJcbiAgICBsZXQgc2NvcGVSZWYgPSAoMCwgJDZuZkZDJHVzZVJlZikoW10pO1xyXG4gICAgbGV0IHsgcGFyZW50Tm9kZTogcGFyZW50Tm9kZSB9ID0gKDAsICQ2bmZGQyR1c2VDb250ZXh0KSgkOWJmNzFlYTI4NzkzZTczOCR2YXIkRm9jdXNDb250ZXh0KSB8fCB7fTtcclxuICAgIC8vIENyZWF0ZSBhIHRyZWUgbm9kZSBoZXJlIHNvIHdlIGNhbiBhZGQgY2hpbGRyZW4gdG8gaXQgZXZlbiBiZWZvcmUgaXQgaXMgYWRkZWQgdG8gdGhlIHRyZWUuXHJcbiAgICBsZXQgbm9kZSA9ICgwLCAkNm5mRkMkdXNlTWVtbykoKCk9Pm5ldyAkOWJmNzFlYTI4NzkzZTczOCR2YXIkVHJlZU5vZGUoe1xyXG4gICAgICAgICAgICBzY29wZVJlZjogc2NvcGVSZWZcclxuICAgICAgICB9KSwgW1xyXG4gICAgICAgIHNjb3BlUmVmXHJcbiAgICBdKTtcclxuICAgICgwLCAkNm5mRkMkdXNlTGF5b3V0RWZmZWN0KSgoKT0+e1xyXG4gICAgICAgIC8vIElmIGEgbmV3IHNjb3BlIG1vdW50cyBvdXRzaWRlIHRoZSBhY3RpdmUgc2NvcGUsIChlLmcuIERpYWxvZ0NvbnRhaW5lciBsYXVuY2hlZCBmcm9tIGEgbWVudSksXHJcbiAgICAgICAgLy8gdXNlIHRoZSBhY3RpdmUgc2NvcGUgYXMgdGhlIHBhcmVudCBpbnN0ZWFkIG9mIHRoZSBwYXJlbnQgZnJvbSBjb250ZXh0LiBMYXlvdXQgZWZmZWN0cyBydW4gYm90dG9tXHJcbiAgICAgICAgLy8gdXAsIHNvIGlmIHRoZSBwYXJlbnQgaXMgbm90IHlldCBhZGRlZCB0byB0aGUgdHJlZSwgZG9uJ3QgZG8gdGhpcy4gT25seSB0aGUgb3V0ZXItbW9zdCBGb2N1c1Njb3BlXHJcbiAgICAgICAgLy8gdGhhdCBpcyBiZWluZyBhZGRlZCBzaG91bGQgZ2V0IHRoZSBhY3RpdmVTY29wZSBhcyBpdHMgcGFyZW50LlxyXG4gICAgICAgIGxldCBwYXJlbnQgPSBwYXJlbnROb2RlIHx8ICQ5YmY3MWVhMjg3OTNlNzM4JGV4cG9ydCRkMDZmYWUyZWU2OGIxMDFlLnJvb3Q7XHJcbiAgICAgICAgaWYgKCQ5YmY3MWVhMjg3OTNlNzM4JGV4cG9ydCRkMDZmYWUyZWU2OGIxMDFlLmdldFRyZWVOb2RlKHBhcmVudC5zY29wZVJlZikgJiYgJDliZjcxZWEyODc5M2U3MzgkdmFyJGFjdGl2ZVNjb3BlICYmICEkOWJmNzFlYTI4NzkzZTczOCR2YXIkaXNBbmNlc3RvclNjb3BlKCQ5YmY3MWVhMjg3OTNlNzM4JHZhciRhY3RpdmVTY29wZSwgcGFyZW50LnNjb3BlUmVmKSkge1xyXG4gICAgICAgICAgICBsZXQgYWN0aXZlTm9kZSA9ICQ5YmY3MWVhMjg3OTNlNzM4JGV4cG9ydCRkMDZmYWUyZWU2OGIxMDFlLmdldFRyZWVOb2RlKCQ5YmY3MWVhMjg3OTNlNzM4JHZhciRhY3RpdmVTY29wZSk7XHJcbiAgICAgICAgICAgIGlmIChhY3RpdmVOb2RlKSBwYXJlbnQgPSBhY3RpdmVOb2RlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBZGQgdGhlIG5vZGUgdG8gdGhlIHBhcmVudCwgYW5kIHRvIHRoZSB0cmVlLlxyXG4gICAgICAgIHBhcmVudC5hZGRDaGlsZChub2RlKTtcclxuICAgICAgICAkOWJmNzFlYTI4NzkzZTczOCRleHBvcnQkZDA2ZmFlMmVlNjhiMTAxZS5hZGROb2RlKG5vZGUpO1xyXG4gICAgfSwgW1xyXG4gICAgICAgIG5vZGUsXHJcbiAgICAgICAgcGFyZW50Tm9kZVxyXG4gICAgXSk7XHJcbiAgICAoMCwgJDZuZkZDJHVzZUxheW91dEVmZmVjdCkoKCk9PntcclxuICAgICAgICBsZXQgbm9kZSA9ICQ5YmY3MWVhMjg3OTNlNzM4JGV4cG9ydCRkMDZmYWUyZWU2OGIxMDFlLmdldFRyZWVOb2RlKHNjb3BlUmVmKTtcclxuICAgICAgICBpZiAobm9kZSkgbm9kZS5jb250YWluID0gISFjb250YWluO1xyXG4gICAgfSwgW1xyXG4gICAgICAgIGNvbnRhaW5cclxuICAgIF0pO1xyXG4gICAgKDAsICQ2bmZGQyR1c2VMYXlvdXRFZmZlY3QpKCgpPT57XHJcbiAgICAgICAgdmFyIF9zdGFydFJlZl9jdXJyZW50O1xyXG4gICAgICAgIC8vIEZpbmQgYWxsIHJlbmRlcmVkIG5vZGVzIGJldHdlZW4gdGhlIHNlbnRpbmVscyBhbmQgYWRkIHRoZW0gdG8gdGhlIHNjb3BlLlxyXG4gICAgICAgIGxldCBub2RlID0gKF9zdGFydFJlZl9jdXJyZW50ID0gc3RhcnRSZWYuY3VycmVudCkgPT09IG51bGwgfHwgX3N0YXJ0UmVmX2N1cnJlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zdGFydFJlZl9jdXJyZW50Lm5leHRTaWJsaW5nO1xyXG4gICAgICAgIGxldCBub2RlcyA9IFtdO1xyXG4gICAgICAgIHdoaWxlKG5vZGUgJiYgbm9kZSAhPT0gZW5kUmVmLmN1cnJlbnQpe1xyXG4gICAgICAgICAgICBub2Rlcy5wdXNoKG5vZGUpO1xyXG4gICAgICAgICAgICBub2RlID0gbm9kZS5uZXh0U2libGluZztcclxuICAgICAgICB9XHJcbiAgICAgICAgc2NvcGVSZWYuY3VycmVudCA9IG5vZGVzO1xyXG4gICAgfSwgW1xyXG4gICAgICAgIGNoaWxkcmVuXHJcbiAgICBdKTtcclxuICAgICQ5YmY3MWVhMjg3OTNlNzM4JHZhciR1c2VBY3RpdmVTY29wZVRyYWNrZXIoc2NvcGVSZWYsIHJlc3RvcmVGb2N1cywgY29udGFpbik7XHJcbiAgICAkOWJmNzFlYTI4NzkzZTczOCR2YXIkdXNlRm9jdXNDb250YWlubWVudChzY29wZVJlZiwgY29udGFpbik7XHJcbiAgICAkOWJmNzFlYTI4NzkzZTczOCR2YXIkdXNlUmVzdG9yZUZvY3VzKHNjb3BlUmVmLCByZXN0b3JlRm9jdXMsIGNvbnRhaW4pO1xyXG4gICAgJDliZjcxZWEyODc5M2U3MzgkdmFyJHVzZUF1dG9Gb2N1cyhzY29wZVJlZiwgYXV0b0ZvY3VzKTtcclxuICAgIC8vIFRoaXMgbmVlZHMgdG8gYmUgYW4gZWZmZWN0IHNvIHRoYXQgYWN0aXZlU2NvcGUgaXMgdXBkYXRlZCBhZnRlciB0aGUgRm9jdXNTY29wZSB0cmVlIGlzIGNvbXBsZXRlLlxyXG4gICAgLy8gSXQgY2Fubm90IGJlIGEgdXNlTGF5b3V0RWZmZWN0IGJlY2F1c2UgdGhlIHBhcmVudCBvZiB0aGlzIG5vZGUgaGFzbid0IGJlZW4gYXR0YWNoZWQgaW4gdGhlIHRyZWUgeWV0LlxyXG4gICAgKDAsICQ2bmZGQyR1c2VFZmZlY3QpKCgpPT57XHJcbiAgICAgICAgY29uc3QgYWN0aXZlRWxlbWVudCA9ICgwLCAkNm5mRkMkZ2V0T3duZXJEb2N1bWVudCkoc2NvcGVSZWYuY3VycmVudCA/IHNjb3BlUmVmLmN1cnJlbnRbMF0gOiB1bmRlZmluZWQpLmFjdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgbGV0IHNjb3BlID0gbnVsbDtcclxuICAgICAgICBpZiAoJDliZjcxZWEyODc5M2U3MzgkdmFyJGlzRWxlbWVudEluU2NvcGUoYWN0aXZlRWxlbWVudCwgc2NvcGVSZWYuY3VycmVudCkpIHtcclxuICAgICAgICAgICAgLy8gV2UgbmVlZCB0byB0cmF2ZXJzZSB0aGUgZm9jdXNTY29wZSB0cmVlIGFuZCBmaW5kIHRoZSBib3R0b20gbW9zdCBzY29wZSB0aGF0XHJcbiAgICAgICAgICAgIC8vIGNvbnRhaW5zIHRoZSBhY3RpdmUgZWxlbWVudCBhbmQgc2V0IHRoYXQgYXMgdGhlIGFjdGl2ZVNjb3BlLlxyXG4gICAgICAgICAgICBmb3IgKGxldCBub2RlIG9mICQ5YmY3MWVhMjg3OTNlNzM4JGV4cG9ydCRkMDZmYWUyZWU2OGIxMDFlLnRyYXZlcnNlKCkpaWYgKG5vZGUuc2NvcGVSZWYgJiYgJDliZjcxZWEyODc5M2U3MzgkdmFyJGlzRWxlbWVudEluU2NvcGUoYWN0aXZlRWxlbWVudCwgbm9kZS5zY29wZVJlZi5jdXJyZW50KSkgc2NvcGUgPSBub2RlO1xyXG4gICAgICAgICAgICBpZiAoc2NvcGUgPT09ICQ5YmY3MWVhMjg3OTNlNzM4JGV4cG9ydCRkMDZmYWUyZWU2OGIxMDFlLmdldFRyZWVOb2RlKHNjb3BlUmVmKSkgJDliZjcxZWEyODc5M2U3MzgkdmFyJGFjdGl2ZVNjb3BlID0gc2NvcGUuc2NvcGVSZWY7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgW1xyXG4gICAgICAgIHNjb3BlUmVmXHJcbiAgICBdKTtcclxuICAgIC8vIFRoaXMgbGF5b3V0IGVmZmVjdCBjbGVhbnVwIGlzIHNvIHRoYXQgdGhlIHRyZWUgbm9kZSBpcyByZW1vdmVkIHN5bmNocm9ub3VzbHkgd2l0aCByZWFjdCBiZWZvcmUgdGhlIFJBRlxyXG4gICAgLy8gaW4gdXNlUmVzdG9yZUZvY3VzIGNsZWFudXAgcnVucy5cclxuICAgICgwLCAkNm5mRkMkdXNlTGF5b3V0RWZmZWN0KSgoKT0+e1xyXG4gICAgICAgIHJldHVybiAoKT0+e1xyXG4gICAgICAgICAgICB2YXIgX2ZvY3VzU2NvcGVUcmVlX2dldFRyZWVOb2RlX3BhcmVudCwgX2ZvY3VzU2NvcGVUcmVlX2dldFRyZWVOb2RlO1xyXG4gICAgICAgICAgICB2YXIgX2ZvY3VzU2NvcGVUcmVlX2dldFRyZWVOb2RlX3BhcmVudF9zY29wZVJlZjtcclxuICAgICAgICAgICAgLy8gU2NvcGUgbWF5IGhhdmUgYmVlbiByZS1wYXJlbnRlZC5cclxuICAgICAgICAgICAgbGV0IHBhcmVudFNjb3BlID0gKF9mb2N1c1Njb3BlVHJlZV9nZXRUcmVlTm9kZV9wYXJlbnRfc2NvcGVSZWYgPSAoX2ZvY3VzU2NvcGVUcmVlX2dldFRyZWVOb2RlID0gJDliZjcxZWEyODc5M2U3MzgkZXhwb3J0JGQwNmZhZTJlZTY4YjEwMWUuZ2V0VHJlZU5vZGUoc2NvcGVSZWYpKSA9PT0gbnVsbCB8fCBfZm9jdXNTY29wZVRyZWVfZ2V0VHJlZU5vZGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZm9jdXNTY29wZVRyZWVfZ2V0VHJlZU5vZGVfcGFyZW50ID0gX2ZvY3VzU2NvcGVUcmVlX2dldFRyZWVOb2RlLnBhcmVudCkgPT09IG51bGwgfHwgX2ZvY3VzU2NvcGVUcmVlX2dldFRyZWVOb2RlX3BhcmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2ZvY3VzU2NvcGVUcmVlX2dldFRyZWVOb2RlX3BhcmVudC5zY29wZVJlZikgIT09IG51bGwgJiYgX2ZvY3VzU2NvcGVUcmVlX2dldFRyZWVOb2RlX3BhcmVudF9zY29wZVJlZiAhPT0gdm9pZCAwID8gX2ZvY3VzU2NvcGVUcmVlX2dldFRyZWVOb2RlX3BhcmVudF9zY29wZVJlZiA6IG51bGw7XHJcbiAgICAgICAgICAgIGlmICgoc2NvcGVSZWYgPT09ICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRhY3RpdmVTY29wZSB8fCAkOWJmNzFlYTI4NzkzZTczOCR2YXIkaXNBbmNlc3RvclNjb3BlKHNjb3BlUmVmLCAkOWJmNzFlYTI4NzkzZTczOCR2YXIkYWN0aXZlU2NvcGUpKSAmJiAoIXBhcmVudFNjb3BlIHx8ICQ5YmY3MWVhMjg3OTNlNzM4JGV4cG9ydCRkMDZmYWUyZWU2OGIxMDFlLmdldFRyZWVOb2RlKHBhcmVudFNjb3BlKSkpICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRhY3RpdmVTY29wZSA9IHBhcmVudFNjb3BlO1xyXG4gICAgICAgICAgICAkOWJmNzFlYTI4NzkzZTczOCRleHBvcnQkZDA2ZmFlMmVlNjhiMTAxZS5yZW1vdmVUcmVlTm9kZShzY29wZVJlZik7XHJcbiAgICAgICAgfTtcclxuICAgIH0sIFtcclxuICAgICAgICBzY29wZVJlZlxyXG4gICAgXSk7XHJcbiAgICBsZXQgZm9jdXNNYW5hZ2VyID0gKDAsICQ2bmZGQyR1c2VNZW1vKSgoKT0+JDliZjcxZWEyODc5M2U3MzgkdmFyJGNyZWF0ZUZvY3VzTWFuYWdlckZvclNjb3BlKHNjb3BlUmVmKSwgW10pO1xyXG4gICAgbGV0IHZhbHVlID0gKDAsICQ2bmZGQyR1c2VNZW1vKSgoKT0+KHtcclxuICAgICAgICAgICAgZm9jdXNNYW5hZ2VyOiBmb2N1c01hbmFnZXIsXHJcbiAgICAgICAgICAgIHBhcmVudE5vZGU6IG5vZGVcclxuICAgICAgICB9KSwgW1xyXG4gICAgICAgIG5vZGUsXHJcbiAgICAgICAgZm9jdXNNYW5hZ2VyXHJcbiAgICBdKTtcclxuICAgIHJldHVybiAvKiNfX1BVUkVfXyovICgwLCAkNm5mRkMkcmVhY3QpLmNyZWF0ZUVsZW1lbnQoJDliZjcxZWEyODc5M2U3MzgkdmFyJEZvY3VzQ29udGV4dC5Qcm92aWRlciwge1xyXG4gICAgICAgIHZhbHVlOiB2YWx1ZVxyXG4gICAgfSwgLyojX19QVVJFX18qLyAoMCwgJDZuZkZDJHJlYWN0KS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XHJcbiAgICAgICAgXCJkYXRhLWZvY3VzLXNjb3BlLXN0YXJ0XCI6IHRydWUsXHJcbiAgICAgICAgaGlkZGVuOiB0cnVlLFxyXG4gICAgICAgIHJlZjogc3RhcnRSZWZcclxuICAgIH0pLCBjaGlsZHJlbiwgLyojX19QVVJFX18qLyAoMCwgJDZuZkZDJHJlYWN0KS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XHJcbiAgICAgICAgXCJkYXRhLWZvY3VzLXNjb3BlLWVuZFwiOiB0cnVlLFxyXG4gICAgICAgIGhpZGRlbjogdHJ1ZSxcclxuICAgICAgICByZWY6IGVuZFJlZlxyXG4gICAgfSkpO1xyXG59XHJcbmZ1bmN0aW9uICQ5YmY3MWVhMjg3OTNlNzM4JGV4cG9ydCQxMGM1MTY5NzU1Y2U3YmQ3KCkge1xyXG4gICAgdmFyIF91c2VDb250ZXh0O1xyXG4gICAgcmV0dXJuIChfdXNlQ29udGV4dCA9ICgwLCAkNm5mRkMkdXNlQ29udGV4dCkoJDliZjcxZWEyODc5M2U3MzgkdmFyJEZvY3VzQ29udGV4dCkpID09PSBudWxsIHx8IF91c2VDb250ZXh0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdXNlQ29udGV4dC5mb2N1c01hbmFnZXI7XHJcbn1cclxuZnVuY3Rpb24gJDliZjcxZWEyODc5M2U3MzgkdmFyJGNyZWF0ZUZvY3VzTWFuYWdlckZvclNjb3BlKHNjb3BlUmVmKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGZvY3VzTmV4dCAob3B0cyA9IHt9KSB7XHJcbiAgICAgICAgICAgIGxldCBzY29wZSA9IHNjb3BlUmVmLmN1cnJlbnQ7XHJcbiAgICAgICAgICAgIGxldCB7IGZyb206IGZyb20sIHRhYmJhYmxlOiB0YWJiYWJsZSwgd3JhcDogd3JhcCwgYWNjZXB0OiBhY2NlcHQgfSA9IG9wdHM7XHJcbiAgICAgICAgICAgIGxldCBub2RlID0gZnJvbSB8fCAoMCwgJDZuZkZDJGdldE93bmVyRG9jdW1lbnQpKHNjb3BlWzBdKS5hY3RpdmVFbGVtZW50O1xyXG4gICAgICAgICAgICBsZXQgc2VudGluZWwgPSBzY29wZVswXS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xyXG4gICAgICAgICAgICBsZXQgc2NvcGVSb290ID0gJDliZjcxZWEyODc5M2U3MzgkdmFyJGdldFNjb3BlUm9vdChzY29wZSk7XHJcbiAgICAgICAgICAgIGxldCB3YWxrZXIgPSAkOWJmNzFlYTI4NzkzZTczOCRleHBvcnQkMmQ2ZWM4ZmMzNzVjZWFmYShzY29wZVJvb3QsIHtcclxuICAgICAgICAgICAgICAgIHRhYmJhYmxlOiB0YWJiYWJsZSxcclxuICAgICAgICAgICAgICAgIGFjY2VwdDogYWNjZXB0XHJcbiAgICAgICAgICAgIH0sIHNjb3BlKTtcclxuICAgICAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gJDliZjcxZWEyODc5M2U3MzgkdmFyJGlzRWxlbWVudEluU2NvcGUobm9kZSwgc2NvcGUpID8gbm9kZSA6IHNlbnRpbmVsO1xyXG4gICAgICAgICAgICBsZXQgbmV4dE5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKTtcclxuICAgICAgICAgICAgaWYgKCFuZXh0Tm9kZSAmJiB3cmFwKSB7XHJcbiAgICAgICAgICAgICAgICB3YWxrZXIuY3VycmVudE5vZGUgPSBzZW50aW5lbDtcclxuICAgICAgICAgICAgICAgIG5leHROb2RlID0gd2Fsa2VyLm5leHROb2RlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG5leHROb2RlKSAkOWJmNzFlYTI4NzkzZTczOCR2YXIkZm9jdXNFbGVtZW50KG5leHROb2RlLCB0cnVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5leHROb2RlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZm9jdXNQcmV2aW91cyAob3B0cyA9IHt9KSB7XHJcbiAgICAgICAgICAgIGxldCBzY29wZSA9IHNjb3BlUmVmLmN1cnJlbnQ7XHJcbiAgICAgICAgICAgIGxldCB7IGZyb206IGZyb20sIHRhYmJhYmxlOiB0YWJiYWJsZSwgd3JhcDogd3JhcCwgYWNjZXB0OiBhY2NlcHQgfSA9IG9wdHM7XHJcbiAgICAgICAgICAgIGxldCBub2RlID0gZnJvbSB8fCAoMCwgJDZuZkZDJGdldE93bmVyRG9jdW1lbnQpKHNjb3BlWzBdKS5hY3RpdmVFbGVtZW50O1xyXG4gICAgICAgICAgICBsZXQgc2VudGluZWwgPSBzY29wZVtzY29wZS5sZW5ndGggLSAxXS5uZXh0RWxlbWVudFNpYmxpbmc7XHJcbiAgICAgICAgICAgIGxldCBzY29wZVJvb3QgPSAkOWJmNzFlYTI4NzkzZTczOCR2YXIkZ2V0U2NvcGVSb290KHNjb3BlKTtcclxuICAgICAgICAgICAgbGV0IHdhbGtlciA9ICQ5YmY3MWVhMjg3OTNlNzM4JGV4cG9ydCQyZDZlYzhmYzM3NWNlYWZhKHNjb3BlUm9vdCwge1xyXG4gICAgICAgICAgICAgICAgdGFiYmFibGU6IHRhYmJhYmxlLFxyXG4gICAgICAgICAgICAgICAgYWNjZXB0OiBhY2NlcHRcclxuICAgICAgICAgICAgfSwgc2NvcGUpO1xyXG4gICAgICAgICAgICB3YWxrZXIuY3VycmVudE5vZGUgPSAkOWJmNzFlYTI4NzkzZTczOCR2YXIkaXNFbGVtZW50SW5TY29wZShub2RlLCBzY29wZSkgPyBub2RlIDogc2VudGluZWw7XHJcbiAgICAgICAgICAgIGxldCBwcmV2aW91c05vZGUgPSB3YWxrZXIucHJldmlvdXNOb2RlKCk7XHJcbiAgICAgICAgICAgIGlmICghcHJldmlvdXNOb2RlICYmIHdyYXApIHtcclxuICAgICAgICAgICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IHNlbnRpbmVsO1xyXG4gICAgICAgICAgICAgICAgcHJldmlvdXNOb2RlID0gd2Fsa2VyLnByZXZpb3VzTm9kZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwcmV2aW91c05vZGUpICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRmb2N1c0VsZW1lbnQocHJldmlvdXNOb2RlLCB0cnVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHByZXZpb3VzTm9kZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGZvY3VzRmlyc3QgKG9wdHMgPSB7fSkge1xyXG4gICAgICAgICAgICBsZXQgc2NvcGUgPSBzY29wZVJlZi5jdXJyZW50O1xyXG4gICAgICAgICAgICBsZXQgeyB0YWJiYWJsZTogdGFiYmFibGUsIGFjY2VwdDogYWNjZXB0IH0gPSBvcHRzO1xyXG4gICAgICAgICAgICBsZXQgc2NvcGVSb290ID0gJDliZjcxZWEyODc5M2U3MzgkdmFyJGdldFNjb3BlUm9vdChzY29wZSk7XHJcbiAgICAgICAgICAgIGxldCB3YWxrZXIgPSAkOWJmNzFlYTI4NzkzZTczOCRleHBvcnQkMmQ2ZWM4ZmMzNzVjZWFmYShzY29wZVJvb3QsIHtcclxuICAgICAgICAgICAgICAgIHRhYmJhYmxlOiB0YWJiYWJsZSxcclxuICAgICAgICAgICAgICAgIGFjY2VwdDogYWNjZXB0XHJcbiAgICAgICAgICAgIH0sIHNjb3BlKTtcclxuICAgICAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gc2NvcGVbMF0ucHJldmlvdXNFbGVtZW50U2libGluZztcclxuICAgICAgICAgICAgbGV0IG5leHROb2RlID0gd2Fsa2VyLm5leHROb2RlKCk7XHJcbiAgICAgICAgICAgIGlmIChuZXh0Tm9kZSkgJDliZjcxZWEyODc5M2U3MzgkdmFyJGZvY3VzRWxlbWVudChuZXh0Tm9kZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXh0Tm9kZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGZvY3VzTGFzdCAob3B0cyA9IHt9KSB7XHJcbiAgICAgICAgICAgIGxldCBzY29wZSA9IHNjb3BlUmVmLmN1cnJlbnQ7XHJcbiAgICAgICAgICAgIGxldCB7IHRhYmJhYmxlOiB0YWJiYWJsZSwgYWNjZXB0OiBhY2NlcHQgfSA9IG9wdHM7XHJcbiAgICAgICAgICAgIGxldCBzY29wZVJvb3QgPSAkOWJmNzFlYTI4NzkzZTczOCR2YXIkZ2V0U2NvcGVSb290KHNjb3BlKTtcclxuICAgICAgICAgICAgbGV0IHdhbGtlciA9ICQ5YmY3MWVhMjg3OTNlNzM4JGV4cG9ydCQyZDZlYzhmYzM3NWNlYWZhKHNjb3BlUm9vdCwge1xyXG4gICAgICAgICAgICAgICAgdGFiYmFibGU6IHRhYmJhYmxlLFxyXG4gICAgICAgICAgICAgICAgYWNjZXB0OiBhY2NlcHRcclxuICAgICAgICAgICAgfSwgc2NvcGUpO1xyXG4gICAgICAgICAgICB3YWxrZXIuY3VycmVudE5vZGUgPSBzY29wZVtzY29wZS5sZW5ndGggLSAxXS5uZXh0RWxlbWVudFNpYmxpbmc7XHJcbiAgICAgICAgICAgIGxldCBwcmV2aW91c05vZGUgPSB3YWxrZXIucHJldmlvdXNOb2RlKCk7XHJcbiAgICAgICAgICAgIGlmIChwcmV2aW91c05vZGUpICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRmb2N1c0VsZW1lbnQocHJldmlvdXNOb2RlLCB0cnVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHByZXZpb3VzTm9kZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcbmNvbnN0ICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRmb2N1c2FibGVFbGVtZW50cyA9IFtcclxuICAgIFwiaW5wdXQ6bm90KFtkaXNhYmxlZF0pOm5vdChbdHlwZT1oaWRkZW5dKVwiLFxyXG4gICAgXCJzZWxlY3Q6bm90KFtkaXNhYmxlZF0pXCIsXHJcbiAgICBcInRleHRhcmVhOm5vdChbZGlzYWJsZWRdKVwiLFxyXG4gICAgXCJidXR0b246bm90KFtkaXNhYmxlZF0pXCIsXHJcbiAgICBcImFbaHJlZl1cIixcclxuICAgIFwiYXJlYVtocmVmXVwiLFxyXG4gICAgXCJzdW1tYXJ5XCIsXHJcbiAgICBcImlmcmFtZVwiLFxyXG4gICAgXCJvYmplY3RcIixcclxuICAgIFwiZW1iZWRcIixcclxuICAgIFwiYXVkaW9bY29udHJvbHNdXCIsXHJcbiAgICBcInZpZGVvW2NvbnRyb2xzXVwiLFxyXG4gICAgXCJbY29udGVudGVkaXRhYmxlXVwiXHJcbl07XHJcbmNvbnN0ICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRGT0NVU0FCTEVfRUxFTUVOVF9TRUxFQ1RPUiA9ICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRmb2N1c2FibGVFbGVtZW50cy5qb2luKFwiOm5vdChbaGlkZGVuXSksXCIpICsgXCIsW3RhYmluZGV4XTpub3QoW2Rpc2FibGVkXSk6bm90KFtoaWRkZW5dKVwiO1xyXG4kOWJmNzFlYTI4NzkzZTczOCR2YXIkZm9jdXNhYmxlRWxlbWVudHMucHVzaCgnW3RhYmluZGV4XTpub3QoW3RhYmluZGV4PVwiLTFcIl0pOm5vdChbZGlzYWJsZWRdKScpO1xyXG5jb25zdCAkOWJmNzFlYTI4NzkzZTczOCR2YXIkVEFCQkFCTEVfRUxFTUVOVF9TRUxFQ1RPUiA9ICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRmb2N1c2FibGVFbGVtZW50cy5qb2luKCc6bm90KFtoaWRkZW5dKTpub3QoW3RhYmluZGV4PVwiLTFcIl0pLCcpO1xyXG5mdW5jdGlvbiAkOWJmNzFlYTI4NzkzZTczOCR2YXIkZ2V0U2NvcGVSb290KHNjb3BlKSB7XHJcbiAgICByZXR1cm4gc2NvcGVbMF0ucGFyZW50RWxlbWVudDtcclxufVxyXG5mdW5jdGlvbiAkOWJmNzFlYTI4NzkzZTczOCR2YXIkc2hvdWxkQ29udGFpbkZvY3VzKHNjb3BlUmVmKSB7XHJcbiAgICBsZXQgc2NvcGUgPSAkOWJmNzFlYTI4NzkzZTczOCRleHBvcnQkZDA2ZmFlMmVlNjhiMTAxZS5nZXRUcmVlTm9kZSgkOWJmNzFlYTI4NzkzZTczOCR2YXIkYWN0aXZlU2NvcGUpO1xyXG4gICAgd2hpbGUoc2NvcGUgJiYgc2NvcGUuc2NvcGVSZWYgIT09IHNjb3BlUmVmKXtcclxuICAgICAgICBpZiAoc2NvcGUuY29udGFpbikgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHNjb3BlID0gc2NvcGUucGFyZW50O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gJDliZjcxZWEyODc5M2U3MzgkdmFyJHVzZUZvY3VzQ29udGFpbm1lbnQoc2NvcGVSZWYsIGNvbnRhaW4pIHtcclxuICAgIGxldCBmb2N1c2VkTm9kZSA9ICgwLCAkNm5mRkMkdXNlUmVmKSgpO1xyXG4gICAgbGV0IHJhZiA9ICgwLCAkNm5mRkMkdXNlUmVmKSgpO1xyXG4gICAgKDAsICQ2bmZGQyR1c2VMYXlvdXRFZmZlY3QpKCgpPT57XHJcbiAgICAgICAgbGV0IHNjb3BlID0gc2NvcGVSZWYuY3VycmVudDtcclxuICAgICAgICBpZiAoIWNvbnRhaW4pIHtcclxuICAgICAgICAgICAgLy8gaWYgY29udGFpbiB3YXMgY2hhbmdlZCwgdGhlbiB3ZSBzaG91bGQgY2FuY2VsIGFueSBvbmdvaW5nIHdhaXRzIHRvIHB1bGwgZm9jdXMgYmFjayBpbnRvIGNvbnRhaW5tZW50XHJcbiAgICAgICAgICAgIGlmIChyYWYuY3VycmVudCkge1xyXG4gICAgICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUocmFmLmN1cnJlbnQpO1xyXG4gICAgICAgICAgICAgICAgcmFmLmN1cnJlbnQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBvd25lckRvY3VtZW50ID0gKDAsICQ2bmZGQyRnZXRPd25lckRvY3VtZW50KShzY29wZSA/IHNjb3BlWzBdIDogdW5kZWZpbmVkKTtcclxuICAgICAgICAvLyBIYW5kbGUgdGhlIFRhYiBrZXkgdG8gY29udGFpbiBmb2N1cyB3aXRoaW4gdGhlIHNjb3BlXHJcbiAgICAgICAgbGV0IG9uS2V5RG93biA9IChlKT0+e1xyXG4gICAgICAgICAgICBpZiAoZS5rZXkgIT09IFwiVGFiXCIgfHwgZS5hbHRLZXkgfHwgZS5jdHJsS2V5IHx8IGUubWV0YUtleSB8fCAhJDliZjcxZWEyODc5M2U3MzgkdmFyJHNob3VsZENvbnRhaW5Gb2N1cyhzY29wZVJlZikpIHJldHVybjtcclxuICAgICAgICAgICAgbGV0IGZvY3VzZWRFbGVtZW50ID0gb3duZXJEb2N1bWVudC5hY3RpdmVFbGVtZW50O1xyXG4gICAgICAgICAgICBsZXQgc2NvcGUgPSBzY29wZVJlZi5jdXJyZW50O1xyXG4gICAgICAgICAgICBpZiAoIXNjb3BlIHx8ICEkOWJmNzFlYTI4NzkzZTczOCR2YXIkaXNFbGVtZW50SW5TY29wZShmb2N1c2VkRWxlbWVudCwgc2NvcGUpKSByZXR1cm47XHJcbiAgICAgICAgICAgIGxldCBzY29wZVJvb3QgPSAkOWJmNzFlYTI4NzkzZTczOCR2YXIkZ2V0U2NvcGVSb290KHNjb3BlKTtcclxuICAgICAgICAgICAgbGV0IHdhbGtlciA9ICQ5YmY3MWVhMjg3OTNlNzM4JGV4cG9ydCQyZDZlYzhmYzM3NWNlYWZhKHNjb3BlUm9vdCwge1xyXG4gICAgICAgICAgICAgICAgdGFiYmFibGU6IHRydWVcclxuICAgICAgICAgICAgfSwgc2NvcGUpO1xyXG4gICAgICAgICAgICBpZiAoIWZvY3VzZWRFbGVtZW50KSByZXR1cm47XHJcbiAgICAgICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IGZvY3VzZWRFbGVtZW50O1xyXG4gICAgICAgICAgICBsZXQgbmV4dEVsZW1lbnQgPSBlLnNoaWZ0S2V5ID8gd2Fsa2VyLnByZXZpb3VzTm9kZSgpIDogd2Fsa2VyLm5leHROb2RlKCk7XHJcbiAgICAgICAgICAgIGlmICghbmV4dEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IGUuc2hpZnRLZXkgPyBzY29wZVtzY29wZS5sZW5ndGggLSAxXS5uZXh0RWxlbWVudFNpYmxpbmcgOiBzY29wZVswXS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xyXG4gICAgICAgICAgICAgICAgbmV4dEVsZW1lbnQgPSBlLnNoaWZ0S2V5ID8gd2Fsa2VyLnByZXZpb3VzTm9kZSgpIDogd2Fsa2VyLm5leHROb2RlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAobmV4dEVsZW1lbnQpICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRmb2N1c0VsZW1lbnQobmV4dEVsZW1lbnQsIHRydWUpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgbGV0IG9uRm9jdXMgPSAoZSk9PntcclxuICAgICAgICAgICAgLy8gSWYgZm9jdXNpbmcgYW4gZWxlbWVudCBpbiBhIGNoaWxkIHNjb3BlIG9mIHRoZSBjdXJyZW50bHkgYWN0aXZlIHNjb3BlLCB0aGUgY2hpbGQgYmVjb21lcyBhY3RpdmUuXHJcbiAgICAgICAgICAgIC8vIE1vdmluZyBvdXQgb2YgdGhlIGFjdGl2ZSBzY29wZSB0byBhbiBhbmNlc3RvciBpcyBub3QgYWxsb3dlZC5cclxuICAgICAgICAgICAgaWYgKCghJDliZjcxZWEyODc5M2U3MzgkdmFyJGFjdGl2ZVNjb3BlIHx8ICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRpc0FuY2VzdG9yU2NvcGUoJDliZjcxZWEyODc5M2U3MzgkdmFyJGFjdGl2ZVNjb3BlLCBzY29wZVJlZikpICYmICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRpc0VsZW1lbnRJblNjb3BlKGUudGFyZ2V0LCBzY29wZVJlZi5jdXJyZW50KSkge1xyXG4gICAgICAgICAgICAgICAgJDliZjcxZWEyODc5M2U3MzgkdmFyJGFjdGl2ZVNjb3BlID0gc2NvcGVSZWY7XHJcbiAgICAgICAgICAgICAgICBmb2N1c2VkTm9kZS5jdXJyZW50ID0gZS50YXJnZXQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJDliZjcxZWEyODc5M2U3MzgkdmFyJHNob3VsZENvbnRhaW5Gb2N1cyhzY29wZVJlZikgJiYgISQ5YmY3MWVhMjg3OTNlNzM4JHZhciRpc0VsZW1lbnRJbkNoaWxkU2NvcGUoZS50YXJnZXQsIHNjb3BlUmVmKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgYSBmb2N1cyBldmVudCBvY2N1cnMgb3V0c2lkZSB0aGUgYWN0aXZlIHNjb3BlIChlLmcuIHVzZXIgdGFicyBmcm9tIGJyb3dzZXIgbG9jYXRpb24gYmFyKSxcclxuICAgICAgICAgICAgICAgIC8vIHJlc3RvcmUgZm9jdXMgdG8gdGhlIHByZXZpb3VzbHkgZm9jdXNlZCBub2RlIG9yIHRoZSBmaXJzdCB0YWJiYWJsZSBlbGVtZW50IGluIHRoZSBhY3RpdmUgc2NvcGUuXHJcbiAgICAgICAgICAgICAgICBpZiAoZm9jdXNlZE5vZGUuY3VycmVudCkgZm9jdXNlZE5vZGUuY3VycmVudC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoJDliZjcxZWEyODc5M2U3MzgkdmFyJGFjdGl2ZVNjb3BlICYmICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRhY3RpdmVTY29wZS5jdXJyZW50KSAkOWJmNzFlYTI4NzkzZTczOCR2YXIkZm9jdXNGaXJzdEluU2NvcGUoJDliZjcxZWEyODc5M2U3MzgkdmFyJGFjdGl2ZVNjb3BlLmN1cnJlbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCQ5YmY3MWVhMjg3OTNlNzM4JHZhciRzaG91bGRDb250YWluRm9jdXMoc2NvcGVSZWYpKSBmb2N1c2VkTm9kZS5jdXJyZW50ID0gZS50YXJnZXQ7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBsZXQgb25CbHVyID0gKGUpPT57XHJcbiAgICAgICAgICAgIC8vIEZpcmVmb3ggZG9lc24ndCBzaGlmdCBmb2N1cyBiYWNrIHRvIHRoZSBEaWFsb2cgcHJvcGVybHkgd2l0aG91dCB0aGlzXHJcbiAgICAgICAgICAgIGlmIChyYWYuY3VycmVudCkgY2FuY2VsQW5pbWF0aW9uRnJhbWUocmFmLmN1cnJlbnQpO1xyXG4gICAgICAgICAgICByYWYuY3VycmVudCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKT0+e1xyXG4gICAgICAgICAgICAgICAgLy8gVXNlIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgaW5zdGVhZCBvZiBlLnJlbGF0ZWRUYXJnZXQgc28gd2UgY2FuIHRlbGwgaWYgdXNlciBjbGlja2VkIGludG8gaWZyYW1lXHJcbiAgICAgICAgICAgICAgICBpZiAob3duZXJEb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRzaG91bGRDb250YWluRm9jdXMoc2NvcGVSZWYpICYmICEkOWJmNzFlYTI4NzkzZTczOCR2YXIkaXNFbGVtZW50SW5DaGlsZFNjb3BlKG93bmVyRG9jdW1lbnQuYWN0aXZlRWxlbWVudCwgc2NvcGVSZWYpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJDliZjcxZWEyODc5M2U3MzgkdmFyJGFjdGl2ZVNjb3BlID0gc2NvcGVSZWY7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG93bmVyRG9jdW1lbnQuYm9keS5jb250YWlucyhlLnRhcmdldCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9mb2N1c2VkTm9kZV9jdXJyZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb2N1c2VkTm9kZS5jdXJyZW50ID0gZS50YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChfZm9jdXNlZE5vZGVfY3VycmVudCA9IGZvY3VzZWROb2RlLmN1cnJlbnQpID09PSBudWxsIHx8IF9mb2N1c2VkTm9kZV9jdXJyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZm9jdXNlZE5vZGVfY3VycmVudC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJDliZjcxZWEyODc5M2U3MzgkdmFyJGFjdGl2ZVNjb3BlLmN1cnJlbnQpICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRmb2N1c0ZpcnN0SW5TY29wZSgkOWJmNzFlYTI4NzkzZTczOCR2YXIkYWN0aXZlU2NvcGUuY3VycmVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgb3duZXJEb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBvbktleURvd24sIGZhbHNlKTtcclxuICAgICAgICBvd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c2luXCIsIG9uRm9jdXMsIGZhbHNlKTtcclxuICAgICAgICBzY29wZSA9PT0gbnVsbCB8fCBzY29wZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2NvcGUuZm9yRWFjaCgoZWxlbWVudCk9PmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzaW5cIiwgb25Gb2N1cywgZmFsc2UpKTtcclxuICAgICAgICBzY29wZSA9PT0gbnVsbCB8fCBzY29wZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2NvcGUuZm9yRWFjaCgoZWxlbWVudCk9PmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3Vzb3V0XCIsIG9uQmx1ciwgZmFsc2UpKTtcclxuICAgICAgICByZXR1cm4gKCk9PntcclxuICAgICAgICAgICAgb3duZXJEb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBvbktleURvd24sIGZhbHNlKTtcclxuICAgICAgICAgICAgb3duZXJEb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZm9jdXNpblwiLCBvbkZvY3VzLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIHNjb3BlID09PSBudWxsIHx8IHNjb3BlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzY29wZS5mb3JFYWNoKChlbGVtZW50KT0+ZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZm9jdXNpblwiLCBvbkZvY3VzLCBmYWxzZSkpO1xyXG4gICAgICAgICAgICBzY29wZSA9PT0gbnVsbCB8fCBzY29wZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2NvcGUuZm9yRWFjaCgoZWxlbWVudCk9PmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3Vzb3V0XCIsIG9uQmx1ciwgZmFsc2UpKTtcclxuICAgICAgICB9O1xyXG4gICAgfSwgW1xyXG4gICAgICAgIHNjb3BlUmVmLFxyXG4gICAgICAgIGNvbnRhaW5cclxuICAgIF0pO1xyXG4gICAgLy8gVGhpcyBpcyBhIHVzZUxheW91dEVmZmVjdCBzbyBpdCBpcyBndWFyYW50ZWVkIHRvIHJ1biBiZWZvcmUgb3VyIGFzeW5jIHN5bnRoZXRpYyBibHVyXHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgYXJyb3ctYm9keS1zdHlsZVxyXG4gICAgKDAsICQ2bmZGQyR1c2VMYXlvdXRFZmZlY3QpKCgpPT57XHJcbiAgICAgICAgcmV0dXJuICgpPT57XHJcbiAgICAgICAgICAgIGlmIChyYWYuY3VycmVudCkgY2FuY2VsQW5pbWF0aW9uRnJhbWUocmFmLmN1cnJlbnQpO1xyXG4gICAgICAgIH07XHJcbiAgICB9LCBbXHJcbiAgICAgICAgcmFmXHJcbiAgICBdKTtcclxufVxyXG5mdW5jdGlvbiAkOWJmNzFlYTI4NzkzZTczOCR2YXIkaXNFbGVtZW50SW5BbnlTY29wZShlbGVtZW50KSB7XHJcbiAgICByZXR1cm4gJDliZjcxZWEyODc5M2U3MzgkdmFyJGlzRWxlbWVudEluQ2hpbGRTY29wZShlbGVtZW50KTtcclxufVxyXG5mdW5jdGlvbiAkOWJmNzFlYTI4NzkzZTczOCR2YXIkaXNFbGVtZW50SW5TY29wZShlbGVtZW50LCBzY29wZSkge1xyXG4gICAgaWYgKCFlbGVtZW50KSByZXR1cm4gZmFsc2U7XHJcbiAgICBpZiAoIXNjb3BlKSByZXR1cm4gZmFsc2U7XHJcbiAgICByZXR1cm4gc2NvcGUuc29tZSgobm9kZSk9Pm5vZGUuY29udGFpbnMoZWxlbWVudCkpO1xyXG59XHJcbmZ1bmN0aW9uICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRpc0VsZW1lbnRJbkNoaWxkU2NvcGUoZWxlbWVudCwgc2NvcGUgPSBudWxsKSB7XHJcbiAgICAvLyBJZiB0aGUgZWxlbWVudCBpcyB3aXRoaW4gYSB0b3AgbGF5ZXIgZWxlbWVudCAoZS5nLiB0b2FzdHMpLCBhbHdheXMgYWxsb3cgbW92aW5nIGZvY3VzIHRoZXJlLlxyXG4gICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBFbGVtZW50ICYmIGVsZW1lbnQuY2xvc2VzdChcIltkYXRhLXJlYWN0LWFyaWEtdG9wLWxheWVyXVwiKSkgcmV0dXJuIHRydWU7XHJcbiAgICAvLyBub2RlLmNvbnRhaW5zIGluIGlzRWxlbWVudEluU2NvcGUgY292ZXJzIGNoaWxkIHNjb3BlcyB0aGF0IGFyZSBhbHNvIERPTSBjaGlsZHJlbixcclxuICAgIC8vIGJ1dCBkb2VzIG5vdCBjb3ZlciBjaGlsZCBzY29wZXMgaW4gcG9ydGFscy5cclxuICAgIGZvciAobGV0IHsgc2NvcGVSZWY6IHMgfSBvZiAkOWJmNzFlYTI4NzkzZTczOCRleHBvcnQkZDA2ZmFlMmVlNjhiMTAxZS50cmF2ZXJzZSgkOWJmNzFlYTI4NzkzZTczOCRleHBvcnQkZDA2ZmFlMmVlNjhiMTAxZS5nZXRUcmVlTm9kZShzY29wZSkpKXtcclxuICAgICAgICBpZiAocyAmJiAkOWJmNzFlYTI4NzkzZTczOCR2YXIkaXNFbGVtZW50SW5TY29wZShlbGVtZW50LCBzLmN1cnJlbnQpKSByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5mdW5jdGlvbiAkOWJmNzFlYTI4NzkzZTczOCRleHBvcnQkMTI1ODM5NWY5OWJmOWNiZihlbGVtZW50KSB7XHJcbiAgICByZXR1cm4gJDliZjcxZWEyODc5M2U3MzgkdmFyJGlzRWxlbWVudEluQ2hpbGRTY29wZShlbGVtZW50LCAkOWJmNzFlYTI4NzkzZTczOCR2YXIkYWN0aXZlU2NvcGUpO1xyXG59XHJcbmZ1bmN0aW9uICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRpc0FuY2VzdG9yU2NvcGUoYW5jZXN0b3IsIHNjb3BlKSB7XHJcbiAgICB2YXIgX2ZvY3VzU2NvcGVUcmVlX2dldFRyZWVOb2RlO1xyXG4gICAgbGV0IHBhcmVudCA9IChfZm9jdXNTY29wZVRyZWVfZ2V0VHJlZU5vZGUgPSAkOWJmNzFlYTI4NzkzZTczOCRleHBvcnQkZDA2ZmFlMmVlNjhiMTAxZS5nZXRUcmVlTm9kZShzY29wZSkpID09PSBudWxsIHx8IF9mb2N1c1Njb3BlVHJlZV9nZXRUcmVlTm9kZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2ZvY3VzU2NvcGVUcmVlX2dldFRyZWVOb2RlLnBhcmVudDtcclxuICAgIHdoaWxlKHBhcmVudCl7XHJcbiAgICAgICAgaWYgKHBhcmVudC5zY29wZVJlZiA9PT0gYW5jZXN0b3IpIHJldHVybiB0cnVlO1xyXG4gICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuZnVuY3Rpb24gJDliZjcxZWEyODc5M2U3MzgkdmFyJGZvY3VzRWxlbWVudChlbGVtZW50LCBzY3JvbGwgPSBmYWxzZSkge1xyXG4gICAgaWYgKGVsZW1lbnQgIT0gbnVsbCAmJiAhc2Nyb2xsKSB0cnkge1xyXG4gICAgICAgICgwLCAkNmE5OTE5NTMzMmVkZWM4YiRleHBvcnQkODBmM2UxNDdkNzgxNTcxYykoZWxlbWVudCk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgIC8vIGlnbm9yZVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZWxlbWVudCAhPSBudWxsKSB0cnkge1xyXG4gICAgICAgIGVsZW1lbnQuZm9jdXMoKTtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgLy8gaWdub3JlXHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gJDliZjcxZWEyODc5M2U3MzgkdmFyJGZvY3VzRmlyc3RJblNjb3BlKHNjb3BlLCB0YWJiYWJsZSA9IHRydWUpIHtcclxuICAgIGxldCBzZW50aW5lbCA9IHNjb3BlWzBdLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XHJcbiAgICBsZXQgc2NvcGVSb290ID0gJDliZjcxZWEyODc5M2U3MzgkdmFyJGdldFNjb3BlUm9vdChzY29wZSk7XHJcbiAgICBsZXQgd2Fsa2VyID0gJDliZjcxZWEyODc5M2U3MzgkZXhwb3J0JDJkNmVjOGZjMzc1Y2VhZmEoc2NvcGVSb290LCB7XHJcbiAgICAgICAgdGFiYmFibGU6IHRhYmJhYmxlXHJcbiAgICB9LCBzY29wZSk7XHJcbiAgICB3YWxrZXIuY3VycmVudE5vZGUgPSBzZW50aW5lbDtcclxuICAgIGxldCBuZXh0Tm9kZSA9IHdhbGtlci5uZXh0Tm9kZSgpO1xyXG4gICAgLy8gSWYgdGhlIHNjb3BlIGRvZXMgbm90IGNvbnRhaW4gYSB0YWJiYWJsZSBlbGVtZW50LCB1c2UgdGhlIGZpcnN0IGZvY3VzYWJsZSBlbGVtZW50LlxyXG4gICAgaWYgKHRhYmJhYmxlICYmICFuZXh0Tm9kZSkge1xyXG4gICAgICAgIHNjb3BlUm9vdCA9ICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRnZXRTY29wZVJvb3Qoc2NvcGUpO1xyXG4gICAgICAgIHdhbGtlciA9ICQ5YmY3MWVhMjg3OTNlNzM4JGV4cG9ydCQyZDZlYzhmYzM3NWNlYWZhKHNjb3BlUm9vdCwge1xyXG4gICAgICAgICAgICB0YWJiYWJsZTogZmFsc2VcclxuICAgICAgICB9LCBzY29wZSk7XHJcbiAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gc2VudGluZWw7XHJcbiAgICAgICAgbmV4dE5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKTtcclxuICAgIH1cclxuICAgICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRmb2N1c0VsZW1lbnQobmV4dE5vZGUpO1xyXG59XHJcbmZ1bmN0aW9uICQ5YmY3MWVhMjg3OTNlNzM4JHZhciR1c2VBdXRvRm9jdXMoc2NvcGVSZWYsIGF1dG9Gb2N1cykge1xyXG4gICAgY29uc3QgYXV0b0ZvY3VzUmVmID0gKDAsICQ2bmZGQyRyZWFjdCkudXNlUmVmKGF1dG9Gb2N1cyk7XHJcbiAgICAoMCwgJDZuZkZDJHVzZUVmZmVjdCkoKCk9PntcclxuICAgICAgICBpZiAoYXV0b0ZvY3VzUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgJDliZjcxZWEyODc5M2U3MzgkdmFyJGFjdGl2ZVNjb3BlID0gc2NvcGVSZWY7XHJcbiAgICAgICAgICAgIGNvbnN0IG93bmVyRG9jdW1lbnQgPSAoMCwgJDZuZkZDJGdldE93bmVyRG9jdW1lbnQpKHNjb3BlUmVmLmN1cnJlbnQgPyBzY29wZVJlZi5jdXJyZW50WzBdIDogdW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgaWYgKCEkOWJmNzFlYTI4NzkzZTczOCR2YXIkaXNFbGVtZW50SW5TY29wZShvd25lckRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRhY3RpdmVTY29wZS5jdXJyZW50KSAmJiBzY29wZVJlZi5jdXJyZW50KSAkOWJmNzFlYTI4NzkzZTczOCR2YXIkZm9jdXNGaXJzdEluU2NvcGUoc2NvcGVSZWYuY3VycmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGF1dG9Gb2N1c1JlZi5jdXJyZW50ID0gZmFsc2U7XHJcbiAgICB9LCBbXHJcbiAgICAgICAgc2NvcGVSZWZcclxuICAgIF0pO1xyXG59XHJcbmZ1bmN0aW9uICQ5YmY3MWVhMjg3OTNlNzM4JHZhciR1c2VBY3RpdmVTY29wZVRyYWNrZXIoc2NvcGVSZWYsIHJlc3RvcmUsIGNvbnRhaW4pIHtcclxuICAgIC8vIHRyYWNrcyB0aGUgYWN0aXZlIHNjb3BlLCBpbiBjYXNlIHJlc3RvcmUgYW5kIGNvbnRhaW4gYXJlIGJvdGggZmFsc2UuXHJcbiAgICAvLyBpZiBlaXRoZXIgYXJlIHRydWUsIHRoaXMgaXMgdHJhY2tlZCBpbiB1c2VSZXN0b3JlRm9jdXMgb3IgdXNlRm9jdXNDb250YWlubWVudC5cclxuICAgICgwLCAkNm5mRkMkdXNlTGF5b3V0RWZmZWN0KSgoKT0+e1xyXG4gICAgICAgIGlmIChyZXN0b3JlIHx8IGNvbnRhaW4pIHJldHVybjtcclxuICAgICAgICBsZXQgc2NvcGUgPSBzY29wZVJlZi5jdXJyZW50O1xyXG4gICAgICAgIGNvbnN0IG93bmVyRG9jdW1lbnQgPSAoMCwgJDZuZkZDJGdldE93bmVyRG9jdW1lbnQpKHNjb3BlID8gc2NvcGVbMF0gOiB1bmRlZmluZWQpO1xyXG4gICAgICAgIGxldCBvbkZvY3VzID0gKGUpPT57XHJcbiAgICAgICAgICAgIGxldCB0YXJnZXQgPSBlLnRhcmdldDtcclxuICAgICAgICAgICAgaWYgKCQ5YmY3MWVhMjg3OTNlNzM4JHZhciRpc0VsZW1lbnRJblNjb3BlKHRhcmdldCwgc2NvcGVSZWYuY3VycmVudCkpICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRhY3RpdmVTY29wZSA9IHNjb3BlUmVmO1xyXG4gICAgICAgICAgICBlbHNlIGlmICghJDliZjcxZWEyODc5M2U3MzgkdmFyJGlzRWxlbWVudEluQW55U2NvcGUodGFyZ2V0KSkgJDliZjcxZWEyODc5M2U3MzgkdmFyJGFjdGl2ZVNjb3BlID0gbnVsbDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIG93bmVyRG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzaW5cIiwgb25Gb2N1cywgZmFsc2UpO1xyXG4gICAgICAgIHNjb3BlID09PSBudWxsIHx8IHNjb3BlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzY29wZS5mb3JFYWNoKChlbGVtZW50KT0+ZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNpblwiLCBvbkZvY3VzLCBmYWxzZSkpO1xyXG4gICAgICAgIHJldHVybiAoKT0+e1xyXG4gICAgICAgICAgICBvd25lckRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c2luXCIsIG9uRm9jdXMsIGZhbHNlKTtcclxuICAgICAgICAgICAgc2NvcGUgPT09IG51bGwgfHwgc2NvcGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNjb3BlLmZvckVhY2goKGVsZW1lbnQpPT5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c2luXCIsIG9uRm9jdXMsIGZhbHNlKSk7XHJcbiAgICAgICAgfTtcclxuICAgIH0sIFtcclxuICAgICAgICBzY29wZVJlZixcclxuICAgICAgICByZXN0b3JlLFxyXG4gICAgICAgIGNvbnRhaW5cclxuICAgIF0pO1xyXG59XHJcbmZ1bmN0aW9uICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRzaG91bGRSZXN0b3JlRm9jdXMoc2NvcGVSZWYpIHtcclxuICAgIGxldCBzY29wZSA9ICQ5YmY3MWVhMjg3OTNlNzM4JGV4cG9ydCRkMDZmYWUyZWU2OGIxMDFlLmdldFRyZWVOb2RlKCQ5YmY3MWVhMjg3OTNlNzM4JHZhciRhY3RpdmVTY29wZSk7XHJcbiAgICB3aGlsZShzY29wZSAmJiBzY29wZS5zY29wZVJlZiAhPT0gc2NvcGVSZWYpe1xyXG4gICAgICAgIGlmIChzY29wZS5ub2RlVG9SZXN0b3JlKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgc2NvcGUgPSBzY29wZS5wYXJlbnQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKHNjb3BlID09PSBudWxsIHx8IHNjb3BlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzY29wZS5zY29wZVJlZikgPT09IHNjb3BlUmVmO1xyXG59XHJcbmZ1bmN0aW9uICQ5YmY3MWVhMjg3OTNlNzM4JHZhciR1c2VSZXN0b3JlRm9jdXMoc2NvcGVSZWYsIHJlc3RvcmVGb2N1cywgY29udGFpbikge1xyXG4gICAgLy8gY3JlYXRlIGEgcmVmIGR1cmluZyByZW5kZXIgaW5zdGVhZCBvZiB1c2VMYXlvdXRFZmZlY3Qgc28gdGhlIGFjdGl2ZSBlbGVtZW50IGlzIHNhdmVkIGJlZm9yZSBhIGNoaWxkIHdpdGggYXV0b0ZvY3VzPXRydWUgbW91bnRzLlxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xyXG4gICAgY29uc3Qgbm9kZVRvUmVzdG9yZVJlZiA9ICgwLCAkNm5mRkMkdXNlUmVmKSh0eXBlb2YgZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCIgPyAoMCwgJDZuZkZDJGdldE93bmVyRG9jdW1lbnQpKHNjb3BlUmVmLmN1cnJlbnQgPyBzY29wZVJlZi5jdXJyZW50WzBdIDogdW5kZWZpbmVkKS5hY3RpdmVFbGVtZW50IDogbnVsbCk7XHJcbiAgICAvLyByZXN0b3Jpbmcgc2NvcGVzIHNob3VsZCBhbGwgdHJhY2sgaWYgdGhleSBhcmUgYWN0aXZlIHJlZ2FyZGxlc3Mgb2YgY29udGFpbiwgYnV0IGNvbnRhaW4gYWxyZWFkeSB0cmFja3MgaXQgcGx1cyBsb2dpYyB0byBjb250YWluIHRoZSBmb2N1c1xyXG4gICAgLy8gcmVzdG9yaW5nLW5vbi1jb250YWluaW5nIHNjb3BlcyBzaG91bGQgb25seSBjYXJlIGlmIHRoZXkgYmVjb21lIGFjdGl2ZSBzbyB0aGV5IGNhbiBwZXJmb3JtIHRoZSByZXN0b3JlXHJcbiAgICAoMCwgJDZuZkZDJHVzZUxheW91dEVmZmVjdCkoKCk9PntcclxuICAgICAgICBsZXQgc2NvcGUgPSBzY29wZVJlZi5jdXJyZW50O1xyXG4gICAgICAgIGNvbnN0IG93bmVyRG9jdW1lbnQgPSAoMCwgJDZuZkZDJGdldE93bmVyRG9jdW1lbnQpKHNjb3BlID8gc2NvcGVbMF0gOiB1bmRlZmluZWQpO1xyXG4gICAgICAgIGlmICghcmVzdG9yZUZvY3VzIHx8IGNvbnRhaW4pIHJldHVybjtcclxuICAgICAgICBsZXQgb25Gb2N1cyA9ICgpPT57XHJcbiAgICAgICAgICAgIC8vIElmIGZvY3VzaW5nIGFuIGVsZW1lbnQgaW4gYSBjaGlsZCBzY29wZSBvZiB0aGUgY3VycmVudGx5IGFjdGl2ZSBzY29wZSwgdGhlIGNoaWxkIGJlY29tZXMgYWN0aXZlLlxyXG4gICAgICAgICAgICAvLyBNb3Zpbmcgb3V0IG9mIHRoZSBhY3RpdmUgc2NvcGUgdG8gYW4gYW5jZXN0b3IgaXMgbm90IGFsbG93ZWQuXHJcbiAgICAgICAgICAgIGlmICgoISQ5YmY3MWVhMjg3OTNlNzM4JHZhciRhY3RpdmVTY29wZSB8fCAkOWJmNzFlYTI4NzkzZTczOCR2YXIkaXNBbmNlc3RvclNjb3BlKCQ5YmY3MWVhMjg3OTNlNzM4JHZhciRhY3RpdmVTY29wZSwgc2NvcGVSZWYpKSAmJiAkOWJmNzFlYTI4NzkzZTczOCR2YXIkaXNFbGVtZW50SW5TY29wZShvd25lckRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsIHNjb3BlUmVmLmN1cnJlbnQpKSAkOWJmNzFlYTI4NzkzZTczOCR2YXIkYWN0aXZlU2NvcGUgPSBzY29wZVJlZjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIG93bmVyRG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzaW5cIiwgb25Gb2N1cywgZmFsc2UpO1xyXG4gICAgICAgIHNjb3BlID09PSBudWxsIHx8IHNjb3BlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzY29wZS5mb3JFYWNoKChlbGVtZW50KT0+ZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNpblwiLCBvbkZvY3VzLCBmYWxzZSkpO1xyXG4gICAgICAgIHJldHVybiAoKT0+e1xyXG4gICAgICAgICAgICBvd25lckRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c2luXCIsIG9uRm9jdXMsIGZhbHNlKTtcclxuICAgICAgICAgICAgc2NvcGUgPT09IG51bGwgfHwgc2NvcGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNjb3BlLmZvckVhY2goKGVsZW1lbnQpPT5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c2luXCIsIG9uRm9jdXMsIGZhbHNlKSk7XHJcbiAgICAgICAgfTtcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcclxuICAgIH0sIFtcclxuICAgICAgICBzY29wZVJlZixcclxuICAgICAgICBjb250YWluXHJcbiAgICBdKTtcclxuICAgICgwLCAkNm5mRkMkdXNlTGF5b3V0RWZmZWN0KSgoKT0+e1xyXG4gICAgICAgIGNvbnN0IG93bmVyRG9jdW1lbnQgPSAoMCwgJDZuZkZDJGdldE93bmVyRG9jdW1lbnQpKHNjb3BlUmVmLmN1cnJlbnQgPyBzY29wZVJlZi5jdXJyZW50WzBdIDogdW5kZWZpbmVkKTtcclxuICAgICAgICBpZiAoIXJlc3RvcmVGb2N1cykgcmV0dXJuO1xyXG4gICAgICAgIC8vIEhhbmRsZSB0aGUgVGFiIGtleSBzbyB0aGF0IHRhYmJpbmcgb3V0IG9mIHRoZSBzY29wZSBnb2VzIHRvIHRoZSBuZXh0IGVsZW1lbnRcclxuICAgICAgICAvLyBhZnRlciB0aGUgbm9kZSB0aGF0IGhhZCBmb2N1cyB3aGVuIHRoZSBzY29wZSBtb3VudGVkLiBUaGlzIGlzIGltcG9ydGFudCB3aGVuXHJcbiAgICAgICAgLy8gdXNpbmcgcG9ydGFscyBmb3Igb3ZlcmxheXMsIHNvIHRoYXQgZm9jdXMgZ29lcyB0byB0aGUgZXhwZWN0ZWQgZWxlbWVudCB3aGVuXHJcbiAgICAgICAgLy8gdGFiYmluZyBvdXQgb2YgdGhlIG92ZXJsYXkuXHJcbiAgICAgICAgbGV0IG9uS2V5RG93biA9IChlKT0+e1xyXG4gICAgICAgICAgICBpZiAoZS5rZXkgIT09IFwiVGFiXCIgfHwgZS5hbHRLZXkgfHwgZS5jdHJsS2V5IHx8IGUubWV0YUtleSB8fCAhJDliZjcxZWEyODc5M2U3MzgkdmFyJHNob3VsZENvbnRhaW5Gb2N1cyhzY29wZVJlZikpIHJldHVybjtcclxuICAgICAgICAgICAgbGV0IGZvY3VzZWRFbGVtZW50ID0gb3duZXJEb2N1bWVudC5hY3RpdmVFbGVtZW50O1xyXG4gICAgICAgICAgICBpZiAoISQ5YmY3MWVhMjg3OTNlNzM4JHZhciRpc0VsZW1lbnRJblNjb3BlKGZvY3VzZWRFbGVtZW50LCBzY29wZVJlZi5jdXJyZW50KSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBsZXQgdHJlZU5vZGUgPSAkOWJmNzFlYTI4NzkzZTczOCRleHBvcnQkZDA2ZmFlMmVlNjhiMTAxZS5nZXRUcmVlTm9kZShzY29wZVJlZik7XHJcbiAgICAgICAgICAgIGlmICghdHJlZU5vZGUpIHJldHVybjtcclxuICAgICAgICAgICAgbGV0IG5vZGVUb1Jlc3RvcmUgPSB0cmVlTm9kZS5ub2RlVG9SZXN0b3JlO1xyXG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBET00gdHJlZSB3YWxrZXIgdGhhdCBtYXRjaGVzIGFsbCB0YWJiYWJsZSBlbGVtZW50c1xyXG4gICAgICAgICAgICBsZXQgd2Fsa2VyID0gJDliZjcxZWEyODc5M2U3MzgkZXhwb3J0JDJkNmVjOGZjMzc1Y2VhZmEob3duZXJEb2N1bWVudC5ib2R5LCB7XHJcbiAgICAgICAgICAgICAgICB0YWJiYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gRmluZCB0aGUgbmV4dCB0YWJiYWJsZSBlbGVtZW50IGFmdGVyIHRoZSBjdXJyZW50bHkgZm9jdXNlZCBlbGVtZW50XHJcbiAgICAgICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IGZvY3VzZWRFbGVtZW50O1xyXG4gICAgICAgICAgICBsZXQgbmV4dEVsZW1lbnQgPSBlLnNoaWZ0S2V5ID8gd2Fsa2VyLnByZXZpb3VzTm9kZSgpIDogd2Fsa2VyLm5leHROb2RlKCk7XHJcbiAgICAgICAgICAgIGlmICghbm9kZVRvUmVzdG9yZSB8fCAhb3duZXJEb2N1bWVudC5ib2R5LmNvbnRhaW5zKG5vZGVUb1Jlc3RvcmUpIHx8IG5vZGVUb1Jlc3RvcmUgPT09IG93bmVyRG9jdW1lbnQuYm9keSkge1xyXG4gICAgICAgICAgICAgICAgbm9kZVRvUmVzdG9yZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIHRyZWVOb2RlLm5vZGVUb1Jlc3RvcmUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gbmV4dCBlbGVtZW50LCBvciBpdCBpcyBvdXRzaWRlIHRoZSBjdXJyZW50IHNjb3BlLCBtb3ZlIGZvY3VzIHRvIHRoZVxyXG4gICAgICAgICAgICAvLyBuZXh0IGVsZW1lbnQgYWZ0ZXIgdGhlIG5vZGUgdG8gcmVzdG9yZSB0byBpbnN0ZWFkLlxyXG4gICAgICAgICAgICBpZiAoKCFuZXh0RWxlbWVudCB8fCAhJDliZjcxZWEyODc5M2U3MzgkdmFyJGlzRWxlbWVudEluU2NvcGUobmV4dEVsZW1lbnQsIHNjb3BlUmVmLmN1cnJlbnQpKSAmJiBub2RlVG9SZXN0b3JlKSB7XHJcbiAgICAgICAgICAgICAgICB3YWxrZXIuY3VycmVudE5vZGUgPSBub2RlVG9SZXN0b3JlO1xyXG4gICAgICAgICAgICAgICAgLy8gU2tpcCBvdmVyIGVsZW1lbnRzIHdpdGhpbiB0aGUgc2NvcGUsIGluIGNhc2UgdGhlIHNjb3BlIGltbWVkaWF0ZWx5IGZvbGxvd3MgdGhlIG5vZGUgdG8gcmVzdG9yZS5cclxuICAgICAgICAgICAgICAgIGRvIG5leHRFbGVtZW50ID0gZS5zaGlmdEtleSA/IHdhbGtlci5wcmV2aW91c05vZGUoKSA6IHdhbGtlci5uZXh0Tm9kZSgpO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKCQ5YmY3MWVhMjg3OTNlNzM4JHZhciRpc0VsZW1lbnRJblNjb3BlKG5leHRFbGVtZW50LCBzY29wZVJlZi5jdXJyZW50KSk7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5leHRFbGVtZW50KSAkOWJmNzFlYTI4NzkzZTczOCR2YXIkZm9jdXNFbGVtZW50KG5leHRFbGVtZW50LCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGVsc2UgLy8gSWYgdGhlcmUgaXMgbm8gbmV4dCBlbGVtZW50IGFuZCB0aGUgbm9kZVRvUmVzdG9yZSBpc24ndCB3aXRoaW4gYSBGb2N1c1Njb3BlIChpLmUuIHdlIGFyZSBsZWF2aW5nIHRoZSB0b3AgbGV2ZWwgZm9jdXMgc2NvcGUpXHJcbiAgICAgICAgICAgICAgICAvLyB0aGVuIG1vdmUgZm9jdXMgdG8gdGhlIGJvZHkuXHJcbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UgcmVzdG9yZSBmb2N1cyB0byB0aGUgbm9kZVRvUmVzdG9yZSAoZS5nIG1lbnUgd2l0aGluIGEgcG9wb3ZlciAtPiB0YWJiaW5nIHRvIGNsb3NlIHRoZSBtZW51IHNob3VsZCBtb3ZlIGZvY3VzIHRvIG1lbnUgdHJpZ2dlcilcclxuICAgICAgICAgICAgICAgIGlmICghJDliZjcxZWEyODc5M2U3MzgkdmFyJGlzRWxlbWVudEluQW55U2NvcGUobm9kZVRvUmVzdG9yZSkpIGZvY3VzZWRFbGVtZW50LmJsdXIoKTtcclxuICAgICAgICAgICAgICAgIGVsc2UgJDliZjcxZWEyODc5M2U3MzgkdmFyJGZvY3VzRWxlbWVudChub2RlVG9SZXN0b3JlLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKCFjb250YWluKSBvd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIG9uS2V5RG93biwgdHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuICgpPT57XHJcbiAgICAgICAgICAgIGlmICghY29udGFpbikgb3duZXJEb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBvbktleURvd24sIHRydWUpO1xyXG4gICAgICAgIH07XHJcbiAgICB9LCBbXHJcbiAgICAgICAgc2NvcGVSZWYsXHJcbiAgICAgICAgcmVzdG9yZUZvY3VzLFxyXG4gICAgICAgIGNvbnRhaW5cclxuICAgIF0pO1xyXG4gICAgLy8gdXNlTGF5b3V0RWZmZWN0IGluc3RlYWQgb2YgdXNlRWZmZWN0IHNvIHRoZSBhY3RpdmUgZWxlbWVudCBpcyBzYXZlZCBzeW5jaHJvbm91c2x5IGluc3RlYWQgb2YgYXN5bmNocm9ub3VzbHkuXHJcbiAgICAoMCwgJDZuZkZDJHVzZUxheW91dEVmZmVjdCkoKCk9PntcclxuICAgICAgICBjb25zdCBvd25lckRvY3VtZW50ID0gKDAsICQ2bmZGQyRnZXRPd25lckRvY3VtZW50KShzY29wZVJlZi5jdXJyZW50ID8gc2NvcGVSZWYuY3VycmVudFswXSA6IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgaWYgKCFyZXN0b3JlRm9jdXMpIHJldHVybjtcclxuICAgICAgICBsZXQgdHJlZU5vZGUgPSAkOWJmNzFlYTI4NzkzZTczOCRleHBvcnQkZDA2ZmFlMmVlNjhiMTAxZS5nZXRUcmVlTm9kZShzY29wZVJlZik7XHJcbiAgICAgICAgaWYgKCF0cmVlTm9kZSkgcmV0dXJuO1xyXG4gICAgICAgIHZhciBfbm9kZVRvUmVzdG9yZVJlZl9jdXJyZW50O1xyXG4gICAgICAgIHRyZWVOb2RlLm5vZGVUb1Jlc3RvcmUgPSAoX25vZGVUb1Jlc3RvcmVSZWZfY3VycmVudCA9IG5vZGVUb1Jlc3RvcmVSZWYuY3VycmVudCkgIT09IG51bGwgJiYgX25vZGVUb1Jlc3RvcmVSZWZfY3VycmVudCAhPT0gdm9pZCAwID8gX25vZGVUb1Jlc3RvcmVSZWZfY3VycmVudCA6IHVuZGVmaW5lZDtcclxuICAgICAgICByZXR1cm4gKCk9PntcclxuICAgICAgICAgICAgbGV0IHRyZWVOb2RlID0gJDliZjcxZWEyODc5M2U3MzgkZXhwb3J0JGQwNmZhZTJlZTY4YjEwMWUuZ2V0VHJlZU5vZGUoc2NvcGVSZWYpO1xyXG4gICAgICAgICAgICBpZiAoIXRyZWVOb2RlKSByZXR1cm47XHJcbiAgICAgICAgICAgIGxldCBub2RlVG9SZXN0b3JlID0gdHJlZU5vZGUubm9kZVRvUmVzdG9yZTtcclxuICAgICAgICAgICAgLy8gaWYgd2UgYWxyZWFkeSBsb3N0IGZvY3VzIHRvIHRoZSBib2R5IGFuZCB0aGlzIHdhcyB0aGUgYWN0aXZlIHNjb3BlLCB0aGVuIHdlIHNob3VsZCBhdHRlbXB0IHRvIHJlc3RvcmVcclxuICAgICAgICAgICAgaWYgKHJlc3RvcmVGb2N1cyAmJiBub2RlVG9SZXN0b3JlICYmIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcclxuICAgICAgICAgICAgKCQ5YmY3MWVhMjg3OTNlNzM4JHZhciRpc0VsZW1lbnRJblNjb3BlKG93bmVyRG9jdW1lbnQuYWN0aXZlRWxlbWVudCwgc2NvcGVSZWYuY3VycmVudCkgfHwgb3duZXJEb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBvd25lckRvY3VtZW50LmJvZHkgJiYgJDliZjcxZWEyODc5M2U3MzgkdmFyJHNob3VsZFJlc3RvcmVGb2N1cyhzY29wZVJlZikpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBmcmVlemUgdGhlIGZvY3VzU2NvcGVUcmVlIHNvIGl0IHBlcnNpc3RzIGFmdGVyIHRoZSByYWYsIG90aGVyd2lzZSBkdXJpbmcgdW5tb3VudCBub2RlcyBhcmUgcmVtb3ZlZCBmcm9tIGl0XHJcbiAgICAgICAgICAgICAgICBsZXQgY2xvbmVkVHJlZSA9ICQ5YmY3MWVhMjg3OTNlNzM4JGV4cG9ydCRkMDZmYWUyZWU2OGIxMDFlLmNsb25lKCk7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IHJlc3RvcmUgZm9jdXMgaWYgd2UndmUgbG9zdCBmb2N1cyB0byB0aGUgYm9keSwgdGhlIGFsdGVybmF0aXZlIGlzIHRoYXQgZm9jdXMgaGFzIGJlZW4gcHVycG9zZWZ1bGx5IG1vdmVkIGVsc2V3aGVyZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvd25lckRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IG93bmVyRG9jdW1lbnQuYm9keSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsb29rIHVwIHRoZSB0cmVlIHN0YXJ0aW5nIHdpdGggb3VyIHNjb3BlIHRvIGZpbmQgYSBub2RlVG9SZXN0b3JlIHN0aWxsIGluIHRoZSBET01cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRyZWVOb2RlID0gY2xvbmVkVHJlZS5nZXRUcmVlTm9kZShzY29wZVJlZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlKHRyZWVOb2RlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmVlTm9kZS5ub2RlVG9SZXN0b3JlICYmIHRyZWVOb2RlLm5vZGVUb1Jlc3RvcmUuaXNDb25uZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkOWJmNzFlYTI4NzkzZTczOCR2YXIkZm9jdXNFbGVtZW50KHRyZWVOb2RlLm5vZGVUb1Jlc3RvcmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyZWVOb2RlID0gdHJlZU5vZGUucGFyZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIG5vIG5vZGVUb1Jlc3RvcmUgd2FzIGZvdW5kLCBmb2N1cyB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUgbmVhcmVzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmNlc3RvciBzY29wZSB0aGF0IGlzIHN0aWxsIGluIHRoZSB0cmVlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmVlTm9kZSA9IGNsb25lZFRyZWUuZ2V0VHJlZU5vZGUoc2NvcGVSZWYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSh0cmVlTm9kZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJlZU5vZGUuc2NvcGVSZWYgJiYgdHJlZU5vZGUuc2NvcGVSZWYuY3VycmVudCAmJiAkOWJmNzFlYTI4NzkzZTczOCRleHBvcnQkZDA2ZmFlMmVlNjhiMTAxZS5nZXRUcmVlTm9kZSh0cmVlTm9kZS5zY29wZVJlZikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkOWJmNzFlYTI4NzkzZTczOCR2YXIkZm9jdXNGaXJzdEluU2NvcGUodHJlZU5vZGUuc2NvcGVSZWYuY3VycmVudCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJlZU5vZGUgPSB0cmVlTm9kZS5wYXJlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9LCBbXHJcbiAgICAgICAgc2NvcGVSZWYsXHJcbiAgICAgICAgcmVzdG9yZUZvY3VzXHJcbiAgICBdKTtcclxufVxyXG5mdW5jdGlvbiAkOWJmNzFlYTI4NzkzZTczOCRleHBvcnQkMmQ2ZWM4ZmMzNzVjZWFmYShyb290LCBvcHRzLCBzY29wZSkge1xyXG4gICAgbGV0IHNlbGVjdG9yID0gKG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy50YWJiYWJsZSkgPyAkOWJmNzFlYTI4NzkzZTczOCR2YXIkVEFCQkFCTEVfRUxFTUVOVF9TRUxFQ1RPUiA6ICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRGT0NVU0FCTEVfRUxFTUVOVF9TRUxFQ1RPUjtcclxuICAgIGxldCB3YWxrZXIgPSAoMCwgJDZuZkZDJGdldE93bmVyRG9jdW1lbnQpKHJvb3QpLmNyZWF0ZVRyZWVXYWxrZXIocm9vdCwgTm9kZUZpbHRlci5TSE9XX0VMRU1FTlQsIHtcclxuICAgICAgICBhY2NlcHROb2RlIChub2RlKSB7XHJcbiAgICAgICAgICAgIHZhciBfb3B0c19mcm9tO1xyXG4gICAgICAgICAgICAvLyBTa2lwIG5vZGVzIGluc2lkZSB0aGUgc3RhcnRpbmcgbm9kZS5cclxuICAgICAgICAgICAgaWYgKG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9vcHRzX2Zyb20gPSBvcHRzLmZyb20pID09PSBudWxsIHx8IF9vcHRzX2Zyb20gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRzX2Zyb20uY29udGFpbnMobm9kZSkpIHJldHVybiBOb2RlRmlsdGVyLkZJTFRFUl9SRUpFQ1Q7XHJcbiAgICAgICAgICAgIGlmIChub2RlLm1hdGNoZXMoc2VsZWN0b3IpICYmICgwLCAkNjQ1ZjJlNjdiODVhMjRjOSRleHBvcnQkZTk4OWMwZmZmYWE2YjI3YSkobm9kZSkgJiYgKCFzY29wZSB8fCAkOWJmNzFlYTI4NzkzZTczOCR2YXIkaXNFbGVtZW50SW5TY29wZShub2RlLCBzY29wZSkpICYmICghKG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy5hY2NlcHQpIHx8IG9wdHMuYWNjZXB0KG5vZGUpKSkgcmV0dXJuIE5vZGVGaWx0ZXIuRklMVEVSX0FDQ0VQVDtcclxuICAgICAgICAgICAgcmV0dXJuIE5vZGVGaWx0ZXIuRklMVEVSX1NLSVA7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBpZiAob3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLmZyb20pIHdhbGtlci5jdXJyZW50Tm9kZSA9IG9wdHMuZnJvbTtcclxuICAgIHJldHVybiB3YWxrZXI7XHJcbn1cclxuZnVuY3Rpb24gJDliZjcxZWEyODc5M2U3MzgkZXhwb3J0JGM1MjUxYjllMTI0YmYyOShyZWYsIGRlZmF1bHRPcHRpb25zID0ge30pIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZm9jdXNOZXh0IChvcHRzID0ge30pIHtcclxuICAgICAgICAgICAgbGV0IHJvb3QgPSByZWYuY3VycmVudDtcclxuICAgICAgICAgICAgaWYgKCFyb290KSByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgbGV0IHsgZnJvbTogZnJvbSwgdGFiYmFibGU6IHRhYmJhYmxlID0gZGVmYXVsdE9wdGlvbnMudGFiYmFibGUsIHdyYXA6IHdyYXAgPSBkZWZhdWx0T3B0aW9ucy53cmFwLCBhY2NlcHQ6IGFjY2VwdCA9IGRlZmF1bHRPcHRpb25zLmFjY2VwdCB9ID0gb3B0cztcclxuICAgICAgICAgICAgbGV0IG5vZGUgPSBmcm9tIHx8ICgwLCAkNm5mRkMkZ2V0T3duZXJEb2N1bWVudCkocm9vdCkuYWN0aXZlRWxlbWVudDtcclxuICAgICAgICAgICAgbGV0IHdhbGtlciA9ICQ5YmY3MWVhMjg3OTNlNzM4JGV4cG9ydCQyZDZlYzhmYzM3NWNlYWZhKHJvb3QsIHtcclxuICAgICAgICAgICAgICAgIHRhYmJhYmxlOiB0YWJiYWJsZSxcclxuICAgICAgICAgICAgICAgIGFjY2VwdDogYWNjZXB0XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAocm9vdC5jb250YWlucyhub2RlKSkgd2Fsa2VyLmN1cnJlbnROb2RlID0gbm9kZTtcclxuICAgICAgICAgICAgbGV0IG5leHROb2RlID0gd2Fsa2VyLm5leHROb2RlKCk7XHJcbiAgICAgICAgICAgIGlmICghbmV4dE5vZGUgJiYgd3JhcCkge1xyXG4gICAgICAgICAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gcm9vdDtcclxuICAgICAgICAgICAgICAgIG5leHROb2RlID0gd2Fsa2VyLm5leHROb2RlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG5leHROb2RlKSAkOWJmNzFlYTI4NzkzZTczOCR2YXIkZm9jdXNFbGVtZW50KG5leHROb2RlLCB0cnVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5leHROb2RlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZm9jdXNQcmV2aW91cyAob3B0cyA9IGRlZmF1bHRPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGxldCByb290ID0gcmVmLmN1cnJlbnQ7XHJcbiAgICAgICAgICAgIGlmICghcm9vdCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIGxldCB7IGZyb206IGZyb20sIHRhYmJhYmxlOiB0YWJiYWJsZSA9IGRlZmF1bHRPcHRpb25zLnRhYmJhYmxlLCB3cmFwOiB3cmFwID0gZGVmYXVsdE9wdGlvbnMud3JhcCwgYWNjZXB0OiBhY2NlcHQgPSBkZWZhdWx0T3B0aW9ucy5hY2NlcHQgfSA9IG9wdHM7XHJcbiAgICAgICAgICAgIGxldCBub2RlID0gZnJvbSB8fCAoMCwgJDZuZkZDJGdldE93bmVyRG9jdW1lbnQpKHJvb3QpLmFjdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGxldCB3YWxrZXIgPSAkOWJmNzFlYTI4NzkzZTczOCRleHBvcnQkMmQ2ZWM4ZmMzNzVjZWFmYShyb290LCB7XHJcbiAgICAgICAgICAgICAgICB0YWJiYWJsZTogdGFiYmFibGUsXHJcbiAgICAgICAgICAgICAgICBhY2NlcHQ6IGFjY2VwdFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKHJvb3QuY29udGFpbnMobm9kZSkpIHdhbGtlci5jdXJyZW50Tm9kZSA9IG5vZGU7XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IG5leHQgPSAkOWJmNzFlYTI4NzkzZTczOCR2YXIkbGFzdCh3YWxrZXIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5leHQpICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRmb2N1c0VsZW1lbnQobmV4dCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV4dCAhPT0gbnVsbCAmJiBuZXh0ICE9PSB2b2lkIDAgPyBuZXh0IDogbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgcHJldmlvdXNOb2RlID0gd2Fsa2VyLnByZXZpb3VzTm9kZSgpO1xyXG4gICAgICAgICAgICBpZiAoIXByZXZpb3VzTm9kZSAmJiB3cmFwKSB7XHJcbiAgICAgICAgICAgICAgICB3YWxrZXIuY3VycmVudE5vZGUgPSByb290O1xyXG4gICAgICAgICAgICAgICAgbGV0IGxhc3ROb2RlID0gJDliZjcxZWEyODc5M2U3MzgkdmFyJGxhc3Qod2Fsa2VyKTtcclxuICAgICAgICAgICAgICAgIGlmICghbGFzdE5vZGUpIC8vIGNvdWxkbid0IHdyYXBcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgcHJldmlvdXNOb2RlID0gbGFzdE5vZGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHByZXZpb3VzTm9kZSkgJDliZjcxZWEyODc5M2U3MzgkdmFyJGZvY3VzRWxlbWVudChwcmV2aW91c05vZGUsIHRydWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gcHJldmlvdXNOb2RlICE9PSBudWxsICYmIHByZXZpb3VzTm9kZSAhPT0gdm9pZCAwID8gcHJldmlvdXNOb2RlIDogbnVsbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGZvY3VzRmlyc3QgKG9wdHMgPSBkZWZhdWx0T3B0aW9ucykge1xyXG4gICAgICAgICAgICBsZXQgcm9vdCA9IHJlZi5jdXJyZW50O1xyXG4gICAgICAgICAgICBpZiAoIXJvb3QpIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICBsZXQgeyB0YWJiYWJsZTogdGFiYmFibGUgPSBkZWZhdWx0T3B0aW9ucy50YWJiYWJsZSwgYWNjZXB0OiBhY2NlcHQgPSBkZWZhdWx0T3B0aW9ucy5hY2NlcHQgfSA9IG9wdHM7XHJcbiAgICAgICAgICAgIGxldCB3YWxrZXIgPSAkOWJmNzFlYTI4NzkzZTczOCRleHBvcnQkMmQ2ZWM4ZmMzNzVjZWFmYShyb290LCB7XHJcbiAgICAgICAgICAgICAgICB0YWJiYWJsZTogdGFiYmFibGUsXHJcbiAgICAgICAgICAgICAgICBhY2NlcHQ6IGFjY2VwdFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbGV0IG5leHROb2RlID0gd2Fsa2VyLm5leHROb2RlKCk7XHJcbiAgICAgICAgICAgIGlmIChuZXh0Tm9kZSkgJDliZjcxZWEyODc5M2U3MzgkdmFyJGZvY3VzRWxlbWVudChuZXh0Tm9kZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXh0Tm9kZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGZvY3VzTGFzdCAob3B0cyA9IGRlZmF1bHRPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGxldCByb290ID0gcmVmLmN1cnJlbnQ7XHJcbiAgICAgICAgICAgIGlmICghcm9vdCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIGxldCB7IHRhYmJhYmxlOiB0YWJiYWJsZSA9IGRlZmF1bHRPcHRpb25zLnRhYmJhYmxlLCBhY2NlcHQ6IGFjY2VwdCA9IGRlZmF1bHRPcHRpb25zLmFjY2VwdCB9ID0gb3B0cztcclxuICAgICAgICAgICAgbGV0IHdhbGtlciA9ICQ5YmY3MWVhMjg3OTNlNzM4JGV4cG9ydCQyZDZlYzhmYzM3NWNlYWZhKHJvb3QsIHtcclxuICAgICAgICAgICAgICAgIHRhYmJhYmxlOiB0YWJiYWJsZSxcclxuICAgICAgICAgICAgICAgIGFjY2VwdDogYWNjZXB0XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBsZXQgbmV4dCA9ICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRsYXN0KHdhbGtlcik7XHJcbiAgICAgICAgICAgIGlmIChuZXh0KSAkOWJmNzFlYTI4NzkzZTczOCR2YXIkZm9jdXNFbGVtZW50KG5leHQsIHRydWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV4dCAhPT0gbnVsbCAmJiBuZXh0ICE9PSB2b2lkIDAgPyBuZXh0IDogbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRsYXN0KHdhbGtlcikge1xyXG4gICAgbGV0IG5leHQgPSB1bmRlZmluZWQ7XHJcbiAgICBsZXQgbGFzdDtcclxuICAgIGRvIHtcclxuICAgICAgICBsYXN0ID0gd2Fsa2VyLmxhc3RDaGlsZCgpO1xyXG4gICAgICAgIGlmIChsYXN0KSBuZXh0ID0gbGFzdDtcclxuICAgIH13aGlsZSAobGFzdCk7XHJcbiAgICByZXR1cm4gbmV4dDtcclxufVxyXG5jbGFzcyAkOWJmNzFlYTI4NzkzZTczOCR2YXIkVHJlZSB7XHJcbiAgICBnZXQgc2l6ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mYXN0TWFwLnNpemU7XHJcbiAgICB9XHJcbiAgICBnZXRUcmVlTm9kZShkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmFzdE1hcC5nZXQoZGF0YSk7XHJcbiAgICB9XHJcbiAgICBhZGRUcmVlTm9kZShzY29wZVJlZiwgcGFyZW50LCBub2RlVG9SZXN0b3JlKSB7XHJcbiAgICAgICAgbGV0IHBhcmVudE5vZGUgPSB0aGlzLmZhc3RNYXAuZ2V0KHBhcmVudCAhPT0gbnVsbCAmJiBwYXJlbnQgIT09IHZvaWQgMCA/IHBhcmVudCA6IG51bGwpO1xyXG4gICAgICAgIGlmICghcGFyZW50Tm9kZSkgcmV0dXJuO1xyXG4gICAgICAgIGxldCBub2RlID0gbmV3ICQ5YmY3MWVhMjg3OTNlNzM4JHZhciRUcmVlTm9kZSh7XHJcbiAgICAgICAgICAgIHNjb3BlUmVmOiBzY29wZVJlZlxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBhcmVudE5vZGUuYWRkQ2hpbGQobm9kZSk7XHJcbiAgICAgICAgbm9kZS5wYXJlbnQgPSBwYXJlbnROb2RlO1xyXG4gICAgICAgIHRoaXMuZmFzdE1hcC5zZXQoc2NvcGVSZWYsIG5vZGUpO1xyXG4gICAgICAgIGlmIChub2RlVG9SZXN0b3JlKSBub2RlLm5vZGVUb1Jlc3RvcmUgPSBub2RlVG9SZXN0b3JlO1xyXG4gICAgfVxyXG4gICAgYWRkTm9kZShub2RlKSB7XHJcbiAgICAgICAgdGhpcy5mYXN0TWFwLnNldChub2RlLnNjb3BlUmVmLCBub2RlKTtcclxuICAgIH1cclxuICAgIHJlbW92ZVRyZWVOb2RlKHNjb3BlUmVmKSB7XHJcbiAgICAgICAgLy8gbmV2ZXIgcmVtb3ZlIHRoZSByb290XHJcbiAgICAgICAgaWYgKHNjb3BlUmVmID09PSBudWxsKSByZXR1cm47XHJcbiAgICAgICAgbGV0IG5vZGUgPSB0aGlzLmZhc3RNYXAuZ2V0KHNjb3BlUmVmKTtcclxuICAgICAgICBpZiAoIW5vZGUpIHJldHVybjtcclxuICAgICAgICBsZXQgcGFyZW50Tm9kZSA9IG5vZGUucGFyZW50O1xyXG4gICAgICAgIC8vIHdoZW4gd2UgcmVtb3ZlIGEgc2NvcGUsIGNoZWNrIGlmIGFueSBzaWJsaW5nIHNjb3BlcyBhcmUgdHJ5aW5nIHRvIHJlc3RvcmUgZm9jdXMgdG8gc29tZXRoaW5nIGluc2lkZSB0aGUgc2NvcGUgd2UncmUgcmVtb3ZpbmdcclxuICAgICAgICAvLyBpZiB3ZSBhcmUsIHRoZW4gcmVwbGFjZSB0aGUgc2libGluZ3MgcmVzdG9yZSB3aXRoIHRoZSByZXN0b3JlIGZyb20gdGhlIHNjb3BlIHdlJ3JlIHJlbW92aW5nXHJcbiAgICAgICAgZm9yIChsZXQgY3VycmVudCBvZiB0aGlzLnRyYXZlcnNlKCkpaWYgKGN1cnJlbnQgIT09IG5vZGUgJiYgbm9kZS5ub2RlVG9SZXN0b3JlICYmIGN1cnJlbnQubm9kZVRvUmVzdG9yZSAmJiBub2RlLnNjb3BlUmVmICYmIG5vZGUuc2NvcGVSZWYuY3VycmVudCAmJiAkOWJmNzFlYTI4NzkzZTczOCR2YXIkaXNFbGVtZW50SW5TY29wZShjdXJyZW50Lm5vZGVUb1Jlc3RvcmUsIG5vZGUuc2NvcGVSZWYuY3VycmVudCkpIGN1cnJlbnQubm9kZVRvUmVzdG9yZSA9IG5vZGUubm9kZVRvUmVzdG9yZTtcclxuICAgICAgICBsZXQgY2hpbGRyZW4gPSBub2RlLmNoaWxkcmVuO1xyXG4gICAgICAgIGlmIChwYXJlbnROb2RlKSB7XHJcbiAgICAgICAgICAgIHBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XHJcbiAgICAgICAgICAgIGlmIChjaGlsZHJlbi5zaXplID4gMCkgY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpPT5wYXJlbnROb2RlICYmIHBhcmVudE5vZGUuYWRkQ2hpbGQoY2hpbGQpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5mYXN0TWFwLmRlbGV0ZShub2RlLnNjb3BlUmVmKTtcclxuICAgIH1cclxuICAgIC8vIFByZSBPcmRlciBEZXB0aCBGaXJzdFxyXG4gICAgKnRyYXZlcnNlKG5vZGUgPSB0aGlzLnJvb3QpIHtcclxuICAgICAgICBpZiAobm9kZS5zY29wZVJlZiAhPSBudWxsKSB5aWVsZCBub2RlO1xyXG4gICAgICAgIGlmIChub2RlLmNoaWxkcmVuLnNpemUgPiAwKSBmb3IgKGxldCBjaGlsZCBvZiBub2RlLmNoaWxkcmVuKXlpZWxkKiB0aGlzLnRyYXZlcnNlKGNoaWxkKTtcclxuICAgIH1cclxuICAgIGNsb25lKCkge1xyXG4gICAgICAgIHZhciBfbm9kZV9wYXJlbnQ7XHJcbiAgICAgICAgbGV0IG5ld1RyZWUgPSBuZXcgJDliZjcxZWEyODc5M2U3MzgkdmFyJFRyZWUoKTtcclxuICAgICAgICB2YXIgX25vZGVfcGFyZW50X3Njb3BlUmVmO1xyXG4gICAgICAgIGZvciAobGV0IG5vZGUgb2YgdGhpcy50cmF2ZXJzZSgpKW5ld1RyZWUuYWRkVHJlZU5vZGUobm9kZS5zY29wZVJlZiwgKF9ub2RlX3BhcmVudF9zY29wZVJlZiA9IChfbm9kZV9wYXJlbnQgPSBub2RlLnBhcmVudCkgPT09IG51bGwgfHwgX25vZGVfcGFyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbm9kZV9wYXJlbnQuc2NvcGVSZWYpICE9PSBudWxsICYmIF9ub2RlX3BhcmVudF9zY29wZVJlZiAhPT0gdm9pZCAwID8gX25vZGVfcGFyZW50X3Njb3BlUmVmIDogbnVsbCwgbm9kZS5ub2RlVG9SZXN0b3JlKTtcclxuICAgICAgICByZXR1cm4gbmV3VHJlZTtcclxuICAgIH1cclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgdGhpcy5mYXN0TWFwID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMucm9vdCA9IG5ldyAkOWJmNzFlYTI4NzkzZTczOCR2YXIkVHJlZU5vZGUoe1xyXG4gICAgICAgICAgICBzY29wZVJlZjogbnVsbFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZmFzdE1hcC5zZXQobnVsbCwgdGhpcy5yb290KTtcclxuICAgIH1cclxufVxyXG5jbGFzcyAkOWJmNzFlYTI4NzkzZTczOCR2YXIkVHJlZU5vZGUge1xyXG4gICAgYWRkQ2hpbGQobm9kZSkge1xyXG4gICAgICAgIHRoaXMuY2hpbGRyZW4uYWRkKG5vZGUpO1xyXG4gICAgICAgIG5vZGUucGFyZW50ID0gdGhpcztcclxuICAgIH1cclxuICAgIHJlbW92ZUNoaWxkKG5vZGUpIHtcclxuICAgICAgICB0aGlzLmNoaWxkcmVuLmRlbGV0ZShub2RlKTtcclxuICAgICAgICBub2RlLnBhcmVudCA9IHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKXtcclxuICAgICAgICB0aGlzLmNoaWxkcmVuID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMuY29udGFpbiA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc2NvcGVSZWYgPSBwcm9wcy5zY29wZVJlZjtcclxuICAgIH1cclxufVxyXG5sZXQgJDliZjcxZWEyODc5M2U3MzgkZXhwb3J0JGQwNmZhZTJlZTY4YjEwMWUgPSBuZXcgJDliZjcxZWEyODc5M2U3MzgkdmFyJFRyZWUoKTtcclxuXHJcblxyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxyXG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyBcclxuXHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uICRmN2RjZWZmYzVhZDc3NjhiJGV4cG9ydCQ0ZTMyOGY2MWM1Mzg2ODdmKHByb3BzID0ge30pIHtcclxuICAgIGxldCB7IGF1dG9Gb2N1czogYXV0b0ZvY3VzID0gZmFsc2UsIGlzVGV4dElucHV0OiBpc1RleHRJbnB1dCwgd2l0aGluOiB3aXRoaW4gfSA9IHByb3BzO1xyXG4gICAgbGV0IHN0YXRlID0gKDAsICQ2bmZGQyR1c2VSZWYpKHtcclxuICAgICAgICBpc0ZvY3VzZWQ6IGZhbHNlLFxyXG4gICAgICAgIGlzRm9jdXNWaXNpYmxlOiBhdXRvRm9jdXMgfHwgKDAsICQ2bmZGQyRpc0ZvY3VzVmlzaWJsZSkoKVxyXG4gICAgfSk7XHJcbiAgICBsZXQgW2lzRm9jdXNlZCwgc2V0Rm9jdXNlZF0gPSAoMCwgJDZuZkZDJHVzZVN0YXRlKShmYWxzZSk7XHJcbiAgICBsZXQgW2lzRm9jdXNWaXNpYmxlU3RhdGUsIHNldEZvY3VzVmlzaWJsZV0gPSAoMCwgJDZuZkZDJHVzZVN0YXRlKSgoKT0+c3RhdGUuY3VycmVudC5pc0ZvY3VzZWQgJiYgc3RhdGUuY3VycmVudC5pc0ZvY3VzVmlzaWJsZSk7XHJcbiAgICBsZXQgdXBkYXRlU3RhdGUgPSAoMCwgJDZuZkZDJHVzZUNhbGxiYWNrKSgoKT0+c2V0Rm9jdXNWaXNpYmxlKHN0YXRlLmN1cnJlbnQuaXNGb2N1c2VkICYmIHN0YXRlLmN1cnJlbnQuaXNGb2N1c1Zpc2libGUpLCBbXSk7XHJcbiAgICBsZXQgb25Gb2N1c0NoYW5nZSA9ICgwLCAkNm5mRkMkdXNlQ2FsbGJhY2spKChpc0ZvY3VzZWQpPT57XHJcbiAgICAgICAgc3RhdGUuY3VycmVudC5pc0ZvY3VzZWQgPSBpc0ZvY3VzZWQ7XHJcbiAgICAgICAgc2V0Rm9jdXNlZChpc0ZvY3VzZWQpO1xyXG4gICAgICAgIHVwZGF0ZVN0YXRlKCk7XHJcbiAgICB9LCBbXHJcbiAgICAgICAgdXBkYXRlU3RhdGVcclxuICAgIF0pO1xyXG4gICAgKDAsICQ2bmZGQyR1c2VGb2N1c1Zpc2libGVMaXN0ZW5lcikoKGlzRm9jdXNWaXNpYmxlKT0+e1xyXG4gICAgICAgIHN0YXRlLmN1cnJlbnQuaXNGb2N1c1Zpc2libGUgPSBpc0ZvY3VzVmlzaWJsZTtcclxuICAgICAgICB1cGRhdGVTdGF0ZSgpO1xyXG4gICAgfSwgW10sIHtcclxuICAgICAgICBpc1RleHRJbnB1dDogaXNUZXh0SW5wdXRcclxuICAgIH0pO1xyXG4gICAgbGV0IHsgZm9jdXNQcm9wczogZm9jdXNQcm9wcyB9ID0gKDAsICQ2bmZGQyR1c2VGb2N1cykoe1xyXG4gICAgICAgIGlzRGlzYWJsZWQ6IHdpdGhpbixcclxuICAgICAgICBvbkZvY3VzQ2hhbmdlOiBvbkZvY3VzQ2hhbmdlXHJcbiAgICB9KTtcclxuICAgIGxldCB7IGZvY3VzV2l0aGluUHJvcHM6IGZvY3VzV2l0aGluUHJvcHMgfSA9ICgwLCAkNm5mRkMkdXNlRm9jdXNXaXRoaW4pKHtcclxuICAgICAgICBpc0Rpc2FibGVkOiAhd2l0aGluLFxyXG4gICAgICAgIG9uRm9jdXNXaXRoaW5DaGFuZ2U6IG9uRm9jdXNDaGFuZ2VcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBpc0ZvY3VzZWQ6IGlzRm9jdXNlZCxcclxuICAgICAgICBpc0ZvY3VzVmlzaWJsZTogaXNGb2N1c1Zpc2libGVTdGF0ZSxcclxuICAgICAgICBmb2N1c1Byb3BzOiB3aXRoaW4gPyBmb2N1c1dpdGhpblByb3BzIDogZm9jdXNQcm9wc1xyXG4gICAgfTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uICQ5MDc3MTg3MDhlYWI2OGFmJGV4cG9ydCQxYTM4YjRhZDdmNTc4ZTFkKHByb3BzKSB7XHJcbiAgICBsZXQgeyBjaGlsZHJlbjogY2hpbGRyZW4sIGZvY3VzQ2xhc3M6IGZvY3VzQ2xhc3MsIGZvY3VzUmluZ0NsYXNzOiBmb2N1c1JpbmdDbGFzcyB9ID0gcHJvcHM7XHJcbiAgICBsZXQgeyBpc0ZvY3VzZWQ6IGlzRm9jdXNlZCwgaXNGb2N1c1Zpc2libGU6IGlzRm9jdXNWaXNpYmxlLCBmb2N1c1Byb3BzOiBmb2N1c1Byb3BzIH0gPSAoMCwgJGY3ZGNlZmZjNWFkNzc2OGIkZXhwb3J0JDRlMzI4ZjYxYzUzODY4N2YpKHByb3BzKTtcclxuICAgIGxldCBjaGlsZCA9ICgwLCAkNm5mRkMkcmVhY3QpLkNoaWxkcmVuLm9ubHkoY2hpbGRyZW4pO1xyXG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi8gKDAsICQ2bmZGQyRyZWFjdCkuY2xvbmVFbGVtZW50KGNoaWxkLCAoMCwgJDZuZkZDJG1lcmdlUHJvcHMpKGNoaWxkLnByb3BzLCB7XHJcbiAgICAgICAgLi4uZm9jdXNQcm9wcyxcclxuICAgICAgICBjbGFzc05hbWU6ICgwLCAkNm5mRkMkY2xzeCkoe1xyXG4gICAgICAgICAgICBbZm9jdXNDbGFzcyB8fCBcIlwiXTogaXNGb2N1c2VkLFxyXG4gICAgICAgICAgICBbZm9jdXNSaW5nQ2xhc3MgfHwgXCJcIl06IGlzRm9jdXNWaXNpYmxlXHJcbiAgICAgICAgfSlcclxuICAgIH0pKTtcclxufVxyXG5cclxuXHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIFxyXG5cclxuXHJcblxyXG5sZXQgJGU2YWZiZDgzZmU2ZWJiZDIkdmFyJEZvY3VzYWJsZUNvbnRleHQgPSAvKiNfX1BVUkVfXyovICgwLCAkNm5mRkMkcmVhY3QpLmNyZWF0ZUNvbnRleHQobnVsbCk7XHJcbmZ1bmN0aW9uICRlNmFmYmQ4M2ZlNmViYmQyJHZhciR1c2VGb2N1c2FibGVDb250ZXh0KHJlZikge1xyXG4gICAgbGV0IGNvbnRleHQgPSAoMCwgJDZuZkZDJHVzZUNvbnRleHQpKCRlNmFmYmQ4M2ZlNmViYmQyJHZhciRGb2N1c2FibGVDb250ZXh0KSB8fCB7fTtcclxuICAgICgwLCAkNm5mRkMkdXNlU3luY1JlZikoY29udGV4dCwgcmVmKTtcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxyXG4gICAgbGV0IHsgcmVmOiBfLCAuLi5vdGhlclByb3BzIH0gPSBjb250ZXh0O1xyXG4gICAgcmV0dXJuIG90aGVyUHJvcHM7XHJcbn1cclxuLyoqXHJcbiAqIFByb3ZpZGVzIERPTSBwcm9wcyB0byB0aGUgbmVhcmVzdCBmb2N1c2FibGUgY2hpbGQuXHJcbiAqLyBmdW5jdGlvbiAkZTZhZmJkODNmZTZlYmJkMiR2YXIkRm9jdXNhYmxlUHJvdmlkZXIocHJvcHMsIHJlZikge1xyXG4gICAgbGV0IHsgY2hpbGRyZW46IGNoaWxkcmVuLCAuLi5vdGhlclByb3BzIH0gPSBwcm9wcztcclxuICAgIGxldCBvYmpSZWYgPSAoMCwgJDZuZkZDJHVzZU9iamVjdFJlZikocmVmKTtcclxuICAgIGxldCBjb250ZXh0ID0ge1xyXG4gICAgICAgIC4uLm90aGVyUHJvcHMsXHJcbiAgICAgICAgcmVmOiBvYmpSZWZcclxuICAgIH07XHJcbiAgICByZXR1cm4gLyojX19QVVJFX18qLyAoMCwgJDZuZkZDJHJlYWN0KS5jcmVhdGVFbGVtZW50KCRlNmFmYmQ4M2ZlNmViYmQyJHZhciRGb2N1c2FibGVDb250ZXh0LlByb3ZpZGVyLCB7XHJcbiAgICAgICAgdmFsdWU6IGNvbnRleHRcclxuICAgIH0sIGNoaWxkcmVuKTtcclxufVxyXG5sZXQgJGU2YWZiZDgzZmU2ZWJiZDIkZXhwb3J0JDEzZjMyMDJhM2U1ZGRkNSA9IC8qI19fUFVSRV9fKi8gKDAsICQ2bmZGQyRyZWFjdCkuZm9yd2FyZFJlZigkZTZhZmJkODNmZTZlYmJkMiR2YXIkRm9jdXNhYmxlUHJvdmlkZXIpO1xyXG5mdW5jdGlvbiAkZTZhZmJkODNmZTZlYmJkMiRleHBvcnQkNGMwMTRkZTdjODk0MGI0Yyhwcm9wcywgZG9tUmVmKSB7XHJcbiAgICBsZXQgeyBmb2N1c1Byb3BzOiBmb2N1c1Byb3BzIH0gPSAoMCwgJDZuZkZDJHVzZUZvY3VzKShwcm9wcyk7XHJcbiAgICBsZXQgeyBrZXlib2FyZFByb3BzOiBrZXlib2FyZFByb3BzIH0gPSAoMCwgJDZuZkZDJHVzZUtleWJvYXJkKShwcm9wcyk7XHJcbiAgICBsZXQgaW50ZXJhY3Rpb25zID0gKDAsICQ2bmZGQyRtZXJnZVByb3BzKShmb2N1c1Byb3BzLCBrZXlib2FyZFByb3BzKTtcclxuICAgIGxldCBkb21Qcm9wcyA9ICRlNmFmYmQ4M2ZlNmViYmQyJHZhciR1c2VGb2N1c2FibGVDb250ZXh0KGRvbVJlZik7XHJcbiAgICBsZXQgaW50ZXJhY3Rpb25Qcm9wcyA9IHByb3BzLmlzRGlzYWJsZWQgPyB7fSA6IGRvbVByb3BzO1xyXG4gICAgbGV0IGF1dG9Gb2N1c1JlZiA9ICgwLCAkNm5mRkMkdXNlUmVmKShwcm9wcy5hdXRvRm9jdXMpO1xyXG4gICAgKDAsICQ2bmZGQyR1c2VFZmZlY3QpKCgpPT57XHJcbiAgICAgICAgaWYgKGF1dG9Gb2N1c1JlZi5jdXJyZW50ICYmIGRvbVJlZi5jdXJyZW50KSAoMCwgJDZhOTkxOTUzMzJlZGVjOGIkZXhwb3J0JDgwZjNlMTQ3ZDc4MTU3MWMpKGRvbVJlZi5jdXJyZW50KTtcclxuICAgICAgICBhdXRvRm9jdXNSZWYuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgfSwgW1xyXG4gICAgICAgIGRvbVJlZlxyXG4gICAgXSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGZvY3VzYWJsZVByb3BzOiAoMCwgJDZuZkZDJG1lcmdlUHJvcHMpKHtcclxuICAgICAgICAgICAgLi4uaW50ZXJhY3Rpb25zLFxyXG4gICAgICAgICAgICB0YWJJbmRleDogcHJvcHMuZXhjbHVkZUZyb21UYWJPcmRlciAmJiAhcHJvcHMuaXNEaXNhYmxlZCA/IC0xIDogdW5kZWZpbmVkXHJcbiAgICAgICAgfSwgaW50ZXJhY3Rpb25Qcm9wcylcclxuICAgIH07XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDIyIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIFxyXG5cclxuXHJcbmZ1bmN0aW9uICQ4MzAxMzYzNWIwMjRhZTNkJGV4cG9ydCRlYWMxODk1OTkyYjlmM2Q2KHJlZiwgb3B0aW9ucykge1xyXG4gICAgbGV0IGlzRGlzYWJsZWQgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuaXNEaXNhYmxlZDtcclxuICAgIGxldCBbaGFzVGFiYmFibGVDaGlsZCwgc2V0SGFzVGFiYmFibGVDaGlsZF0gPSAoMCwgJDZuZkZDJHVzZVN0YXRlKShmYWxzZSk7XHJcbiAgICAoMCwgJDZuZkZDJHVzZUxheW91dEVmZmVjdCkoKCk9PntcclxuICAgICAgICBpZiAoKHJlZiA9PT0gbnVsbCB8fCByZWYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlZi5jdXJyZW50KSAmJiAhaXNEaXNhYmxlZCkge1xyXG4gICAgICAgICAgICBsZXQgdXBkYXRlID0gKCk9PntcclxuICAgICAgICAgICAgICAgIGlmIChyZWYuY3VycmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB3YWxrZXIgPSAoMCwgJDliZjcxZWEyODc5M2U3MzgkZXhwb3J0JDJkNmVjOGZjMzc1Y2VhZmEpKHJlZi5jdXJyZW50LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmJhYmxlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0SGFzVGFiYmFibGVDaGlsZCghIXdhbGtlci5uZXh0Tm9kZSgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdXBkYXRlKCk7XHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB3aGVuIG5ldyBlbGVtZW50cyBhcmUgaW5zZXJ0ZWQsIG9yIHRoZSB0YWJJbmRleC9kaXNhYmxlZCBhdHRyaWJ1dGUgdXBkYXRlcy5cclxuICAgICAgICAgICAgbGV0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIodXBkYXRlKTtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShyZWYuY3VycmVudCwge1xyXG4gICAgICAgICAgICAgICAgc3VidHJlZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVGaWx0ZXI6IFtcclxuICAgICAgICAgICAgICAgICAgICBcInRhYkluZGV4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJkaXNhYmxlZFwiXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gKCk9PntcclxuICAgICAgICAgICAgICAgIC8vIERpc2Nvbm5lY3QgbXV0YXRpb24gb2JzZXJ2ZXIgd2hlbiBhIFJlYWN0IHVwZGF0ZSBvY2N1cnMgb24gdGhlIHRvcC1sZXZlbCBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgIC8vIHNvIHdlIHVwZGF0ZSBzeW5jaHJvbm91c2x5IGFmdGVyIHJlLXJlbmRlcmluZy4gT3RoZXJ3aXNlIFJlYWN0IHdpbGwgZW1pdCBhY3Qgd2FybmluZ3NcclxuICAgICAgICAgICAgICAgIC8vIGluIHRlc3RzIHNpbmNlIG11dGF0aW9uIG9ic2VydmVycyBmaXJlIGFzeW5jaHJvbm91c2x5LiBUaGUgbXV0YXRpb24gb2JzZXJ2ZXIgaXMgbmVjZXNzYXJ5XHJcbiAgICAgICAgICAgICAgICAvLyBzbyB3ZSBhbHNvIHVwZGF0ZSBpZiBhIGNoaWxkIGNvbXBvbmVudCByZS1yZW5kZXJzIGFuZCBhZGRzL3JlbW92ZXMgc29tZXRoaW5nIHRhYmJhYmxlLlxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlzRGlzYWJsZWQgPyBmYWxzZSA6IGhhc1RhYmJhYmxlQ2hpbGQ7XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbmV4cG9ydCB7JDliZjcxZWEyODc5M2U3MzgkZXhwb3J0JDIwZTQwMjg5NjQxZmJiYjYgYXMgRm9jdXNTY29wZSwgJDliZjcxZWEyODc5M2U3MzgkZXhwb3J0JDEwYzUxNjk3NTVjZTdiZDcgYXMgdXNlRm9jdXNNYW5hZ2VyLCAkOWJmNzFlYTI4NzkzZTczOCRleHBvcnQkMmQ2ZWM4ZmMzNzVjZWFmYSBhcyBnZXRGb2N1c2FibGVUcmVlV2Fsa2VyLCAkOWJmNzFlYTI4NzkzZTczOCRleHBvcnQkYzUyNTFiOWUxMjRiZjI5IGFzIGNyZWF0ZUZvY3VzTWFuYWdlciwgJDliZjcxZWEyODc5M2U3MzgkZXhwb3J0JDEyNTgzOTVmOTliZjljYmYgYXMgaXNFbGVtZW50SW5DaGlsZE9mQWN0aXZlU2NvcGUsICQ5MDc3MTg3MDhlYWI2OGFmJGV4cG9ydCQxYTM4YjRhZDdmNTc4ZTFkIGFzIEZvY3VzUmluZywgJGU2YWZiZDgzZmU2ZWJiZDIkZXhwb3J0JDEzZjMyMDJhM2U1ZGRkNSBhcyBGb2N1c2FibGVQcm92aWRlciwgJGU2YWZiZDgzZmU2ZWJiZDIkZXhwb3J0JDRjMDE0ZGU3Yzg5NDBiNGMgYXMgdXNlRm9jdXNhYmxlLCAkZjdkY2VmZmM1YWQ3NzY4YiRleHBvcnQkNGUzMjhmNjFjNTM4Njg3ZiBhcyB1c2VGb2N1c1JpbmcsICQ2YTk5MTk1MzMyZWRlYzhiJGV4cG9ydCQ4MGYzZTE0N2Q3ODE1NzFjIGFzIGZvY3VzU2FmZWx5LCAkODMwMTM2MzViMDI0YWUzZCRleHBvcnQkZWFjMTg5NTk5MmI5ZjNkNiBhcyB1c2VIYXNUYWJiYWJsZUNoaWxkfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bW9kdWxlLmpzLm1hcFxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-aria/focus/dist/import.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-aria/focus/node_modules/clsx/dist/clsx.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@react-aria/focus/node_modules/clsx/dist/clsx.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clsx: () => (/* binding */ clsx),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nfunction r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (clsx);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvZm9jdXMvbm9kZV9tb2R1bGVzL2Nsc3gvZGlzdC9jbHN4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLGNBQWMsYUFBYSwrQ0FBK0MsZ0RBQWdELGVBQWUsUUFBUSxJQUFJLDBDQUEwQyx5Q0FBeUMsU0FBZ0IsZ0JBQWdCLHdDQUF3QyxJQUFJLG1EQUFtRCxTQUFTLGlFQUFlLElBQUkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9udXRyaS1zbWFydC8uL25vZGVfbW9kdWxlcy9AcmVhY3QtYXJpYS9mb2N1cy9ub2RlX21vZHVsZXMvY2xzeC9kaXN0L2Nsc3gubWpzPzc1OTEiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gcihlKXt2YXIgdCxmLG49XCJcIjtpZihcInN0cmluZ1wiPT10eXBlb2YgZXx8XCJudW1iZXJcIj09dHlwZW9mIGUpbis9ZTtlbHNlIGlmKFwib2JqZWN0XCI9PXR5cGVvZiBlKWlmKEFycmF5LmlzQXJyYXkoZSkpe3ZhciBvPWUubGVuZ3RoO2Zvcih0PTA7dDxvO3QrKyllW3RdJiYoZj1yKGVbdF0pKSYmKG4mJihuKz1cIiBcIiksbis9Zil9ZWxzZSBmb3IoZiBpbiBlKWVbZl0mJihuJiYobis9XCIgXCIpLG4rPWYpO3JldHVybiBufWV4cG9ydCBmdW5jdGlvbiBjbHN4KCl7Zm9yKHZhciBlLHQsZj0wLG49XCJcIixvPWFyZ3VtZW50cy5sZW5ndGg7ZjxvO2YrKykoZT1hcmd1bWVudHNbZl0pJiYodD1yKGUpKSYmKG4mJihuKz1cIiBcIiksbis9dCk7cmV0dXJuIG59ZXhwb3J0IGRlZmF1bHQgY2xzeDsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-aria/focus/node_modules/clsx/dist/clsx.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-aria/i18n/dist/real-module.mjs":
/*!************************************************************!*\
  !*** ./node_modules/@react-aria/i18n/dist/real-module.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   I18nProvider: () => (/* binding */ $18f2051aff69b9bf$export$a54013f0d02a8f82),\n/* harmony export */   useCollator: () => (/* binding */ $325a3faab7a68acd$export$a16aca283550c30d),\n/* harmony export */   useDateFormatter: () => (/* binding */ $896ba0a80a8f4d36$export$85fd5fdf27bacc79),\n/* harmony export */   useFilter: () => (/* binding */ $bb77f239b46e8c72$export$3274cf84b703fff),\n/* harmony export */   useListFormatter: () => (/* binding */ $33bf17300c498528$export$a2f47a3d2973640),\n/* harmony export */   useLocale: () => (/* binding */ $18f2051aff69b9bf$export$43bb16f9c6d9e3f7),\n/* harmony export */   useLocalizedStringDictionary: () => (/* binding */ $fca6afa0e843324b$export$87b761675e8eaa10),\n/* harmony export */   useLocalizedStringFormatter: () => (/* binding */ $fca6afa0e843324b$export$f12b703ca79dfbb1),\n/* harmony export */   useNumberFormatter: () => (/* binding */ $a916eb452884faea$export$b7a616150fdb9f44)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _react_aria_ssr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @react-aria/ssr */ \"(ssr)/./node_modules/@react-aria/ssr/dist/import.mjs\");\n/* harmony import */ var _internationalized_string__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @internationalized/string */ \"(ssr)/./node_modules/@internationalized/string/dist/import.mjs\");\n/* harmony import */ var _internationalized_date__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @internationalized/date */ \"(ssr)/./node_modules/@internationalized/date/dist/import.mjs\");\n/* harmony import */ var _react_aria_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @react-aria/utils */ \"(ssr)/./node_modules/@react-aria/utils/dist/import.mjs\");\n/* harmony import */ var _internationalized_number__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @internationalized/number */ \"(ssr)/./node_modules/@internationalized/number/dist/import.mjs\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ /*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ /*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ // https://en.wikipedia.org/wiki/Right-to-left\r\nconst $148a7a147e38ea7f$var$RTL_SCRIPTS = new Set([\r\n    \"Arab\",\r\n    \"Syrc\",\r\n    \"Samr\",\r\n    \"Mand\",\r\n    \"Thaa\",\r\n    \"Mend\",\r\n    \"Nkoo\",\r\n    \"Adlm\",\r\n    \"Rohg\",\r\n    \"Hebr\"\r\n]);\r\nconst $148a7a147e38ea7f$var$RTL_LANGS = new Set([\r\n    \"ae\",\r\n    \"ar\",\r\n    \"arc\",\r\n    \"bcc\",\r\n    \"bqi\",\r\n    \"ckb\",\r\n    \"dv\",\r\n    \"fa\",\r\n    \"glk\",\r\n    \"he\",\r\n    \"ku\",\r\n    \"mzn\",\r\n    \"nqo\",\r\n    \"pnb\",\r\n    \"ps\",\r\n    \"sd\",\r\n    \"ug\",\r\n    \"ur\",\r\n    \"yi\"\r\n]);\r\nfunction $148a7a147e38ea7f$export$702d680b21cbd764(localeString) {\r\n    // If the Intl.Locale API is available, use it to get the locale's text direction.\r\n    // @ts-ignore\r\n    if (Intl.Locale) {\r\n        let locale = new Intl.Locale(localeString).maximize();\r\n        // Use the text info object to get the direction if possible.\r\n        // @ts-ignore - this was implemented as a property by some browsers before it was standardized as a function.\r\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Locale/getTextInfo\r\n        let textInfo = typeof locale.getTextInfo === \"function\" ? locale.getTextInfo() : locale.textInfo;\r\n        if (textInfo) return textInfo.direction === \"rtl\";\r\n        // Fallback: guess using the script.\r\n        // This is more accurate than guessing by language, since languages can be written in multiple scripts.\r\n        if (locale.script) return $148a7a147e38ea7f$var$RTL_SCRIPTS.has(locale.script);\r\n    }\r\n    // If not, just guess by the language (first part of the locale)\r\n    let lang = localeString.split(\"-\")[0];\r\n    return $148a7a147e38ea7f$var$RTL_LANGS.has(lang);\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n\r\n\r\n// Locale passed from server by PackageLocalizationProvider.\r\nconst $1e5a04cdaf7d1af8$var$localeSymbol = Symbol.for(\"react-aria.i18n.locale\");\r\nfunction $1e5a04cdaf7d1af8$export$f09106e7c6677ec5() {\r\n    let locale = typeof window !== \"undefined\" && window[$1e5a04cdaf7d1af8$var$localeSymbol] || typeof navigator !== \"undefined\" && (navigator.language || navigator.userLanguage) || \"en-US\";\r\n    try {\r\n        // @ts-ignore\r\n        Intl.DateTimeFormat.supportedLocalesOf([\r\n            locale\r\n        ]);\r\n    } catch (_err) {\r\n        locale = \"en-US\";\r\n    }\r\n    return {\r\n        locale: locale,\r\n        direction: (0, $148a7a147e38ea7f$export$702d680b21cbd764)(locale) ? \"rtl\" : \"ltr\"\r\n    };\r\n}\r\nlet $1e5a04cdaf7d1af8$var$currentLocale = $1e5a04cdaf7d1af8$export$f09106e7c6677ec5();\r\nlet $1e5a04cdaf7d1af8$var$listeners = new Set();\r\nfunction $1e5a04cdaf7d1af8$var$updateLocale() {\r\n    $1e5a04cdaf7d1af8$var$currentLocale = $1e5a04cdaf7d1af8$export$f09106e7c6677ec5();\r\n    for (let listener of $1e5a04cdaf7d1af8$var$listeners)listener($1e5a04cdaf7d1af8$var$currentLocale);\r\n}\r\nfunction $1e5a04cdaf7d1af8$export$188ec29ebc2bdc3a() {\r\n    let isSSR = (0, _react_aria_ssr__WEBPACK_IMPORTED_MODULE_1__.useIsSSR)();\r\n    let [defaultLocale, setDefaultLocale] = (0, react__WEBPACK_IMPORTED_MODULE_0__.useState)($1e5a04cdaf7d1af8$var$currentLocale);\r\n    (0, react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\r\n        if ($1e5a04cdaf7d1af8$var$listeners.size === 0) window.addEventListener(\"languagechange\", $1e5a04cdaf7d1af8$var$updateLocale);\r\n        $1e5a04cdaf7d1af8$var$listeners.add(setDefaultLocale);\r\n        return ()=>{\r\n            $1e5a04cdaf7d1af8$var$listeners.delete(setDefaultLocale);\r\n            if ($1e5a04cdaf7d1af8$var$listeners.size === 0) window.removeEventListener(\"languagechange\", $1e5a04cdaf7d1af8$var$updateLocale);\r\n        };\r\n    }, []);\r\n    // We cannot determine the browser's language on the server, so default to\r\n    // en-US. This will be updated after hydration on the client to the correct value.\r\n    if (isSSR) return {\r\n        locale: \"en-US\",\r\n        direction: \"ltr\"\r\n    };\r\n    return defaultLocale;\r\n}\r\n\r\n\r\n\r\nconst $18f2051aff69b9bf$var$I18nContext = /*#__PURE__*/ (0, react__WEBPACK_IMPORTED_MODULE_0__).createContext(null);\r\nfunction $18f2051aff69b9bf$export$a54013f0d02a8f82(props) {\r\n    let { locale: locale, children: children } = props;\r\n    let defaultLocale = (0, $1e5a04cdaf7d1af8$export$188ec29ebc2bdc3a)();\r\n    let value = locale ? {\r\n        locale: locale,\r\n        direction: (0, $148a7a147e38ea7f$export$702d680b21cbd764)(locale) ? \"rtl\" : \"ltr\"\r\n    } : defaultLocale;\r\n    return /*#__PURE__*/ (0, react__WEBPACK_IMPORTED_MODULE_0__).createElement($18f2051aff69b9bf$var$I18nContext.Provider, {\r\n        value: value\r\n    }, children);\r\n}\r\nfunction $18f2051aff69b9bf$export$43bb16f9c6d9e3f7() {\r\n    let defaultLocale = (0, $1e5a04cdaf7d1af8$export$188ec29ebc2bdc3a)();\r\n    let context = (0, react__WEBPACK_IMPORTED_MODULE_0__.useContext)($18f2051aff69b9bf$var$I18nContext);\r\n    return context || defaultLocale;\r\n}\r\n\r\n\r\nvar $2aa2084a6c2b6b4f$exports = {};\r\n\"use strict\";\r\n\r\n\r\n/*\r\n * Copyright 2022 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n\r\n\r\nconst $fca6afa0e843324b$var$cache = new WeakMap();\r\nfunction $fca6afa0e843324b$var$getCachedDictionary(strings) {\r\n    let dictionary = $fca6afa0e843324b$var$cache.get(strings);\r\n    if (!dictionary) {\r\n        dictionary = new (0, _internationalized_string__WEBPACK_IMPORTED_MODULE_2__.LocalizedStringDictionary)(strings);\r\n        $fca6afa0e843324b$var$cache.set(strings, dictionary);\r\n    }\r\n    return dictionary;\r\n}\r\nfunction $fca6afa0e843324b$export$87b761675e8eaa10(strings, packageName) {\r\n    return packageName && (0, _internationalized_string__WEBPACK_IMPORTED_MODULE_2__.LocalizedStringDictionary).getGlobalDictionaryForPackage(packageName) || $fca6afa0e843324b$var$getCachedDictionary(strings);\r\n}\r\nfunction $fca6afa0e843324b$export$f12b703ca79dfbb1(strings, packageName) {\r\n    let { locale: locale } = (0, $18f2051aff69b9bf$export$43bb16f9c6d9e3f7)();\r\n    let dictionary = $fca6afa0e843324b$export$87b761675e8eaa10(strings, packageName);\r\n    return (0, react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>new (0, _internationalized_string__WEBPACK_IMPORTED_MODULE_2__.LocalizedStringFormatter)(locale, dictionary), [\r\n        locale,\r\n        dictionary\r\n    ]);\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n\r\nfunction $33bf17300c498528$export$a2f47a3d2973640(options = {}) {\r\n    let { locale: locale } = (0, $18f2051aff69b9bf$export$43bb16f9c6d9e3f7)();\r\n    return (0, react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>new Intl.ListFormat(locale, options), [\r\n        locale,\r\n        options\r\n    ]);\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n\r\n\r\n\r\nfunction $896ba0a80a8f4d36$export$85fd5fdf27bacc79(options) {\r\n    // Reuse last options object if it is shallowly equal, which allows the useMemo result to also be reused.\r\n    options = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_3__.useDeepMemo)(options !== null && options !== void 0 ? options : {}, $896ba0a80a8f4d36$var$isEqual);\r\n    let { locale: locale } = (0, $18f2051aff69b9bf$export$43bb16f9c6d9e3f7)();\r\n    return (0, react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>new (0, _internationalized_date__WEBPACK_IMPORTED_MODULE_4__.DateFormatter)(locale, options), [\r\n        locale,\r\n        options\r\n    ]);\r\n}\r\nfunction $896ba0a80a8f4d36$var$isEqual(a, b) {\r\n    if (a === b) return true;\r\n    let aKeys = Object.keys(a);\r\n    let bKeys = Object.keys(b);\r\n    if (aKeys.length !== bKeys.length) return false;\r\n    for (let key of aKeys){\r\n        if (b[key] !== a[key]) return false;\r\n    }\r\n    return true;\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n\r\n\r\nfunction $a916eb452884faea$export$b7a616150fdb9f44(options = {}) {\r\n    let { locale: locale } = (0, $18f2051aff69b9bf$export$43bb16f9c6d9e3f7)();\r\n    return (0, react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>new (0, _internationalized_number__WEBPACK_IMPORTED_MODULE_5__.NumberFormatter)(locale, options), [\r\n        locale,\r\n        options\r\n    ]);\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\nlet $325a3faab7a68acd$var$cache = new Map();\r\nfunction $325a3faab7a68acd$export$a16aca283550c30d(options) {\r\n    let { locale: locale } = (0, $18f2051aff69b9bf$export$43bb16f9c6d9e3f7)();\r\n    let cacheKey = locale + (options ? Object.entries(options).sort((a, b)=>a[0] < b[0] ? -1 : 1).join() : \"\");\r\n    if ($325a3faab7a68acd$var$cache.has(cacheKey)) return $325a3faab7a68acd$var$cache.get(cacheKey);\r\n    let formatter = new Intl.Collator(locale, options);\r\n    $325a3faab7a68acd$var$cache.set(cacheKey, formatter);\r\n    return formatter;\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n\r\nfunction $bb77f239b46e8c72$export$3274cf84b703fff(options) {\r\n    let collator = (0, $325a3faab7a68acd$export$a16aca283550c30d)({\r\n        usage: \"search\",\r\n        ...options\r\n    });\r\n    // TODO(later): these methods don't currently support the ignorePunctuation option.\r\n    let startsWith = (0, react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((string, substring)=>{\r\n        if (substring.length === 0) return true;\r\n        // Normalize both strings so we can slice safely\r\n        // TODO: take into account the ignorePunctuation option as well...\r\n        string = string.normalize(\"NFC\");\r\n        substring = substring.normalize(\"NFC\");\r\n        return collator.compare(string.slice(0, substring.length), substring) === 0;\r\n    }, [\r\n        collator\r\n    ]);\r\n    let endsWith = (0, react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((string, substring)=>{\r\n        if (substring.length === 0) return true;\r\n        string = string.normalize(\"NFC\");\r\n        substring = substring.normalize(\"NFC\");\r\n        return collator.compare(string.slice(-substring.length), substring) === 0;\r\n    }, [\r\n        collator\r\n    ]);\r\n    let contains = (0, react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((string, substring)=>{\r\n        if (substring.length === 0) return true;\r\n        string = string.normalize(\"NFC\");\r\n        substring = substring.normalize(\"NFC\");\r\n        let scan = 0;\r\n        let sliceLen = substring.length;\r\n        for(; scan + sliceLen <= string.length; scan++){\r\n            let slice = string.slice(scan, scan + sliceLen);\r\n            if (collator.compare(substring, slice) === 0) return true;\r\n        }\r\n        return false;\r\n    }, [\r\n        collator\r\n    ]);\r\n    return (0, react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>({\r\n            startsWith: startsWith,\r\n            endsWith: endsWith,\r\n            contains: contains\r\n        }), [\r\n        startsWith,\r\n        endsWith,\r\n        contains\r\n    ]);\r\n}\r\n\r\n\r\n\r\n\r\n\r\n//# sourceMappingURL=real-module.js.map\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvaTE4bi9kaXN0L3JlYWwtbW9kdWxlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBOEw7QUFDbEk7QUFDeUc7QUFDdkY7QUFDVjtBQUNnQjtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IscURBQWU7QUFDbkMsZ0RBQWdELDJDQUFlO0FBQy9ELFFBQVEsNENBQWdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELGtDQUFZO0FBQ3hFO0FBQ0EsVUFBVSxxQ0FBcUM7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sNkJBQTZCLGtDQUFZO0FBQ3pDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw2Q0FBaUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsZ0ZBQWdDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsZ0ZBQWdDO0FBQzlEO0FBQ0E7QUFDQSxVQUFVLGlCQUFpQjtBQUMzQjtBQUNBLGVBQWUsMENBQWMsY0FBYywrRUFBK0I7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQThEO0FBQzlELFVBQVUsaUJBQWlCO0FBQzNCLGVBQWUsMENBQWM7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMERBQWtCLHVEQUF1RDtBQUMzRixVQUFVLGlCQUFpQjtBQUMzQixlQUFlLDBDQUFjLGNBQWMsa0VBQW9CO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0Q7QUFDL0QsVUFBVSxpQkFBaUI7QUFDM0IsZUFBZSwwQ0FBYyxjQUFjLHNFQUFzQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsaUJBQWlCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHlCQUF5Qiw4Q0FBa0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSx1QkFBdUIsOENBQWtCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSx1QkFBdUIsOENBQWtCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGtDQUFrQztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsZUFBZSwwQ0FBYztBQUM3QjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQytqQjtBQUMvakIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9udXRyaS1zbWFydC8uL25vZGVfbW9kdWxlcy9AcmVhY3QtYXJpYS9pMThuL2Rpc3QvcmVhbC1tb2R1bGUubWpzPzJjZTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICRpRkFEZyRyZWFjdCwge3VzZUNvbnRleHQgYXMgJGlGQURnJHVzZUNvbnRleHQsIHVzZVN0YXRlIGFzICRpRkFEZyR1c2VTdGF0ZSwgdXNlRWZmZWN0IGFzICRpRkFEZyR1c2VFZmZlY3QsIHVzZU1lbW8gYXMgJGlGQURnJHVzZU1lbW8sIHVzZUNhbGxiYWNrIGFzICRpRkFEZyR1c2VDYWxsYmFja30gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7dXNlSXNTU1IgYXMgJGlGQURnJHVzZUlzU1NSfSBmcm9tIFwiQHJlYWN0LWFyaWEvc3NyXCI7XHJcbmltcG9ydCB7TG9jYWxpemVkU3RyaW5nRGljdGlvbmFyeSBhcyAkaUZBRGckTG9jYWxpemVkU3RyaW5nRGljdGlvbmFyeSwgTG9jYWxpemVkU3RyaW5nRm9ybWF0dGVyIGFzICRpRkFEZyRMb2NhbGl6ZWRTdHJpbmdGb3JtYXR0ZXJ9IGZyb20gXCJAaW50ZXJuYXRpb25hbGl6ZWQvc3RyaW5nXCI7XHJcbmltcG9ydCB7RGF0ZUZvcm1hdHRlciBhcyAkaUZBRGckRGF0ZUZvcm1hdHRlcn0gZnJvbSBcIkBpbnRlcm5hdGlvbmFsaXplZC9kYXRlXCI7XHJcbmltcG9ydCB7dXNlRGVlcE1lbW8gYXMgJGlGQURnJHVzZURlZXBNZW1vfSBmcm9tIFwiQHJlYWN0LWFyaWEvdXRpbHNcIjtcclxuaW1wb3J0IHtOdW1iZXJGb3JtYXR0ZXIgYXMgJGlGQURnJE51bWJlckZvcm1hdHRlcn0gZnJvbSBcIkBpbnRlcm5hdGlvbmFsaXplZC9udW1iZXJcIjtcclxuXHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIC8qXHJcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIC8qXHJcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIC8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1JpZ2h0LXRvLWxlZnRcclxuY29uc3QgJDE0OGE3YTE0N2UzOGVhN2YkdmFyJFJUTF9TQ1JJUFRTID0gbmV3IFNldChbXHJcbiAgICBcIkFyYWJcIixcclxuICAgIFwiU3lyY1wiLFxyXG4gICAgXCJTYW1yXCIsXHJcbiAgICBcIk1hbmRcIixcclxuICAgIFwiVGhhYVwiLFxyXG4gICAgXCJNZW5kXCIsXHJcbiAgICBcIk5rb29cIixcclxuICAgIFwiQWRsbVwiLFxyXG4gICAgXCJSb2hnXCIsXHJcbiAgICBcIkhlYnJcIlxyXG5dKTtcclxuY29uc3QgJDE0OGE3YTE0N2UzOGVhN2YkdmFyJFJUTF9MQU5HUyA9IG5ldyBTZXQoW1xyXG4gICAgXCJhZVwiLFxyXG4gICAgXCJhclwiLFxyXG4gICAgXCJhcmNcIixcclxuICAgIFwiYmNjXCIsXHJcbiAgICBcImJxaVwiLFxyXG4gICAgXCJja2JcIixcclxuICAgIFwiZHZcIixcclxuICAgIFwiZmFcIixcclxuICAgIFwiZ2xrXCIsXHJcbiAgICBcImhlXCIsXHJcbiAgICBcImt1XCIsXHJcbiAgICBcIm16blwiLFxyXG4gICAgXCJucW9cIixcclxuICAgIFwicG5iXCIsXHJcbiAgICBcInBzXCIsXHJcbiAgICBcInNkXCIsXHJcbiAgICBcInVnXCIsXHJcbiAgICBcInVyXCIsXHJcbiAgICBcInlpXCJcclxuXSk7XHJcbmZ1bmN0aW9uICQxNDhhN2ExNDdlMzhlYTdmJGV4cG9ydCQ3MDJkNjgwYjIxY2JkNzY0KGxvY2FsZVN0cmluZykge1xyXG4gICAgLy8gSWYgdGhlIEludGwuTG9jYWxlIEFQSSBpcyBhdmFpbGFibGUsIHVzZSBpdCB0byBnZXQgdGhlIGxvY2FsZSdzIHRleHQgZGlyZWN0aW9uLlxyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgaWYgKEludGwuTG9jYWxlKSB7XHJcbiAgICAgICAgbGV0IGxvY2FsZSA9IG5ldyBJbnRsLkxvY2FsZShsb2NhbGVTdHJpbmcpLm1heGltaXplKCk7XHJcbiAgICAgICAgLy8gVXNlIHRoZSB0ZXh0IGluZm8gb2JqZWN0IHRvIGdldCB0aGUgZGlyZWN0aW9uIGlmIHBvc3NpYmxlLlxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmUgLSB0aGlzIHdhcyBpbXBsZW1lbnRlZCBhcyBhIHByb3BlcnR5IGJ5IHNvbWUgYnJvd3NlcnMgYmVmb3JlIGl0IHdhcyBzdGFuZGFyZGl6ZWQgYXMgYSBmdW5jdGlvbi5cclxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9JbnRsL0xvY2FsZS9nZXRUZXh0SW5mb1xyXG4gICAgICAgIGxldCB0ZXh0SW5mbyA9IHR5cGVvZiBsb2NhbGUuZ2V0VGV4dEluZm8gPT09IFwiZnVuY3Rpb25cIiA/IGxvY2FsZS5nZXRUZXh0SW5mbygpIDogbG9jYWxlLnRleHRJbmZvO1xyXG4gICAgICAgIGlmICh0ZXh0SW5mbykgcmV0dXJuIHRleHRJbmZvLmRpcmVjdGlvbiA9PT0gXCJydGxcIjtcclxuICAgICAgICAvLyBGYWxsYmFjazogZ3Vlc3MgdXNpbmcgdGhlIHNjcmlwdC5cclxuICAgICAgICAvLyBUaGlzIGlzIG1vcmUgYWNjdXJhdGUgdGhhbiBndWVzc2luZyBieSBsYW5ndWFnZSwgc2luY2UgbGFuZ3VhZ2VzIGNhbiBiZSB3cml0dGVuIGluIG11bHRpcGxlIHNjcmlwdHMuXHJcbiAgICAgICAgaWYgKGxvY2FsZS5zY3JpcHQpIHJldHVybiAkMTQ4YTdhMTQ3ZTM4ZWE3ZiR2YXIkUlRMX1NDUklQVFMuaGFzKGxvY2FsZS5zY3JpcHQpO1xyXG4gICAgfVxyXG4gICAgLy8gSWYgbm90LCBqdXN0IGd1ZXNzIGJ5IHRoZSBsYW5ndWFnZSAoZmlyc3QgcGFydCBvZiB0aGUgbG9jYWxlKVxyXG4gICAgbGV0IGxhbmcgPSBsb2NhbGVTdHJpbmcuc3BsaXQoXCItXCIpWzBdO1xyXG4gICAgcmV0dXJuICQxNDhhN2ExNDdlMzhlYTdmJHZhciRSVExfTEFOR1MuaGFzKGxhbmcpO1xyXG59XHJcblxyXG5cclxuLypcclxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gXHJcblxyXG5cclxuLy8gTG9jYWxlIHBhc3NlZCBmcm9tIHNlcnZlciBieSBQYWNrYWdlTG9jYWxpemF0aW9uUHJvdmlkZXIuXHJcbmNvbnN0ICQxZTVhMDRjZGFmN2QxYWY4JHZhciRsb2NhbGVTeW1ib2wgPSBTeW1ib2wuZm9yKFwicmVhY3QtYXJpYS5pMThuLmxvY2FsZVwiKTtcclxuZnVuY3Rpb24gJDFlNWEwNGNkYWY3ZDFhZjgkZXhwb3J0JGYwOTEwNmU3YzY2NzdlYzUoKSB7XHJcbiAgICBsZXQgbG9jYWxlID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3dbJDFlNWEwNGNkYWY3ZDFhZjgkdmFyJGxvY2FsZVN5bWJvbF0gfHwgdHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJiAobmF2aWdhdG9yLmxhbmd1YWdlIHx8IG5hdmlnYXRvci51c2VyTGFuZ3VhZ2UpIHx8IFwiZW4tVVNcIjtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIEludGwuRGF0ZVRpbWVGb3JtYXQuc3VwcG9ydGVkTG9jYWxlc09mKFtcclxuICAgICAgICAgICAgbG9jYWxlXHJcbiAgICAgICAgXSk7XHJcbiAgICB9IGNhdGNoIChfZXJyKSB7XHJcbiAgICAgICAgbG9jYWxlID0gXCJlbi1VU1wiO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBsb2NhbGU6IGxvY2FsZSxcclxuICAgICAgICBkaXJlY3Rpb246ICgwLCAkMTQ4YTdhMTQ3ZTM4ZWE3ZiRleHBvcnQkNzAyZDY4MGIyMWNiZDc2NCkobG9jYWxlKSA/IFwicnRsXCIgOiBcImx0clwiXHJcbiAgICB9O1xyXG59XHJcbmxldCAkMWU1YTA0Y2RhZjdkMWFmOCR2YXIkY3VycmVudExvY2FsZSA9ICQxZTVhMDRjZGFmN2QxYWY4JGV4cG9ydCRmMDkxMDZlN2M2Njc3ZWM1KCk7XHJcbmxldCAkMWU1YTA0Y2RhZjdkMWFmOCR2YXIkbGlzdGVuZXJzID0gbmV3IFNldCgpO1xyXG5mdW5jdGlvbiAkMWU1YTA0Y2RhZjdkMWFmOCR2YXIkdXBkYXRlTG9jYWxlKCkge1xyXG4gICAgJDFlNWEwNGNkYWY3ZDFhZjgkdmFyJGN1cnJlbnRMb2NhbGUgPSAkMWU1YTA0Y2RhZjdkMWFmOCRleHBvcnQkZjA5MTA2ZTdjNjY3N2VjNSgpO1xyXG4gICAgZm9yIChsZXQgbGlzdGVuZXIgb2YgJDFlNWEwNGNkYWY3ZDFhZjgkdmFyJGxpc3RlbmVycylsaXN0ZW5lcigkMWU1YTA0Y2RhZjdkMWFmOCR2YXIkY3VycmVudExvY2FsZSk7XHJcbn1cclxuZnVuY3Rpb24gJDFlNWEwNGNkYWY3ZDFhZjgkZXhwb3J0JDE4OGVjMjllYmMyYmRjM2EoKSB7XHJcbiAgICBsZXQgaXNTU1IgPSAoMCwgJGlGQURnJHVzZUlzU1NSKSgpO1xyXG4gICAgbGV0IFtkZWZhdWx0TG9jYWxlLCBzZXREZWZhdWx0TG9jYWxlXSA9ICgwLCAkaUZBRGckdXNlU3RhdGUpKCQxZTVhMDRjZGFmN2QxYWY4JHZhciRjdXJyZW50TG9jYWxlKTtcclxuICAgICgwLCAkaUZBRGckdXNlRWZmZWN0KSgoKT0+e1xyXG4gICAgICAgIGlmICgkMWU1YTA0Y2RhZjdkMWFmOCR2YXIkbGlzdGVuZXJzLnNpemUgPT09IDApIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibGFuZ3VhZ2VjaGFuZ2VcIiwgJDFlNWEwNGNkYWY3ZDFhZjgkdmFyJHVwZGF0ZUxvY2FsZSk7XHJcbiAgICAgICAgJDFlNWEwNGNkYWY3ZDFhZjgkdmFyJGxpc3RlbmVycy5hZGQoc2V0RGVmYXVsdExvY2FsZSk7XHJcbiAgICAgICAgcmV0dXJuICgpPT57XHJcbiAgICAgICAgICAgICQxZTVhMDRjZGFmN2QxYWY4JHZhciRsaXN0ZW5lcnMuZGVsZXRlKHNldERlZmF1bHRMb2NhbGUpO1xyXG4gICAgICAgICAgICBpZiAoJDFlNWEwNGNkYWY3ZDFhZjgkdmFyJGxpc3RlbmVycy5zaXplID09PSAwKSB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxhbmd1YWdlY2hhbmdlXCIsICQxZTVhMDRjZGFmN2QxYWY4JHZhciR1cGRhdGVMb2NhbGUpO1xyXG4gICAgICAgIH07XHJcbiAgICB9LCBbXSk7XHJcbiAgICAvLyBXZSBjYW5ub3QgZGV0ZXJtaW5lIHRoZSBicm93c2VyJ3MgbGFuZ3VhZ2Ugb24gdGhlIHNlcnZlciwgc28gZGVmYXVsdCB0b1xyXG4gICAgLy8gZW4tVVMuIFRoaXMgd2lsbCBiZSB1cGRhdGVkIGFmdGVyIGh5ZHJhdGlvbiBvbiB0aGUgY2xpZW50IHRvIHRoZSBjb3JyZWN0IHZhbHVlLlxyXG4gICAgaWYgKGlzU1NSKSByZXR1cm4ge1xyXG4gICAgICAgIGxvY2FsZTogXCJlbi1VU1wiLFxyXG4gICAgICAgIGRpcmVjdGlvbjogXCJsdHJcIlxyXG4gICAgfTtcclxuICAgIHJldHVybiBkZWZhdWx0TG9jYWxlO1xyXG59XHJcblxyXG5cclxuXHJcbmNvbnN0ICQxOGYyMDUxYWZmNjliOWJmJHZhciRJMThuQ29udGV4dCA9IC8qI19fUFVSRV9fKi8gKDAsICRpRkFEZyRyZWFjdCkuY3JlYXRlQ29udGV4dChudWxsKTtcclxuZnVuY3Rpb24gJDE4ZjIwNTFhZmY2OWI5YmYkZXhwb3J0JGE1NDAxM2YwZDAyYThmODIocHJvcHMpIHtcclxuICAgIGxldCB7IGxvY2FsZTogbG9jYWxlLCBjaGlsZHJlbjogY2hpbGRyZW4gfSA9IHByb3BzO1xyXG4gICAgbGV0IGRlZmF1bHRMb2NhbGUgPSAoMCwgJDFlNWEwNGNkYWY3ZDFhZjgkZXhwb3J0JDE4OGVjMjllYmMyYmRjM2EpKCk7XHJcbiAgICBsZXQgdmFsdWUgPSBsb2NhbGUgPyB7XHJcbiAgICAgICAgbG9jYWxlOiBsb2NhbGUsXHJcbiAgICAgICAgZGlyZWN0aW9uOiAoMCwgJDE0OGE3YTE0N2UzOGVhN2YkZXhwb3J0JDcwMmQ2ODBiMjFjYmQ3NjQpKGxvY2FsZSkgPyBcInJ0bFwiIDogXCJsdHJcIlxyXG4gICAgfSA6IGRlZmF1bHRMb2NhbGU7XHJcbiAgICByZXR1cm4gLyojX19QVVJFX18qLyAoMCwgJGlGQURnJHJlYWN0KS5jcmVhdGVFbGVtZW50KCQxOGYyMDUxYWZmNjliOWJmJHZhciRJMThuQ29udGV4dC5Qcm92aWRlciwge1xyXG4gICAgICAgIHZhbHVlOiB2YWx1ZVxyXG4gICAgfSwgY2hpbGRyZW4pO1xyXG59XHJcbmZ1bmN0aW9uICQxOGYyMDUxYWZmNjliOWJmJGV4cG9ydCQ0M2JiMTZmOWM2ZDllM2Y3KCkge1xyXG4gICAgbGV0IGRlZmF1bHRMb2NhbGUgPSAoMCwgJDFlNWEwNGNkYWY3ZDFhZjgkZXhwb3J0JDE4OGVjMjllYmMyYmRjM2EpKCk7XHJcbiAgICBsZXQgY29udGV4dCA9ICgwLCAkaUZBRGckdXNlQ29udGV4dCkoJDE4ZjIwNTFhZmY2OWI5YmYkdmFyJEkxOG5Db250ZXh0KTtcclxuICAgIHJldHVybiBjb250ZXh0IHx8IGRlZmF1bHRMb2NhbGU7XHJcbn1cclxuXHJcblxyXG52YXIgJDJhYTIwODRhNmMyYjZiNGYkZXhwb3J0cyA9IHt9O1xyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcblxyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAyMiBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxyXG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyBcclxuXHJcblxyXG5jb25zdCAkZmNhNmFmYTBlODQzMzI0YiR2YXIkY2FjaGUgPSBuZXcgV2Vha01hcCgpO1xyXG5mdW5jdGlvbiAkZmNhNmFmYTBlODQzMzI0YiR2YXIkZ2V0Q2FjaGVkRGljdGlvbmFyeShzdHJpbmdzKSB7XHJcbiAgICBsZXQgZGljdGlvbmFyeSA9ICRmY2E2YWZhMGU4NDMzMjRiJHZhciRjYWNoZS5nZXQoc3RyaW5ncyk7XHJcbiAgICBpZiAoIWRpY3Rpb25hcnkpIHtcclxuICAgICAgICBkaWN0aW9uYXJ5ID0gbmV3ICgwLCAkaUZBRGckTG9jYWxpemVkU3RyaW5nRGljdGlvbmFyeSkoc3RyaW5ncyk7XHJcbiAgICAgICAgJGZjYTZhZmEwZTg0MzMyNGIkdmFyJGNhY2hlLnNldChzdHJpbmdzLCBkaWN0aW9uYXJ5KTtcclxuICAgIH1cclxuICAgIHJldHVybiBkaWN0aW9uYXJ5O1xyXG59XHJcbmZ1bmN0aW9uICRmY2E2YWZhMGU4NDMzMjRiJGV4cG9ydCQ4N2I3NjE2NzVlOGVhYTEwKHN0cmluZ3MsIHBhY2thZ2VOYW1lKSB7XHJcbiAgICByZXR1cm4gcGFja2FnZU5hbWUgJiYgKDAsICRpRkFEZyRMb2NhbGl6ZWRTdHJpbmdEaWN0aW9uYXJ5KS5nZXRHbG9iYWxEaWN0aW9uYXJ5Rm9yUGFja2FnZShwYWNrYWdlTmFtZSkgfHwgJGZjYTZhZmEwZTg0MzMyNGIkdmFyJGdldENhY2hlZERpY3Rpb25hcnkoc3RyaW5ncyk7XHJcbn1cclxuZnVuY3Rpb24gJGZjYTZhZmEwZTg0MzMyNGIkZXhwb3J0JGYxMmI3MDNjYTc5ZGZiYjEoc3RyaW5ncywgcGFja2FnZU5hbWUpIHtcclxuICAgIGxldCB7IGxvY2FsZTogbG9jYWxlIH0gPSAoMCwgJDE4ZjIwNTFhZmY2OWI5YmYkZXhwb3J0JDQzYmIxNmY5YzZkOWUzZjcpKCk7XHJcbiAgICBsZXQgZGljdGlvbmFyeSA9ICRmY2E2YWZhMGU4NDMzMjRiJGV4cG9ydCQ4N2I3NjE2NzVlOGVhYTEwKHN0cmluZ3MsIHBhY2thZ2VOYW1lKTtcclxuICAgIHJldHVybiAoMCwgJGlGQURnJHVzZU1lbW8pKCgpPT5uZXcgKDAsICRpRkFEZyRMb2NhbGl6ZWRTdHJpbmdGb3JtYXR0ZXIpKGxvY2FsZSwgZGljdGlvbmFyeSksIFtcclxuICAgICAgICBsb2NhbGUsXHJcbiAgICAgICAgZGljdGlvbmFyeVxyXG4gICAgXSk7XHJcbn1cclxuXHJcblxyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxyXG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyBcclxuXHJcbmZ1bmN0aW9uICQzM2JmMTczMDBjNDk4NTI4JGV4cG9ydCRhMmY0N2EzZDI5NzM2NDAob3B0aW9ucyA9IHt9KSB7XHJcbiAgICBsZXQgeyBsb2NhbGU6IGxvY2FsZSB9ID0gKDAsICQxOGYyMDUxYWZmNjliOWJmJGV4cG9ydCQ0M2JiMTZmOWM2ZDllM2Y3KSgpO1xyXG4gICAgcmV0dXJuICgwLCAkaUZBRGckdXNlTWVtbykoKCk9Pm5ldyBJbnRsLkxpc3RGb3JtYXQobG9jYWxlLCBvcHRpb25zKSwgW1xyXG4gICAgICAgIGxvY2FsZSxcclxuICAgICAgICBvcHRpb25zXHJcbiAgICBdKTtcclxufVxyXG5cclxuXHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIFxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiAkODk2YmEwYTgwYThmNGQzNiRleHBvcnQkODVmZDVmZGYyN2JhY2M3OShvcHRpb25zKSB7XHJcbiAgICAvLyBSZXVzZSBsYXN0IG9wdGlvbnMgb2JqZWN0IGlmIGl0IGlzIHNoYWxsb3dseSBlcXVhbCwgd2hpY2ggYWxsb3dzIHRoZSB1c2VNZW1vIHJlc3VsdCB0byBhbHNvIGJlIHJldXNlZC5cclxuICAgIG9wdGlvbnMgPSAoMCwgJGlGQURnJHVzZURlZXBNZW1vKShvcHRpb25zICE9PSBudWxsICYmIG9wdGlvbnMgIT09IHZvaWQgMCA/IG9wdGlvbnMgOiB7fSwgJDg5NmJhMGE4MGE4ZjRkMzYkdmFyJGlzRXF1YWwpO1xyXG4gICAgbGV0IHsgbG9jYWxlOiBsb2NhbGUgfSA9ICgwLCAkMThmMjA1MWFmZjY5YjliZiRleHBvcnQkNDNiYjE2ZjljNmQ5ZTNmNykoKTtcclxuICAgIHJldHVybiAoMCwgJGlGQURnJHVzZU1lbW8pKCgpPT5uZXcgKDAsICRpRkFEZyREYXRlRm9ybWF0dGVyKShsb2NhbGUsIG9wdGlvbnMpLCBbXHJcbiAgICAgICAgbG9jYWxlLFxyXG4gICAgICAgIG9wdGlvbnNcclxuICAgIF0pO1xyXG59XHJcbmZ1bmN0aW9uICQ4OTZiYTBhODBhOGY0ZDM2JHZhciRpc0VxdWFsKGEsIGIpIHtcclxuICAgIGlmIChhID09PSBiKSByZXR1cm4gdHJ1ZTtcclxuICAgIGxldCBhS2V5cyA9IE9iamVjdC5rZXlzKGEpO1xyXG4gICAgbGV0IGJLZXlzID0gT2JqZWN0LmtleXMoYik7XHJcbiAgICBpZiAoYUtleXMubGVuZ3RoICE9PSBiS2V5cy5sZW5ndGgpIHJldHVybiBmYWxzZTtcclxuICAgIGZvciAobGV0IGtleSBvZiBhS2V5cyl7XHJcbiAgICAgICAgaWYgKGJba2V5XSAhPT0gYVtrZXldKSByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuXHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIFxyXG5cclxuXHJcbmZ1bmN0aW9uICRhOTE2ZWI0NTI4ODRmYWVhJGV4cG9ydCRiN2E2MTYxNTBmZGI5ZjQ0KG9wdGlvbnMgPSB7fSkge1xyXG4gICAgbGV0IHsgbG9jYWxlOiBsb2NhbGUgfSA9ICgwLCAkMThmMjA1MWFmZjY5YjliZiRleHBvcnQkNDNiYjE2ZjljNmQ5ZTNmNykoKTtcclxuICAgIHJldHVybiAoMCwgJGlGQURnJHVzZU1lbW8pKCgpPT5uZXcgKDAsICRpRkFEZyROdW1iZXJGb3JtYXR0ZXIpKGxvY2FsZSwgb3B0aW9ucyksIFtcclxuICAgICAgICBsb2NhbGUsXHJcbiAgICAgICAgb3B0aW9uc1xyXG4gICAgXSk7XHJcbn1cclxuXHJcblxyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxyXG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyBcclxubGV0ICQzMjVhM2ZhYWI3YTY4YWNkJHZhciRjYWNoZSA9IG5ldyBNYXAoKTtcclxuZnVuY3Rpb24gJDMyNWEzZmFhYjdhNjhhY2QkZXhwb3J0JGExNmFjYTI4MzU1MGMzMGQob3B0aW9ucykge1xyXG4gICAgbGV0IHsgbG9jYWxlOiBsb2NhbGUgfSA9ICgwLCAkMThmMjA1MWFmZjY5YjliZiRleHBvcnQkNDNiYjE2ZjljNmQ5ZTNmNykoKTtcclxuICAgIGxldCBjYWNoZUtleSA9IGxvY2FsZSArIChvcHRpb25zID8gT2JqZWN0LmVudHJpZXMob3B0aW9ucykuc29ydCgoYSwgYik9PmFbMF0gPCBiWzBdID8gLTEgOiAxKS5qb2luKCkgOiBcIlwiKTtcclxuICAgIGlmICgkMzI1YTNmYWFiN2E2OGFjZCR2YXIkY2FjaGUuaGFzKGNhY2hlS2V5KSkgcmV0dXJuICQzMjVhM2ZhYWI3YTY4YWNkJHZhciRjYWNoZS5nZXQoY2FjaGVLZXkpO1xyXG4gICAgbGV0IGZvcm1hdHRlciA9IG5ldyBJbnRsLkNvbGxhdG9yKGxvY2FsZSwgb3B0aW9ucyk7XHJcbiAgICAkMzI1YTNmYWFiN2E2OGFjZCR2YXIkY2FjaGUuc2V0KGNhY2hlS2V5LCBmb3JtYXR0ZXIpO1xyXG4gICAgcmV0dXJuIGZvcm1hdHRlcjtcclxufVxyXG5cclxuXHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIFxyXG5cclxuZnVuY3Rpb24gJGJiNzdmMjM5YjQ2ZThjNzIkZXhwb3J0JDMyNzRjZjg0YjcwM2ZmZihvcHRpb25zKSB7XHJcbiAgICBsZXQgY29sbGF0b3IgPSAoMCwgJDMyNWEzZmFhYjdhNjhhY2QkZXhwb3J0JGExNmFjYTI4MzU1MGMzMGQpKHtcclxuICAgICAgICB1c2FnZTogXCJzZWFyY2hcIixcclxuICAgICAgICAuLi5vcHRpb25zXHJcbiAgICB9KTtcclxuICAgIC8vIFRPRE8obGF0ZXIpOiB0aGVzZSBtZXRob2RzIGRvbid0IGN1cnJlbnRseSBzdXBwb3J0IHRoZSBpZ25vcmVQdW5jdHVhdGlvbiBvcHRpb24uXHJcbiAgICBsZXQgc3RhcnRzV2l0aCA9ICgwLCAkaUZBRGckdXNlQ2FsbGJhY2spKChzdHJpbmcsIHN1YnN0cmluZyk9PntcclxuICAgICAgICBpZiAoc3Vic3RyaW5nLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgLy8gTm9ybWFsaXplIGJvdGggc3RyaW5ncyBzbyB3ZSBjYW4gc2xpY2Ugc2FmZWx5XHJcbiAgICAgICAgLy8gVE9ETzogdGFrZSBpbnRvIGFjY291bnQgdGhlIGlnbm9yZVB1bmN0dWF0aW9uIG9wdGlvbiBhcyB3ZWxsLi4uXHJcbiAgICAgICAgc3RyaW5nID0gc3RyaW5nLm5vcm1hbGl6ZShcIk5GQ1wiKTtcclxuICAgICAgICBzdWJzdHJpbmcgPSBzdWJzdHJpbmcubm9ybWFsaXplKFwiTkZDXCIpO1xyXG4gICAgICAgIHJldHVybiBjb2xsYXRvci5jb21wYXJlKHN0cmluZy5zbGljZSgwLCBzdWJzdHJpbmcubGVuZ3RoKSwgc3Vic3RyaW5nKSA9PT0gMDtcclxuICAgIH0sIFtcclxuICAgICAgICBjb2xsYXRvclxyXG4gICAgXSk7XHJcbiAgICBsZXQgZW5kc1dpdGggPSAoMCwgJGlGQURnJHVzZUNhbGxiYWNrKSgoc3RyaW5nLCBzdWJzdHJpbmcpPT57XHJcbiAgICAgICAgaWYgKHN1YnN0cmluZy5sZW5ndGggPT09IDApIHJldHVybiB0cnVlO1xyXG4gICAgICAgIHN0cmluZyA9IHN0cmluZy5ub3JtYWxpemUoXCJORkNcIik7XHJcbiAgICAgICAgc3Vic3RyaW5nID0gc3Vic3RyaW5nLm5vcm1hbGl6ZShcIk5GQ1wiKTtcclxuICAgICAgICByZXR1cm4gY29sbGF0b3IuY29tcGFyZShzdHJpbmcuc2xpY2UoLXN1YnN0cmluZy5sZW5ndGgpLCBzdWJzdHJpbmcpID09PSAwO1xyXG4gICAgfSwgW1xyXG4gICAgICAgIGNvbGxhdG9yXHJcbiAgICBdKTtcclxuICAgIGxldCBjb250YWlucyA9ICgwLCAkaUZBRGckdXNlQ2FsbGJhY2spKChzdHJpbmcsIHN1YnN0cmluZyk9PntcclxuICAgICAgICBpZiAoc3Vic3RyaW5nLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgc3RyaW5nID0gc3RyaW5nLm5vcm1hbGl6ZShcIk5GQ1wiKTtcclxuICAgICAgICBzdWJzdHJpbmcgPSBzdWJzdHJpbmcubm9ybWFsaXplKFwiTkZDXCIpO1xyXG4gICAgICAgIGxldCBzY2FuID0gMDtcclxuICAgICAgICBsZXQgc2xpY2VMZW4gPSBzdWJzdHJpbmcubGVuZ3RoO1xyXG4gICAgICAgIGZvcig7IHNjYW4gKyBzbGljZUxlbiA8PSBzdHJpbmcubGVuZ3RoOyBzY2FuKyspe1xyXG4gICAgICAgICAgICBsZXQgc2xpY2UgPSBzdHJpbmcuc2xpY2Uoc2Nhbiwgc2NhbiArIHNsaWNlTGVuKTtcclxuICAgICAgICAgICAgaWYgKGNvbGxhdG9yLmNvbXBhcmUoc3Vic3RyaW5nLCBzbGljZSkgPT09IDApIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9LCBbXHJcbiAgICAgICAgY29sbGF0b3JcclxuICAgIF0pO1xyXG4gICAgcmV0dXJuICgwLCAkaUZBRGckdXNlTWVtbykoKCk9Pih7XHJcbiAgICAgICAgICAgIHN0YXJ0c1dpdGg6IHN0YXJ0c1dpdGgsXHJcbiAgICAgICAgICAgIGVuZHNXaXRoOiBlbmRzV2l0aCxcclxuICAgICAgICAgICAgY29udGFpbnM6IGNvbnRhaW5zXHJcbiAgICAgICAgfSksIFtcclxuICAgICAgICBzdGFydHNXaXRoLFxyXG4gICAgICAgIGVuZHNXaXRoLFxyXG4gICAgICAgIGNvbnRhaW5zXHJcbiAgICBdKTtcclxufVxyXG5cclxuXHJcblxyXG5cclxuZXhwb3J0IHskMThmMjA1MWFmZjY5YjliZiRleHBvcnQkYTU0MDEzZjBkMDJhOGY4MiBhcyBJMThuUHJvdmlkZXIsICQxOGYyMDUxYWZmNjliOWJmJGV4cG9ydCQ0M2JiMTZmOWM2ZDllM2Y3IGFzIHVzZUxvY2FsZSwgJGZjYTZhZmEwZTg0MzMyNGIkZXhwb3J0JGYxMmI3MDNjYTc5ZGZiYjEgYXMgdXNlTG9jYWxpemVkU3RyaW5nRm9ybWF0dGVyLCAkZmNhNmFmYTBlODQzMzI0YiRleHBvcnQkODdiNzYxNjc1ZThlYWExMCBhcyB1c2VMb2NhbGl6ZWRTdHJpbmdEaWN0aW9uYXJ5LCAkMzNiZjE3MzAwYzQ5ODUyOCRleHBvcnQkYTJmNDdhM2QyOTczNjQwIGFzIHVzZUxpc3RGb3JtYXR0ZXIsICQ4OTZiYTBhODBhOGY0ZDM2JGV4cG9ydCQ4NWZkNWZkZjI3YmFjYzc5IGFzIHVzZURhdGVGb3JtYXR0ZXIsICRhOTE2ZWI0NTI4ODRmYWVhJGV4cG9ydCRiN2E2MTYxNTBmZGI5ZjQ0IGFzIHVzZU51bWJlckZvcm1hdHRlciwgJDMyNWEzZmFhYjdhNjhhY2QkZXhwb3J0JGExNmFjYTI4MzU1MGMzMGQgYXMgdXNlQ29sbGF0b3IsICRiYjc3ZjIzOWI0NmU4YzcyJGV4cG9ydCQzMjc0Y2Y4NGI3MDNmZmYgYXMgdXNlRmlsdGVyfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhbC1tb2R1bGUuanMubWFwXHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-aria/i18n/dist/real-module.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-aria/interactions/dist/import.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/@react-aria/interactions/dist/import.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClearPressResponder: () => (/* binding */ $f1ab8c75478c6f73$export$cf75428e0b9ed1ea),\n/* harmony export */   PressResponder: () => (/* binding */ $f1ab8c75478c6f73$export$3351871ee4b288b8),\n/* harmony export */   Pressable: () => (/* binding */ $3b117e43dc0ca95d$export$27c701ed9e449e99),\n/* harmony export */   addWindowFocusTracking: () => (/* binding */ $507fabe10e71c6fb$export$2f1888112f558a7d),\n/* harmony export */   getInteractionModality: () => (/* binding */ $507fabe10e71c6fb$export$630ff653c5ada6a9),\n/* harmony export */   isFocusVisible: () => (/* binding */ $507fabe10e71c6fb$export$b9b3dfddab17db27),\n/* harmony export */   setInteractionModality: () => (/* binding */ $507fabe10e71c6fb$export$8397ddfc504fdb9a),\n/* harmony export */   useFocus: () => (/* binding */ $a1ea59d68270f0dd$export$f8168d8dd8fd66e6),\n/* harmony export */   useFocusVisible: () => (/* binding */ $507fabe10e71c6fb$export$ffd9e5021c1fb2d6),\n/* harmony export */   useFocusVisibleListener: () => (/* binding */ $507fabe10e71c6fb$export$ec71b4b83ac08ec3),\n/* harmony export */   useFocusWithin: () => (/* binding */ $9ab94262bd0047c7$export$420e68273165f4ec),\n/* harmony export */   useHover: () => (/* binding */ $6179b936705e76d3$export$ae780daf29e6d456),\n/* harmony export */   useInteractOutside: () => (/* binding */ $e0b6e0b68ec7f50f$export$872b660ac5a1ff98),\n/* harmony export */   useInteractionModality: () => (/* binding */ $507fabe10e71c6fb$export$98e20ec92f614cfe),\n/* harmony export */   useKeyboard: () => (/* binding */ $46d819fcbaf35654$export$8f71654801c2f7cd),\n/* harmony export */   useLongPress: () => (/* binding */ $8a26561d2877236e$export$c24ed0104d07eab9),\n/* harmony export */   useMove: () => (/* binding */ $e8a7022cf87cba2a$export$36da96379f79f245),\n/* harmony export */   usePress: () => (/* binding */ $f6c31cce2adf654f$export$45712eceda6fad21),\n/* harmony export */   useScrollWheel: () => (/* binding */ $7d0a636d7a4dcefd$export$2123ff2b87c81ca)\n/* harmony export */ });\n/* harmony import */ var _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @react-aria/utils */ \"(ssr)/./node_modules/@react-aria/utils/dist/import.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _swc_helpers_class_private_field_get__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @swc/helpers/_/_class_private_field_get */ \"(ssr)/./node_modules/@swc/helpers/esm/_class_private_field_get.js\");\n/* harmony import */ var _swc_helpers_class_private_field_init__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @swc/helpers/_/_class_private_field_init */ \"(ssr)/./node_modules/@swc/helpers/esm/_class_private_field_init.js\");\n/* harmony import */ var _swc_helpers_class_private_field_set__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @swc/helpers/_/_class_private_field_set */ \"(ssr)/./node_modules/@swc/helpers/esm/_class_private_field_set.js\");\n/* harmony import */ var _react_aria_ssr__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @react-aria/ssr */ \"(ssr)/./node_modules/@react-aria/ssr/dist/import.mjs\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ /*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ // Portions of the code in this file are based on code from react.\r\n// Original licensing for the following can be found in the\r\n// NOTICE file in the root directory of this source tree.\r\n// See https://github.com/facebook/react/tree/cc7c1aece46a6b69b41958d731e0fd27c94bfc6c/packages/react-interactions\r\n\r\n\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n// Note that state only matters here for iOS. Non-iOS gets user-select: none applied to the target element\r\n// rather than at the document level so we just need to apply/remove user-select: none for each pressed element individually\r\nlet $14c0b72509d70225$var$state = \"default\";\r\nlet $14c0b72509d70225$var$savedUserSelect = \"\";\r\nlet $14c0b72509d70225$var$modifiedElementMap = new WeakMap();\r\nfunction $14c0b72509d70225$export$16a4697467175487(target) {\r\n    if ((0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.isIOS)()) {\r\n        if ($14c0b72509d70225$var$state === \"default\") {\r\n            // eslint-disable-next-line no-restricted-globals\r\n            const documentObject = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.getOwnerDocument)(target);\r\n            $14c0b72509d70225$var$savedUserSelect = documentObject.documentElement.style.webkitUserSelect;\r\n            documentObject.documentElement.style.webkitUserSelect = \"none\";\r\n        }\r\n        $14c0b72509d70225$var$state = \"disabled\";\r\n    } else if (target instanceof HTMLElement || target instanceof SVGElement) {\r\n        // If not iOS, store the target's original user-select and change to user-select: none\r\n        // Ignore state since it doesn't apply for non iOS\r\n        $14c0b72509d70225$var$modifiedElementMap.set(target, target.style.userSelect);\r\n        target.style.userSelect = \"none\";\r\n    }\r\n}\r\nfunction $14c0b72509d70225$export$b0d6fa1ab32e3295(target) {\r\n    if ((0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.isIOS)()) {\r\n        // If the state is already default, there's nothing to do.\r\n        // If it is restoring, then there's no need to queue a second restore.\r\n        if ($14c0b72509d70225$var$state !== \"disabled\") return;\r\n        $14c0b72509d70225$var$state = \"restoring\";\r\n        // There appears to be a delay on iOS where selection still might occur\r\n        // after pointer up, so wait a bit before removing user-select.\r\n        setTimeout(()=>{\r\n            // Wait for any CSS transitions to complete so we don't recompute style\r\n            // for the whole page in the middle of the animation and cause jank.\r\n            (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.runAfterTransition)(()=>{\r\n                // Avoid race conditions\r\n                if ($14c0b72509d70225$var$state === \"restoring\") {\r\n                    // eslint-disable-next-line no-restricted-globals\r\n                    const documentObject = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.getOwnerDocument)(target);\r\n                    if (documentObject.documentElement.style.webkitUserSelect === \"none\") documentObject.documentElement.style.webkitUserSelect = $14c0b72509d70225$var$savedUserSelect || \"\";\r\n                    $14c0b72509d70225$var$savedUserSelect = \"\";\r\n                    $14c0b72509d70225$var$state = \"default\";\r\n                }\r\n            });\r\n        }, 300);\r\n    } else if (target instanceof HTMLElement || target instanceof SVGElement) // If not iOS, restore the target's original user-select if any\r\n    // Ignore state since it doesn't apply for non iOS\r\n    {\r\n        if (target && $14c0b72509d70225$var$modifiedElementMap.has(target)) {\r\n            let targetOldUserSelect = $14c0b72509d70225$var$modifiedElementMap.get(target);\r\n            if (target.style.userSelect === \"none\") target.style.userSelect = targetOldUserSelect;\r\n            if (target.getAttribute(\"style\") === \"\") target.removeAttribute(\"style\");\r\n            $14c0b72509d70225$var$modifiedElementMap.delete(target);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\nconst $ae1eeba8b9eafd08$export$5165eccb35aaadb5 = (0, react__WEBPACK_IMPORTED_MODULE_0__).createContext({\r\n    register: ()=>{}\r\n});\r\n$ae1eeba8b9eafd08$export$5165eccb35aaadb5.displayName = \"PressResponderContext\";\r\n\r\n\r\n\r\nfunction $f6c31cce2adf654f$var$usePressResponderContext(props) {\r\n    // Consume context from <PressResponder> and merge with props.\r\n    let context = (0, react__WEBPACK_IMPORTED_MODULE_0__.useContext)((0, $ae1eeba8b9eafd08$export$5165eccb35aaadb5));\r\n    if (context) {\r\n        let { register: register, ...contextProps } = context;\r\n        props = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.mergeProps)(contextProps, props);\r\n        register();\r\n    }\r\n    (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.useSyncRef)(context, props.ref);\r\n    return props;\r\n}\r\nvar $f6c31cce2adf654f$var$_shouldStopPropagation = /*#__PURE__*/ new WeakMap();\r\nclass $f6c31cce2adf654f$var$PressEvent {\r\n    continuePropagation() {\r\n        (0, _swc_helpers_class_private_field_set__WEBPACK_IMPORTED_MODULE_2__._)(this, $f6c31cce2adf654f$var$_shouldStopPropagation, false);\r\n    }\r\n    get shouldStopPropagation() {\r\n        return (0, _swc_helpers_class_private_field_get__WEBPACK_IMPORTED_MODULE_3__._)(this, $f6c31cce2adf654f$var$_shouldStopPropagation);\r\n    }\r\n    constructor(type, pointerType, originalEvent){\r\n        (0, _swc_helpers_class_private_field_init__WEBPACK_IMPORTED_MODULE_4__._)(this, $f6c31cce2adf654f$var$_shouldStopPropagation, {\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        (0, _swc_helpers_class_private_field_set__WEBPACK_IMPORTED_MODULE_2__._)(this, $f6c31cce2adf654f$var$_shouldStopPropagation, true);\r\n        this.type = type;\r\n        this.pointerType = pointerType;\r\n        this.target = originalEvent.currentTarget;\r\n        this.shiftKey = originalEvent.shiftKey;\r\n        this.metaKey = originalEvent.metaKey;\r\n        this.ctrlKey = originalEvent.ctrlKey;\r\n        this.altKey = originalEvent.altKey;\r\n    }\r\n}\r\nconst $f6c31cce2adf654f$var$LINK_CLICKED = Symbol(\"linkClicked\");\r\nfunction $f6c31cce2adf654f$export$45712eceda6fad21(props) {\r\n    let { onPress: onPress, onPressChange: onPressChange, onPressStart: onPressStart, onPressEnd: onPressEnd, onPressUp: onPressUp, isDisabled: isDisabled, isPressed: isPressedProp, preventFocusOnPress: preventFocusOnPress, shouldCancelOnPointerExit: shouldCancelOnPointerExit, allowTextSelectionOnPress: allowTextSelectionOnPress, // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    ref: _, ...domProps } = $f6c31cce2adf654f$var$usePressResponderContext(props);\r\n    let [isPressed, setPressed] = (0, react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\r\n    let ref = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)({\r\n        isPressed: false,\r\n        ignoreEmulatedMouseEvents: false,\r\n        ignoreClickAfterPress: false,\r\n        didFirePressStart: false,\r\n        isTriggeringEvent: false,\r\n        activePointerId: null,\r\n        target: null,\r\n        isOverTarget: false,\r\n        pointerType: null\r\n    });\r\n    let { addGlobalListener: addGlobalListener, removeAllGlobalListeners: removeAllGlobalListeners } = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.useGlobalListeners)();\r\n    let triggerPressStart = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.useEffectEvent)((originalEvent, pointerType)=>{\r\n        let state = ref.current;\r\n        if (isDisabled || state.didFirePressStart) return false;\r\n        let shouldStopPropagation = true;\r\n        state.isTriggeringEvent = true;\r\n        if (onPressStart) {\r\n            let event = new $f6c31cce2adf654f$var$PressEvent(\"pressstart\", pointerType, originalEvent);\r\n            onPressStart(event);\r\n            shouldStopPropagation = event.shouldStopPropagation;\r\n        }\r\n        if (onPressChange) onPressChange(true);\r\n        state.isTriggeringEvent = false;\r\n        state.didFirePressStart = true;\r\n        setPressed(true);\r\n        return shouldStopPropagation;\r\n    });\r\n    let triggerPressEnd = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.useEffectEvent)((originalEvent, pointerType, wasPressed = true)=>{\r\n        let state = ref.current;\r\n        if (!state.didFirePressStart) return false;\r\n        state.ignoreClickAfterPress = true;\r\n        state.didFirePressStart = false;\r\n        state.isTriggeringEvent = true;\r\n        let shouldStopPropagation = true;\r\n        if (onPressEnd) {\r\n            let event = new $f6c31cce2adf654f$var$PressEvent(\"pressend\", pointerType, originalEvent);\r\n            onPressEnd(event);\r\n            shouldStopPropagation = event.shouldStopPropagation;\r\n        }\r\n        if (onPressChange) onPressChange(false);\r\n        setPressed(false);\r\n        if (onPress && wasPressed && !isDisabled) {\r\n            let event = new $f6c31cce2adf654f$var$PressEvent(\"press\", pointerType, originalEvent);\r\n            onPress(event);\r\n            shouldStopPropagation && (shouldStopPropagation = event.shouldStopPropagation);\r\n        }\r\n        state.isTriggeringEvent = false;\r\n        return shouldStopPropagation;\r\n    });\r\n    let triggerPressUp = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.useEffectEvent)((originalEvent, pointerType)=>{\r\n        let state = ref.current;\r\n        if (isDisabled) return false;\r\n        if (onPressUp) {\r\n            state.isTriggeringEvent = true;\r\n            let event = new $f6c31cce2adf654f$var$PressEvent(\"pressup\", pointerType, originalEvent);\r\n            onPressUp(event);\r\n            state.isTriggeringEvent = false;\r\n            return event.shouldStopPropagation;\r\n        }\r\n        return true;\r\n    });\r\n    let cancel = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.useEffectEvent)((e)=>{\r\n        let state = ref.current;\r\n        if (state.isPressed && state.target) {\r\n            if (state.isOverTarget && state.pointerType != null) triggerPressEnd($f6c31cce2adf654f$var$createEvent(state.target, e), state.pointerType, false);\r\n            state.isPressed = false;\r\n            state.isOverTarget = false;\r\n            state.activePointerId = null;\r\n            state.pointerType = null;\r\n            removeAllGlobalListeners();\r\n            if (!allowTextSelectionOnPress) (0, $14c0b72509d70225$export$b0d6fa1ab32e3295)(state.target);\r\n        }\r\n    });\r\n    let cancelOnPointerExit = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.useEffectEvent)((e)=>{\r\n        if (shouldCancelOnPointerExit) cancel(e);\r\n    });\r\n    let pressProps = (0, react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{\r\n        let state = ref.current;\r\n        let pressProps = {\r\n            onKeyDown (e) {\r\n                if ($f6c31cce2adf654f$var$isValidKeyboardEvent(e.nativeEvent, e.currentTarget) && e.currentTarget.contains(e.target)) {\r\n                    var _state_metaKeyEvents;\r\n                    if ($f6c31cce2adf654f$var$shouldPreventDefaultKeyboard(e.target, e.key)) e.preventDefault();\r\n                    // If the event is repeating, it may have started on a different element\r\n                    // after which focus moved to the current element. Ignore these events and\r\n                    // only handle the first key down event.\r\n                    let shouldStopPropagation = true;\r\n                    if (!state.isPressed && !e.repeat) {\r\n                        state.target = e.currentTarget;\r\n                        state.isPressed = true;\r\n                        shouldStopPropagation = triggerPressStart(e, \"keyboard\");\r\n                        // Focus may move before the key up event, so register the event on the document\r\n                        // instead of the same element where the key down event occurred. Make it capturing so that it will trigger\r\n                        // before stopPropagation from useKeyboard on a child element may happen and thus we can still call triggerPress for the parent element.\r\n                        let originalTarget = e.currentTarget;\r\n                        let pressUp = (e)=>{\r\n                            if ($f6c31cce2adf654f$var$isValidKeyboardEvent(e, originalTarget) && !e.repeat && originalTarget.contains(e.target) && state.target) triggerPressUp($f6c31cce2adf654f$var$createEvent(state.target, e), \"keyboard\");\r\n                        };\r\n                        addGlobalListener((0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.getOwnerDocument)(e.currentTarget), \"keyup\", (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.chain)(pressUp, onKeyUp), true);\r\n                    }\r\n                    if (shouldStopPropagation) e.stopPropagation();\r\n                    // Keep track of the keydown events that occur while the Meta (e.g. Command) key is held.\r\n                    // macOS has a bug where keyup events are not fired while the Meta key is down.\r\n                    // When the Meta key itself is released we will get an event for that, and we'll act as if\r\n                    // all of these other keys were released as well.\r\n                    // https://bugs.chromium.org/p/chromium/issues/detail?id=1393524\r\n                    // https://bugs.webkit.org/show_bug.cgi?id=55291\r\n                    // https://bugzilla.mozilla.org/show_bug.cgi?id=1299553\r\n                    if (e.metaKey && (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.isMac)()) (_state_metaKeyEvents = state.metaKeyEvents) === null || _state_metaKeyEvents === void 0 ? void 0 : _state_metaKeyEvents.set(e.key, e.nativeEvent);\r\n                } else if (e.key === \"Meta\") state.metaKeyEvents = new Map();\r\n            },\r\n            onClick (e) {\r\n                if (e && !e.currentTarget.contains(e.target)) return;\r\n                if (e && e.button === 0 && !state.isTriggeringEvent && !(0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.openLink).isOpening) {\r\n                    let shouldStopPropagation = true;\r\n                    if (isDisabled) e.preventDefault();\r\n                    // If triggered from a screen reader or by using element.click(),\r\n                    // trigger as if it were a keyboard click.\r\n                    if (!state.ignoreClickAfterPress && !state.ignoreEmulatedMouseEvents && !state.isPressed && (state.pointerType === \"virtual\" || (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.isVirtualClick)(e.nativeEvent))) {\r\n                        // Ensure the element receives focus (VoiceOver on iOS does not do this)\r\n                        if (!isDisabled && !preventFocusOnPress) (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.focusWithoutScrolling)(e.currentTarget);\r\n                        let stopPressStart = triggerPressStart(e, \"virtual\");\r\n                        let stopPressUp = triggerPressUp(e, \"virtual\");\r\n                        let stopPressEnd = triggerPressEnd(e, \"virtual\");\r\n                        shouldStopPropagation = stopPressStart && stopPressUp && stopPressEnd;\r\n                    }\r\n                    state.ignoreEmulatedMouseEvents = false;\r\n                    state.ignoreClickAfterPress = false;\r\n                    if (shouldStopPropagation) e.stopPropagation();\r\n                }\r\n            }\r\n        };\r\n        let onKeyUp = (e)=>{\r\n            var _state_metaKeyEvents;\r\n            if (state.isPressed && state.target && $f6c31cce2adf654f$var$isValidKeyboardEvent(e, state.target)) {\r\n                var _state_metaKeyEvents1;\r\n                if ($f6c31cce2adf654f$var$shouldPreventDefaultKeyboard(e.target, e.key)) e.preventDefault();\r\n                let target = e.target;\r\n                triggerPressEnd($f6c31cce2adf654f$var$createEvent(state.target, e), \"keyboard\", state.target.contains(target));\r\n                removeAllGlobalListeners();\r\n                // If a link was triggered with a key other than Enter, open the URL ourselves.\r\n                // This means the link has a role override, and the default browser behavior\r\n                // only applies when using the Enter key.\r\n                if (e.key !== \"Enter\" && $f6c31cce2adf654f$var$isHTMLAnchorLink(state.target) && state.target.contains(target) && !e[$f6c31cce2adf654f$var$LINK_CLICKED]) {\r\n                    // Store a hidden property on the event so we only trigger link click once,\r\n                    // even if there are multiple usePress instances attached to the element.\r\n                    e[$f6c31cce2adf654f$var$LINK_CLICKED] = true;\r\n                    (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.openLink)(state.target, e, false);\r\n                }\r\n                state.isPressed = false;\r\n                (_state_metaKeyEvents1 = state.metaKeyEvents) === null || _state_metaKeyEvents1 === void 0 ? void 0 : _state_metaKeyEvents1.delete(e.key);\r\n            } else if (e.key === \"Meta\" && ((_state_metaKeyEvents = state.metaKeyEvents) === null || _state_metaKeyEvents === void 0 ? void 0 : _state_metaKeyEvents.size)) {\r\n                var _state_target;\r\n                // If we recorded keydown events that occurred while the Meta key was pressed,\r\n                // and those haven't received keyup events already, fire keyup events ourselves.\r\n                // See comment above for more info about the macOS bug causing this.\r\n                let events = state.metaKeyEvents;\r\n                state.metaKeyEvents = undefined;\r\n                for (let event of events.values())(_state_target = state.target) === null || _state_target === void 0 ? void 0 : _state_target.dispatchEvent(new KeyboardEvent(\"keyup\", event));\r\n            }\r\n        };\r\n        if (typeof PointerEvent !== \"undefined\") {\r\n            pressProps.onPointerDown = (e)=>{\r\n                // Only handle left clicks, and ignore events that bubbled through portals.\r\n                if (e.button !== 0 || !e.currentTarget.contains(e.target)) return;\r\n                // iOS safari fires pointer events from VoiceOver with incorrect coordinates/target.\r\n                // Ignore and let the onClick handler take care of it instead.\r\n                // https://bugs.webkit.org/show_bug.cgi?id=222627\r\n                // https://bugs.webkit.org/show_bug.cgi?id=223202\r\n                if ((0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.isVirtualPointerEvent)(e.nativeEvent)) {\r\n                    state.pointerType = \"virtual\";\r\n                    return;\r\n                }\r\n                // Due to browser inconsistencies, especially on mobile browsers, we prevent\r\n                // default on pointer down and handle focusing the pressable element ourselves.\r\n                if ($f6c31cce2adf654f$var$shouldPreventDefault(e.currentTarget)) e.preventDefault();\r\n                state.pointerType = e.pointerType;\r\n                let shouldStopPropagation = true;\r\n                if (!state.isPressed) {\r\n                    state.isPressed = true;\r\n                    state.isOverTarget = true;\r\n                    state.activePointerId = e.pointerId;\r\n                    state.target = e.currentTarget;\r\n                    if (!isDisabled && !preventFocusOnPress) (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.focusWithoutScrolling)(e.currentTarget);\r\n                    if (!allowTextSelectionOnPress) (0, $14c0b72509d70225$export$16a4697467175487)(state.target);\r\n                    shouldStopPropagation = triggerPressStart(e, state.pointerType);\r\n                    addGlobalListener((0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.getOwnerDocument)(e.currentTarget), \"pointermove\", onPointerMove, false);\r\n                    addGlobalListener((0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.getOwnerDocument)(e.currentTarget), \"pointerup\", onPointerUp, false);\r\n                    addGlobalListener((0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.getOwnerDocument)(e.currentTarget), \"pointercancel\", onPointerCancel, false);\r\n                }\r\n                if (shouldStopPropagation) e.stopPropagation();\r\n            };\r\n            pressProps.onMouseDown = (e)=>{\r\n                if (!e.currentTarget.contains(e.target)) return;\r\n                if (e.button === 0) {\r\n                    // Chrome and Firefox on touch Windows devices require mouse down events\r\n                    // to be canceled in addition to pointer events, or an extra asynchronous\r\n                    // focus event will be fired.\r\n                    if ($f6c31cce2adf654f$var$shouldPreventDefault(e.currentTarget)) e.preventDefault();\r\n                    e.stopPropagation();\r\n                }\r\n            };\r\n            pressProps.onPointerUp = (e)=>{\r\n                // iOS fires pointerup with zero width and height, so check the pointerType recorded during pointerdown.\r\n                if (!e.currentTarget.contains(e.target) || state.pointerType === \"virtual\") return;\r\n                // Only handle left clicks\r\n                // Safari on iOS sometimes fires pointerup events, even\r\n                // when the touch isn't over the target, so double check.\r\n                if (e.button === 0 && $f6c31cce2adf654f$var$isOverTarget(e, e.currentTarget)) triggerPressUp(e, state.pointerType || e.pointerType);\r\n            };\r\n            // Safari on iOS < 13.2 does not implement pointerenter/pointerleave events correctly.\r\n            // Use pointer move events instead to implement our own hit testing.\r\n            // See https://bugs.webkit.org/show_bug.cgi?id=199803\r\n            let onPointerMove = (e)=>{\r\n                if (e.pointerId !== state.activePointerId) return;\r\n                if (state.target && $f6c31cce2adf654f$var$isOverTarget(e, state.target)) {\r\n                    if (!state.isOverTarget && state.pointerType != null) {\r\n                        state.isOverTarget = true;\r\n                        triggerPressStart($f6c31cce2adf654f$var$createEvent(state.target, e), state.pointerType);\r\n                    }\r\n                } else if (state.target && state.isOverTarget && state.pointerType != null) {\r\n                    state.isOverTarget = false;\r\n                    triggerPressEnd($f6c31cce2adf654f$var$createEvent(state.target, e), state.pointerType, false);\r\n                    cancelOnPointerExit(e);\r\n                }\r\n            };\r\n            let onPointerUp = (e)=>{\r\n                if (e.pointerId === state.activePointerId && state.isPressed && e.button === 0 && state.target) {\r\n                    if ($f6c31cce2adf654f$var$isOverTarget(e, state.target) && state.pointerType != null) triggerPressEnd($f6c31cce2adf654f$var$createEvent(state.target, e), state.pointerType);\r\n                    else if (state.isOverTarget && state.pointerType != null) triggerPressEnd($f6c31cce2adf654f$var$createEvent(state.target, e), state.pointerType, false);\r\n                    state.isPressed = false;\r\n                    state.isOverTarget = false;\r\n                    state.activePointerId = null;\r\n                    state.pointerType = null;\r\n                    removeAllGlobalListeners();\r\n                    if (!allowTextSelectionOnPress) (0, $14c0b72509d70225$export$b0d6fa1ab32e3295)(state.target);\r\n                }\r\n            };\r\n            let onPointerCancel = (e)=>{\r\n                cancel(e);\r\n            };\r\n            pressProps.onDragStart = (e)=>{\r\n                if (!e.currentTarget.contains(e.target)) return;\r\n                // Safari does not call onPointerCancel when a drag starts, whereas Chrome and Firefox do.\r\n                cancel(e);\r\n            };\r\n        } else {\r\n            pressProps.onMouseDown = (e)=>{\r\n                // Only handle left clicks\r\n                if (e.button !== 0 || !e.currentTarget.contains(e.target)) return;\r\n                // Due to browser inconsistencies, especially on mobile browsers, we prevent\r\n                // default on mouse down and handle focusing the pressable element ourselves.\r\n                if ($f6c31cce2adf654f$var$shouldPreventDefault(e.currentTarget)) e.preventDefault();\r\n                if (state.ignoreEmulatedMouseEvents) {\r\n                    e.stopPropagation();\r\n                    return;\r\n                }\r\n                state.isPressed = true;\r\n                state.isOverTarget = true;\r\n                state.target = e.currentTarget;\r\n                state.pointerType = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.isVirtualClick)(e.nativeEvent) ? \"virtual\" : \"mouse\";\r\n                if (!isDisabled && !preventFocusOnPress) (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.focusWithoutScrolling)(e.currentTarget);\r\n                let shouldStopPropagation = triggerPressStart(e, state.pointerType);\r\n                if (shouldStopPropagation) e.stopPropagation();\r\n                addGlobalListener((0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.getOwnerDocument)(e.currentTarget), \"mouseup\", onMouseUp, false);\r\n            };\r\n            pressProps.onMouseEnter = (e)=>{\r\n                if (!e.currentTarget.contains(e.target)) return;\r\n                let shouldStopPropagation = true;\r\n                if (state.isPressed && !state.ignoreEmulatedMouseEvents && state.pointerType != null) {\r\n                    state.isOverTarget = true;\r\n                    shouldStopPropagation = triggerPressStart(e, state.pointerType);\r\n                }\r\n                if (shouldStopPropagation) e.stopPropagation();\r\n            };\r\n            pressProps.onMouseLeave = (e)=>{\r\n                if (!e.currentTarget.contains(e.target)) return;\r\n                let shouldStopPropagation = true;\r\n                if (state.isPressed && !state.ignoreEmulatedMouseEvents && state.pointerType != null) {\r\n                    state.isOverTarget = false;\r\n                    shouldStopPropagation = triggerPressEnd(e, state.pointerType, false);\r\n                    cancelOnPointerExit(e);\r\n                }\r\n                if (shouldStopPropagation) e.stopPropagation();\r\n            };\r\n            pressProps.onMouseUp = (e)=>{\r\n                if (!e.currentTarget.contains(e.target)) return;\r\n                if (!state.ignoreEmulatedMouseEvents && e.button === 0) triggerPressUp(e, state.pointerType || \"mouse\");\r\n            };\r\n            let onMouseUp = (e)=>{\r\n                // Only handle left clicks\r\n                if (e.button !== 0) return;\r\n                state.isPressed = false;\r\n                removeAllGlobalListeners();\r\n                if (state.ignoreEmulatedMouseEvents) {\r\n                    state.ignoreEmulatedMouseEvents = false;\r\n                    return;\r\n                }\r\n                if (state.target && $f6c31cce2adf654f$var$isOverTarget(e, state.target) && state.pointerType != null) triggerPressEnd($f6c31cce2adf654f$var$createEvent(state.target, e), state.pointerType);\r\n                else if (state.target && state.isOverTarget && state.pointerType != null) triggerPressEnd($f6c31cce2adf654f$var$createEvent(state.target, e), state.pointerType, false);\r\n                state.isOverTarget = false;\r\n            };\r\n            pressProps.onTouchStart = (e)=>{\r\n                if (!e.currentTarget.contains(e.target)) return;\r\n                let touch = $f6c31cce2adf654f$var$getTouchFromEvent(e.nativeEvent);\r\n                if (!touch) return;\r\n                state.activePointerId = touch.identifier;\r\n                state.ignoreEmulatedMouseEvents = true;\r\n                state.isOverTarget = true;\r\n                state.isPressed = true;\r\n                state.target = e.currentTarget;\r\n                state.pointerType = \"touch\";\r\n                // Due to browser inconsistencies, especially on mobile browsers, we prevent default\r\n                // on the emulated mouse event and handle focusing the pressable element ourselves.\r\n                if (!isDisabled && !preventFocusOnPress) (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.focusWithoutScrolling)(e.currentTarget);\r\n                if (!allowTextSelectionOnPress) (0, $14c0b72509d70225$export$16a4697467175487)(state.target);\r\n                let shouldStopPropagation = triggerPressStart(e, state.pointerType);\r\n                if (shouldStopPropagation) e.stopPropagation();\r\n                addGlobalListener((0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.getOwnerWindow)(e.currentTarget), \"scroll\", onScroll, true);\r\n            };\r\n            pressProps.onTouchMove = (e)=>{\r\n                if (!e.currentTarget.contains(e.target)) return;\r\n                if (!state.isPressed) {\r\n                    e.stopPropagation();\r\n                    return;\r\n                }\r\n                let touch = $f6c31cce2adf654f$var$getTouchById(e.nativeEvent, state.activePointerId);\r\n                let shouldStopPropagation = true;\r\n                if (touch && $f6c31cce2adf654f$var$isOverTarget(touch, e.currentTarget)) {\r\n                    if (!state.isOverTarget && state.pointerType != null) {\r\n                        state.isOverTarget = true;\r\n                        shouldStopPropagation = triggerPressStart(e, state.pointerType);\r\n                    }\r\n                } else if (state.isOverTarget && state.pointerType != null) {\r\n                    state.isOverTarget = false;\r\n                    shouldStopPropagation = triggerPressEnd(e, state.pointerType, false);\r\n                    cancelOnPointerExit(e);\r\n                }\r\n                if (shouldStopPropagation) e.stopPropagation();\r\n            };\r\n            pressProps.onTouchEnd = (e)=>{\r\n                if (!e.currentTarget.contains(e.target)) return;\r\n                if (!state.isPressed) {\r\n                    e.stopPropagation();\r\n                    return;\r\n                }\r\n                let touch = $f6c31cce2adf654f$var$getTouchById(e.nativeEvent, state.activePointerId);\r\n                let shouldStopPropagation = true;\r\n                if (touch && $f6c31cce2adf654f$var$isOverTarget(touch, e.currentTarget) && state.pointerType != null) {\r\n                    triggerPressUp(e, state.pointerType);\r\n                    shouldStopPropagation = triggerPressEnd(e, state.pointerType);\r\n                } else if (state.isOverTarget && state.pointerType != null) shouldStopPropagation = triggerPressEnd(e, state.pointerType, false);\r\n                if (shouldStopPropagation) e.stopPropagation();\r\n                state.isPressed = false;\r\n                state.activePointerId = null;\r\n                state.isOverTarget = false;\r\n                state.ignoreEmulatedMouseEvents = true;\r\n                if (state.target && !allowTextSelectionOnPress) (0, $14c0b72509d70225$export$b0d6fa1ab32e3295)(state.target);\r\n                removeAllGlobalListeners();\r\n            };\r\n            pressProps.onTouchCancel = (e)=>{\r\n                if (!e.currentTarget.contains(e.target)) return;\r\n                e.stopPropagation();\r\n                if (state.isPressed) cancel(e);\r\n            };\r\n            let onScroll = (e)=>{\r\n                if (state.isPressed && e.target.contains(state.target)) cancel({\r\n                    currentTarget: state.target,\r\n                    shiftKey: false,\r\n                    ctrlKey: false,\r\n                    metaKey: false,\r\n                    altKey: false\r\n                });\r\n            };\r\n            pressProps.onDragStart = (e)=>{\r\n                if (!e.currentTarget.contains(e.target)) return;\r\n                cancel(e);\r\n            };\r\n        }\r\n        return pressProps;\r\n    }, [\r\n        addGlobalListener,\r\n        isDisabled,\r\n        preventFocusOnPress,\r\n        removeAllGlobalListeners,\r\n        allowTextSelectionOnPress,\r\n        cancel,\r\n        cancelOnPointerExit,\r\n        triggerPressEnd,\r\n        triggerPressStart,\r\n        triggerPressUp\r\n    ]);\r\n    // Remove user-select: none in case component unmounts immediately after pressStart\r\n    // eslint-disable-next-line arrow-body-style\r\n    (0, react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\r\n        return ()=>{\r\n            var _ref_current_target;\r\n            if (!allowTextSelectionOnPress) // eslint-disable-next-line react-hooks/exhaustive-deps\r\n            (0, $14c0b72509d70225$export$b0d6fa1ab32e3295)((_ref_current_target = ref.current.target) !== null && _ref_current_target !== void 0 ? _ref_current_target : undefined);\r\n        };\r\n    }, [\r\n        allowTextSelectionOnPress\r\n    ]);\r\n    return {\r\n        isPressed: isPressedProp || isPressed,\r\n        pressProps: (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.mergeProps)(domProps, pressProps)\r\n    };\r\n}\r\nfunction $f6c31cce2adf654f$var$isHTMLAnchorLink(target) {\r\n    return target.tagName === \"A\" && target.hasAttribute(\"href\");\r\n}\r\nfunction $f6c31cce2adf654f$var$isValidKeyboardEvent(event, currentTarget) {\r\n    const { key: key, code: code } = event;\r\n    const element = currentTarget;\r\n    const role = element.getAttribute(\"role\");\r\n    // Accessibility for keyboards. Space and Enter only.\r\n    // \"Spacebar\" is for IE 11\r\n    return (key === \"Enter\" || key === \" \" || key === \"Spacebar\" || code === \"Space\") && !(element instanceof (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.getOwnerWindow)(element).HTMLInputElement && !$f6c31cce2adf654f$var$isValidInputKey(element, key) || element instanceof (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.getOwnerWindow)(element).HTMLTextAreaElement || element.isContentEditable) && // Links should only trigger with Enter key\r\n    !((role === \"link\" || !role && $f6c31cce2adf654f$var$isHTMLAnchorLink(element)) && key !== \"Enter\");\r\n}\r\nfunction $f6c31cce2adf654f$var$getTouchFromEvent(event) {\r\n    const { targetTouches: targetTouches } = event;\r\n    if (targetTouches.length > 0) return targetTouches[0];\r\n    return null;\r\n}\r\nfunction $f6c31cce2adf654f$var$getTouchById(event, pointerId) {\r\n    const changedTouches = event.changedTouches;\r\n    for(let i = 0; i < changedTouches.length; i++){\r\n        const touch = changedTouches[i];\r\n        if (touch.identifier === pointerId) return touch;\r\n    }\r\n    return null;\r\n}\r\nfunction $f6c31cce2adf654f$var$createEvent(target, e) {\r\n    return {\r\n        currentTarget: target,\r\n        shiftKey: e.shiftKey,\r\n        ctrlKey: e.ctrlKey,\r\n        metaKey: e.metaKey,\r\n        altKey: e.altKey\r\n    };\r\n}\r\nfunction $f6c31cce2adf654f$var$getPointClientRect(point) {\r\n    let offsetX = 0;\r\n    let offsetY = 0;\r\n    if (point.width !== undefined) offsetX = point.width / 2;\r\n    else if (point.radiusX !== undefined) offsetX = point.radiusX;\r\n    if (point.height !== undefined) offsetY = point.height / 2;\r\n    else if (point.radiusY !== undefined) offsetY = point.radiusY;\r\n    return {\r\n        top: point.clientY - offsetY,\r\n        right: point.clientX + offsetX,\r\n        bottom: point.clientY + offsetY,\r\n        left: point.clientX - offsetX\r\n    };\r\n}\r\nfunction $f6c31cce2adf654f$var$areRectanglesOverlapping(a, b) {\r\n    // check if they cannot overlap on x axis\r\n    if (a.left > b.right || b.left > a.right) return false;\r\n    // check if they cannot overlap on y axis\r\n    if (a.top > b.bottom || b.top > a.bottom) return false;\r\n    return true;\r\n}\r\nfunction $f6c31cce2adf654f$var$isOverTarget(point, target) {\r\n    let rect = target.getBoundingClientRect();\r\n    let pointRect = $f6c31cce2adf654f$var$getPointClientRect(point);\r\n    return $f6c31cce2adf654f$var$areRectanglesOverlapping(rect, pointRect);\r\n}\r\nfunction $f6c31cce2adf654f$var$shouldPreventDefault(target) {\r\n    // We cannot prevent default if the target is a draggable element.\r\n    return !(target instanceof HTMLElement) || !target.hasAttribute(\"draggable\");\r\n}\r\nfunction $f6c31cce2adf654f$var$shouldPreventDefaultKeyboard(target, key) {\r\n    if (target instanceof HTMLInputElement) return !$f6c31cce2adf654f$var$isValidInputKey(target, key);\r\n    if (target instanceof HTMLButtonElement) return target.type !== \"submit\" && target.type !== \"reset\";\r\n    if ($f6c31cce2adf654f$var$isHTMLAnchorLink(target)) return false;\r\n    return true;\r\n}\r\nconst $f6c31cce2adf654f$var$nonTextInputTypes = new Set([\r\n    \"checkbox\",\r\n    \"radio\",\r\n    \"range\",\r\n    \"color\",\r\n    \"file\",\r\n    \"image\",\r\n    \"button\",\r\n    \"submit\",\r\n    \"reset\"\r\n]);\r\nfunction $f6c31cce2adf654f$var$isValidInputKey(target, key) {\r\n    // Only space should toggle checkboxes and radios, not enter.\r\n    return target.type === \"checkbox\" || target.type === \"radio\" ? key === \" \" : $f6c31cce2adf654f$var$nonTextInputTypes.has(target.type);\r\n}\r\n\r\n\r\n\r\nconst $3b117e43dc0ca95d$export$27c701ed9e449e99 = /*#__PURE__*/ (0, react__WEBPACK_IMPORTED_MODULE_0__).forwardRef(({ children: children, ...props }, ref)=>{\r\n    ref = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.useObjectRef)(ref);\r\n    let { pressProps: pressProps } = (0, $f6c31cce2adf654f$export$45712eceda6fad21)({\r\n        ...props,\r\n        ref: ref\r\n    });\r\n    let child = (0, react__WEBPACK_IMPORTED_MODULE_0__).Children.only(children);\r\n    return /*#__PURE__*/ (0, react__WEBPACK_IMPORTED_MODULE_0__).cloneElement(child, // @ts-ignore\r\n    {\r\n        ref: ref,\r\n        ...(0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.mergeProps)(child.props, pressProps)\r\n    });\r\n});\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n\r\n\r\nconst $f1ab8c75478c6f73$export$3351871ee4b288b8 = /*#__PURE__*/ (0, react__WEBPACK_IMPORTED_MODULE_0__).forwardRef(({ children: children, ...props }, ref)=>{\r\n    let isRegistered = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\r\n    let prevContext = (0, react__WEBPACK_IMPORTED_MODULE_0__.useContext)((0, $ae1eeba8b9eafd08$export$5165eccb35aaadb5));\r\n    ref = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.useObjectRef)(ref || (prevContext === null || prevContext === void 0 ? void 0 : prevContext.ref));\r\n    let context = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.mergeProps)(prevContext || {}, {\r\n        ...props,\r\n        ref: ref,\r\n        register () {\r\n            isRegistered.current = true;\r\n            if (prevContext) prevContext.register();\r\n        }\r\n    });\r\n    (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.useSyncRef)(prevContext, ref);\r\n    (0, react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\r\n        if (!isRegistered.current) {\r\n            console.warn(\"A PressResponder was rendered without a pressable child. Either call the usePress hook, or wrap your DOM node with <Pressable> component.\");\r\n            isRegistered.current = true; // only warn once in strict mode.\r\n        }\r\n    }, []);\r\n    return /*#__PURE__*/ (0, react__WEBPACK_IMPORTED_MODULE_0__).createElement((0, $ae1eeba8b9eafd08$export$5165eccb35aaadb5).Provider, {\r\n        value: context\r\n    }, children);\r\n});\r\nfunction $f1ab8c75478c6f73$export$cf75428e0b9ed1ea({ children: children }) {\r\n    let context = (0, react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>({\r\n            register: ()=>{}\r\n        }), []);\r\n    return /*#__PURE__*/ (0, react__WEBPACK_IMPORTED_MODULE_0__).createElement((0, $ae1eeba8b9eafd08$export$5165eccb35aaadb5).Provider, {\r\n        value: context\r\n    }, children);\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ // Portions of the code in this file are based on code from react.\r\n// Original licensing for the following can be found in the\r\n// NOTICE file in the root directory of this source tree.\r\n// See https://github.com/facebook/react/tree/cc7c1aece46a6b69b41958d731e0fd27c94bfc6c/packages/react-interactions\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n\r\nclass $8a9cb279dc87e130$export$905e7fc544a71f36 {\r\n    isDefaultPrevented() {\r\n        return this.nativeEvent.defaultPrevented;\r\n    }\r\n    preventDefault() {\r\n        this.defaultPrevented = true;\r\n        this.nativeEvent.preventDefault();\r\n    }\r\n    stopPropagation() {\r\n        this.nativeEvent.stopPropagation();\r\n        this.isPropagationStopped = ()=>true;\r\n    }\r\n    isPropagationStopped() {\r\n        return false;\r\n    }\r\n    persist() {}\r\n    constructor(type, nativeEvent){\r\n        this.nativeEvent = nativeEvent;\r\n        this.target = nativeEvent.target;\r\n        this.currentTarget = nativeEvent.currentTarget;\r\n        this.relatedTarget = nativeEvent.relatedTarget;\r\n        this.bubbles = nativeEvent.bubbles;\r\n        this.cancelable = nativeEvent.cancelable;\r\n        this.defaultPrevented = nativeEvent.defaultPrevented;\r\n        this.eventPhase = nativeEvent.eventPhase;\r\n        this.isTrusted = nativeEvent.isTrusted;\r\n        this.timeStamp = nativeEvent.timeStamp;\r\n        this.type = type;\r\n    }\r\n}\r\nfunction $8a9cb279dc87e130$export$715c682d09d639cc(onBlur) {\r\n    let stateRef = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)({\r\n        isFocused: false,\r\n        observer: null\r\n    });\r\n    // Clean up MutationObserver on unmount. See below.\r\n    // eslint-disable-next-line arrow-body-style\r\n    (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)(()=>{\r\n        const state = stateRef.current;\r\n        return ()=>{\r\n            if (state.observer) {\r\n                state.observer.disconnect();\r\n                state.observer = null;\r\n            }\r\n        };\r\n    }, []);\r\n    let dispatchBlur = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.useEffectEvent)((e)=>{\r\n        onBlur === null || onBlur === void 0 ? void 0 : onBlur(e);\r\n    });\r\n    // This function is called during a React onFocus event.\r\n    return (0, react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e)=>{\r\n        // React does not fire onBlur when an element is disabled. https://github.com/facebook/react/issues/9142\r\n        // Most browsers fire a native focusout event in this case, except for Firefox. In that case, we use a\r\n        // MutationObserver to watch for the disabled attribute, and dispatch these events ourselves.\r\n        // For browsers that do, focusout fires before the MutationObserver, so onBlur should not fire twice.\r\n        if (e.target instanceof HTMLButtonElement || e.target instanceof HTMLInputElement || e.target instanceof HTMLTextAreaElement || e.target instanceof HTMLSelectElement) {\r\n            stateRef.current.isFocused = true;\r\n            let target = e.target;\r\n            let onBlurHandler = (e)=>{\r\n                stateRef.current.isFocused = false;\r\n                if (target.disabled) // For backward compatibility, dispatch a (fake) React synthetic event.\r\n                dispatchBlur(new $8a9cb279dc87e130$export$905e7fc544a71f36(\"blur\", e));\r\n                // We no longer need the MutationObserver once the target is blurred.\r\n                if (stateRef.current.observer) {\r\n                    stateRef.current.observer.disconnect();\r\n                    stateRef.current.observer = null;\r\n                }\r\n            };\r\n            target.addEventListener(\"focusout\", onBlurHandler, {\r\n                once: true\r\n            });\r\n            stateRef.current.observer = new MutationObserver(()=>{\r\n                if (stateRef.current.isFocused && target.disabled) {\r\n                    var _stateRef_current_observer;\r\n                    (_stateRef_current_observer = stateRef.current.observer) === null || _stateRef_current_observer === void 0 ? void 0 : _stateRef_current_observer.disconnect();\r\n                    let relatedTargetEl = target === document.activeElement ? null : document.activeElement;\r\n                    target.dispatchEvent(new FocusEvent(\"blur\", {\r\n                        relatedTarget: relatedTargetEl\r\n                    }));\r\n                    target.dispatchEvent(new FocusEvent(\"focusout\", {\r\n                        bubbles: true,\r\n                        relatedTarget: relatedTargetEl\r\n                    }));\r\n                }\r\n            });\r\n            stateRef.current.observer.observe(target, {\r\n                attributes: true,\r\n                attributeFilter: [\r\n                    \"disabled\"\r\n                ]\r\n            });\r\n        }\r\n    }, [\r\n        dispatchBlur\r\n    ]);\r\n}\r\n\r\n\r\nfunction $a1ea59d68270f0dd$export$f8168d8dd8fd66e6(props) {\r\n    let { isDisabled: isDisabled, onFocus: onFocusProp, onBlur: onBlurProp, onFocusChange: onFocusChange } = props;\r\n    const onBlur = (0, react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e)=>{\r\n        if (e.target === e.currentTarget) {\r\n            if (onBlurProp) onBlurProp(e);\r\n            if (onFocusChange) onFocusChange(false);\r\n            return true;\r\n        }\r\n    }, [\r\n        onBlurProp,\r\n        onFocusChange\r\n    ]);\r\n    const onSyntheticFocus = (0, $8a9cb279dc87e130$export$715c682d09d639cc)(onBlur);\r\n    const onFocus = (0, react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e)=>{\r\n        // Double check that document.activeElement actually matches e.target in case a previously chained\r\n        // focus handler already moved focus somewhere else.\r\n        if (e.target === e.currentTarget && document.activeElement === e.target) {\r\n            if (onFocusProp) onFocusProp(e);\r\n            if (onFocusChange) onFocusChange(true);\r\n            onSyntheticFocus(e);\r\n        }\r\n    }, [\r\n        onFocusChange,\r\n        onFocusProp,\r\n        onSyntheticFocus\r\n    ]);\r\n    return {\r\n        focusProps: {\r\n            onFocus: !isDisabled && (onFocusProp || onFocusChange || onBlurProp) ? onFocus : undefined,\r\n            onBlur: !isDisabled && (onBlurProp || onFocusChange) ? onBlur : undefined\r\n        }\r\n    };\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ // Portions of the code in this file are based on code from react.\r\n// Original licensing for the following can be found in the\r\n// NOTICE file in the root directory of this source tree.\r\n// See https://github.com/facebook/react/tree/cc7c1aece46a6b69b41958d731e0fd27c94bfc6c/packages/react-interactions\r\n\r\n\r\n\r\nlet $507fabe10e71c6fb$var$currentModality = null;\r\nlet $507fabe10e71c6fb$var$changeHandlers = new Set();\r\nlet $507fabe10e71c6fb$export$d90243b58daecda7 = new Map(); // We use a map here to support setting event listeners across multiple document objects.\r\nlet $507fabe10e71c6fb$var$hasEventBeforeFocus = false;\r\nlet $507fabe10e71c6fb$var$hasBlurredWindowRecently = false;\r\n// Only Tab or Esc keys will make focus visible on text input elements\r\nconst $507fabe10e71c6fb$var$FOCUS_VISIBLE_INPUT_KEYS = {\r\n    Tab: true,\r\n    Escape: true\r\n};\r\nfunction $507fabe10e71c6fb$var$triggerChangeHandlers(modality, e) {\r\n    for (let handler of $507fabe10e71c6fb$var$changeHandlers)handler(modality, e);\r\n}\r\n/**\r\n * Helper function to determine if a KeyboardEvent is unmodified and could make keyboard focus styles visible.\r\n */ function $507fabe10e71c6fb$var$isValidKey(e) {\r\n    // Control and Shift keys trigger when navigating back to the tab with keyboard.\r\n    return !(e.metaKey || !(0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.isMac)() && e.altKey || e.ctrlKey || e.key === \"Control\" || e.key === \"Shift\" || e.key === \"Meta\");\r\n}\r\nfunction $507fabe10e71c6fb$var$handleKeyboardEvent(e) {\r\n    $507fabe10e71c6fb$var$hasEventBeforeFocus = true;\r\n    if ($507fabe10e71c6fb$var$isValidKey(e)) {\r\n        $507fabe10e71c6fb$var$currentModality = \"keyboard\";\r\n        $507fabe10e71c6fb$var$triggerChangeHandlers(\"keyboard\", e);\r\n    }\r\n}\r\nfunction $507fabe10e71c6fb$var$handlePointerEvent(e) {\r\n    $507fabe10e71c6fb$var$currentModality = \"pointer\";\r\n    if (e.type === \"mousedown\" || e.type === \"pointerdown\") {\r\n        $507fabe10e71c6fb$var$hasEventBeforeFocus = true;\r\n        $507fabe10e71c6fb$var$triggerChangeHandlers(\"pointer\", e);\r\n    }\r\n}\r\nfunction $507fabe10e71c6fb$var$handleClickEvent(e) {\r\n    if ((0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.isVirtualClick)(e)) {\r\n        $507fabe10e71c6fb$var$hasEventBeforeFocus = true;\r\n        $507fabe10e71c6fb$var$currentModality = \"virtual\";\r\n    }\r\n}\r\nfunction $507fabe10e71c6fb$var$handleFocusEvent(e) {\r\n    // Firefox fires two extra focus events when the user first clicks into an iframe:\r\n    // first on the window, then on the document. We ignore these events so they don't\r\n    // cause keyboard focus rings to appear.\r\n    if (e.target === window || e.target === document) return;\r\n    // If a focus event occurs without a preceding keyboard or pointer event, switch to virtual modality.\r\n    // This occurs, for example, when navigating a form with the next/previous buttons on iOS.\r\n    if (!$507fabe10e71c6fb$var$hasEventBeforeFocus && !$507fabe10e71c6fb$var$hasBlurredWindowRecently) {\r\n        $507fabe10e71c6fb$var$currentModality = \"virtual\";\r\n        $507fabe10e71c6fb$var$triggerChangeHandlers(\"virtual\", e);\r\n    }\r\n    $507fabe10e71c6fb$var$hasEventBeforeFocus = false;\r\n    $507fabe10e71c6fb$var$hasBlurredWindowRecently = false;\r\n}\r\nfunction $507fabe10e71c6fb$var$handleWindowBlur() {\r\n    // When the window is blurred, reset state. This is necessary when tabbing out of the window,\r\n    // for example, since a subsequent focus event won't be fired.\r\n    $507fabe10e71c6fb$var$hasEventBeforeFocus = false;\r\n    $507fabe10e71c6fb$var$hasBlurredWindowRecently = true;\r\n}\r\n/**\r\n * Setup global event listeners to control when keyboard focus style should be visible.\r\n */ function $507fabe10e71c6fb$var$setupGlobalFocusEvents(element) {\r\n    if (typeof window === \"undefined\" || $507fabe10e71c6fb$export$d90243b58daecda7.get((0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.getOwnerWindow)(element))) return;\r\n    const windowObject = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.getOwnerWindow)(element);\r\n    const documentObject = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.getOwnerDocument)(element);\r\n    // Programmatic focus() calls shouldn't affect the current input modality.\r\n    // However, we need to detect other cases when a focus event occurs without\r\n    // a preceding user event (e.g. screen reader focus). Overriding the focus\r\n    // method on HTMLElement.prototype is a bit hacky, but works.\r\n    let focus = windowObject.HTMLElement.prototype.focus;\r\n    windowObject.HTMLElement.prototype.focus = function() {\r\n        $507fabe10e71c6fb$var$hasEventBeforeFocus = true;\r\n        focus.apply(this, arguments);\r\n    };\r\n    documentObject.addEventListener(\"keydown\", $507fabe10e71c6fb$var$handleKeyboardEvent, true);\r\n    documentObject.addEventListener(\"keyup\", $507fabe10e71c6fb$var$handleKeyboardEvent, true);\r\n    documentObject.addEventListener(\"click\", $507fabe10e71c6fb$var$handleClickEvent, true);\r\n    // Register focus events on the window so they are sure to happen\r\n    // before React's event listeners (registered on the document).\r\n    windowObject.addEventListener(\"focus\", $507fabe10e71c6fb$var$handleFocusEvent, true);\r\n    windowObject.addEventListener(\"blur\", $507fabe10e71c6fb$var$handleWindowBlur, false);\r\n    if (typeof PointerEvent !== \"undefined\") {\r\n        documentObject.addEventListener(\"pointerdown\", $507fabe10e71c6fb$var$handlePointerEvent, true);\r\n        documentObject.addEventListener(\"pointermove\", $507fabe10e71c6fb$var$handlePointerEvent, true);\r\n        documentObject.addEventListener(\"pointerup\", $507fabe10e71c6fb$var$handlePointerEvent, true);\r\n    } else {\r\n        documentObject.addEventListener(\"mousedown\", $507fabe10e71c6fb$var$handlePointerEvent, true);\r\n        documentObject.addEventListener(\"mousemove\", $507fabe10e71c6fb$var$handlePointerEvent, true);\r\n        documentObject.addEventListener(\"mouseup\", $507fabe10e71c6fb$var$handlePointerEvent, true);\r\n    }\r\n    // Add unmount handler\r\n    windowObject.addEventListener(\"beforeunload\", ()=>{\r\n        $507fabe10e71c6fb$var$tearDownWindowFocusTracking(element);\r\n    }, {\r\n        once: true\r\n    });\r\n    $507fabe10e71c6fb$export$d90243b58daecda7.set(windowObject, {\r\n        focus: focus\r\n    });\r\n}\r\nconst $507fabe10e71c6fb$var$tearDownWindowFocusTracking = (element, loadListener)=>{\r\n    const windowObject = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.getOwnerWindow)(element);\r\n    const documentObject = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.getOwnerDocument)(element);\r\n    if (loadListener) documentObject.removeEventListener(\"DOMContentLoaded\", loadListener);\r\n    if (!$507fabe10e71c6fb$export$d90243b58daecda7.has(windowObject)) return;\r\n    windowObject.HTMLElement.prototype.focus = $507fabe10e71c6fb$export$d90243b58daecda7.get(windowObject).focus;\r\n    documentObject.removeEventListener(\"keydown\", $507fabe10e71c6fb$var$handleKeyboardEvent, true);\r\n    documentObject.removeEventListener(\"keyup\", $507fabe10e71c6fb$var$handleKeyboardEvent, true);\r\n    documentObject.removeEventListener(\"click\", $507fabe10e71c6fb$var$handleClickEvent, true);\r\n    windowObject.removeEventListener(\"focus\", $507fabe10e71c6fb$var$handleFocusEvent, true);\r\n    windowObject.removeEventListener(\"blur\", $507fabe10e71c6fb$var$handleWindowBlur, false);\r\n    if (typeof PointerEvent !== \"undefined\") {\r\n        documentObject.removeEventListener(\"pointerdown\", $507fabe10e71c6fb$var$handlePointerEvent, true);\r\n        documentObject.removeEventListener(\"pointermove\", $507fabe10e71c6fb$var$handlePointerEvent, true);\r\n        documentObject.removeEventListener(\"pointerup\", $507fabe10e71c6fb$var$handlePointerEvent, true);\r\n    } else {\r\n        documentObject.removeEventListener(\"mousedown\", $507fabe10e71c6fb$var$handlePointerEvent, true);\r\n        documentObject.removeEventListener(\"mousemove\", $507fabe10e71c6fb$var$handlePointerEvent, true);\r\n        documentObject.removeEventListener(\"mouseup\", $507fabe10e71c6fb$var$handlePointerEvent, true);\r\n    }\r\n    $507fabe10e71c6fb$export$d90243b58daecda7.delete(windowObject);\r\n};\r\nfunction $507fabe10e71c6fb$export$2f1888112f558a7d(element) {\r\n    const documentObject = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.getOwnerDocument)(element);\r\n    let loadListener;\r\n    if (documentObject.readyState !== \"loading\") $507fabe10e71c6fb$var$setupGlobalFocusEvents(element);\r\n    else {\r\n        loadListener = ()=>{\r\n            $507fabe10e71c6fb$var$setupGlobalFocusEvents(element);\r\n        };\r\n        documentObject.addEventListener(\"DOMContentLoaded\", loadListener);\r\n    }\r\n    return ()=>$507fabe10e71c6fb$var$tearDownWindowFocusTracking(element, loadListener);\r\n}\r\n// Server-side rendering does not have the document object defined\r\n// eslint-disable-next-line no-restricted-globals\r\nif (typeof document !== \"undefined\") $507fabe10e71c6fb$export$2f1888112f558a7d();\r\nfunction $507fabe10e71c6fb$export$b9b3dfddab17db27() {\r\n    return $507fabe10e71c6fb$var$currentModality !== \"pointer\";\r\n}\r\nfunction $507fabe10e71c6fb$export$630ff653c5ada6a9() {\r\n    return $507fabe10e71c6fb$var$currentModality;\r\n}\r\nfunction $507fabe10e71c6fb$export$8397ddfc504fdb9a(modality) {\r\n    $507fabe10e71c6fb$var$currentModality = modality;\r\n    $507fabe10e71c6fb$var$triggerChangeHandlers(modality, null);\r\n}\r\nfunction $507fabe10e71c6fb$export$98e20ec92f614cfe() {\r\n    $507fabe10e71c6fb$var$setupGlobalFocusEvents();\r\n    let [modality, setModality] = (0, react__WEBPACK_IMPORTED_MODULE_0__.useState)($507fabe10e71c6fb$var$currentModality);\r\n    (0, react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\r\n        let handler = ()=>{\r\n            setModality($507fabe10e71c6fb$var$currentModality);\r\n        };\r\n        $507fabe10e71c6fb$var$changeHandlers.add(handler);\r\n        return ()=>{\r\n            $507fabe10e71c6fb$var$changeHandlers.delete(handler);\r\n        };\r\n    }, []);\r\n    return (0, _react_aria_ssr__WEBPACK_IMPORTED_MODULE_5__.useIsSSR)() ? null : modality;\r\n}\r\nconst $507fabe10e71c6fb$var$nonTextInputTypes = new Set([\r\n    \"checkbox\",\r\n    \"radio\",\r\n    \"range\",\r\n    \"color\",\r\n    \"file\",\r\n    \"image\",\r\n    \"button\",\r\n    \"submit\",\r\n    \"reset\"\r\n]);\r\n/**\r\n * If this is attached to text input component, return if the event is a focus event (Tab/Escape keys pressed) so that\r\n * focus visible style can be properly set.\r\n */ function $507fabe10e71c6fb$var$isKeyboardFocusEvent(isTextInput, modality, e) {\r\n    var _e_target;\r\n    const IHTMLInputElement = typeof window !== \"undefined\" ? (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.getOwnerWindow)(e === null || e === void 0 ? void 0 : e.target).HTMLInputElement : HTMLInputElement;\r\n    const IHTMLTextAreaElement = typeof window !== \"undefined\" ? (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.getOwnerWindow)(e === null || e === void 0 ? void 0 : e.target).HTMLTextAreaElement : HTMLTextAreaElement;\r\n    const IHTMLElement = typeof window !== \"undefined\" ? (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.getOwnerWindow)(e === null || e === void 0 ? void 0 : e.target).HTMLElement : HTMLElement;\r\n    const IKeyboardEvent = typeof window !== \"undefined\" ? (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.getOwnerWindow)(e === null || e === void 0 ? void 0 : e.target).KeyboardEvent : KeyboardEvent;\r\n    isTextInput = isTextInput || (e === null || e === void 0 ? void 0 : e.target) instanceof IHTMLInputElement && !$507fabe10e71c6fb$var$nonTextInputTypes.has(e === null || e === void 0 ? void 0 : (_e_target = e.target) === null || _e_target === void 0 ? void 0 : _e_target.type) || (e === null || e === void 0 ? void 0 : e.target) instanceof IHTMLTextAreaElement || (e === null || e === void 0 ? void 0 : e.target) instanceof IHTMLElement && (e === null || e === void 0 ? void 0 : e.target.isContentEditable);\r\n    return !(isTextInput && modality === \"keyboard\" && e instanceof IKeyboardEvent && !$507fabe10e71c6fb$var$FOCUS_VISIBLE_INPUT_KEYS[e.key]);\r\n}\r\nfunction $507fabe10e71c6fb$export$ffd9e5021c1fb2d6(props = {}) {\r\n    let { isTextInput: isTextInput, autoFocus: autoFocus } = props;\r\n    let [isFocusVisibleState, setFocusVisible] = (0, react__WEBPACK_IMPORTED_MODULE_0__.useState)(autoFocus || $507fabe10e71c6fb$export$b9b3dfddab17db27());\r\n    $507fabe10e71c6fb$export$ec71b4b83ac08ec3((isFocusVisible)=>{\r\n        setFocusVisible(isFocusVisible);\r\n    }, [\r\n        isTextInput\r\n    ], {\r\n        isTextInput: isTextInput\r\n    });\r\n    return {\r\n        isFocusVisible: isFocusVisibleState\r\n    };\r\n}\r\nfunction $507fabe10e71c6fb$export$ec71b4b83ac08ec3(fn, deps, opts) {\r\n    $507fabe10e71c6fb$var$setupGlobalFocusEvents();\r\n    (0, react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\r\n        let handler = (modality, e)=>{\r\n            if (!$507fabe10e71c6fb$var$isKeyboardFocusEvent(!!(opts === null || opts === void 0 ? void 0 : opts.isTextInput), modality, e)) return;\r\n            fn($507fabe10e71c6fb$export$b9b3dfddab17db27());\r\n        };\r\n        $507fabe10e71c6fb$var$changeHandlers.add(handler);\r\n        return ()=>{\r\n            $507fabe10e71c6fb$var$changeHandlers.delete(handler);\r\n        };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, deps);\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ // Portions of the code in this file are based on code from react.\r\n// Original licensing for the following can be found in the\r\n// NOTICE file in the root directory of this source tree.\r\n// See https://github.com/facebook/react/tree/cc7c1aece46a6b69b41958d731e0fd27c94bfc6c/packages/react-interactions\r\n\r\n\r\nfunction $9ab94262bd0047c7$export$420e68273165f4ec(props) {\r\n    let { isDisabled: isDisabled, onBlurWithin: onBlurWithin, onFocusWithin: onFocusWithin, onFocusWithinChange: onFocusWithinChange } = props;\r\n    let state = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)({\r\n        isFocusWithin: false\r\n    });\r\n    let onBlur = (0, react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e)=>{\r\n        // We don't want to trigger onBlurWithin and then immediately onFocusWithin again\r\n        // when moving focus inside the element. Only trigger if the currentTarget doesn't\r\n        // include the relatedTarget (where focus is moving).\r\n        if (state.current.isFocusWithin && !e.currentTarget.contains(e.relatedTarget)) {\r\n            state.current.isFocusWithin = false;\r\n            if (onBlurWithin) onBlurWithin(e);\r\n            if (onFocusWithinChange) onFocusWithinChange(false);\r\n        }\r\n    }, [\r\n        onBlurWithin,\r\n        onFocusWithinChange,\r\n        state\r\n    ]);\r\n    let onSyntheticFocus = (0, $8a9cb279dc87e130$export$715c682d09d639cc)(onBlur);\r\n    let onFocus = (0, react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e)=>{\r\n        // Double check that document.activeElement actually matches e.target in case a previously chained\r\n        // focus handler already moved focus somewhere else.\r\n        if (!state.current.isFocusWithin && document.activeElement === e.target) {\r\n            if (onFocusWithin) onFocusWithin(e);\r\n            if (onFocusWithinChange) onFocusWithinChange(true);\r\n            state.current.isFocusWithin = true;\r\n            onSyntheticFocus(e);\r\n        }\r\n    }, [\r\n        onFocusWithin,\r\n        onFocusWithinChange,\r\n        onSyntheticFocus\r\n    ]);\r\n    if (isDisabled) return {\r\n        focusWithinProps: {\r\n            // These should not have been null, that would conflict in mergeProps\r\n            onFocus: undefined,\r\n            onBlur: undefined\r\n        }\r\n    };\r\n    return {\r\n        focusWithinProps: {\r\n            onFocus: onFocus,\r\n            onBlur: onBlur\r\n        }\r\n    };\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ // Portions of the code in this file are based on code from react.\r\n// Original licensing for the following can be found in the\r\n// NOTICE file in the root directory of this source tree.\r\n// See https://github.com/facebook/react/tree/cc7c1aece46a6b69b41958d731e0fd27c94bfc6c/packages/react-interactions\r\n\r\n// iOS fires onPointerEnter twice: once with pointerType=\"touch\" and again with pointerType=\"mouse\".\r\n// We want to ignore these emulated events so they do not trigger hover behavior.\r\n// See https://bugs.webkit.org/show_bug.cgi?id=214609.\r\nlet $6179b936705e76d3$var$globalIgnoreEmulatedMouseEvents = false;\r\nlet $6179b936705e76d3$var$hoverCount = 0;\r\nfunction $6179b936705e76d3$var$setGlobalIgnoreEmulatedMouseEvents() {\r\n    $6179b936705e76d3$var$globalIgnoreEmulatedMouseEvents = true;\r\n    // Clear globalIgnoreEmulatedMouseEvents after a short timeout. iOS fires onPointerEnter\r\n    // with pointerType=\"mouse\" immediately after onPointerUp and before onFocus. On other\r\n    // devices that don't have this quirk, we don't want to ignore a mouse hover sometime in\r\n    // the distant future because a user previously touched the element.\r\n    setTimeout(()=>{\r\n        $6179b936705e76d3$var$globalIgnoreEmulatedMouseEvents = false;\r\n    }, 50);\r\n}\r\nfunction $6179b936705e76d3$var$handleGlobalPointerEvent(e) {\r\n    if (e.pointerType === \"touch\") $6179b936705e76d3$var$setGlobalIgnoreEmulatedMouseEvents();\r\n}\r\nfunction $6179b936705e76d3$var$setupGlobalTouchEvents() {\r\n    if (typeof document === \"undefined\") return;\r\n    if (typeof PointerEvent !== \"undefined\") document.addEventListener(\"pointerup\", $6179b936705e76d3$var$handleGlobalPointerEvent);\r\n    else document.addEventListener(\"touchend\", $6179b936705e76d3$var$setGlobalIgnoreEmulatedMouseEvents);\r\n    $6179b936705e76d3$var$hoverCount++;\r\n    return ()=>{\r\n        $6179b936705e76d3$var$hoverCount--;\r\n        if ($6179b936705e76d3$var$hoverCount > 0) return;\r\n        if (typeof PointerEvent !== \"undefined\") document.removeEventListener(\"pointerup\", $6179b936705e76d3$var$handleGlobalPointerEvent);\r\n        else document.removeEventListener(\"touchend\", $6179b936705e76d3$var$setGlobalIgnoreEmulatedMouseEvents);\r\n    };\r\n}\r\nfunction $6179b936705e76d3$export$ae780daf29e6d456(props) {\r\n    let { onHoverStart: onHoverStart, onHoverChange: onHoverChange, onHoverEnd: onHoverEnd, isDisabled: isDisabled } = props;\r\n    let [isHovered, setHovered] = (0, react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\r\n    let state = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)({\r\n        isHovered: false,\r\n        ignoreEmulatedMouseEvents: false,\r\n        pointerType: \"\",\r\n        target: null\r\n    }).current;\r\n    (0, react__WEBPACK_IMPORTED_MODULE_0__.useEffect)($6179b936705e76d3$var$setupGlobalTouchEvents, []);\r\n    let { hoverProps: hoverProps, triggerHoverEnd: triggerHoverEnd } = (0, react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{\r\n        let triggerHoverStart = (event, pointerType)=>{\r\n            state.pointerType = pointerType;\r\n            if (isDisabled || pointerType === \"touch\" || state.isHovered || !event.currentTarget.contains(event.target)) return;\r\n            state.isHovered = true;\r\n            let target = event.currentTarget;\r\n            state.target = target;\r\n            if (onHoverStart) onHoverStart({\r\n                type: \"hoverstart\",\r\n                target: target,\r\n                pointerType: pointerType\r\n            });\r\n            if (onHoverChange) onHoverChange(true);\r\n            setHovered(true);\r\n        };\r\n        let triggerHoverEnd = (event, pointerType)=>{\r\n            state.pointerType = \"\";\r\n            state.target = null;\r\n            if (pointerType === \"touch\" || !state.isHovered) return;\r\n            state.isHovered = false;\r\n            let target = event.currentTarget;\r\n            if (onHoverEnd) onHoverEnd({\r\n                type: \"hoverend\",\r\n                target: target,\r\n                pointerType: pointerType\r\n            });\r\n            if (onHoverChange) onHoverChange(false);\r\n            setHovered(false);\r\n        };\r\n        let hoverProps = {};\r\n        if (typeof PointerEvent !== \"undefined\") {\r\n            hoverProps.onPointerEnter = (e)=>{\r\n                if ($6179b936705e76d3$var$globalIgnoreEmulatedMouseEvents && e.pointerType === \"mouse\") return;\r\n                triggerHoverStart(e, e.pointerType);\r\n            };\r\n            hoverProps.onPointerLeave = (e)=>{\r\n                if (!isDisabled && e.currentTarget.contains(e.target)) triggerHoverEnd(e, e.pointerType);\r\n            };\r\n        } else {\r\n            hoverProps.onTouchStart = ()=>{\r\n                state.ignoreEmulatedMouseEvents = true;\r\n            };\r\n            hoverProps.onMouseEnter = (e)=>{\r\n                if (!state.ignoreEmulatedMouseEvents && !$6179b936705e76d3$var$globalIgnoreEmulatedMouseEvents) triggerHoverStart(e, \"mouse\");\r\n                state.ignoreEmulatedMouseEvents = false;\r\n            };\r\n            hoverProps.onMouseLeave = (e)=>{\r\n                if (!isDisabled && e.currentTarget.contains(e.target)) triggerHoverEnd(e, \"mouse\");\r\n            };\r\n        }\r\n        return {\r\n            hoverProps: hoverProps,\r\n            triggerHoverEnd: triggerHoverEnd\r\n        };\r\n    }, [\r\n        onHoverStart,\r\n        onHoverChange,\r\n        onHoverEnd,\r\n        isDisabled,\r\n        state\r\n    ]);\r\n    (0, react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\r\n        // Call the triggerHoverEnd as soon as isDisabled changes to true\r\n        // Safe to call triggerHoverEnd, it will early return if we aren't currently hovering\r\n        if (isDisabled) triggerHoverEnd({\r\n            currentTarget: state.target\r\n        }, state.pointerType);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [\r\n        isDisabled\r\n    ]);\r\n    return {\r\n        hoverProps: hoverProps,\r\n        isHovered: isHovered\r\n    };\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ // Portions of the code in this file are based on code from react.\r\n// Original licensing for the following can be found in the\r\n// NOTICE file in the root directory of this source tree.\r\n// See https://github.com/facebook/react/tree/cc7c1aece46a6b69b41958d731e0fd27c94bfc6c/packages/react-interactions\r\n\r\n\r\nfunction $e0b6e0b68ec7f50f$export$872b660ac5a1ff98(props) {\r\n    let { ref: ref, onInteractOutside: onInteractOutside, isDisabled: isDisabled, onInteractOutsideStart: onInteractOutsideStart } = props;\r\n    let stateRef = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)({\r\n        isPointerDown: false,\r\n        ignoreEmulatedMouseEvents: false\r\n    });\r\n    let onPointerDown = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.useEffectEvent)((e)=>{\r\n        if (onInteractOutside && $e0b6e0b68ec7f50f$var$isValidEvent(e, ref)) {\r\n            if (onInteractOutsideStart) onInteractOutsideStart(e);\r\n            stateRef.current.isPointerDown = true;\r\n        }\r\n    });\r\n    let triggerInteractOutside = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.useEffectEvent)((e)=>{\r\n        if (onInteractOutside) onInteractOutside(e);\r\n    });\r\n    (0, react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\r\n        let state = stateRef.current;\r\n        if (isDisabled) return;\r\n        const element = ref.current;\r\n        const documentObject = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.getOwnerDocument)(element);\r\n        // Use pointer events if available. Otherwise, fall back to mouse and touch events.\r\n        if (typeof PointerEvent !== \"undefined\") {\r\n            let onPointerUp = (e)=>{\r\n                if (state.isPointerDown && $e0b6e0b68ec7f50f$var$isValidEvent(e, ref)) triggerInteractOutside(e);\r\n                state.isPointerDown = false;\r\n            };\r\n            // changing these to capture phase fixed combobox\r\n            documentObject.addEventListener(\"pointerdown\", onPointerDown, true);\r\n            documentObject.addEventListener(\"pointerup\", onPointerUp, true);\r\n            return ()=>{\r\n                documentObject.removeEventListener(\"pointerdown\", onPointerDown, true);\r\n                documentObject.removeEventListener(\"pointerup\", onPointerUp, true);\r\n            };\r\n        } else {\r\n            let onMouseUp = (e)=>{\r\n                if (state.ignoreEmulatedMouseEvents) state.ignoreEmulatedMouseEvents = false;\r\n                else if (state.isPointerDown && $e0b6e0b68ec7f50f$var$isValidEvent(e, ref)) triggerInteractOutside(e);\r\n                state.isPointerDown = false;\r\n            };\r\n            let onTouchEnd = (e)=>{\r\n                state.ignoreEmulatedMouseEvents = true;\r\n                if (state.isPointerDown && $e0b6e0b68ec7f50f$var$isValidEvent(e, ref)) triggerInteractOutside(e);\r\n                state.isPointerDown = false;\r\n            };\r\n            documentObject.addEventListener(\"mousedown\", onPointerDown, true);\r\n            documentObject.addEventListener(\"mouseup\", onMouseUp, true);\r\n            documentObject.addEventListener(\"touchstart\", onPointerDown, true);\r\n            documentObject.addEventListener(\"touchend\", onTouchEnd, true);\r\n            return ()=>{\r\n                documentObject.removeEventListener(\"mousedown\", onPointerDown, true);\r\n                documentObject.removeEventListener(\"mouseup\", onMouseUp, true);\r\n                documentObject.removeEventListener(\"touchstart\", onPointerDown, true);\r\n                documentObject.removeEventListener(\"touchend\", onTouchEnd, true);\r\n            };\r\n        }\r\n    }, [\r\n        ref,\r\n        isDisabled,\r\n        onPointerDown,\r\n        triggerInteractOutside\r\n    ]);\r\n}\r\nfunction $e0b6e0b68ec7f50f$var$isValidEvent(event, ref) {\r\n    if (event.button > 0) return false;\r\n    if (event.target) {\r\n        // if the event target is no longer in the document, ignore\r\n        const ownerDocument = event.target.ownerDocument;\r\n        if (!ownerDocument || !ownerDocument.documentElement.contains(event.target)) return false;\r\n        // If the target is within a top layer element (e.g. toasts), ignore.\r\n        if (event.target.closest(\"[data-react-aria-top-layer]\")) return false;\r\n    }\r\n    return ref.current && !ref.current.contains(event.target);\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ /*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ function $93925083ecbb358c$export$48d1ea6320830260(handler) {\r\n    if (!handler) return undefined;\r\n    let shouldStopPropagation = true;\r\n    return (e)=>{\r\n        let event = {\r\n            ...e,\r\n            preventDefault () {\r\n                e.preventDefault();\r\n            },\r\n            isDefaultPrevented () {\r\n                return e.isDefaultPrevented();\r\n            },\r\n            stopPropagation () {\r\n                console.error(\"stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior.\");\r\n            },\r\n            continuePropagation () {\r\n                shouldStopPropagation = false;\r\n            }\r\n        };\r\n        handler(event);\r\n        if (shouldStopPropagation) e.stopPropagation();\r\n    };\r\n}\r\n\r\n\r\nfunction $46d819fcbaf35654$export$8f71654801c2f7cd(props) {\r\n    return {\r\n        keyboardProps: props.isDisabled ? {} : {\r\n            onKeyDown: (0, $93925083ecbb358c$export$48d1ea6320830260)(props.onKeyDown),\r\n            onKeyUp: (0, $93925083ecbb358c$export$48d1ea6320830260)(props.onKeyUp)\r\n        }\r\n    };\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n\r\n\r\nfunction $e8a7022cf87cba2a$export$36da96379f79f245(props) {\r\n    let { onMoveStart: onMoveStart, onMove: onMove, onMoveEnd: onMoveEnd } = props;\r\n    let state = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)({\r\n        didMove: false,\r\n        lastPosition: null,\r\n        id: null\r\n    });\r\n    let { addGlobalListener: addGlobalListener, removeGlobalListener: removeGlobalListener } = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.useGlobalListeners)();\r\n    let move = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.useEffectEvent)((originalEvent, pointerType, deltaX, deltaY)=>{\r\n        if (deltaX === 0 && deltaY === 0) return;\r\n        if (!state.current.didMove) {\r\n            state.current.didMove = true;\r\n            onMoveStart === null || onMoveStart === void 0 ? void 0 : onMoveStart({\r\n                type: \"movestart\",\r\n                pointerType: pointerType,\r\n                shiftKey: originalEvent.shiftKey,\r\n                metaKey: originalEvent.metaKey,\r\n                ctrlKey: originalEvent.ctrlKey,\r\n                altKey: originalEvent.altKey\r\n            });\r\n        }\r\n        onMove === null || onMove === void 0 ? void 0 : onMove({\r\n            type: \"move\",\r\n            pointerType: pointerType,\r\n            deltaX: deltaX,\r\n            deltaY: deltaY,\r\n            shiftKey: originalEvent.shiftKey,\r\n            metaKey: originalEvent.metaKey,\r\n            ctrlKey: originalEvent.ctrlKey,\r\n            altKey: originalEvent.altKey\r\n        });\r\n    });\r\n    let end = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.useEffectEvent)((originalEvent, pointerType)=>{\r\n        (0, $14c0b72509d70225$export$b0d6fa1ab32e3295)();\r\n        if (state.current.didMove) onMoveEnd === null || onMoveEnd === void 0 ? void 0 : onMoveEnd({\r\n            type: \"moveend\",\r\n            pointerType: pointerType,\r\n            shiftKey: originalEvent.shiftKey,\r\n            metaKey: originalEvent.metaKey,\r\n            ctrlKey: originalEvent.ctrlKey,\r\n            altKey: originalEvent.altKey\r\n        });\r\n    });\r\n    let moveProps = (0, react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{\r\n        let moveProps = {};\r\n        let start = ()=>{\r\n            (0, $14c0b72509d70225$export$16a4697467175487)();\r\n            state.current.didMove = false;\r\n        };\r\n        if (typeof PointerEvent === \"undefined\") {\r\n            let onMouseMove = (e)=>{\r\n                if (e.button === 0) {\r\n                    var _state_current_lastPosition, _state_current_lastPosition1;\r\n                    var _state_current_lastPosition_pageX, _state_current_lastPosition_pageY;\r\n                    move(e, \"mouse\", e.pageX - ((_state_current_lastPosition_pageX = (_state_current_lastPosition = state.current.lastPosition) === null || _state_current_lastPosition === void 0 ? void 0 : _state_current_lastPosition.pageX) !== null && _state_current_lastPosition_pageX !== void 0 ? _state_current_lastPosition_pageX : 0), e.pageY - ((_state_current_lastPosition_pageY = (_state_current_lastPosition1 = state.current.lastPosition) === null || _state_current_lastPosition1 === void 0 ? void 0 : _state_current_lastPosition1.pageY) !== null && _state_current_lastPosition_pageY !== void 0 ? _state_current_lastPosition_pageY : 0));\r\n                    state.current.lastPosition = {\r\n                        pageX: e.pageX,\r\n                        pageY: e.pageY\r\n                    };\r\n                }\r\n            };\r\n            let onMouseUp = (e)=>{\r\n                if (e.button === 0) {\r\n                    end(e, \"mouse\");\r\n                    removeGlobalListener(window, \"mousemove\", onMouseMove, false);\r\n                    removeGlobalListener(window, \"mouseup\", onMouseUp, false);\r\n                }\r\n            };\r\n            moveProps.onMouseDown = (e)=>{\r\n                if (e.button === 0) {\r\n                    start();\r\n                    e.stopPropagation();\r\n                    e.preventDefault();\r\n                    state.current.lastPosition = {\r\n                        pageX: e.pageX,\r\n                        pageY: e.pageY\r\n                    };\r\n                    addGlobalListener(window, \"mousemove\", onMouseMove, false);\r\n                    addGlobalListener(window, \"mouseup\", onMouseUp, false);\r\n                }\r\n            };\r\n            let onTouchMove = (e)=>{\r\n                let touch = [\r\n                    ...e.changedTouches\r\n                ].findIndex(({ identifier: identifier })=>identifier === state.current.id);\r\n                if (touch >= 0) {\r\n                    var _state_current_lastPosition, _state_current_lastPosition1;\r\n                    let { pageX: pageX, pageY: pageY } = e.changedTouches[touch];\r\n                    var _state_current_lastPosition_pageX, _state_current_lastPosition_pageY;\r\n                    move(e, \"touch\", pageX - ((_state_current_lastPosition_pageX = (_state_current_lastPosition = state.current.lastPosition) === null || _state_current_lastPosition === void 0 ? void 0 : _state_current_lastPosition.pageX) !== null && _state_current_lastPosition_pageX !== void 0 ? _state_current_lastPosition_pageX : 0), pageY - ((_state_current_lastPosition_pageY = (_state_current_lastPosition1 = state.current.lastPosition) === null || _state_current_lastPosition1 === void 0 ? void 0 : _state_current_lastPosition1.pageY) !== null && _state_current_lastPosition_pageY !== void 0 ? _state_current_lastPosition_pageY : 0));\r\n                    state.current.lastPosition = {\r\n                        pageX: pageX,\r\n                        pageY: pageY\r\n                    };\r\n                }\r\n            };\r\n            let onTouchEnd = (e)=>{\r\n                let touch = [\r\n                    ...e.changedTouches\r\n                ].findIndex(({ identifier: identifier })=>identifier === state.current.id);\r\n                if (touch >= 0) {\r\n                    end(e, \"touch\");\r\n                    state.current.id = null;\r\n                    removeGlobalListener(window, \"touchmove\", onTouchMove);\r\n                    removeGlobalListener(window, \"touchend\", onTouchEnd);\r\n                    removeGlobalListener(window, \"touchcancel\", onTouchEnd);\r\n                }\r\n            };\r\n            moveProps.onTouchStart = (e)=>{\r\n                if (e.changedTouches.length === 0 || state.current.id != null) return;\r\n                let { pageX: pageX, pageY: pageY, identifier: identifier } = e.changedTouches[0];\r\n                start();\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                state.current.lastPosition = {\r\n                    pageX: pageX,\r\n                    pageY: pageY\r\n                };\r\n                state.current.id = identifier;\r\n                addGlobalListener(window, \"touchmove\", onTouchMove, false);\r\n                addGlobalListener(window, \"touchend\", onTouchEnd, false);\r\n                addGlobalListener(window, \"touchcancel\", onTouchEnd, false);\r\n            };\r\n        } else {\r\n            let onPointerMove = (e)=>{\r\n                if (e.pointerId === state.current.id) {\r\n                    var _state_current_lastPosition, _state_current_lastPosition1;\r\n                    let pointerType = e.pointerType || \"mouse\";\r\n                    var _state_current_lastPosition_pageX, _state_current_lastPosition_pageY;\r\n                    // Problems with PointerEvent#movementX/movementY:\r\n                    // 1. it is always 0 on macOS Safari.\r\n                    // 2. On Chrome Android, it's scaled by devicePixelRatio, but not on Chrome macOS\r\n                    move(e, pointerType, e.pageX - ((_state_current_lastPosition_pageX = (_state_current_lastPosition = state.current.lastPosition) === null || _state_current_lastPosition === void 0 ? void 0 : _state_current_lastPosition.pageX) !== null && _state_current_lastPosition_pageX !== void 0 ? _state_current_lastPosition_pageX : 0), e.pageY - ((_state_current_lastPosition_pageY = (_state_current_lastPosition1 = state.current.lastPosition) === null || _state_current_lastPosition1 === void 0 ? void 0 : _state_current_lastPosition1.pageY) !== null && _state_current_lastPosition_pageY !== void 0 ? _state_current_lastPosition_pageY : 0));\r\n                    state.current.lastPosition = {\r\n                        pageX: e.pageX,\r\n                        pageY: e.pageY\r\n                    };\r\n                }\r\n            };\r\n            let onPointerUp = (e)=>{\r\n                if (e.pointerId === state.current.id) {\r\n                    let pointerType = e.pointerType || \"mouse\";\r\n                    end(e, pointerType);\r\n                    state.current.id = null;\r\n                    removeGlobalListener(window, \"pointermove\", onPointerMove, false);\r\n                    removeGlobalListener(window, \"pointerup\", onPointerUp, false);\r\n                    removeGlobalListener(window, \"pointercancel\", onPointerUp, false);\r\n                }\r\n            };\r\n            moveProps.onPointerDown = (e)=>{\r\n                if (e.button === 0 && state.current.id == null) {\r\n                    start();\r\n                    e.stopPropagation();\r\n                    e.preventDefault();\r\n                    state.current.lastPosition = {\r\n                        pageX: e.pageX,\r\n                        pageY: e.pageY\r\n                    };\r\n                    state.current.id = e.pointerId;\r\n                    addGlobalListener(window, \"pointermove\", onPointerMove, false);\r\n                    addGlobalListener(window, \"pointerup\", onPointerUp, false);\r\n                    addGlobalListener(window, \"pointercancel\", onPointerUp, false);\r\n                }\r\n            };\r\n        }\r\n        let triggerKeyboardMove = (e, deltaX, deltaY)=>{\r\n            start();\r\n            move(e, \"keyboard\", deltaX, deltaY);\r\n            end(e, \"keyboard\");\r\n        };\r\n        moveProps.onKeyDown = (e)=>{\r\n            switch(e.key){\r\n                case \"Left\":\r\n                case \"ArrowLeft\":\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                    triggerKeyboardMove(e, -1, 0);\r\n                    break;\r\n                case \"Right\":\r\n                case \"ArrowRight\":\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                    triggerKeyboardMove(e, 1, 0);\r\n                    break;\r\n                case \"Up\":\r\n                case \"ArrowUp\":\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                    triggerKeyboardMove(e, 0, -1);\r\n                    break;\r\n                case \"Down\":\r\n                case \"ArrowDown\":\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                    triggerKeyboardMove(e, 0, 1);\r\n                    break;\r\n            }\r\n        };\r\n        return moveProps;\r\n    }, [\r\n        state,\r\n        addGlobalListener,\r\n        removeGlobalListener,\r\n        move,\r\n        end\r\n    ]);\r\n    return {\r\n        moveProps: moveProps\r\n    };\r\n}\r\n\r\n\r\n\r\n/*\r\n * Copyright 2021 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n\r\nfunction $7d0a636d7a4dcefd$export$2123ff2b87c81ca(props, ref) {\r\n    let { onScroll: onScroll, isDisabled: isDisabled } = props;\r\n    let onScrollHandler = (0, react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e)=>{\r\n        // If the ctrlKey is pressed, this is a zoom event, do nothing.\r\n        if (e.ctrlKey) return;\r\n        // stop scrolling the page\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        if (onScroll) onScroll({\r\n            deltaX: e.deltaX,\r\n            deltaY: e.deltaY\r\n        });\r\n    }, [\r\n        onScroll\r\n    ]);\r\n    (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.useEvent)(ref, \"wheel\", isDisabled ? undefined : onScrollHandler);\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n\r\n\r\nconst $8a26561d2877236e$var$DEFAULT_THRESHOLD = 500;\r\nfunction $8a26561d2877236e$export$c24ed0104d07eab9(props) {\r\n    let { isDisabled: isDisabled, onLongPressStart: onLongPressStart, onLongPressEnd: onLongPressEnd, onLongPress: onLongPress, threshold: threshold = $8a26561d2877236e$var$DEFAULT_THRESHOLD, accessibilityDescription: accessibilityDescription } = props;\r\n    const timeRef = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\r\n    let { addGlobalListener: addGlobalListener, removeGlobalListener: removeGlobalListener } = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.useGlobalListeners)();\r\n    let { pressProps: pressProps } = (0, $f6c31cce2adf654f$export$45712eceda6fad21)({\r\n        isDisabled: isDisabled,\r\n        onPressStart (e) {\r\n            e.continuePropagation();\r\n            if (e.pointerType === \"mouse\" || e.pointerType === \"touch\") {\r\n                if (onLongPressStart) onLongPressStart({\r\n                    ...e,\r\n                    type: \"longpressstart\"\r\n                });\r\n                timeRef.current = setTimeout(()=>{\r\n                    // Prevent other usePress handlers from also handling this event.\r\n                    e.target.dispatchEvent(new PointerEvent(\"pointercancel\", {\r\n                        bubbles: true\r\n                    }));\r\n                    if (onLongPress) onLongPress({\r\n                        ...e,\r\n                        type: \"longpress\"\r\n                    });\r\n                    timeRef.current = undefined;\r\n                }, threshold);\r\n                // Prevent context menu, which may be opened on long press on touch devices\r\n                if (e.pointerType === \"touch\") {\r\n                    let onContextMenu = (e)=>{\r\n                        e.preventDefault();\r\n                    };\r\n                    addGlobalListener(e.target, \"contextmenu\", onContextMenu, {\r\n                        once: true\r\n                    });\r\n                    addGlobalListener(window, \"pointerup\", ()=>{\r\n                        // If no contextmenu event is fired quickly after pointerup, remove the handler\r\n                        // so future context menu events outside a long press are not prevented.\r\n                        setTimeout(()=>{\r\n                            removeGlobalListener(e.target, \"contextmenu\", onContextMenu);\r\n                        }, 30);\r\n                    }, {\r\n                        once: true\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        onPressEnd (e) {\r\n            if (timeRef.current) clearTimeout(timeRef.current);\r\n            if (onLongPressEnd && (e.pointerType === \"mouse\" || e.pointerType === \"touch\")) onLongPressEnd({\r\n                ...e,\r\n                type: \"longpressend\"\r\n            });\r\n        }\r\n    });\r\n    let descriptionProps = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.useDescription)(onLongPress && !isDisabled ? accessibilityDescription : undefined);\r\n    return {\r\n        longPressProps: (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.mergeProps)(pressProps, descriptionProps)\r\n    };\r\n}\r\n\r\n\r\n\r\n\r\n\r\n//# sourceMappingURL=module.js.map\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvaW50ZXJhY3Rpb25zL2Rpc3QvaW1wb3J0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW10QjtBQUM1ZjtBQUNqSjtBQUNFO0FBQ0Q7QUFDWDtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG9EQUFZO0FBQ3hCO0FBQ0E7QUFDQSx1Q0FBdUMsK0RBQXVCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvREFBWTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsaUVBQXlCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLCtDQUErQywrREFBdUI7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELGtDQUFZO0FBQ2xFO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw2Q0FBaUI7QUFDdkM7QUFDQSxjQUFjLHNDQUFzQztBQUNwRCxvQkFBb0IseURBQWlCO0FBQ3JDO0FBQ0E7QUFDQSxRQUFRLHlEQUFpQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxtRUFBUztBQUNyQjtBQUNBO0FBQ0EsbUJBQW1CLG1FQUFRO0FBQzNCO0FBQ0E7QUFDQSxZQUFZLG9FQUFTO0FBQ3JCO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsWUFBWSxtRUFBUztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLDBCQUEwQjtBQUMxQixzQ0FBc0MsMkNBQWU7QUFDckQsa0JBQWtCLHlDQUFhO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxVQUFVLDJGQUEyRixNQUFNLGlFQUF5QjtBQUNwSSxnQ0FBZ0MsNkRBQXFCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsOEJBQThCLDZEQUFxQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLDZCQUE2Qiw2REFBcUI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wscUJBQXFCLDZEQUFxQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxrQ0FBa0MsNkRBQXFCO0FBQ3ZEO0FBQ0EsS0FBSztBQUNMLHlCQUF5QiwwQ0FBYztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsK0RBQXVCLGlDQUFpQyxvREFBWTtBQUNsSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsb0RBQVk7QUFDckQsa0JBQWtCO0FBQ2xCLGFBQWE7QUFDYjtBQUNBO0FBQ0EsNEVBQTRFLHVEQUFlO0FBQzNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0pBQXdKLDZEQUFxQjtBQUM3SztBQUNBLHFFQUFxRSxvRUFBNEI7QUFDakc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix1REFBZTtBQUN2QztBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixvRUFBNEI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsb0VBQTRCO0FBQzdGO0FBQ0E7QUFDQSwwQ0FBMEMsK0RBQXVCO0FBQ2pFLDBDQUEwQywrREFBdUI7QUFDakUsMENBQTBDLCtEQUF1QjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3Qyw2REFBcUI7QUFDN0QsNkRBQTZELG9FQUE0QjtBQUN6RjtBQUNBO0FBQ0Esc0NBQXNDLCtEQUF1QjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxvRUFBNEI7QUFDekY7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLDZEQUFxQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsNENBQWdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseURBQWlCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksdUJBQXVCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0hBQWtILDZEQUFxQiw4R0FBOEcsNkRBQXFCO0FBQzFRO0FBQ0E7QUFDQTtBQUNBLFlBQVksK0JBQStCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsMkJBQTJCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRUFBb0Usa0NBQVksZ0JBQWdCLDhCQUE4QjtBQUM5SCxjQUFjLDJEQUFtQjtBQUNqQyxVQUFVLHlCQUF5QjtBQUNuQztBQUNBO0FBQ0EsS0FBSztBQUNMLG9CQUFvQixrQ0FBWTtBQUNoQyw2QkFBNkIsa0NBQVk7QUFDekM7QUFDQTtBQUNBLGVBQWUseURBQWlCO0FBQ2hDLEtBQUs7QUFDTCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FLGtDQUFZLGdCQUFnQiw4QkFBOEI7QUFDOUgsMkJBQTJCLHlDQUFhO0FBQ3hDLDBCQUEwQiw2Q0FBaUI7QUFDM0MsY0FBYywyREFBbUI7QUFDakMsc0JBQXNCLHlEQUFpQixtQkFBbUI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFFBQVEseURBQWlCO0FBQ3pCLFFBQVEsNENBQWdCO0FBQ3hCO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQSxLQUFLO0FBQ0wsNkJBQTZCLGtDQUFZO0FBQ3pDO0FBQ0EsS0FBSztBQUNMLENBQUM7QUFDRCxxREFBcUQsb0JBQW9CO0FBQ3pFLHNCQUFzQiwwQ0FBYztBQUNwQztBQUNBLFNBQVM7QUFDVCw2QkFBNkIsa0NBQVk7QUFDekM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIseUNBQWE7QUFDcEM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsUUFBUSw4REFBc0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsMkJBQTJCLDZEQUFxQjtBQUNoRDtBQUNBLEtBQUs7QUFDTDtBQUNBLGVBQWUsOENBQWtCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsaUdBQWlHO0FBQzNHLHVCQUF1Qiw4Q0FBa0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw4Q0FBa0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRDtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLG9EQUFZO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw2REFBcUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkZBQTJGLDZEQUFxQjtBQUNoSCw2QkFBNkIsNkRBQXFCO0FBQ2xELCtCQUErQiwrREFBdUI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSw2QkFBNkIsNkRBQXFCO0FBQ2xELCtCQUErQiwrREFBdUI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLCtEQUF1QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQywyQ0FBZTtBQUNyRCxRQUFRLDRDQUFnQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxlQUFlLHFEQUFlO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRUFBa0UsNkRBQXFCO0FBQ3ZGLHFFQUFxRSw2REFBcUI7QUFDMUYsNkRBQTZELDZEQUFxQjtBQUNsRiwrREFBK0QsNkRBQXFCO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RDtBQUM3RCxVQUFVLGlEQUFpRDtBQUMzRCxxREFBcUQsMkNBQWU7QUFDcEU7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw0Q0FBZ0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDZIQUE2SDtBQUN2SSxvQkFBb0IseUNBQWE7QUFDakM7QUFDQSxLQUFLO0FBQ0wscUJBQXFCLDhDQUFrQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsOENBQWtCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDJHQUEyRztBQUNySCxzQ0FBc0MsMkNBQWU7QUFDckQsb0JBQW9CLHlDQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFFBQVEsNENBQWdCO0FBQ3hCLFVBQVUsMkRBQTJELE1BQU0sMENBQWM7QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDRDQUFnQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSx5SEFBeUg7QUFDbkksdUJBQXVCLHlDQUFhO0FBQ3BDO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsNEJBQTRCLDZEQUFxQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxxQ0FBcUMsNkRBQXFCO0FBQzFEO0FBQ0EsS0FBSztBQUNMLFFBQVEsNENBQWdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQywrREFBdUI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGlFQUFpRTtBQUMzRSxvQkFBb0IseUNBQWE7QUFDakM7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFVBQVUsbUZBQW1GLE1BQU0saUVBQXlCO0FBQzVILG1CQUFtQiw2REFBcUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMLGtCQUFrQiw2REFBcUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0wsd0JBQXdCLDBDQUFjO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHdCQUF3QjtBQUN2RDtBQUNBO0FBQ0EsMEJBQTBCLDZCQUE2QjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHdCQUF3QjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixxREFBcUQ7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSw2Q0FBNkM7QUFDdkQsOEJBQThCLDhDQUFrQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0EsUUFBUSx1REFBZTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDJPQUEyTztBQUNyUCx3QkFBd0IseUNBQWE7QUFDckMsVUFBVSxtRkFBbUYsTUFBTSxpRUFBeUI7QUFDNUgsVUFBVSx5QkFBeUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIscUJBQXFCO0FBQ3JCO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLEtBQUs7QUFDTCwrQkFBK0IsNkRBQXFCO0FBQ3BEO0FBQ0EsNEJBQTRCLHlEQUFpQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDOHBDO0FBQzlwQyIsInNvdXJjZXMiOlsid2VicGFjazovL251dHJpLXNtYXJ0Ly4vbm9kZV9tb2R1bGVzL0ByZWFjdC1hcmlhL2ludGVyYWN0aW9ucy9kaXN0L2ltcG9ydC5tanM/YmNhZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge3VzZU9iamVjdFJlZiBhcyAkYng3U0wkdXNlT2JqZWN0UmVmLCBtZXJnZVByb3BzIGFzICRieDdTTCRtZXJnZVByb3BzLCB1c2VTeW5jUmVmIGFzICRieDdTTCR1c2VTeW5jUmVmLCB1c2VHbG9iYWxMaXN0ZW5lcnMgYXMgJGJ4N1NMJHVzZUdsb2JhbExpc3RlbmVycywgdXNlRWZmZWN0RXZlbnQgYXMgJGJ4N1NMJHVzZUVmZmVjdEV2ZW50LCBnZXRPd25lckRvY3VtZW50IGFzICRieDdTTCRnZXRPd25lckRvY3VtZW50LCBjaGFpbiBhcyAkYng3U0wkY2hhaW4sIGlzTWFjIGFzICRieDdTTCRpc01hYywgb3BlbkxpbmsgYXMgJGJ4N1NMJG9wZW5MaW5rLCBpc1ZpcnR1YWxDbGljayBhcyAkYng3U0wkaXNWaXJ0dWFsQ2xpY2ssIGZvY3VzV2l0aG91dFNjcm9sbGluZyBhcyAkYng3U0wkZm9jdXNXaXRob3V0U2Nyb2xsaW5nLCBpc1ZpcnR1YWxQb2ludGVyRXZlbnQgYXMgJGJ4N1NMJGlzVmlydHVhbFBvaW50ZXJFdmVudCwgZ2V0T3duZXJXaW5kb3cgYXMgJGJ4N1NMJGdldE93bmVyV2luZG93LCBpc0lPUyBhcyAkYng3U0wkaXNJT1MsIHJ1bkFmdGVyVHJhbnNpdGlvbiBhcyAkYng3U0wkcnVuQWZ0ZXJUcmFuc2l0aW9uLCB1c2VMYXlvdXRFZmZlY3QgYXMgJGJ4N1NMJHVzZUxheW91dEVmZmVjdCwgdXNlRXZlbnQgYXMgJGJ4N1NMJHVzZUV2ZW50LCB1c2VEZXNjcmlwdGlvbiBhcyAkYng3U0wkdXNlRGVzY3JpcHRpb259IGZyb20gXCJAcmVhY3QtYXJpYS91dGlsc1wiO1xyXG5pbXBvcnQgJGJ4N1NMJHJlYWN0LCB7dXNlQ29udGV4dCBhcyAkYng3U0wkdXNlQ29udGV4dCwgdXNlU3RhdGUgYXMgJGJ4N1NMJHVzZVN0YXRlLCB1c2VSZWYgYXMgJGJ4N1NMJHVzZVJlZiwgdXNlTWVtbyBhcyAkYng3U0wkdXNlTWVtbywgdXNlRWZmZWN0IGFzICRieDdTTCR1c2VFZmZlY3QsIHVzZUNhbGxiYWNrIGFzICRieDdTTCR1c2VDYWxsYmFja30gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7XyBhcyAkYng3U0wkX30gZnJvbSBcIkBzd2MvaGVscGVycy9fL19jbGFzc19wcml2YXRlX2ZpZWxkX2dldFwiO1xyXG5pbXBvcnQge18gYXMgJGJ4N1NMJF8xfSBmcm9tIFwiQHN3Yy9oZWxwZXJzL18vX2NsYXNzX3ByaXZhdGVfZmllbGRfaW5pdFwiO1xyXG5pbXBvcnQge18gYXMgJGJ4N1NMJF8yfSBmcm9tIFwiQHN3Yy9oZWxwZXJzL18vX2NsYXNzX3ByaXZhdGVfZmllbGRfc2V0XCI7XHJcbmltcG9ydCB7dXNlSXNTU1IgYXMgJGJ4N1NMJHVzZUlzU1NSfSBmcm9tIFwiQHJlYWN0LWFyaWEvc3NyXCI7XHJcblxyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxyXG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyAvKlxyXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxyXG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyBcclxuLypcclxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gLy8gUG9ydGlvbnMgb2YgdGhlIGNvZGUgaW4gdGhpcyBmaWxlIGFyZSBiYXNlZCBvbiBjb2RlIGZyb20gcmVhY3QuXHJcbi8vIE9yaWdpbmFsIGxpY2Vuc2luZyBmb3IgdGhlIGZvbGxvd2luZyBjYW4gYmUgZm91bmQgaW4gdGhlXHJcbi8vIE5PVElDRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxyXG4vLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L3RyZWUvY2M3YzFhZWNlNDZhNmI2OWI0MTk1OGQ3MzFlMGZkMjdjOTRiZmM2Yy9wYWNrYWdlcy9yZWFjdC1pbnRlcmFjdGlvbnNcclxuXHJcblxyXG5cclxuXHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIFxyXG4vLyBOb3RlIHRoYXQgc3RhdGUgb25seSBtYXR0ZXJzIGhlcmUgZm9yIGlPUy4gTm9uLWlPUyBnZXRzIHVzZXItc2VsZWN0OiBub25lIGFwcGxpZWQgdG8gdGhlIHRhcmdldCBlbGVtZW50XHJcbi8vIHJhdGhlciB0aGFuIGF0IHRoZSBkb2N1bWVudCBsZXZlbCBzbyB3ZSBqdXN0IG5lZWQgdG8gYXBwbHkvcmVtb3ZlIHVzZXItc2VsZWN0OiBub25lIGZvciBlYWNoIHByZXNzZWQgZWxlbWVudCBpbmRpdmlkdWFsbHlcclxubGV0ICQxNGMwYjcyNTA5ZDcwMjI1JHZhciRzdGF0ZSA9IFwiZGVmYXVsdFwiO1xyXG5sZXQgJDE0YzBiNzI1MDlkNzAyMjUkdmFyJHNhdmVkVXNlclNlbGVjdCA9IFwiXCI7XHJcbmxldCAkMTRjMGI3MjUwOWQ3MDIyNSR2YXIkbW9kaWZpZWRFbGVtZW50TWFwID0gbmV3IFdlYWtNYXAoKTtcclxuZnVuY3Rpb24gJDE0YzBiNzI1MDlkNzAyMjUkZXhwb3J0JDE2YTQ2OTc0NjcxNzU0ODcodGFyZ2V0KSB7XHJcbiAgICBpZiAoKDAsICRieDdTTCRpc0lPUykoKSkge1xyXG4gICAgICAgIGlmICgkMTRjMGI3MjUwOWQ3MDIyNSR2YXIkc3RhdGUgPT09IFwiZGVmYXVsdFwiKSB7XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcclxuICAgICAgICAgICAgY29uc3QgZG9jdW1lbnRPYmplY3QgPSAoMCwgJGJ4N1NMJGdldE93bmVyRG9jdW1lbnQpKHRhcmdldCk7XHJcbiAgICAgICAgICAgICQxNGMwYjcyNTA5ZDcwMjI1JHZhciRzYXZlZFVzZXJTZWxlY3QgPSBkb2N1bWVudE9iamVjdC5kb2N1bWVudEVsZW1lbnQuc3R5bGUud2Via2l0VXNlclNlbGVjdDtcclxuICAgICAgICAgICAgZG9jdW1lbnRPYmplY3QuZG9jdW1lbnRFbGVtZW50LnN0eWxlLndlYmtpdFVzZXJTZWxlY3QgPSBcIm5vbmVcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgJDE0YzBiNzI1MDlkNzAyMjUkdmFyJHN0YXRlID0gXCJkaXNhYmxlZFwiO1xyXG4gICAgfSBlbHNlIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCB8fCB0YXJnZXQgaW5zdGFuY2VvZiBTVkdFbGVtZW50KSB7XHJcbiAgICAgICAgLy8gSWYgbm90IGlPUywgc3RvcmUgdGhlIHRhcmdldCdzIG9yaWdpbmFsIHVzZXItc2VsZWN0IGFuZCBjaGFuZ2UgdG8gdXNlci1zZWxlY3Q6IG5vbmVcclxuICAgICAgICAvLyBJZ25vcmUgc3RhdGUgc2luY2UgaXQgZG9lc24ndCBhcHBseSBmb3Igbm9uIGlPU1xyXG4gICAgICAgICQxNGMwYjcyNTA5ZDcwMjI1JHZhciRtb2RpZmllZEVsZW1lbnRNYXAuc2V0KHRhcmdldCwgdGFyZ2V0LnN0eWxlLnVzZXJTZWxlY3QpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS51c2VyU2VsZWN0ID0gXCJub25lXCI7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gJDE0YzBiNzI1MDlkNzAyMjUkZXhwb3J0JGIwZDZmYTFhYjMyZTMyOTUodGFyZ2V0KSB7XHJcbiAgICBpZiAoKDAsICRieDdTTCRpc0lPUykoKSkge1xyXG4gICAgICAgIC8vIElmIHRoZSBzdGF0ZSBpcyBhbHJlYWR5IGRlZmF1bHQsIHRoZXJlJ3Mgbm90aGluZyB0byBkby5cclxuICAgICAgICAvLyBJZiBpdCBpcyByZXN0b3JpbmcsIHRoZW4gdGhlcmUncyBubyBuZWVkIHRvIHF1ZXVlIGEgc2Vjb25kIHJlc3RvcmUuXHJcbiAgICAgICAgaWYgKCQxNGMwYjcyNTA5ZDcwMjI1JHZhciRzdGF0ZSAhPT0gXCJkaXNhYmxlZFwiKSByZXR1cm47XHJcbiAgICAgICAgJDE0YzBiNzI1MDlkNzAyMjUkdmFyJHN0YXRlID0gXCJyZXN0b3JpbmdcIjtcclxuICAgICAgICAvLyBUaGVyZSBhcHBlYXJzIHRvIGJlIGEgZGVsYXkgb24gaU9TIHdoZXJlIHNlbGVjdGlvbiBzdGlsbCBtaWdodCBvY2N1clxyXG4gICAgICAgIC8vIGFmdGVyIHBvaW50ZXIgdXAsIHNvIHdhaXQgYSBiaXQgYmVmb3JlIHJlbW92aW5nIHVzZXItc2VsZWN0LlxyXG4gICAgICAgIHNldFRpbWVvdXQoKCk9PntcclxuICAgICAgICAgICAgLy8gV2FpdCBmb3IgYW55IENTUyB0cmFuc2l0aW9ucyB0byBjb21wbGV0ZSBzbyB3ZSBkb24ndCByZWNvbXB1dGUgc3R5bGVcclxuICAgICAgICAgICAgLy8gZm9yIHRoZSB3aG9sZSBwYWdlIGluIHRoZSBtaWRkbGUgb2YgdGhlIGFuaW1hdGlvbiBhbmQgY2F1c2UgamFuay5cclxuICAgICAgICAgICAgKDAsICRieDdTTCRydW5BZnRlclRyYW5zaXRpb24pKCgpPT57XHJcbiAgICAgICAgICAgICAgICAvLyBBdm9pZCByYWNlIGNvbmRpdGlvbnNcclxuICAgICAgICAgICAgICAgIGlmICgkMTRjMGI3MjUwOWQ3MDIyNSR2YXIkc3RhdGUgPT09IFwicmVzdG9yaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZG9jdW1lbnRPYmplY3QgPSAoMCwgJGJ4N1NMJGdldE93bmVyRG9jdW1lbnQpKHRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50T2JqZWN0LmRvY3VtZW50RWxlbWVudC5zdHlsZS53ZWJraXRVc2VyU2VsZWN0ID09PSBcIm5vbmVcIikgZG9jdW1lbnRPYmplY3QuZG9jdW1lbnRFbGVtZW50LnN0eWxlLndlYmtpdFVzZXJTZWxlY3QgPSAkMTRjMGI3MjUwOWQ3MDIyNSR2YXIkc2F2ZWRVc2VyU2VsZWN0IHx8IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgJDE0YzBiNzI1MDlkNzAyMjUkdmFyJHNhdmVkVXNlclNlbGVjdCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgJDE0YzBiNzI1MDlkNzAyMjUkdmFyJHN0YXRlID0gXCJkZWZhdWx0XCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIDMwMCk7XHJcbiAgICB9IGVsc2UgaWYgKHRhcmdldCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50IHx8IHRhcmdldCBpbnN0YW5jZW9mIFNWR0VsZW1lbnQpIC8vIElmIG5vdCBpT1MsIHJlc3RvcmUgdGhlIHRhcmdldCdzIG9yaWdpbmFsIHVzZXItc2VsZWN0IGlmIGFueVxyXG4gICAgLy8gSWdub3JlIHN0YXRlIHNpbmNlIGl0IGRvZXNuJ3QgYXBwbHkgZm9yIG5vbiBpT1NcclxuICAgIHtcclxuICAgICAgICBpZiAodGFyZ2V0ICYmICQxNGMwYjcyNTA5ZDcwMjI1JHZhciRtb2RpZmllZEVsZW1lbnRNYXAuaGFzKHRhcmdldCkpIHtcclxuICAgICAgICAgICAgbGV0IHRhcmdldE9sZFVzZXJTZWxlY3QgPSAkMTRjMGI3MjUwOWQ3MDIyNSR2YXIkbW9kaWZpZWRFbGVtZW50TWFwLmdldCh0YXJnZXQpO1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0LnN0eWxlLnVzZXJTZWxlY3QgPT09IFwibm9uZVwiKSB0YXJnZXQuc3R5bGUudXNlclNlbGVjdCA9IHRhcmdldE9sZFVzZXJTZWxlY3Q7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQuZ2V0QXR0cmlidXRlKFwic3R5bGVcIikgPT09IFwiXCIpIHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKTtcclxuICAgICAgICAgICAgJDE0YzBiNzI1MDlkNzAyMjUkdmFyJG1vZGlmaWVkRWxlbWVudE1hcC5kZWxldGUodGFyZ2V0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxyXG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyBcclxuY29uc3QgJGFlMWVlYmE4YjllYWZkMDgkZXhwb3J0JDUxNjVlY2NiMzVhYWFkYjUgPSAoMCwgJGJ4N1NMJHJlYWN0KS5jcmVhdGVDb250ZXh0KHtcclxuICAgIHJlZ2lzdGVyOiAoKT0+e31cclxufSk7XHJcbiRhZTFlZWJhOGI5ZWFmZDA4JGV4cG9ydCQ1MTY1ZWNjYjM1YWFhZGI1LmRpc3BsYXlOYW1lID0gXCJQcmVzc1Jlc3BvbmRlckNvbnRleHRcIjtcclxuXHJcblxyXG5cclxuZnVuY3Rpb24gJGY2YzMxY2NlMmFkZjY1NGYkdmFyJHVzZVByZXNzUmVzcG9uZGVyQ29udGV4dChwcm9wcykge1xyXG4gICAgLy8gQ29uc3VtZSBjb250ZXh0IGZyb20gPFByZXNzUmVzcG9uZGVyPiBhbmQgbWVyZ2Ugd2l0aCBwcm9wcy5cclxuICAgIGxldCBjb250ZXh0ID0gKDAsICRieDdTTCR1c2VDb250ZXh0KSgoMCwgJGFlMWVlYmE4YjllYWZkMDgkZXhwb3J0JDUxNjVlY2NiMzVhYWFkYjUpKTtcclxuICAgIGlmIChjb250ZXh0KSB7XHJcbiAgICAgICAgbGV0IHsgcmVnaXN0ZXI6IHJlZ2lzdGVyLCAuLi5jb250ZXh0UHJvcHMgfSA9IGNvbnRleHQ7XHJcbiAgICAgICAgcHJvcHMgPSAoMCwgJGJ4N1NMJG1lcmdlUHJvcHMpKGNvbnRleHRQcm9wcywgcHJvcHMpO1xyXG4gICAgICAgIHJlZ2lzdGVyKCk7XHJcbiAgICB9XHJcbiAgICAoMCwgJGJ4N1NMJHVzZVN5bmNSZWYpKGNvbnRleHQsIHByb3BzLnJlZik7XHJcbiAgICByZXR1cm4gcHJvcHM7XHJcbn1cclxudmFyICRmNmMzMWNjZTJhZGY2NTRmJHZhciRfc2hvdWxkU3RvcFByb3BhZ2F0aW9uID0gLyojX19QVVJFX18qLyBuZXcgV2Vha01hcCgpO1xyXG5jbGFzcyAkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkUHJlc3NFdmVudCB7XHJcbiAgICBjb250aW51ZVByb3BhZ2F0aW9uKCkge1xyXG4gICAgICAgICgwLCAkYng3U0wkXzIpKHRoaXMsICRmNmMzMWNjZTJhZGY2NTRmJHZhciRfc2hvdWxkU3RvcFByb3BhZ2F0aW9uLCBmYWxzZSk7XHJcbiAgICB9XHJcbiAgICBnZXQgc2hvdWxkU3RvcFByb3BhZ2F0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiAoMCwgJGJ4N1NMJF8pKHRoaXMsICRmNmMzMWNjZTJhZGY2NTRmJHZhciRfc2hvdWxkU3RvcFByb3BhZ2F0aW9uKTtcclxuICAgIH1cclxuICAgIGNvbnN0cnVjdG9yKHR5cGUsIHBvaW50ZXJUeXBlLCBvcmlnaW5hbEV2ZW50KXtcclxuICAgICAgICAoMCwgJGJ4N1NMJF8xKSh0aGlzLCAkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkX3Nob3VsZFN0b3BQcm9wYWdhdGlvbiwge1xyXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICgwLCAkYng3U0wkXzIpKHRoaXMsICRmNmMzMWNjZTJhZGY2NTRmJHZhciRfc2hvdWxkU3RvcFByb3BhZ2F0aW9uLCB0cnVlKTtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMucG9pbnRlclR5cGUgPSBwb2ludGVyVHlwZTtcclxuICAgICAgICB0aGlzLnRhcmdldCA9IG9yaWdpbmFsRXZlbnQuY3VycmVudFRhcmdldDtcclxuICAgICAgICB0aGlzLnNoaWZ0S2V5ID0gb3JpZ2luYWxFdmVudC5zaGlmdEtleTtcclxuICAgICAgICB0aGlzLm1ldGFLZXkgPSBvcmlnaW5hbEV2ZW50Lm1ldGFLZXk7XHJcbiAgICAgICAgdGhpcy5jdHJsS2V5ID0gb3JpZ2luYWxFdmVudC5jdHJsS2V5O1xyXG4gICAgICAgIHRoaXMuYWx0S2V5ID0gb3JpZ2luYWxFdmVudC5hbHRLZXk7XHJcbiAgICB9XHJcbn1cclxuY29uc3QgJGY2YzMxY2NlMmFkZjY1NGYkdmFyJExJTktfQ0xJQ0tFRCA9IFN5bWJvbChcImxpbmtDbGlja2VkXCIpO1xyXG5mdW5jdGlvbiAkZjZjMzFjY2UyYWRmNjU0ZiRleHBvcnQkNDU3MTJlY2VkYTZmYWQyMShwcm9wcykge1xyXG4gICAgbGV0IHsgb25QcmVzczogb25QcmVzcywgb25QcmVzc0NoYW5nZTogb25QcmVzc0NoYW5nZSwgb25QcmVzc1N0YXJ0OiBvblByZXNzU3RhcnQsIG9uUHJlc3NFbmQ6IG9uUHJlc3NFbmQsIG9uUHJlc3NVcDogb25QcmVzc1VwLCBpc0Rpc2FibGVkOiBpc0Rpc2FibGVkLCBpc1ByZXNzZWQ6IGlzUHJlc3NlZFByb3AsIHByZXZlbnRGb2N1c09uUHJlc3M6IHByZXZlbnRGb2N1c09uUHJlc3MsIHNob3VsZENhbmNlbE9uUG9pbnRlckV4aXQ6IHNob3VsZENhbmNlbE9uUG9pbnRlckV4aXQsIGFsbG93VGV4dFNlbGVjdGlvbk9uUHJlc3M6IGFsbG93VGV4dFNlbGVjdGlvbk9uUHJlc3MsIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcclxuICAgIHJlZjogXywgLi4uZG9tUHJvcHMgfSA9ICRmNmMzMWNjZTJhZGY2NTRmJHZhciR1c2VQcmVzc1Jlc3BvbmRlckNvbnRleHQocHJvcHMpO1xyXG4gICAgbGV0IFtpc1ByZXNzZWQsIHNldFByZXNzZWRdID0gKDAsICRieDdTTCR1c2VTdGF0ZSkoZmFsc2UpO1xyXG4gICAgbGV0IHJlZiA9ICgwLCAkYng3U0wkdXNlUmVmKSh7XHJcbiAgICAgICAgaXNQcmVzc2VkOiBmYWxzZSxcclxuICAgICAgICBpZ25vcmVFbXVsYXRlZE1vdXNlRXZlbnRzOiBmYWxzZSxcclxuICAgICAgICBpZ25vcmVDbGlja0FmdGVyUHJlc3M6IGZhbHNlLFxyXG4gICAgICAgIGRpZEZpcmVQcmVzc1N0YXJ0OiBmYWxzZSxcclxuICAgICAgICBpc1RyaWdnZXJpbmdFdmVudDogZmFsc2UsXHJcbiAgICAgICAgYWN0aXZlUG9pbnRlcklkOiBudWxsLFxyXG4gICAgICAgIHRhcmdldDogbnVsbCxcclxuICAgICAgICBpc092ZXJUYXJnZXQ6IGZhbHNlLFxyXG4gICAgICAgIHBvaW50ZXJUeXBlOiBudWxsXHJcbiAgICB9KTtcclxuICAgIGxldCB7IGFkZEdsb2JhbExpc3RlbmVyOiBhZGRHbG9iYWxMaXN0ZW5lciwgcmVtb3ZlQWxsR2xvYmFsTGlzdGVuZXJzOiByZW1vdmVBbGxHbG9iYWxMaXN0ZW5lcnMgfSA9ICgwLCAkYng3U0wkdXNlR2xvYmFsTGlzdGVuZXJzKSgpO1xyXG4gICAgbGV0IHRyaWdnZXJQcmVzc1N0YXJ0ID0gKDAsICRieDdTTCR1c2VFZmZlY3RFdmVudCkoKG9yaWdpbmFsRXZlbnQsIHBvaW50ZXJUeXBlKT0+e1xyXG4gICAgICAgIGxldCBzdGF0ZSA9IHJlZi5jdXJyZW50O1xyXG4gICAgICAgIGlmIChpc0Rpc2FibGVkIHx8IHN0YXRlLmRpZEZpcmVQcmVzc1N0YXJ0KSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgbGV0IHNob3VsZFN0b3BQcm9wYWdhdGlvbiA9IHRydWU7XHJcbiAgICAgICAgc3RhdGUuaXNUcmlnZ2VyaW5nRXZlbnQgPSB0cnVlO1xyXG4gICAgICAgIGlmIChvblByZXNzU3RhcnQpIHtcclxuICAgICAgICAgICAgbGV0IGV2ZW50ID0gbmV3ICRmNmMzMWNjZTJhZGY2NTRmJHZhciRQcmVzc0V2ZW50KFwicHJlc3NzdGFydFwiLCBwb2ludGVyVHlwZSwgb3JpZ2luYWxFdmVudCk7XHJcbiAgICAgICAgICAgIG9uUHJlc3NTdGFydChldmVudCk7XHJcbiAgICAgICAgICAgIHNob3VsZFN0b3BQcm9wYWdhdGlvbiA9IGV2ZW50LnNob3VsZFN0b3BQcm9wYWdhdGlvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9uUHJlc3NDaGFuZ2UpIG9uUHJlc3NDaGFuZ2UodHJ1ZSk7XHJcbiAgICAgICAgc3RhdGUuaXNUcmlnZ2VyaW5nRXZlbnQgPSBmYWxzZTtcclxuICAgICAgICBzdGF0ZS5kaWRGaXJlUHJlc3NTdGFydCA9IHRydWU7XHJcbiAgICAgICAgc2V0UHJlc3NlZCh0cnVlKTtcclxuICAgICAgICByZXR1cm4gc2hvdWxkU3RvcFByb3BhZ2F0aW9uO1xyXG4gICAgfSk7XHJcbiAgICBsZXQgdHJpZ2dlclByZXNzRW5kID0gKDAsICRieDdTTCR1c2VFZmZlY3RFdmVudCkoKG9yaWdpbmFsRXZlbnQsIHBvaW50ZXJUeXBlLCB3YXNQcmVzc2VkID0gdHJ1ZSk9PntcclxuICAgICAgICBsZXQgc3RhdGUgPSByZWYuY3VycmVudDtcclxuICAgICAgICBpZiAoIXN0YXRlLmRpZEZpcmVQcmVzc1N0YXJ0KSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgc3RhdGUuaWdub3JlQ2xpY2tBZnRlclByZXNzID0gdHJ1ZTtcclxuICAgICAgICBzdGF0ZS5kaWRGaXJlUHJlc3NTdGFydCA9IGZhbHNlO1xyXG4gICAgICAgIHN0YXRlLmlzVHJpZ2dlcmluZ0V2ZW50ID0gdHJ1ZTtcclxuICAgICAgICBsZXQgc2hvdWxkU3RvcFByb3BhZ2F0aW9uID0gdHJ1ZTtcclxuICAgICAgICBpZiAob25QcmVzc0VuZCkge1xyXG4gICAgICAgICAgICBsZXQgZXZlbnQgPSBuZXcgJGY2YzMxY2NlMmFkZjY1NGYkdmFyJFByZXNzRXZlbnQoXCJwcmVzc2VuZFwiLCBwb2ludGVyVHlwZSwgb3JpZ2luYWxFdmVudCk7XHJcbiAgICAgICAgICAgIG9uUHJlc3NFbmQoZXZlbnQpO1xyXG4gICAgICAgICAgICBzaG91bGRTdG9wUHJvcGFnYXRpb24gPSBldmVudC5zaG91bGRTdG9wUHJvcGFnYXRpb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvblByZXNzQ2hhbmdlKSBvblByZXNzQ2hhbmdlKGZhbHNlKTtcclxuICAgICAgICBzZXRQcmVzc2VkKGZhbHNlKTtcclxuICAgICAgICBpZiAob25QcmVzcyAmJiB3YXNQcmVzc2VkICYmICFpc0Rpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIGxldCBldmVudCA9IG5ldyAkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkUHJlc3NFdmVudChcInByZXNzXCIsIHBvaW50ZXJUeXBlLCBvcmlnaW5hbEV2ZW50KTtcclxuICAgICAgICAgICAgb25QcmVzcyhldmVudCk7XHJcbiAgICAgICAgICAgIHNob3VsZFN0b3BQcm9wYWdhdGlvbiAmJiAoc2hvdWxkU3RvcFByb3BhZ2F0aW9uID0gZXZlbnQuc2hvdWxkU3RvcFByb3BhZ2F0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3RhdGUuaXNUcmlnZ2VyaW5nRXZlbnQgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm4gc2hvdWxkU3RvcFByb3BhZ2F0aW9uO1xyXG4gICAgfSk7XHJcbiAgICBsZXQgdHJpZ2dlclByZXNzVXAgPSAoMCwgJGJ4N1NMJHVzZUVmZmVjdEV2ZW50KSgob3JpZ2luYWxFdmVudCwgcG9pbnRlclR5cGUpPT57XHJcbiAgICAgICAgbGV0IHN0YXRlID0gcmVmLmN1cnJlbnQ7XHJcbiAgICAgICAgaWYgKGlzRGlzYWJsZWQpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBpZiAob25QcmVzc1VwKSB7XHJcbiAgICAgICAgICAgIHN0YXRlLmlzVHJpZ2dlcmluZ0V2ZW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgbGV0IGV2ZW50ID0gbmV3ICRmNmMzMWNjZTJhZGY2NTRmJHZhciRQcmVzc0V2ZW50KFwicHJlc3N1cFwiLCBwb2ludGVyVHlwZSwgb3JpZ2luYWxFdmVudCk7XHJcbiAgICAgICAgICAgIG9uUHJlc3NVcChldmVudCk7XHJcbiAgICAgICAgICAgIHN0YXRlLmlzVHJpZ2dlcmluZ0V2ZW50ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybiBldmVudC5zaG91bGRTdG9wUHJvcGFnYXRpb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSk7XHJcbiAgICBsZXQgY2FuY2VsID0gKDAsICRieDdTTCR1c2VFZmZlY3RFdmVudCkoKGUpPT57XHJcbiAgICAgICAgbGV0IHN0YXRlID0gcmVmLmN1cnJlbnQ7XHJcbiAgICAgICAgaWYgKHN0YXRlLmlzUHJlc3NlZCAmJiBzdGF0ZS50YXJnZXQpIHtcclxuICAgICAgICAgICAgaWYgKHN0YXRlLmlzT3ZlclRhcmdldCAmJiBzdGF0ZS5wb2ludGVyVHlwZSAhPSBudWxsKSB0cmlnZ2VyUHJlc3NFbmQoJGY2YzMxY2NlMmFkZjY1NGYkdmFyJGNyZWF0ZUV2ZW50KHN0YXRlLnRhcmdldCwgZSksIHN0YXRlLnBvaW50ZXJUeXBlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIHN0YXRlLmlzUHJlc3NlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBzdGF0ZS5pc092ZXJUYXJnZXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgc3RhdGUuYWN0aXZlUG9pbnRlcklkID0gbnVsbDtcclxuICAgICAgICAgICAgc3RhdGUucG9pbnRlclR5cGUgPSBudWxsO1xyXG4gICAgICAgICAgICByZW1vdmVBbGxHbG9iYWxMaXN0ZW5lcnMoKTtcclxuICAgICAgICAgICAgaWYgKCFhbGxvd1RleHRTZWxlY3Rpb25PblByZXNzKSAoMCwgJDE0YzBiNzI1MDlkNzAyMjUkZXhwb3J0JGIwZDZmYTFhYjMyZTMyOTUpKHN0YXRlLnRhcmdldCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBsZXQgY2FuY2VsT25Qb2ludGVyRXhpdCA9ICgwLCAkYng3U0wkdXNlRWZmZWN0RXZlbnQpKChlKT0+e1xyXG4gICAgICAgIGlmIChzaG91bGRDYW5jZWxPblBvaW50ZXJFeGl0KSBjYW5jZWwoZSk7XHJcbiAgICB9KTtcclxuICAgIGxldCBwcmVzc1Byb3BzID0gKDAsICRieDdTTCR1c2VNZW1vKSgoKT0+e1xyXG4gICAgICAgIGxldCBzdGF0ZSA9IHJlZi5jdXJyZW50O1xyXG4gICAgICAgIGxldCBwcmVzc1Byb3BzID0ge1xyXG4gICAgICAgICAgICBvbktleURvd24gKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkaXNWYWxpZEtleWJvYXJkRXZlbnQoZS5uYXRpdmVFdmVudCwgZS5jdXJyZW50VGFyZ2V0KSAmJiBlLmN1cnJlbnRUYXJnZXQuY29udGFpbnMoZS50YXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9zdGF0ZV9tZXRhS2V5RXZlbnRzO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkc2hvdWxkUHJldmVudERlZmF1bHRLZXlib2FyZChlLnRhcmdldCwgZS5rZXkpKSBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGV2ZW50IGlzIHJlcGVhdGluZywgaXQgbWF5IGhhdmUgc3RhcnRlZCBvbiBhIGRpZmZlcmVudCBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWZ0ZXIgd2hpY2ggZm9jdXMgbW92ZWQgdG8gdGhlIGN1cnJlbnQgZWxlbWVudC4gSWdub3JlIHRoZXNlIGV2ZW50cyBhbmRcclxuICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IGhhbmRsZSB0aGUgZmlyc3Qga2V5IGRvd24gZXZlbnQuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNob3VsZFN0b3BQcm9wYWdhdGlvbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGF0ZS5pc1ByZXNzZWQgJiYgIWUucmVwZWF0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnRhcmdldCA9IGUuY3VycmVudFRhcmdldDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuaXNQcmVzc2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkU3RvcFByb3BhZ2F0aW9uID0gdHJpZ2dlclByZXNzU3RhcnQoZSwgXCJrZXlib2FyZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9jdXMgbWF5IG1vdmUgYmVmb3JlIHRoZSBrZXkgdXAgZXZlbnQsIHNvIHJlZ2lzdGVyIHRoZSBldmVudCBvbiB0aGUgZG9jdW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW5zdGVhZCBvZiB0aGUgc2FtZSBlbGVtZW50IHdoZXJlIHRoZSBrZXkgZG93biBldmVudCBvY2N1cnJlZC4gTWFrZSBpdCBjYXB0dXJpbmcgc28gdGhhdCBpdCB3aWxsIHRyaWdnZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmVmb3JlIHN0b3BQcm9wYWdhdGlvbiBmcm9tIHVzZUtleWJvYXJkIG9uIGEgY2hpbGQgZWxlbWVudCBtYXkgaGFwcGVuIGFuZCB0aHVzIHdlIGNhbiBzdGlsbCBjYWxsIHRyaWdnZXJQcmVzcyBmb3IgdGhlIHBhcmVudCBlbGVtZW50LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgb3JpZ2luYWxUYXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwcmVzc1VwID0gKGUpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGY2YzMxY2NlMmFkZjY1NGYkdmFyJGlzVmFsaWRLZXlib2FyZEV2ZW50KGUsIG9yaWdpbmFsVGFyZ2V0KSAmJiAhZS5yZXBlYXQgJiYgb3JpZ2luYWxUYXJnZXQuY29udGFpbnMoZS50YXJnZXQpICYmIHN0YXRlLnRhcmdldCkgdHJpZ2dlclByZXNzVXAoJGY2YzMxY2NlMmFkZjY1NGYkdmFyJGNyZWF0ZUV2ZW50KHN0YXRlLnRhcmdldCwgZSksIFwia2V5Ym9hcmRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEdsb2JhbExpc3RlbmVyKCgwLCAkYng3U0wkZ2V0T3duZXJEb2N1bWVudCkoZS5jdXJyZW50VGFyZ2V0KSwgXCJrZXl1cFwiLCAoMCwgJGJ4N1NMJGNoYWluKShwcmVzc1VwLCBvbktleVVwKSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRTdG9wUHJvcGFnYXRpb24pIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gS2VlcCB0cmFjayBvZiB0aGUga2V5ZG93biBldmVudHMgdGhhdCBvY2N1ciB3aGlsZSB0aGUgTWV0YSAoZS5nLiBDb21tYW5kKSBrZXkgaXMgaGVsZC5cclxuICAgICAgICAgICAgICAgICAgICAvLyBtYWNPUyBoYXMgYSBidWcgd2hlcmUga2V5dXAgZXZlbnRzIGFyZSBub3QgZmlyZWQgd2hpbGUgdGhlIE1ldGEga2V5IGlzIGRvd24uXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgTWV0YSBrZXkgaXRzZWxmIGlzIHJlbGVhc2VkIHdlIHdpbGwgZ2V0IGFuIGV2ZW50IGZvciB0aGF0LCBhbmQgd2UnbGwgYWN0IGFzIGlmXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWxsIG9mIHRoZXNlIG90aGVyIGtleXMgd2VyZSByZWxlYXNlZCBhcyB3ZWxsLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTEzOTM1MjRcclxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NTUyOTFcclxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xMjk5NTUzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUubWV0YUtleSAmJiAoMCwgJGJ4N1NMJGlzTWFjKSgpKSAoX3N0YXRlX21ldGFLZXlFdmVudHMgPSBzdGF0ZS5tZXRhS2V5RXZlbnRzKSA9PT0gbnVsbCB8fCBfc3RhdGVfbWV0YUtleUV2ZW50cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3N0YXRlX21ldGFLZXlFdmVudHMuc2V0KGUua2V5LCBlLm5hdGl2ZUV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09IFwiTWV0YVwiKSBzdGF0ZS5tZXRhS2V5RXZlbnRzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNsaWNrIChlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZSAmJiAhZS5jdXJyZW50VGFyZ2V0LmNvbnRhaW5zKGUudGFyZ2V0KSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgaWYgKGUgJiYgZS5idXR0b24gPT09IDAgJiYgIXN0YXRlLmlzVHJpZ2dlcmluZ0V2ZW50ICYmICEoMCwgJGJ4N1NMJG9wZW5MaW5rKS5pc09wZW5pbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc2hvdWxkU3RvcFByb3BhZ2F0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNEaXNhYmxlZCkgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRyaWdnZXJlZCBmcm9tIGEgc2NyZWVuIHJlYWRlciBvciBieSB1c2luZyBlbGVtZW50LmNsaWNrKCksXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdHJpZ2dlciBhcyBpZiBpdCB3ZXJlIGEga2V5Ym9hcmQgY2xpY2suXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGF0ZS5pZ25vcmVDbGlja0FmdGVyUHJlc3MgJiYgIXN0YXRlLmlnbm9yZUVtdWxhdGVkTW91c2VFdmVudHMgJiYgIXN0YXRlLmlzUHJlc3NlZCAmJiAoc3RhdGUucG9pbnRlclR5cGUgPT09IFwidmlydHVhbFwiIHx8ICgwLCAkYng3U0wkaXNWaXJ0dWFsQ2xpY2spKGUubmF0aXZlRXZlbnQpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBFbnN1cmUgdGhlIGVsZW1lbnQgcmVjZWl2ZXMgZm9jdXMgKFZvaWNlT3ZlciBvbiBpT1MgZG9lcyBub3QgZG8gdGhpcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0Rpc2FibGVkICYmICFwcmV2ZW50Rm9jdXNPblByZXNzKSAoMCwgJGJ4N1NMJGZvY3VzV2l0aG91dFNjcm9sbGluZykoZS5jdXJyZW50VGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0b3BQcmVzc1N0YXJ0ID0gdHJpZ2dlclByZXNzU3RhcnQoZSwgXCJ2aXJ0dWFsXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RvcFByZXNzVXAgPSB0cmlnZ2VyUHJlc3NVcChlLCBcInZpcnR1YWxcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdG9wUHJlc3NFbmQgPSB0cmlnZ2VyUHJlc3NFbmQoZSwgXCJ2aXJ0dWFsXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRTdG9wUHJvcGFnYXRpb24gPSBzdG9wUHJlc3NTdGFydCAmJiBzdG9wUHJlc3NVcCAmJiBzdG9wUHJlc3NFbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmlnbm9yZUVtdWxhdGVkTW91c2VFdmVudHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5pZ25vcmVDbGlja0FmdGVyUHJlc3MgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkU3RvcFByb3BhZ2F0aW9uKSBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBsZXQgb25LZXlVcCA9IChlKT0+e1xyXG4gICAgICAgICAgICB2YXIgX3N0YXRlX21ldGFLZXlFdmVudHM7XHJcbiAgICAgICAgICAgIGlmIChzdGF0ZS5pc1ByZXNzZWQgJiYgc3RhdGUudGFyZ2V0ICYmICRmNmMzMWNjZTJhZGY2NTRmJHZhciRpc1ZhbGlkS2V5Ym9hcmRFdmVudChlLCBzdGF0ZS50YXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX3N0YXRlX21ldGFLZXlFdmVudHMxO1xyXG4gICAgICAgICAgICAgICAgaWYgKCRmNmMzMWNjZTJhZGY2NTRmJHZhciRzaG91bGRQcmV2ZW50RGVmYXVsdEtleWJvYXJkKGUudGFyZ2V0LCBlLmtleSkpIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGxldCB0YXJnZXQgPSBlLnRhcmdldDtcclxuICAgICAgICAgICAgICAgIHRyaWdnZXJQcmVzc0VuZCgkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkY3JlYXRlRXZlbnQoc3RhdGUudGFyZ2V0LCBlKSwgXCJrZXlib2FyZFwiLCBzdGF0ZS50YXJnZXQuY29udGFpbnModGFyZ2V0KSk7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVBbGxHbG9iYWxMaXN0ZW5lcnMoKTtcclxuICAgICAgICAgICAgICAgIC8vIElmIGEgbGluayB3YXMgdHJpZ2dlcmVkIHdpdGggYSBrZXkgb3RoZXIgdGhhbiBFbnRlciwgb3BlbiB0aGUgVVJMIG91cnNlbHZlcy5cclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgbWVhbnMgdGhlIGxpbmsgaGFzIGEgcm9sZSBvdmVycmlkZSwgYW5kIHRoZSBkZWZhdWx0IGJyb3dzZXIgYmVoYXZpb3JcclxuICAgICAgICAgICAgICAgIC8vIG9ubHkgYXBwbGllcyB3aGVuIHVzaW5nIHRoZSBFbnRlciBrZXkuXHJcbiAgICAgICAgICAgICAgICBpZiAoZS5rZXkgIT09IFwiRW50ZXJcIiAmJiAkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkaXNIVE1MQW5jaG9yTGluayhzdGF0ZS50YXJnZXQpICYmIHN0YXRlLnRhcmdldC5jb250YWlucyh0YXJnZXQpICYmICFlWyRmNmMzMWNjZTJhZGY2NTRmJHZhciRMSU5LX0NMSUNLRURdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU3RvcmUgYSBoaWRkZW4gcHJvcGVydHkgb24gdGhlIGV2ZW50IHNvIHdlIG9ubHkgdHJpZ2dlciBsaW5rIGNsaWNrIG9uY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZXZlbiBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgdXNlUHJlc3MgaW5zdGFuY2VzIGF0dGFjaGVkIHRvIHRoZSBlbGVtZW50LlxyXG4gICAgICAgICAgICAgICAgICAgIGVbJGY2YzMxY2NlMmFkZjY1NGYkdmFyJExJTktfQ0xJQ0tFRF0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICgwLCAkYng3U0wkb3BlbkxpbmspKHN0YXRlLnRhcmdldCwgZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc3RhdGUuaXNQcmVzc2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAoX3N0YXRlX21ldGFLZXlFdmVudHMxID0gc3RhdGUubWV0YUtleUV2ZW50cykgPT09IG51bGwgfHwgX3N0YXRlX21ldGFLZXlFdmVudHMxID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc3RhdGVfbWV0YUtleUV2ZW50czEuZGVsZXRlKGUua2V5KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gXCJNZXRhXCIgJiYgKChfc3RhdGVfbWV0YUtleUV2ZW50cyA9IHN0YXRlLm1ldGFLZXlFdmVudHMpID09PSBudWxsIHx8IF9zdGF0ZV9tZXRhS2V5RXZlbnRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc3RhdGVfbWV0YUtleUV2ZW50cy5zaXplKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9zdGF0ZV90YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSByZWNvcmRlZCBrZXlkb3duIGV2ZW50cyB0aGF0IG9jY3VycmVkIHdoaWxlIHRoZSBNZXRhIGtleSB3YXMgcHJlc3NlZCxcclxuICAgICAgICAgICAgICAgIC8vIGFuZCB0aG9zZSBoYXZlbid0IHJlY2VpdmVkIGtleXVwIGV2ZW50cyBhbHJlYWR5LCBmaXJlIGtleXVwIGV2ZW50cyBvdXJzZWx2ZXMuXHJcbiAgICAgICAgICAgICAgICAvLyBTZWUgY29tbWVudCBhYm92ZSBmb3IgbW9yZSBpbmZvIGFib3V0IHRoZSBtYWNPUyBidWcgY2F1c2luZyB0aGlzLlxyXG4gICAgICAgICAgICAgICAgbGV0IGV2ZW50cyA9IHN0YXRlLm1ldGFLZXlFdmVudHM7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5tZXRhS2V5RXZlbnRzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgZXZlbnQgb2YgZXZlbnRzLnZhbHVlcygpKShfc3RhdGVfdGFyZ2V0ID0gc3RhdGUudGFyZ2V0KSA9PT0gbnVsbCB8fCBfc3RhdGVfdGFyZ2V0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc3RhdGVfdGFyZ2V0LmRpc3BhdGNoRXZlbnQobmV3IEtleWJvYXJkRXZlbnQoXCJrZXl1cFwiLCBldmVudCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAodHlwZW9mIFBvaW50ZXJFdmVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICBwcmVzc1Byb3BzLm9uUG9pbnRlckRvd24gPSAoZSk9PntcclxuICAgICAgICAgICAgICAgIC8vIE9ubHkgaGFuZGxlIGxlZnQgY2xpY2tzLCBhbmQgaWdub3JlIGV2ZW50cyB0aGF0IGJ1YmJsZWQgdGhyb3VnaCBwb3J0YWxzLlxyXG4gICAgICAgICAgICAgICAgaWYgKGUuYnV0dG9uICE9PSAwIHx8ICFlLmN1cnJlbnRUYXJnZXQuY29udGFpbnMoZS50YXJnZXQpKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAvLyBpT1Mgc2FmYXJpIGZpcmVzIHBvaW50ZXIgZXZlbnRzIGZyb20gVm9pY2VPdmVyIHdpdGggaW5jb3JyZWN0IGNvb3JkaW5hdGVzL3RhcmdldC5cclxuICAgICAgICAgICAgICAgIC8vIElnbm9yZSBhbmQgbGV0IHRoZSBvbkNsaWNrIGhhbmRsZXIgdGFrZSBjYXJlIG9mIGl0IGluc3RlYWQuXHJcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjIyNjI3XHJcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjIzMjAyXHJcbiAgICAgICAgICAgICAgICBpZiAoKDAsICRieDdTTCRpc1ZpcnR1YWxQb2ludGVyRXZlbnQpKGUubmF0aXZlRXZlbnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUucG9pbnRlclR5cGUgPSBcInZpcnR1YWxcIjtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBEdWUgdG8gYnJvd3NlciBpbmNvbnNpc3RlbmNpZXMsIGVzcGVjaWFsbHkgb24gbW9iaWxlIGJyb3dzZXJzLCB3ZSBwcmV2ZW50XHJcbiAgICAgICAgICAgICAgICAvLyBkZWZhdWx0IG9uIHBvaW50ZXIgZG93biBhbmQgaGFuZGxlIGZvY3VzaW5nIHRoZSBwcmVzc2FibGUgZWxlbWVudCBvdXJzZWx2ZXMuXHJcbiAgICAgICAgICAgICAgICBpZiAoJGY2YzMxY2NlMmFkZjY1NGYkdmFyJHNob3VsZFByZXZlbnREZWZhdWx0KGUuY3VycmVudFRhcmdldCkpIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnBvaW50ZXJUeXBlID0gZS5wb2ludGVyVHlwZTtcclxuICAgICAgICAgICAgICAgIGxldCBzaG91bGRTdG9wUHJvcGFnYXRpb24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzdGF0ZS5pc1ByZXNzZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5pc1ByZXNzZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmlzT3ZlclRhcmdldCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuYWN0aXZlUG9pbnRlcklkID0gZS5wb2ludGVySWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUudGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNEaXNhYmxlZCAmJiAhcHJldmVudEZvY3VzT25QcmVzcykgKDAsICRieDdTTCRmb2N1c1dpdGhvdXRTY3JvbGxpbmcpKGUuY3VycmVudFRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhbGxvd1RleHRTZWxlY3Rpb25PblByZXNzKSAoMCwgJDE0YzBiNzI1MDlkNzAyMjUkZXhwb3J0JDE2YTQ2OTc0NjcxNzU0ODcpKHN0YXRlLnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkU3RvcFByb3BhZ2F0aW9uID0gdHJpZ2dlclByZXNzU3RhcnQoZSwgc3RhdGUucG9pbnRlclR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZEdsb2JhbExpc3RlbmVyKCgwLCAkYng3U0wkZ2V0T3duZXJEb2N1bWVudCkoZS5jdXJyZW50VGFyZ2V0KSwgXCJwb2ludGVybW92ZVwiLCBvblBvaW50ZXJNb3ZlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkR2xvYmFsTGlzdGVuZXIoKDAsICRieDdTTCRnZXRPd25lckRvY3VtZW50KShlLmN1cnJlbnRUYXJnZXQpLCBcInBvaW50ZXJ1cFwiLCBvblBvaW50ZXJVcCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZEdsb2JhbExpc3RlbmVyKCgwLCAkYng3U0wkZ2V0T3duZXJEb2N1bWVudCkoZS5jdXJyZW50VGFyZ2V0KSwgXCJwb2ludGVyY2FuY2VsXCIsIG9uUG9pbnRlckNhbmNlbCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHNob3VsZFN0b3BQcm9wYWdhdGlvbikgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcHJlc3NQcm9wcy5vbk1vdXNlRG93biA9IChlKT0+e1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlLmN1cnJlbnRUYXJnZXQuY29udGFpbnMoZS50YXJnZXQpKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5idXR0b24gPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDaHJvbWUgYW5kIEZpcmVmb3ggb24gdG91Y2ggV2luZG93cyBkZXZpY2VzIHJlcXVpcmUgbW91c2UgZG93biBldmVudHNcclxuICAgICAgICAgICAgICAgICAgICAvLyB0byBiZSBjYW5jZWxlZCBpbiBhZGRpdGlvbiB0byBwb2ludGVyIGV2ZW50cywgb3IgYW4gZXh0cmEgYXN5bmNocm9ub3VzXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZm9jdXMgZXZlbnQgd2lsbCBiZSBmaXJlZC5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoJGY2YzMxY2NlMmFkZjY1NGYkdmFyJHNob3VsZFByZXZlbnREZWZhdWx0KGUuY3VycmVudFRhcmdldCkpIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBwcmVzc1Byb3BzLm9uUG9pbnRlclVwID0gKGUpPT57XHJcbiAgICAgICAgICAgICAgICAvLyBpT1MgZmlyZXMgcG9pbnRlcnVwIHdpdGggemVybyB3aWR0aCBhbmQgaGVpZ2h0LCBzbyBjaGVjayB0aGUgcG9pbnRlclR5cGUgcmVjb3JkZWQgZHVyaW5nIHBvaW50ZXJkb3duLlxyXG4gICAgICAgICAgICAgICAgaWYgKCFlLmN1cnJlbnRUYXJnZXQuY29udGFpbnMoZS50YXJnZXQpIHx8IHN0YXRlLnBvaW50ZXJUeXBlID09PSBcInZpcnR1YWxcIikgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgLy8gT25seSBoYW5kbGUgbGVmdCBjbGlja3NcclxuICAgICAgICAgICAgICAgIC8vIFNhZmFyaSBvbiBpT1Mgc29tZXRpbWVzIGZpcmVzIHBvaW50ZXJ1cCBldmVudHMsIGV2ZW5cclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIHRvdWNoIGlzbid0IG92ZXIgdGhlIHRhcmdldCwgc28gZG91YmxlIGNoZWNrLlxyXG4gICAgICAgICAgICAgICAgaWYgKGUuYnV0dG9uID09PSAwICYmICRmNmMzMWNjZTJhZGY2NTRmJHZhciRpc092ZXJUYXJnZXQoZSwgZS5jdXJyZW50VGFyZ2V0KSkgdHJpZ2dlclByZXNzVXAoZSwgc3RhdGUucG9pbnRlclR5cGUgfHwgZS5wb2ludGVyVHlwZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIFNhZmFyaSBvbiBpT1MgPCAxMy4yIGRvZXMgbm90IGltcGxlbWVudCBwb2ludGVyZW50ZXIvcG9pbnRlcmxlYXZlIGV2ZW50cyBjb3JyZWN0bHkuXHJcbiAgICAgICAgICAgIC8vIFVzZSBwb2ludGVyIG1vdmUgZXZlbnRzIGluc3RlYWQgdG8gaW1wbGVtZW50IG91ciBvd24gaGl0IHRlc3RpbmcuXHJcbiAgICAgICAgICAgIC8vIFNlZSBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTk5ODAzXHJcbiAgICAgICAgICAgIGxldCBvblBvaW50ZXJNb3ZlID0gKGUpPT57XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5wb2ludGVySWQgIT09IHN0YXRlLmFjdGl2ZVBvaW50ZXJJZCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLnRhcmdldCAmJiAkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkaXNPdmVyVGFyZ2V0KGUsIHN0YXRlLnRhcmdldCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXN0YXRlLmlzT3ZlclRhcmdldCAmJiBzdGF0ZS5wb2ludGVyVHlwZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmlzT3ZlclRhcmdldCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXJQcmVzc1N0YXJ0KCRmNmMzMWNjZTJhZGY2NTRmJHZhciRjcmVhdGVFdmVudChzdGF0ZS50YXJnZXQsIGUpLCBzdGF0ZS5wb2ludGVyVHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS50YXJnZXQgJiYgc3RhdGUuaXNPdmVyVGFyZ2V0ICYmIHN0YXRlLnBvaW50ZXJUeXBlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5pc092ZXJUYXJnZXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyUHJlc3NFbmQoJGY2YzMxY2NlMmFkZjY1NGYkdmFyJGNyZWF0ZUV2ZW50KHN0YXRlLnRhcmdldCwgZSksIHN0YXRlLnBvaW50ZXJUeXBlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsT25Qb2ludGVyRXhpdChlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgbGV0IG9uUG9pbnRlclVwID0gKGUpPT57XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5wb2ludGVySWQgPT09IHN0YXRlLmFjdGl2ZVBvaW50ZXJJZCAmJiBzdGF0ZS5pc1ByZXNzZWQgJiYgZS5idXR0b24gPT09IDAgJiYgc3RhdGUudGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRmNmMzMWNjZTJhZGY2NTRmJHZhciRpc092ZXJUYXJnZXQoZSwgc3RhdGUudGFyZ2V0KSAmJiBzdGF0ZS5wb2ludGVyVHlwZSAhPSBudWxsKSB0cmlnZ2VyUHJlc3NFbmQoJGY2YzMxY2NlMmFkZjY1NGYkdmFyJGNyZWF0ZUV2ZW50KHN0YXRlLnRhcmdldCwgZSksIHN0YXRlLnBvaW50ZXJUeXBlKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzdGF0ZS5pc092ZXJUYXJnZXQgJiYgc3RhdGUucG9pbnRlclR5cGUgIT0gbnVsbCkgdHJpZ2dlclByZXNzRW5kKCRmNmMzMWNjZTJhZGY2NTRmJHZhciRjcmVhdGVFdmVudChzdGF0ZS50YXJnZXQsIGUpLCBzdGF0ZS5wb2ludGVyVHlwZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmlzUHJlc3NlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmlzT3ZlclRhcmdldCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmFjdGl2ZVBvaW50ZXJJZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUucG9pbnRlclR5cGUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUFsbEdsb2JhbExpc3RlbmVycygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYWxsb3dUZXh0U2VsZWN0aW9uT25QcmVzcykgKDAsICQxNGMwYjcyNTA5ZDcwMjI1JGV4cG9ydCRiMGQ2ZmExYWIzMmUzMjk1KShzdGF0ZS50YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBsZXQgb25Qb2ludGVyQ2FuY2VsID0gKGUpPT57XHJcbiAgICAgICAgICAgICAgICBjYW5jZWwoZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHByZXNzUHJvcHMub25EcmFnU3RhcnQgPSAoZSk9PntcclxuICAgICAgICAgICAgICAgIGlmICghZS5jdXJyZW50VGFyZ2V0LmNvbnRhaW5zKGUudGFyZ2V0KSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgLy8gU2FmYXJpIGRvZXMgbm90IGNhbGwgb25Qb2ludGVyQ2FuY2VsIHdoZW4gYSBkcmFnIHN0YXJ0cywgd2hlcmVhcyBDaHJvbWUgYW5kIEZpcmVmb3ggZG8uXHJcbiAgICAgICAgICAgICAgICBjYW5jZWwoZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcHJlc3NQcm9wcy5vbk1vdXNlRG93biA9IChlKT0+e1xyXG4gICAgICAgICAgICAgICAgLy8gT25seSBoYW5kbGUgbGVmdCBjbGlja3NcclxuICAgICAgICAgICAgICAgIGlmIChlLmJ1dHRvbiAhPT0gMCB8fCAhZS5jdXJyZW50VGFyZ2V0LmNvbnRhaW5zKGUudGFyZ2V0KSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgLy8gRHVlIHRvIGJyb3dzZXIgaW5jb25zaXN0ZW5jaWVzLCBlc3BlY2lhbGx5IG9uIG1vYmlsZSBicm93c2Vycywgd2UgcHJldmVudFxyXG4gICAgICAgICAgICAgICAgLy8gZGVmYXVsdCBvbiBtb3VzZSBkb3duIGFuZCBoYW5kbGUgZm9jdXNpbmcgdGhlIHByZXNzYWJsZSBlbGVtZW50IG91cnNlbHZlcy5cclxuICAgICAgICAgICAgICAgIGlmICgkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkc2hvdWxkUHJldmVudERlZmF1bHQoZS5jdXJyZW50VGFyZ2V0KSkgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLmlnbm9yZUVtdWxhdGVkTW91c2VFdmVudHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHN0YXRlLmlzUHJlc3NlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5pc092ZXJUYXJnZXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUudGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucG9pbnRlclR5cGUgPSAoMCwgJGJ4N1NMJGlzVmlydHVhbENsaWNrKShlLm5hdGl2ZUV2ZW50KSA/IFwidmlydHVhbFwiIDogXCJtb3VzZVwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc0Rpc2FibGVkICYmICFwcmV2ZW50Rm9jdXNPblByZXNzKSAoMCwgJGJ4N1NMJGZvY3VzV2l0aG91dFNjcm9sbGluZykoZS5jdXJyZW50VGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIGxldCBzaG91bGRTdG9wUHJvcGFnYXRpb24gPSB0cmlnZ2VyUHJlc3NTdGFydChlLCBzdGF0ZS5wb2ludGVyVHlwZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkU3RvcFByb3BhZ2F0aW9uKSBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgYWRkR2xvYmFsTGlzdGVuZXIoKDAsICRieDdTTCRnZXRPd25lckRvY3VtZW50KShlLmN1cnJlbnRUYXJnZXQpLCBcIm1vdXNldXBcIiwgb25Nb3VzZVVwLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHByZXNzUHJvcHMub25Nb3VzZUVudGVyID0gKGUpPT57XHJcbiAgICAgICAgICAgICAgICBpZiAoIWUuY3VycmVudFRhcmdldC5jb250YWlucyhlLnRhcmdldCkpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGxldCBzaG91bGRTdG9wUHJvcGFnYXRpb24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLmlzUHJlc3NlZCAmJiAhc3RhdGUuaWdub3JlRW11bGF0ZWRNb3VzZUV2ZW50cyAmJiBzdGF0ZS5wb2ludGVyVHlwZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuaXNPdmVyVGFyZ2V0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBzaG91bGRTdG9wUHJvcGFnYXRpb24gPSB0cmlnZ2VyUHJlc3NTdGFydChlLCBzdGF0ZS5wb2ludGVyVHlwZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkU3RvcFByb3BhZ2F0aW9uKSBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBwcmVzc1Byb3BzLm9uTW91c2VMZWF2ZSA9IChlKT0+e1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlLmN1cnJlbnRUYXJnZXQuY29udGFpbnMoZS50YXJnZXQpKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBsZXQgc2hvdWxkU3RvcFByb3BhZ2F0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5pc1ByZXNzZWQgJiYgIXN0YXRlLmlnbm9yZUVtdWxhdGVkTW91c2VFdmVudHMgJiYgc3RhdGUucG9pbnRlclR5cGUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmlzT3ZlclRhcmdldCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFN0b3BQcm9wYWdhdGlvbiA9IHRyaWdnZXJQcmVzc0VuZChlLCBzdGF0ZS5wb2ludGVyVHlwZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbE9uUG9pbnRlckV4aXQoZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkU3RvcFByb3BhZ2F0aW9uKSBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBwcmVzc1Byb3BzLm9uTW91c2VVcCA9IChlKT0+e1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlLmN1cnJlbnRUYXJnZXQuY29udGFpbnMoZS50YXJnZXQpKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBpZiAoIXN0YXRlLmlnbm9yZUVtdWxhdGVkTW91c2VFdmVudHMgJiYgZS5idXR0b24gPT09IDApIHRyaWdnZXJQcmVzc1VwKGUsIHN0YXRlLnBvaW50ZXJUeXBlIHx8IFwibW91c2VcIik7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGxldCBvbk1vdXNlVXAgPSAoZSk9PntcclxuICAgICAgICAgICAgICAgIC8vIE9ubHkgaGFuZGxlIGxlZnQgY2xpY2tzXHJcbiAgICAgICAgICAgICAgICBpZiAoZS5idXR0b24gIT09IDApIHJldHVybjtcclxuICAgICAgICAgICAgICAgIHN0YXRlLmlzUHJlc3NlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlQWxsR2xvYmFsTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuaWdub3JlRW11bGF0ZWRNb3VzZUV2ZW50cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmlnbm9yZUVtdWxhdGVkTW91c2VFdmVudHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUudGFyZ2V0ICYmICRmNmMzMWNjZTJhZGY2NTRmJHZhciRpc092ZXJUYXJnZXQoZSwgc3RhdGUudGFyZ2V0KSAmJiBzdGF0ZS5wb2ludGVyVHlwZSAhPSBudWxsKSB0cmlnZ2VyUHJlc3NFbmQoJGY2YzMxY2NlMmFkZjY1NGYkdmFyJGNyZWF0ZUV2ZW50KHN0YXRlLnRhcmdldCwgZSksIHN0YXRlLnBvaW50ZXJUeXBlKTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN0YXRlLnRhcmdldCAmJiBzdGF0ZS5pc092ZXJUYXJnZXQgJiYgc3RhdGUucG9pbnRlclR5cGUgIT0gbnVsbCkgdHJpZ2dlclByZXNzRW5kKCRmNmMzMWNjZTJhZGY2NTRmJHZhciRjcmVhdGVFdmVudChzdGF0ZS50YXJnZXQsIGUpLCBzdGF0ZS5wb2ludGVyVHlwZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUuaXNPdmVyVGFyZ2V0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHByZXNzUHJvcHMub25Ub3VjaFN0YXJ0ID0gKGUpPT57XHJcbiAgICAgICAgICAgICAgICBpZiAoIWUuY3VycmVudFRhcmdldC5jb250YWlucyhlLnRhcmdldCkpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGxldCB0b3VjaCA9ICRmNmMzMWNjZTJhZGY2NTRmJHZhciRnZXRUb3VjaEZyb21FdmVudChlLm5hdGl2ZUV2ZW50KTtcclxuICAgICAgICAgICAgICAgIGlmICghdG91Y2gpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIHN0YXRlLmFjdGl2ZVBvaW50ZXJJZCA9IHRvdWNoLmlkZW50aWZpZXI7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5pZ25vcmVFbXVsYXRlZE1vdXNlRXZlbnRzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLmlzT3ZlclRhcmdldCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5pc1ByZXNzZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUudGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucG9pbnRlclR5cGUgPSBcInRvdWNoXCI7XHJcbiAgICAgICAgICAgICAgICAvLyBEdWUgdG8gYnJvd3NlciBpbmNvbnNpc3RlbmNpZXMsIGVzcGVjaWFsbHkgb24gbW9iaWxlIGJyb3dzZXJzLCB3ZSBwcmV2ZW50IGRlZmF1bHRcclxuICAgICAgICAgICAgICAgIC8vIG9uIHRoZSBlbXVsYXRlZCBtb3VzZSBldmVudCBhbmQgaGFuZGxlIGZvY3VzaW5nIHRoZSBwcmVzc2FibGUgZWxlbWVudCBvdXJzZWx2ZXMuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzRGlzYWJsZWQgJiYgIXByZXZlbnRGb2N1c09uUHJlc3MpICgwLCAkYng3U0wkZm9jdXNXaXRob3V0U2Nyb2xsaW5nKShlLmN1cnJlbnRUYXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFhbGxvd1RleHRTZWxlY3Rpb25PblByZXNzKSAoMCwgJDE0YzBiNzI1MDlkNzAyMjUkZXhwb3J0JDE2YTQ2OTc0NjcxNzU0ODcpKHN0YXRlLnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2hvdWxkU3RvcFByb3BhZ2F0aW9uID0gdHJpZ2dlclByZXNzU3RhcnQoZSwgc3RhdGUucG9pbnRlclR5cGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNob3VsZFN0b3BQcm9wYWdhdGlvbikgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGFkZEdsb2JhbExpc3RlbmVyKCgwLCAkYng3U0wkZ2V0T3duZXJXaW5kb3cpKGUuY3VycmVudFRhcmdldCksIFwic2Nyb2xsXCIsIG9uU2Nyb2xsLCB0cnVlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcHJlc3NQcm9wcy5vblRvdWNoTW92ZSA9IChlKT0+e1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlLmN1cnJlbnRUYXJnZXQuY29udGFpbnMoZS50YXJnZXQpKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBpZiAoIXN0YXRlLmlzUHJlc3NlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGV0IHRvdWNoID0gJGY2YzMxY2NlMmFkZjY1NGYkdmFyJGdldFRvdWNoQnlJZChlLm5hdGl2ZUV2ZW50LCBzdGF0ZS5hY3RpdmVQb2ludGVySWQpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHNob3VsZFN0b3BQcm9wYWdhdGlvbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAodG91Y2ggJiYgJGY2YzMxY2NlMmFkZjY1NGYkdmFyJGlzT3ZlclRhcmdldCh0b3VjaCwgZS5jdXJyZW50VGFyZ2V0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghc3RhdGUuaXNPdmVyVGFyZ2V0ICYmIHN0YXRlLnBvaW50ZXJUeXBlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuaXNPdmVyVGFyZ2V0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkU3RvcFByb3BhZ2F0aW9uID0gdHJpZ2dlclByZXNzU3RhcnQoZSwgc3RhdGUucG9pbnRlclR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUuaXNPdmVyVGFyZ2V0ICYmIHN0YXRlLnBvaW50ZXJUeXBlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5pc092ZXJUYXJnZXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBzaG91bGRTdG9wUHJvcGFnYXRpb24gPSB0cmlnZ2VyUHJlc3NFbmQoZSwgc3RhdGUucG9pbnRlclR5cGUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICBjYW5jZWxPblBvaW50ZXJFeGl0KGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHNob3VsZFN0b3BQcm9wYWdhdGlvbikgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcHJlc3NQcm9wcy5vblRvdWNoRW5kID0gKGUpPT57XHJcbiAgICAgICAgICAgICAgICBpZiAoIWUuY3VycmVudFRhcmdldC5jb250YWlucyhlLnRhcmdldCkpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGlmICghc3RhdGUuaXNQcmVzc2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsZXQgdG91Y2ggPSAkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkZ2V0VG91Y2hCeUlkKGUubmF0aXZlRXZlbnQsIHN0YXRlLmFjdGl2ZVBvaW50ZXJJZCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2hvdWxkU3RvcFByb3BhZ2F0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmICh0b3VjaCAmJiAkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkaXNPdmVyVGFyZ2V0KHRvdWNoLCBlLmN1cnJlbnRUYXJnZXQpICYmIHN0YXRlLnBvaW50ZXJUeXBlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyUHJlc3NVcChlLCBzdGF0ZS5wb2ludGVyVHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkU3RvcFByb3BhZ2F0aW9uID0gdHJpZ2dlclByZXNzRW5kKGUsIHN0YXRlLnBvaW50ZXJUeXBlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUuaXNPdmVyVGFyZ2V0ICYmIHN0YXRlLnBvaW50ZXJUeXBlICE9IG51bGwpIHNob3VsZFN0b3BQcm9wYWdhdGlvbiA9IHRyaWdnZXJQcmVzc0VuZChlLCBzdGF0ZS5wb2ludGVyVHlwZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNob3VsZFN0b3BQcm9wYWdhdGlvbikgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLmlzUHJlc3NlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUuYWN0aXZlUG9pbnRlcklkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHN0YXRlLmlzT3ZlclRhcmdldCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUuaWdub3JlRW11bGF0ZWRNb3VzZUV2ZW50cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUudGFyZ2V0ICYmICFhbGxvd1RleHRTZWxlY3Rpb25PblByZXNzKSAoMCwgJDE0YzBiNzI1MDlkNzAyMjUkZXhwb3J0JGIwZDZmYTFhYjMyZTMyOTUpKHN0YXRlLnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVBbGxHbG9iYWxMaXN0ZW5lcnMoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcHJlc3NQcm9wcy5vblRvdWNoQ2FuY2VsID0gKGUpPT57XHJcbiAgICAgICAgICAgICAgICBpZiAoIWUuY3VycmVudFRhcmdldC5jb250YWlucyhlLnRhcmdldCkpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuaXNQcmVzc2VkKSBjYW5jZWwoZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGxldCBvblNjcm9sbCA9IChlKT0+e1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLmlzUHJlc3NlZCAmJiBlLnRhcmdldC5jb250YWlucyhzdGF0ZS50YXJnZXQpKSBjYW5jZWwoe1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUYXJnZXQ6IHN0YXRlLnRhcmdldCxcclxuICAgICAgICAgICAgICAgICAgICBzaGlmdEtleTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgY3RybEtleTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YUtleTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgYWx0S2V5OiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHByZXNzUHJvcHMub25EcmFnU3RhcnQgPSAoZSk9PntcclxuICAgICAgICAgICAgICAgIGlmICghZS5jdXJyZW50VGFyZ2V0LmNvbnRhaW5zKGUudGFyZ2V0KSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgY2FuY2VsKGUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcHJlc3NQcm9wcztcclxuICAgIH0sIFtcclxuICAgICAgICBhZGRHbG9iYWxMaXN0ZW5lcixcclxuICAgICAgICBpc0Rpc2FibGVkLFxyXG4gICAgICAgIHByZXZlbnRGb2N1c09uUHJlc3MsXHJcbiAgICAgICAgcmVtb3ZlQWxsR2xvYmFsTGlzdGVuZXJzLFxyXG4gICAgICAgIGFsbG93VGV4dFNlbGVjdGlvbk9uUHJlc3MsXHJcbiAgICAgICAgY2FuY2VsLFxyXG4gICAgICAgIGNhbmNlbE9uUG9pbnRlckV4aXQsXHJcbiAgICAgICAgdHJpZ2dlclByZXNzRW5kLFxyXG4gICAgICAgIHRyaWdnZXJQcmVzc1N0YXJ0LFxyXG4gICAgICAgIHRyaWdnZXJQcmVzc1VwXHJcbiAgICBdKTtcclxuICAgIC8vIFJlbW92ZSB1c2VyLXNlbGVjdDogbm9uZSBpbiBjYXNlIGNvbXBvbmVudCB1bm1vdW50cyBpbW1lZGlhdGVseSBhZnRlciBwcmVzc1N0YXJ0XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgYXJyb3ctYm9keS1zdHlsZVxyXG4gICAgKDAsICRieDdTTCR1c2VFZmZlY3QpKCgpPT57XHJcbiAgICAgICAgcmV0dXJuICgpPT57XHJcbiAgICAgICAgICAgIHZhciBfcmVmX2N1cnJlbnRfdGFyZ2V0O1xyXG4gICAgICAgICAgICBpZiAoIWFsbG93VGV4dFNlbGVjdGlvbk9uUHJlc3MpIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcclxuICAgICAgICAgICAgKDAsICQxNGMwYjcyNTA5ZDcwMjI1JGV4cG9ydCRiMGQ2ZmExYWIzMmUzMjk1KSgoX3JlZl9jdXJyZW50X3RhcmdldCA9IHJlZi5jdXJyZW50LnRhcmdldCkgIT09IG51bGwgJiYgX3JlZl9jdXJyZW50X3RhcmdldCAhPT0gdm9pZCAwID8gX3JlZl9jdXJyZW50X3RhcmdldCA6IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgfTtcclxuICAgIH0sIFtcclxuICAgICAgICBhbGxvd1RleHRTZWxlY3Rpb25PblByZXNzXHJcbiAgICBdKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaXNQcmVzc2VkOiBpc1ByZXNzZWRQcm9wIHx8IGlzUHJlc3NlZCxcclxuICAgICAgICBwcmVzc1Byb3BzOiAoMCwgJGJ4N1NMJG1lcmdlUHJvcHMpKGRvbVByb3BzLCBwcmVzc1Byb3BzKVxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiAkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkaXNIVE1MQW5jaG9yTGluayh0YXJnZXQpIHtcclxuICAgIHJldHVybiB0YXJnZXQudGFnTmFtZSA9PT0gXCJBXCIgJiYgdGFyZ2V0Lmhhc0F0dHJpYnV0ZShcImhyZWZcIik7XHJcbn1cclxuZnVuY3Rpb24gJGY2YzMxY2NlMmFkZjY1NGYkdmFyJGlzVmFsaWRLZXlib2FyZEV2ZW50KGV2ZW50LCBjdXJyZW50VGFyZ2V0KSB7XHJcbiAgICBjb25zdCB7IGtleToga2V5LCBjb2RlOiBjb2RlIH0gPSBldmVudDtcclxuICAgIGNvbnN0IGVsZW1lbnQgPSBjdXJyZW50VGFyZ2V0O1xyXG4gICAgY29uc3Qgcm9sZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwicm9sZVwiKTtcclxuICAgIC8vIEFjY2Vzc2liaWxpdHkgZm9yIGtleWJvYXJkcy4gU3BhY2UgYW5kIEVudGVyIG9ubHkuXHJcbiAgICAvLyBcIlNwYWNlYmFyXCIgaXMgZm9yIElFIDExXHJcbiAgICByZXR1cm4gKGtleSA9PT0gXCJFbnRlclwiIHx8IGtleSA9PT0gXCIgXCIgfHwga2V5ID09PSBcIlNwYWNlYmFyXCIgfHwgY29kZSA9PT0gXCJTcGFjZVwiKSAmJiAhKGVsZW1lbnQgaW5zdGFuY2VvZiAoMCwgJGJ4N1NMJGdldE93bmVyV2luZG93KShlbGVtZW50KS5IVE1MSW5wdXRFbGVtZW50ICYmICEkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkaXNWYWxpZElucHV0S2V5KGVsZW1lbnQsIGtleSkgfHwgZWxlbWVudCBpbnN0YW5jZW9mICgwLCAkYng3U0wkZ2V0T3duZXJXaW5kb3cpKGVsZW1lbnQpLkhUTUxUZXh0QXJlYUVsZW1lbnQgfHwgZWxlbWVudC5pc0NvbnRlbnRFZGl0YWJsZSkgJiYgLy8gTGlua3Mgc2hvdWxkIG9ubHkgdHJpZ2dlciB3aXRoIEVudGVyIGtleVxyXG4gICAgISgocm9sZSA9PT0gXCJsaW5rXCIgfHwgIXJvbGUgJiYgJGY2YzMxY2NlMmFkZjY1NGYkdmFyJGlzSFRNTEFuY2hvckxpbmsoZWxlbWVudCkpICYmIGtleSAhPT0gXCJFbnRlclwiKTtcclxufVxyXG5mdW5jdGlvbiAkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkZ2V0VG91Y2hGcm9tRXZlbnQoZXZlbnQpIHtcclxuICAgIGNvbnN0IHsgdGFyZ2V0VG91Y2hlczogdGFyZ2V0VG91Y2hlcyB9ID0gZXZlbnQ7XHJcbiAgICBpZiAodGFyZ2V0VG91Y2hlcy5sZW5ndGggPiAwKSByZXR1cm4gdGFyZ2V0VG91Y2hlc1swXTtcclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcbmZ1bmN0aW9uICRmNmMzMWNjZTJhZGY2NTRmJHZhciRnZXRUb3VjaEJ5SWQoZXZlbnQsIHBvaW50ZXJJZCkge1xyXG4gICAgY29uc3QgY2hhbmdlZFRvdWNoZXMgPSBldmVudC5jaGFuZ2VkVG91Y2hlcztcclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjaGFuZ2VkVG91Y2hlcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgY29uc3QgdG91Y2ggPSBjaGFuZ2VkVG91Y2hlc1tpXTtcclxuICAgICAgICBpZiAodG91Y2guaWRlbnRpZmllciA9PT0gcG9pbnRlcklkKSByZXR1cm4gdG91Y2g7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG5mdW5jdGlvbiAkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkY3JlYXRlRXZlbnQodGFyZ2V0LCBlKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGN1cnJlbnRUYXJnZXQ6IHRhcmdldCxcclxuICAgICAgICBzaGlmdEtleTogZS5zaGlmdEtleSxcclxuICAgICAgICBjdHJsS2V5OiBlLmN0cmxLZXksXHJcbiAgICAgICAgbWV0YUtleTogZS5tZXRhS2V5LFxyXG4gICAgICAgIGFsdEtleTogZS5hbHRLZXlcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gJGY2YzMxY2NlMmFkZjY1NGYkdmFyJGdldFBvaW50Q2xpZW50UmVjdChwb2ludCkge1xyXG4gICAgbGV0IG9mZnNldFggPSAwO1xyXG4gICAgbGV0IG9mZnNldFkgPSAwO1xyXG4gICAgaWYgKHBvaW50LndpZHRoICE9PSB1bmRlZmluZWQpIG9mZnNldFggPSBwb2ludC53aWR0aCAvIDI7XHJcbiAgICBlbHNlIGlmIChwb2ludC5yYWRpdXNYICE9PSB1bmRlZmluZWQpIG9mZnNldFggPSBwb2ludC5yYWRpdXNYO1xyXG4gICAgaWYgKHBvaW50LmhlaWdodCAhPT0gdW5kZWZpbmVkKSBvZmZzZXRZID0gcG9pbnQuaGVpZ2h0IC8gMjtcclxuICAgIGVsc2UgaWYgKHBvaW50LnJhZGl1c1kgIT09IHVuZGVmaW5lZCkgb2Zmc2V0WSA9IHBvaW50LnJhZGl1c1k7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHRvcDogcG9pbnQuY2xpZW50WSAtIG9mZnNldFksXHJcbiAgICAgICAgcmlnaHQ6IHBvaW50LmNsaWVudFggKyBvZmZzZXRYLFxyXG4gICAgICAgIGJvdHRvbTogcG9pbnQuY2xpZW50WSArIG9mZnNldFksXHJcbiAgICAgICAgbGVmdDogcG9pbnQuY2xpZW50WCAtIG9mZnNldFhcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gJGY2YzMxY2NlMmFkZjY1NGYkdmFyJGFyZVJlY3RhbmdsZXNPdmVybGFwcGluZyhhLCBiKSB7XHJcbiAgICAvLyBjaGVjayBpZiB0aGV5IGNhbm5vdCBvdmVybGFwIG9uIHggYXhpc1xyXG4gICAgaWYgKGEubGVmdCA+IGIucmlnaHQgfHwgYi5sZWZ0ID4gYS5yaWdodCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgLy8gY2hlY2sgaWYgdGhleSBjYW5ub3Qgb3ZlcmxhcCBvbiB5IGF4aXNcclxuICAgIGlmIChhLnRvcCA+IGIuYm90dG9tIHx8IGIudG9wID4gYS5ib3R0b20pIHJldHVybiBmYWxzZTtcclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uICRmNmMzMWNjZTJhZGY2NTRmJHZhciRpc092ZXJUYXJnZXQocG9pbnQsIHRhcmdldCkge1xyXG4gICAgbGV0IHJlY3QgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBsZXQgcG9pbnRSZWN0ID0gJGY2YzMxY2NlMmFkZjY1NGYkdmFyJGdldFBvaW50Q2xpZW50UmVjdChwb2ludCk7XHJcbiAgICByZXR1cm4gJGY2YzMxY2NlMmFkZjY1NGYkdmFyJGFyZVJlY3RhbmdsZXNPdmVybGFwcGluZyhyZWN0LCBwb2ludFJlY3QpO1xyXG59XHJcbmZ1bmN0aW9uICRmNmMzMWNjZTJhZGY2NTRmJHZhciRzaG91bGRQcmV2ZW50RGVmYXVsdCh0YXJnZXQpIHtcclxuICAgIC8vIFdlIGNhbm5vdCBwcmV2ZW50IGRlZmF1bHQgaWYgdGhlIHRhcmdldCBpcyBhIGRyYWdnYWJsZSBlbGVtZW50LlxyXG4gICAgcmV0dXJuICEodGFyZ2V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHx8ICF0YXJnZXQuaGFzQXR0cmlidXRlKFwiZHJhZ2dhYmxlXCIpO1xyXG59XHJcbmZ1bmN0aW9uICRmNmMzMWNjZTJhZGY2NTRmJHZhciRzaG91bGRQcmV2ZW50RGVmYXVsdEtleWJvYXJkKHRhcmdldCwga2V5KSB7XHJcbiAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkgcmV0dXJuICEkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkaXNWYWxpZElucHV0S2V5KHRhcmdldCwga2V5KTtcclxuICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MQnV0dG9uRWxlbWVudCkgcmV0dXJuIHRhcmdldC50eXBlICE9PSBcInN1Ym1pdFwiICYmIHRhcmdldC50eXBlICE9PSBcInJlc2V0XCI7XHJcbiAgICBpZiAoJGY2YzMxY2NlMmFkZjY1NGYkdmFyJGlzSFRNTEFuY2hvckxpbmsodGFyZ2V0KSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuY29uc3QgJGY2YzMxY2NlMmFkZjY1NGYkdmFyJG5vblRleHRJbnB1dFR5cGVzID0gbmV3IFNldChbXHJcbiAgICBcImNoZWNrYm94XCIsXHJcbiAgICBcInJhZGlvXCIsXHJcbiAgICBcInJhbmdlXCIsXHJcbiAgICBcImNvbG9yXCIsXHJcbiAgICBcImZpbGVcIixcclxuICAgIFwiaW1hZ2VcIixcclxuICAgIFwiYnV0dG9uXCIsXHJcbiAgICBcInN1Ym1pdFwiLFxyXG4gICAgXCJyZXNldFwiXHJcbl0pO1xyXG5mdW5jdGlvbiAkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkaXNWYWxpZElucHV0S2V5KHRhcmdldCwga2V5KSB7XHJcbiAgICAvLyBPbmx5IHNwYWNlIHNob3VsZCB0b2dnbGUgY2hlY2tib3hlcyBhbmQgcmFkaW9zLCBub3QgZW50ZXIuXHJcbiAgICByZXR1cm4gdGFyZ2V0LnR5cGUgPT09IFwiY2hlY2tib3hcIiB8fCB0YXJnZXQudHlwZSA9PT0gXCJyYWRpb1wiID8ga2V5ID09PSBcIiBcIiA6ICRmNmMzMWNjZTJhZGY2NTRmJHZhciRub25UZXh0SW5wdXRUeXBlcy5oYXModGFyZ2V0LnR5cGUpO1xyXG59XHJcblxyXG5cclxuXHJcbmNvbnN0ICQzYjExN2U0M2RjMGNhOTVkJGV4cG9ydCQyN2M3MDFlZDllNDQ5ZTk5ID0gLyojX19QVVJFX18qLyAoMCwgJGJ4N1NMJHJlYWN0KS5mb3J3YXJkUmVmKCh7IGNoaWxkcmVuOiBjaGlsZHJlbiwgLi4ucHJvcHMgfSwgcmVmKT0+e1xyXG4gICAgcmVmID0gKDAsICRieDdTTCR1c2VPYmplY3RSZWYpKHJlZik7XHJcbiAgICBsZXQgeyBwcmVzc1Byb3BzOiBwcmVzc1Byb3BzIH0gPSAoMCwgJGY2YzMxY2NlMmFkZjY1NGYkZXhwb3J0JDQ1NzEyZWNlZGE2ZmFkMjEpKHtcclxuICAgICAgICAuLi5wcm9wcyxcclxuICAgICAgICByZWY6IHJlZlxyXG4gICAgfSk7XHJcbiAgICBsZXQgY2hpbGQgPSAoMCwgJGJ4N1NMJHJlYWN0KS5DaGlsZHJlbi5vbmx5KGNoaWxkcmVuKTtcclxuICAgIHJldHVybiAvKiNfX1BVUkVfXyovICgwLCAkYng3U0wkcmVhY3QpLmNsb25lRWxlbWVudChjaGlsZCwgLy8gQHRzLWlnbm9yZVxyXG4gICAge1xyXG4gICAgICAgIHJlZjogcmVmLFxyXG4gICAgICAgIC4uLigwLCAkYng3U0wkbWVyZ2VQcm9wcykoY2hpbGQucHJvcHMsIHByZXNzUHJvcHMpXHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5cclxuLypcclxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gXHJcblxyXG5cclxuY29uc3QgJGYxYWI4Yzc1NDc4YzZmNzMkZXhwb3J0JDMzNTE4NzFlZTRiMjg4YjggPSAvKiNfX1BVUkVfXyovICgwLCAkYng3U0wkcmVhY3QpLmZvcndhcmRSZWYoKHsgY2hpbGRyZW46IGNoaWxkcmVuLCAuLi5wcm9wcyB9LCByZWYpPT57XHJcbiAgICBsZXQgaXNSZWdpc3RlcmVkID0gKDAsICRieDdTTCR1c2VSZWYpKGZhbHNlKTtcclxuICAgIGxldCBwcmV2Q29udGV4dCA9ICgwLCAkYng3U0wkdXNlQ29udGV4dCkoKDAsICRhZTFlZWJhOGI5ZWFmZDA4JGV4cG9ydCQ1MTY1ZWNjYjM1YWFhZGI1KSk7XHJcbiAgICByZWYgPSAoMCwgJGJ4N1NMJHVzZU9iamVjdFJlZikocmVmIHx8IChwcmV2Q29udGV4dCA9PT0gbnVsbCB8fCBwcmV2Q29udGV4dCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcHJldkNvbnRleHQucmVmKSk7XHJcbiAgICBsZXQgY29udGV4dCA9ICgwLCAkYng3U0wkbWVyZ2VQcm9wcykocHJldkNvbnRleHQgfHwge30sIHtcclxuICAgICAgICAuLi5wcm9wcyxcclxuICAgICAgICByZWY6IHJlZixcclxuICAgICAgICByZWdpc3RlciAoKSB7XHJcbiAgICAgICAgICAgIGlzUmVnaXN0ZXJlZC5jdXJyZW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHByZXZDb250ZXh0KSBwcmV2Q29udGV4dC5yZWdpc3RlcigpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgKDAsICRieDdTTCR1c2VTeW5jUmVmKShwcmV2Q29udGV4dCwgcmVmKTtcclxuICAgICgwLCAkYng3U0wkdXNlRWZmZWN0KSgoKT0+e1xyXG4gICAgICAgIGlmICghaXNSZWdpc3RlcmVkLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiQSBQcmVzc1Jlc3BvbmRlciB3YXMgcmVuZGVyZWQgd2l0aG91dCBhIHByZXNzYWJsZSBjaGlsZC4gRWl0aGVyIGNhbGwgdGhlIHVzZVByZXNzIGhvb2ssIG9yIHdyYXAgeW91ciBET00gbm9kZSB3aXRoIDxQcmVzc2FibGU+IGNvbXBvbmVudC5cIik7XHJcbiAgICAgICAgICAgIGlzUmVnaXN0ZXJlZC5jdXJyZW50ID0gdHJ1ZTsgLy8gb25seSB3YXJuIG9uY2UgaW4gc3RyaWN0IG1vZGUuXHJcbiAgICAgICAgfVxyXG4gICAgfSwgW10pO1xyXG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi8gKDAsICRieDdTTCRyZWFjdCkuY3JlYXRlRWxlbWVudCgoMCwgJGFlMWVlYmE4YjllYWZkMDgkZXhwb3J0JDUxNjVlY2NiMzVhYWFkYjUpLlByb3ZpZGVyLCB7XHJcbiAgICAgICAgdmFsdWU6IGNvbnRleHRcclxuICAgIH0sIGNoaWxkcmVuKTtcclxufSk7XHJcbmZ1bmN0aW9uICRmMWFiOGM3NTQ3OGM2ZjczJGV4cG9ydCRjZjc1NDI4ZTBiOWVkMWVhKHsgY2hpbGRyZW46IGNoaWxkcmVuIH0pIHtcclxuICAgIGxldCBjb250ZXh0ID0gKDAsICRieDdTTCR1c2VNZW1vKSgoKT0+KHtcclxuICAgICAgICAgICAgcmVnaXN0ZXI6ICgpPT57fVxyXG4gICAgICAgIH0pLCBbXSk7XHJcbiAgICByZXR1cm4gLyojX19QVVJFX18qLyAoMCwgJGJ4N1NMJHJlYWN0KS5jcmVhdGVFbGVtZW50KCgwLCAkYWUxZWViYThiOWVhZmQwOCRleHBvcnQkNTE2NWVjY2IzNWFhYWRiNSkuUHJvdmlkZXIsIHtcclxuICAgICAgICB2YWx1ZTogY29udGV4dFxyXG4gICAgfSwgY2hpbGRyZW4pO1xyXG59XHJcblxyXG5cclxuLypcclxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gLy8gUG9ydGlvbnMgb2YgdGhlIGNvZGUgaW4gdGhpcyBmaWxlIGFyZSBiYXNlZCBvbiBjb2RlIGZyb20gcmVhY3QuXHJcbi8vIE9yaWdpbmFsIGxpY2Vuc2luZyBmb3IgdGhlIGZvbGxvd2luZyBjYW4gYmUgZm91bmQgaW4gdGhlXHJcbi8vIE5PVElDRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxyXG4vLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L3RyZWUvY2M3YzFhZWNlNDZhNmI2OWI0MTk1OGQ3MzFlMGZkMjdjOTRiZmM2Yy9wYWNrYWdlcy9yZWFjdC1pbnRlcmFjdGlvbnNcclxuXHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIFxyXG5cclxuY2xhc3MgJDhhOWNiMjc5ZGM4N2UxMzAkZXhwb3J0JDkwNWU3ZmM1NDRhNzFmMzYge1xyXG4gICAgaXNEZWZhdWx0UHJldmVudGVkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5hdGl2ZUV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQ7XHJcbiAgICB9XHJcbiAgICBwcmV2ZW50RGVmYXVsdCgpIHtcclxuICAgICAgICB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubmF0aXZlRXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH1cclxuICAgIHN0b3BQcm9wYWdhdGlvbigpIHtcclxuICAgICAgICB0aGlzLm5hdGl2ZUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIHRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSAoKT0+dHJ1ZTtcclxuICAgIH1cclxuICAgIGlzUHJvcGFnYXRpb25TdG9wcGVkKCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHBlcnNpc3QoKSB7fVxyXG4gICAgY29uc3RydWN0b3IodHlwZSwgbmF0aXZlRXZlbnQpe1xyXG4gICAgICAgIHRoaXMubmF0aXZlRXZlbnQgPSBuYXRpdmVFdmVudDtcclxuICAgICAgICB0aGlzLnRhcmdldCA9IG5hdGl2ZUV2ZW50LnRhcmdldDtcclxuICAgICAgICB0aGlzLmN1cnJlbnRUYXJnZXQgPSBuYXRpdmVFdmVudC5jdXJyZW50VGFyZ2V0O1xyXG4gICAgICAgIHRoaXMucmVsYXRlZFRhcmdldCA9IG5hdGl2ZUV2ZW50LnJlbGF0ZWRUYXJnZXQ7XHJcbiAgICAgICAgdGhpcy5idWJibGVzID0gbmF0aXZlRXZlbnQuYnViYmxlcztcclxuICAgICAgICB0aGlzLmNhbmNlbGFibGUgPSBuYXRpdmVFdmVudC5jYW5jZWxhYmxlO1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdFByZXZlbnRlZCA9IG5hdGl2ZUV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQ7XHJcbiAgICAgICAgdGhpcy5ldmVudFBoYXNlID0gbmF0aXZlRXZlbnQuZXZlbnRQaGFzZTtcclxuICAgICAgICB0aGlzLmlzVHJ1c3RlZCA9IG5hdGl2ZUV2ZW50LmlzVHJ1c3RlZDtcclxuICAgICAgICB0aGlzLnRpbWVTdGFtcCA9IG5hdGl2ZUV2ZW50LnRpbWVTdGFtcDtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uICQ4YTljYjI3OWRjODdlMTMwJGV4cG9ydCQ3MTVjNjgyZDA5ZDYzOWNjKG9uQmx1cikge1xyXG4gICAgbGV0IHN0YXRlUmVmID0gKDAsICRieDdTTCR1c2VSZWYpKHtcclxuICAgICAgICBpc0ZvY3VzZWQ6IGZhbHNlLFxyXG4gICAgICAgIG9ic2VydmVyOiBudWxsXHJcbiAgICB9KTtcclxuICAgIC8vIENsZWFuIHVwIE11dGF0aW9uT2JzZXJ2ZXIgb24gdW5tb3VudC4gU2VlIGJlbG93LlxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGFycm93LWJvZHktc3R5bGVcclxuICAgICgwLCAkYng3U0wkdXNlTGF5b3V0RWZmZWN0KSgoKT0+e1xyXG4gICAgICAgIGNvbnN0IHN0YXRlID0gc3RhdGVSZWYuY3VycmVudDtcclxuICAgICAgICByZXR1cm4gKCk9PntcclxuICAgICAgICAgICAgaWYgKHN0YXRlLm9ic2VydmVyKSB7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5vYnNlcnZlci5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5vYnNlcnZlciA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSwgW10pO1xyXG4gICAgbGV0IGRpc3BhdGNoQmx1ciA9ICgwLCAkYng3U0wkdXNlRWZmZWN0RXZlbnQpKChlKT0+e1xyXG4gICAgICAgIG9uQmx1ciA9PT0gbnVsbCB8fCBvbkJsdXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uQmx1cihlKTtcclxuICAgIH0pO1xyXG4gICAgLy8gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgZHVyaW5nIGEgUmVhY3Qgb25Gb2N1cyBldmVudC5cclxuICAgIHJldHVybiAoMCwgJGJ4N1NMJHVzZUNhbGxiYWNrKSgoZSk9PntcclxuICAgICAgICAvLyBSZWFjdCBkb2VzIG5vdCBmaXJlIG9uQmx1ciB3aGVuIGFuIGVsZW1lbnQgaXMgZGlzYWJsZWQuIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9pc3N1ZXMvOTE0MlxyXG4gICAgICAgIC8vIE1vc3QgYnJvd3NlcnMgZmlyZSBhIG5hdGl2ZSBmb2N1c291dCBldmVudCBpbiB0aGlzIGNhc2UsIGV4Y2VwdCBmb3IgRmlyZWZveC4gSW4gdGhhdCBjYXNlLCB3ZSB1c2UgYVxyXG4gICAgICAgIC8vIE11dGF0aW9uT2JzZXJ2ZXIgdG8gd2F0Y2ggZm9yIHRoZSBkaXNhYmxlZCBhdHRyaWJ1dGUsIGFuZCBkaXNwYXRjaCB0aGVzZSBldmVudHMgb3Vyc2VsdmVzLlxyXG4gICAgICAgIC8vIEZvciBicm93c2VycyB0aGF0IGRvLCBmb2N1c291dCBmaXJlcyBiZWZvcmUgdGhlIE11dGF0aW9uT2JzZXJ2ZXIsIHNvIG9uQmx1ciBzaG91bGQgbm90IGZpcmUgdHdpY2UuXHJcbiAgICAgICAgaWYgKGUudGFyZ2V0IGluc3RhbmNlb2YgSFRNTEJ1dHRvbkVsZW1lbnQgfHwgZS50YXJnZXQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50IHx8IGUudGFyZ2V0IGluc3RhbmNlb2YgSFRNTFRleHRBcmVhRWxlbWVudCB8fCBlLnRhcmdldCBpbnN0YW5jZW9mIEhUTUxTZWxlY3RFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHN0YXRlUmVmLmN1cnJlbnQuaXNGb2N1c2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgbGV0IHRhcmdldCA9IGUudGFyZ2V0O1xyXG4gICAgICAgICAgICBsZXQgb25CbHVySGFuZGxlciA9IChlKT0+e1xyXG4gICAgICAgICAgICAgICAgc3RhdGVSZWYuY3VycmVudC5pc0ZvY3VzZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuZGlzYWJsZWQpIC8vIEZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LCBkaXNwYXRjaCBhIChmYWtlKSBSZWFjdCBzeW50aGV0aWMgZXZlbnQuXHJcbiAgICAgICAgICAgICAgICBkaXNwYXRjaEJsdXIobmV3ICQ4YTljYjI3OWRjODdlMTMwJGV4cG9ydCQ5MDVlN2ZjNTQ0YTcxZjM2KFwiYmx1clwiLCBlKSk7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBubyBsb25nZXIgbmVlZCB0aGUgTXV0YXRpb25PYnNlcnZlciBvbmNlIHRoZSB0YXJnZXQgaXMgYmx1cnJlZC5cclxuICAgICAgICAgICAgICAgIGlmIChzdGF0ZVJlZi5jdXJyZW50Lm9ic2VydmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVSZWYuY3VycmVudC5vYnNlcnZlci5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVSZWYuY3VycmVudC5vYnNlcnZlciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNvdXRcIiwgb25CbHVySGFuZGxlciwge1xyXG4gICAgICAgICAgICAgICAgb25jZTogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc3RhdGVSZWYuY3VycmVudC5vYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpPT57XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGVSZWYuY3VycmVudC5pc0ZvY3VzZWQgJiYgdGFyZ2V0LmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9zdGF0ZVJlZl9jdXJyZW50X29ic2VydmVyO1xyXG4gICAgICAgICAgICAgICAgICAgIChfc3RhdGVSZWZfY3VycmVudF9vYnNlcnZlciA9IHN0YXRlUmVmLmN1cnJlbnQub2JzZXJ2ZXIpID09PSBudWxsIHx8IF9zdGF0ZVJlZl9jdXJyZW50X29ic2VydmVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc3RhdGVSZWZfY3VycmVudF9vYnNlcnZlci5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlbGF0ZWRUYXJnZXRFbCA9IHRhcmdldCA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA/IG51bGwgOiBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5kaXNwYXRjaEV2ZW50KG5ldyBGb2N1c0V2ZW50KFwiYmx1clwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHJlbGF0ZWRUYXJnZXRFbFxyXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQuZGlzcGF0Y2hFdmVudChuZXcgRm9jdXNFdmVudChcImZvY3Vzb3V0XCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnViYmxlczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZFRhcmdldDogcmVsYXRlZFRhcmdldEVsXHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc3RhdGVSZWYuY3VycmVudC5vYnNlcnZlci5vYnNlcnZlKHRhcmdldCwge1xyXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZUZpbHRlcjogW1xyXG4gICAgICAgICAgICAgICAgICAgIFwiZGlzYWJsZWRcIlxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9LCBbXHJcbiAgICAgICAgZGlzcGF0Y2hCbHVyXHJcbiAgICBdKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uICRhMWVhNTlkNjgyNzBmMGRkJGV4cG9ydCRmODE2OGQ4ZGQ4ZmQ2NmU2KHByb3BzKSB7XHJcbiAgICBsZXQgeyBpc0Rpc2FibGVkOiBpc0Rpc2FibGVkLCBvbkZvY3VzOiBvbkZvY3VzUHJvcCwgb25CbHVyOiBvbkJsdXJQcm9wLCBvbkZvY3VzQ2hhbmdlOiBvbkZvY3VzQ2hhbmdlIH0gPSBwcm9wcztcclxuICAgIGNvbnN0IG9uQmx1ciA9ICgwLCAkYng3U0wkdXNlQ2FsbGJhY2spKChlKT0+e1xyXG4gICAgICAgIGlmIChlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIGlmIChvbkJsdXJQcm9wKSBvbkJsdXJQcm9wKGUpO1xyXG4gICAgICAgICAgICBpZiAob25Gb2N1c0NoYW5nZSkgb25Gb2N1c0NoYW5nZShmYWxzZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH0sIFtcclxuICAgICAgICBvbkJsdXJQcm9wLFxyXG4gICAgICAgIG9uRm9jdXNDaGFuZ2VcclxuICAgIF0pO1xyXG4gICAgY29uc3Qgb25TeW50aGV0aWNGb2N1cyA9ICgwLCAkOGE5Y2IyNzlkYzg3ZTEzMCRleHBvcnQkNzE1YzY4MmQwOWQ2MzljYykob25CbHVyKTtcclxuICAgIGNvbnN0IG9uRm9jdXMgPSAoMCwgJGJ4N1NMJHVzZUNhbGxiYWNrKSgoZSk9PntcclxuICAgICAgICAvLyBEb3VibGUgY2hlY2sgdGhhdCBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGFjdHVhbGx5IG1hdGNoZXMgZS50YXJnZXQgaW4gY2FzZSBhIHByZXZpb3VzbHkgY2hhaW5lZFxyXG4gICAgICAgIC8vIGZvY3VzIGhhbmRsZXIgYWxyZWFkeSBtb3ZlZCBmb2N1cyBzb21ld2hlcmUgZWxzZS5cclxuICAgICAgICBpZiAoZS50YXJnZXQgPT09IGUuY3VycmVudFRhcmdldCAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBlLnRhcmdldCkge1xyXG4gICAgICAgICAgICBpZiAob25Gb2N1c1Byb3ApIG9uRm9jdXNQcm9wKGUpO1xyXG4gICAgICAgICAgICBpZiAob25Gb2N1c0NoYW5nZSkgb25Gb2N1c0NoYW5nZSh0cnVlKTtcclxuICAgICAgICAgICAgb25TeW50aGV0aWNGb2N1cyhlKTtcclxuICAgICAgICB9XHJcbiAgICB9LCBbXHJcbiAgICAgICAgb25Gb2N1c0NoYW5nZSxcclxuICAgICAgICBvbkZvY3VzUHJvcCxcclxuICAgICAgICBvblN5bnRoZXRpY0ZvY3VzXHJcbiAgICBdKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZm9jdXNQcm9wczoge1xyXG4gICAgICAgICAgICBvbkZvY3VzOiAhaXNEaXNhYmxlZCAmJiAob25Gb2N1c1Byb3AgfHwgb25Gb2N1c0NoYW5nZSB8fCBvbkJsdXJQcm9wKSA/IG9uRm9jdXMgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIG9uQmx1cjogIWlzRGlzYWJsZWQgJiYgKG9uQmx1clByb3AgfHwgb25Gb2N1c0NoYW5nZSkgPyBvbkJsdXIgOiB1bmRlZmluZWRcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5cclxuLypcclxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gLy8gUG9ydGlvbnMgb2YgdGhlIGNvZGUgaW4gdGhpcyBmaWxlIGFyZSBiYXNlZCBvbiBjb2RlIGZyb20gcmVhY3QuXHJcbi8vIE9yaWdpbmFsIGxpY2Vuc2luZyBmb3IgdGhlIGZvbGxvd2luZyBjYW4gYmUgZm91bmQgaW4gdGhlXHJcbi8vIE5PVElDRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxyXG4vLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L3RyZWUvY2M3YzFhZWNlNDZhNmI2OWI0MTk1OGQ3MzFlMGZkMjdjOTRiZmM2Yy9wYWNrYWdlcy9yZWFjdC1pbnRlcmFjdGlvbnNcclxuXHJcblxyXG5cclxubGV0ICQ1MDdmYWJlMTBlNzFjNmZiJHZhciRjdXJyZW50TW9kYWxpdHkgPSBudWxsO1xyXG5sZXQgJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJGNoYW5nZUhhbmRsZXJzID0gbmV3IFNldCgpO1xyXG5sZXQgJDUwN2ZhYmUxMGU3MWM2ZmIkZXhwb3J0JGQ5MDI0M2I1OGRhZWNkYTcgPSBuZXcgTWFwKCk7IC8vIFdlIHVzZSBhIG1hcCBoZXJlIHRvIHN1cHBvcnQgc2V0dGluZyBldmVudCBsaXN0ZW5lcnMgYWNyb3NzIG11bHRpcGxlIGRvY3VtZW50IG9iamVjdHMuXHJcbmxldCAkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkaGFzRXZlbnRCZWZvcmVGb2N1cyA9IGZhbHNlO1xyXG5sZXQgJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJGhhc0JsdXJyZWRXaW5kb3dSZWNlbnRseSA9IGZhbHNlO1xyXG4vLyBPbmx5IFRhYiBvciBFc2Mga2V5cyB3aWxsIG1ha2UgZm9jdXMgdmlzaWJsZSBvbiB0ZXh0IGlucHV0IGVsZW1lbnRzXHJcbmNvbnN0ICQ1MDdmYWJlMTBlNzFjNmZiJHZhciRGT0NVU19WSVNJQkxFX0lOUFVUX0tFWVMgPSB7XHJcbiAgICBUYWI6IHRydWUsXHJcbiAgICBFc2NhcGU6IHRydWVcclxufTtcclxuZnVuY3Rpb24gJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJHRyaWdnZXJDaGFuZ2VIYW5kbGVycyhtb2RhbGl0eSwgZSkge1xyXG4gICAgZm9yIChsZXQgaGFuZGxlciBvZiAkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkY2hhbmdlSGFuZGxlcnMpaGFuZGxlcihtb2RhbGl0eSwgZSk7XHJcbn1cclxuLyoqXHJcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBkZXRlcm1pbmUgaWYgYSBLZXlib2FyZEV2ZW50IGlzIHVubW9kaWZpZWQgYW5kIGNvdWxkIG1ha2Uga2V5Ym9hcmQgZm9jdXMgc3R5bGVzIHZpc2libGUuXHJcbiAqLyBmdW5jdGlvbiAkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkaXNWYWxpZEtleShlKSB7XHJcbiAgICAvLyBDb250cm9sIGFuZCBTaGlmdCBrZXlzIHRyaWdnZXIgd2hlbiBuYXZpZ2F0aW5nIGJhY2sgdG8gdGhlIHRhYiB3aXRoIGtleWJvYXJkLlxyXG4gICAgcmV0dXJuICEoZS5tZXRhS2V5IHx8ICEoMCwgJGJ4N1NMJGlzTWFjKSgpICYmIGUuYWx0S2V5IHx8IGUuY3RybEtleSB8fCBlLmtleSA9PT0gXCJDb250cm9sXCIgfHwgZS5rZXkgPT09IFwiU2hpZnRcIiB8fCBlLmtleSA9PT0gXCJNZXRhXCIpO1xyXG59XHJcbmZ1bmN0aW9uICQ1MDdmYWJlMTBlNzFjNmZiJHZhciRoYW5kbGVLZXlib2FyZEV2ZW50KGUpIHtcclxuICAgICQ1MDdmYWJlMTBlNzFjNmZiJHZhciRoYXNFdmVudEJlZm9yZUZvY3VzID0gdHJ1ZTtcclxuICAgIGlmICgkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkaXNWYWxpZEtleShlKSkge1xyXG4gICAgICAgICQ1MDdmYWJlMTBlNzFjNmZiJHZhciRjdXJyZW50TW9kYWxpdHkgPSBcImtleWJvYXJkXCI7XHJcbiAgICAgICAgJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJHRyaWdnZXJDaGFuZ2VIYW5kbGVycyhcImtleWJvYXJkXCIsIGUpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uICQ1MDdmYWJlMTBlNzFjNmZiJHZhciRoYW5kbGVQb2ludGVyRXZlbnQoZSkge1xyXG4gICAgJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJGN1cnJlbnRNb2RhbGl0eSA9IFwicG9pbnRlclwiO1xyXG4gICAgaWYgKGUudHlwZSA9PT0gXCJtb3VzZWRvd25cIiB8fCBlLnR5cGUgPT09IFwicG9pbnRlcmRvd25cIikge1xyXG4gICAgICAgICQ1MDdmYWJlMTBlNzFjNmZiJHZhciRoYXNFdmVudEJlZm9yZUZvY3VzID0gdHJ1ZTtcclxuICAgICAgICAkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkdHJpZ2dlckNoYW5nZUhhbmRsZXJzKFwicG9pbnRlclwiLCBlKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiAkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkaGFuZGxlQ2xpY2tFdmVudChlKSB7XHJcbiAgICBpZiAoKDAsICRieDdTTCRpc1ZpcnR1YWxDbGljaykoZSkpIHtcclxuICAgICAgICAkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkaGFzRXZlbnRCZWZvcmVGb2N1cyA9IHRydWU7XHJcbiAgICAgICAgJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJGN1cnJlbnRNb2RhbGl0eSA9IFwidmlydHVhbFwiO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uICQ1MDdmYWJlMTBlNzFjNmZiJHZhciRoYW5kbGVGb2N1c0V2ZW50KGUpIHtcclxuICAgIC8vIEZpcmVmb3ggZmlyZXMgdHdvIGV4dHJhIGZvY3VzIGV2ZW50cyB3aGVuIHRoZSB1c2VyIGZpcnN0IGNsaWNrcyBpbnRvIGFuIGlmcmFtZTpcclxuICAgIC8vIGZpcnN0IG9uIHRoZSB3aW5kb3csIHRoZW4gb24gdGhlIGRvY3VtZW50LiBXZSBpZ25vcmUgdGhlc2UgZXZlbnRzIHNvIHRoZXkgZG9uJ3RcclxuICAgIC8vIGNhdXNlIGtleWJvYXJkIGZvY3VzIHJpbmdzIHRvIGFwcGVhci5cclxuICAgIGlmIChlLnRhcmdldCA9PT0gd2luZG93IHx8IGUudGFyZ2V0ID09PSBkb2N1bWVudCkgcmV0dXJuO1xyXG4gICAgLy8gSWYgYSBmb2N1cyBldmVudCBvY2N1cnMgd2l0aG91dCBhIHByZWNlZGluZyBrZXlib2FyZCBvciBwb2ludGVyIGV2ZW50LCBzd2l0Y2ggdG8gdmlydHVhbCBtb2RhbGl0eS5cclxuICAgIC8vIFRoaXMgb2NjdXJzLCBmb3IgZXhhbXBsZSwgd2hlbiBuYXZpZ2F0aW5nIGEgZm9ybSB3aXRoIHRoZSBuZXh0L3ByZXZpb3VzIGJ1dHRvbnMgb24gaU9TLlxyXG4gICAgaWYgKCEkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkaGFzRXZlbnRCZWZvcmVGb2N1cyAmJiAhJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJGhhc0JsdXJyZWRXaW5kb3dSZWNlbnRseSkge1xyXG4gICAgICAgICQ1MDdmYWJlMTBlNzFjNmZiJHZhciRjdXJyZW50TW9kYWxpdHkgPSBcInZpcnR1YWxcIjtcclxuICAgICAgICAkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkdHJpZ2dlckNoYW5nZUhhbmRsZXJzKFwidmlydHVhbFwiLCBlKTtcclxuICAgIH1cclxuICAgICQ1MDdmYWJlMTBlNzFjNmZiJHZhciRoYXNFdmVudEJlZm9yZUZvY3VzID0gZmFsc2U7XHJcbiAgICAkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkaGFzQmx1cnJlZFdpbmRvd1JlY2VudGx5ID0gZmFsc2U7XHJcbn1cclxuZnVuY3Rpb24gJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJGhhbmRsZVdpbmRvd0JsdXIoKSB7XHJcbiAgICAvLyBXaGVuIHRoZSB3aW5kb3cgaXMgYmx1cnJlZCwgcmVzZXQgc3RhdGUuIFRoaXMgaXMgbmVjZXNzYXJ5IHdoZW4gdGFiYmluZyBvdXQgb2YgdGhlIHdpbmRvdyxcclxuICAgIC8vIGZvciBleGFtcGxlLCBzaW5jZSBhIHN1YnNlcXVlbnQgZm9jdXMgZXZlbnQgd29uJ3QgYmUgZmlyZWQuXHJcbiAgICAkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkaGFzRXZlbnRCZWZvcmVGb2N1cyA9IGZhbHNlO1xyXG4gICAgJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJGhhc0JsdXJyZWRXaW5kb3dSZWNlbnRseSA9IHRydWU7XHJcbn1cclxuLyoqXHJcbiAqIFNldHVwIGdsb2JhbCBldmVudCBsaXN0ZW5lcnMgdG8gY29udHJvbCB3aGVuIGtleWJvYXJkIGZvY3VzIHN0eWxlIHNob3VsZCBiZSB2aXNpYmxlLlxyXG4gKi8gZnVuY3Rpb24gJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJHNldHVwR2xvYmFsRm9jdXNFdmVudHMoZWxlbWVudCkge1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgJDUwN2ZhYmUxMGU3MWM2ZmIkZXhwb3J0JGQ5MDI0M2I1OGRhZWNkYTcuZ2V0KCgwLCAkYng3U0wkZ2V0T3duZXJXaW5kb3cpKGVsZW1lbnQpKSkgcmV0dXJuO1xyXG4gICAgY29uc3Qgd2luZG93T2JqZWN0ID0gKDAsICRieDdTTCRnZXRPd25lcldpbmRvdykoZWxlbWVudCk7XHJcbiAgICBjb25zdCBkb2N1bWVudE9iamVjdCA9ICgwLCAkYng3U0wkZ2V0T3duZXJEb2N1bWVudCkoZWxlbWVudCk7XHJcbiAgICAvLyBQcm9ncmFtbWF0aWMgZm9jdXMoKSBjYWxscyBzaG91bGRuJ3QgYWZmZWN0IHRoZSBjdXJyZW50IGlucHV0IG1vZGFsaXR5LlxyXG4gICAgLy8gSG93ZXZlciwgd2UgbmVlZCB0byBkZXRlY3Qgb3RoZXIgY2FzZXMgd2hlbiBhIGZvY3VzIGV2ZW50IG9jY3VycyB3aXRob3V0XHJcbiAgICAvLyBhIHByZWNlZGluZyB1c2VyIGV2ZW50IChlLmcuIHNjcmVlbiByZWFkZXIgZm9jdXMpLiBPdmVycmlkaW5nIHRoZSBmb2N1c1xyXG4gICAgLy8gbWV0aG9kIG9uIEhUTUxFbGVtZW50LnByb3RvdHlwZSBpcyBhIGJpdCBoYWNreSwgYnV0IHdvcmtzLlxyXG4gICAgbGV0IGZvY3VzID0gd2luZG93T2JqZWN0LkhUTUxFbGVtZW50LnByb3RvdHlwZS5mb2N1cztcclxuICAgIHdpbmRvd09iamVjdC5IVE1MRWxlbWVudC5wcm90b3R5cGUuZm9jdXMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkaGFzRXZlbnRCZWZvcmVGb2N1cyA9IHRydWU7XHJcbiAgICAgICAgZm9jdXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgIH07XHJcbiAgICBkb2N1bWVudE9iamVjdC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkaGFuZGxlS2V5Ym9hcmRFdmVudCwgdHJ1ZSk7XHJcbiAgICBkb2N1bWVudE9iamVjdC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJGhhbmRsZUtleWJvYXJkRXZlbnQsIHRydWUpO1xyXG4gICAgZG9jdW1lbnRPYmplY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICQ1MDdmYWJlMTBlNzFjNmZiJHZhciRoYW5kbGVDbGlja0V2ZW50LCB0cnVlKTtcclxuICAgIC8vIFJlZ2lzdGVyIGZvY3VzIGV2ZW50cyBvbiB0aGUgd2luZG93IHNvIHRoZXkgYXJlIHN1cmUgdG8gaGFwcGVuXHJcbiAgICAvLyBiZWZvcmUgUmVhY3QncyBldmVudCBsaXN0ZW5lcnMgKHJlZ2lzdGVyZWQgb24gdGhlIGRvY3VtZW50KS5cclxuICAgIHdpbmRvd09iamVjdC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJGhhbmRsZUZvY3VzRXZlbnQsIHRydWUpO1xyXG4gICAgd2luZG93T2JqZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsICQ1MDdmYWJlMTBlNzFjNmZiJHZhciRoYW5kbGVXaW5kb3dCbHVyLCBmYWxzZSk7XHJcbiAgICBpZiAodHlwZW9mIFBvaW50ZXJFdmVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgIGRvY3VtZW50T2JqZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCAkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkaGFuZGxlUG9pbnRlckV2ZW50LCB0cnVlKTtcclxuICAgICAgICBkb2N1bWVudE9iamVjdC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJGhhbmRsZVBvaW50ZXJFdmVudCwgdHJ1ZSk7XHJcbiAgICAgICAgZG9jdW1lbnRPYmplY3QuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCAkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkaGFuZGxlUG9pbnRlckV2ZW50LCB0cnVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZG9jdW1lbnRPYmplY3QuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkaGFuZGxlUG9pbnRlckV2ZW50LCB0cnVlKTtcclxuICAgICAgICBkb2N1bWVudE9iamVjdC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsICQ1MDdmYWJlMTBlNzFjNmZiJHZhciRoYW5kbGVQb2ludGVyRXZlbnQsIHRydWUpO1xyXG4gICAgICAgIGRvY3VtZW50T2JqZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsICQ1MDdmYWJlMTBlNzFjNmZiJHZhciRoYW5kbGVQb2ludGVyRXZlbnQsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgLy8gQWRkIHVubW91bnQgaGFuZGxlclxyXG4gICAgd2luZG93T2JqZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmV1bmxvYWRcIiwgKCk9PntcclxuICAgICAgICAkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkdGVhckRvd25XaW5kb3dGb2N1c1RyYWNraW5nKGVsZW1lbnQpO1xyXG4gICAgfSwge1xyXG4gICAgICAgIG9uY2U6IHRydWVcclxuICAgIH0pO1xyXG4gICAgJDUwN2ZhYmUxMGU3MWM2ZmIkZXhwb3J0JGQ5MDI0M2I1OGRhZWNkYTcuc2V0KHdpbmRvd09iamVjdCwge1xyXG4gICAgICAgIGZvY3VzOiBmb2N1c1xyXG4gICAgfSk7XHJcbn1cclxuY29uc3QgJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJHRlYXJEb3duV2luZG93Rm9jdXNUcmFja2luZyA9IChlbGVtZW50LCBsb2FkTGlzdGVuZXIpPT57XHJcbiAgICBjb25zdCB3aW5kb3dPYmplY3QgPSAoMCwgJGJ4N1NMJGdldE93bmVyV2luZG93KShlbGVtZW50KTtcclxuICAgIGNvbnN0IGRvY3VtZW50T2JqZWN0ID0gKDAsICRieDdTTCRnZXRPd25lckRvY3VtZW50KShlbGVtZW50KTtcclxuICAgIGlmIChsb2FkTGlzdGVuZXIpIGRvY3VtZW50T2JqZWN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGxvYWRMaXN0ZW5lcik7XHJcbiAgICBpZiAoISQ1MDdmYWJlMTBlNzFjNmZiJGV4cG9ydCRkOTAyNDNiNThkYWVjZGE3Lmhhcyh3aW5kb3dPYmplY3QpKSByZXR1cm47XHJcbiAgICB3aW5kb3dPYmplY3QuSFRNTEVsZW1lbnQucHJvdG90eXBlLmZvY3VzID0gJDUwN2ZhYmUxMGU3MWM2ZmIkZXhwb3J0JGQ5MDI0M2I1OGRhZWNkYTcuZ2V0KHdpbmRvd09iamVjdCkuZm9jdXM7XHJcbiAgICBkb2N1bWVudE9iamVjdC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkaGFuZGxlS2V5Ym9hcmRFdmVudCwgdHJ1ZSk7XHJcbiAgICBkb2N1bWVudE9iamVjdC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJGhhbmRsZUtleWJvYXJkRXZlbnQsIHRydWUpO1xyXG4gICAgZG9jdW1lbnRPYmplY3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICQ1MDdmYWJlMTBlNzFjNmZiJHZhciRoYW5kbGVDbGlja0V2ZW50LCB0cnVlKTtcclxuICAgIHdpbmRvd09iamVjdC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJGhhbmRsZUZvY3VzRXZlbnQsIHRydWUpO1xyXG4gICAgd2luZG93T2JqZWN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJibHVyXCIsICQ1MDdmYWJlMTBlNzFjNmZiJHZhciRoYW5kbGVXaW5kb3dCbHVyLCBmYWxzZSk7XHJcbiAgICBpZiAodHlwZW9mIFBvaW50ZXJFdmVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgIGRvY3VtZW50T2JqZWN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCAkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkaGFuZGxlUG9pbnRlckV2ZW50LCB0cnVlKTtcclxuICAgICAgICBkb2N1bWVudE9iamVjdC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJGhhbmRsZVBvaW50ZXJFdmVudCwgdHJ1ZSk7XHJcbiAgICAgICAgZG9jdW1lbnRPYmplY3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCAkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkaGFuZGxlUG9pbnRlckV2ZW50LCB0cnVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZG9jdW1lbnRPYmplY3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkaGFuZGxlUG9pbnRlckV2ZW50LCB0cnVlKTtcclxuICAgICAgICBkb2N1bWVudE9iamVjdC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsICQ1MDdmYWJlMTBlNzFjNmZiJHZhciRoYW5kbGVQb2ludGVyRXZlbnQsIHRydWUpO1xyXG4gICAgICAgIGRvY3VtZW50T2JqZWN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsICQ1MDdmYWJlMTBlNzFjNmZiJHZhciRoYW5kbGVQb2ludGVyRXZlbnQsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgJDUwN2ZhYmUxMGU3MWM2ZmIkZXhwb3J0JGQ5MDI0M2I1OGRhZWNkYTcuZGVsZXRlKHdpbmRvd09iamVjdCk7XHJcbn07XHJcbmZ1bmN0aW9uICQ1MDdmYWJlMTBlNzFjNmZiJGV4cG9ydCQyZjE4ODgxMTJmNTU4YTdkKGVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGRvY3VtZW50T2JqZWN0ID0gKDAsICRieDdTTCRnZXRPd25lckRvY3VtZW50KShlbGVtZW50KTtcclxuICAgIGxldCBsb2FkTGlzdGVuZXI7XHJcbiAgICBpZiAoZG9jdW1lbnRPYmplY3QucmVhZHlTdGF0ZSAhPT0gXCJsb2FkaW5nXCIpICQ1MDdmYWJlMTBlNzFjNmZiJHZhciRzZXR1cEdsb2JhbEZvY3VzRXZlbnRzKGVsZW1lbnQpO1xyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgbG9hZExpc3RlbmVyID0gKCk9PntcclxuICAgICAgICAgICAgJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJHNldHVwR2xvYmFsRm9jdXNFdmVudHMoZWxlbWVudCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBkb2N1bWVudE9iamVjdC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBsb2FkTGlzdGVuZXIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICgpPT4kNTA3ZmFiZTEwZTcxYzZmYiR2YXIkdGVhckRvd25XaW5kb3dGb2N1c1RyYWNraW5nKGVsZW1lbnQsIGxvYWRMaXN0ZW5lcik7XHJcbn1cclxuLy8gU2VydmVyLXNpZGUgcmVuZGVyaW5nIGRvZXMgbm90IGhhdmUgdGhlIGRvY3VtZW50IG9iamVjdCBkZWZpbmVkXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcclxuaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIikgJDUwN2ZhYmUxMGU3MWM2ZmIkZXhwb3J0JDJmMTg4ODExMmY1NThhN2QoKTtcclxuZnVuY3Rpb24gJDUwN2ZhYmUxMGU3MWM2ZmIkZXhwb3J0JGI5YjNkZmRkYWIxN2RiMjcoKSB7XHJcbiAgICByZXR1cm4gJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJGN1cnJlbnRNb2RhbGl0eSAhPT0gXCJwb2ludGVyXCI7XHJcbn1cclxuZnVuY3Rpb24gJDUwN2ZhYmUxMGU3MWM2ZmIkZXhwb3J0JDYzMGZmNjUzYzVhZGE2YTkoKSB7XHJcbiAgICByZXR1cm4gJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJGN1cnJlbnRNb2RhbGl0eTtcclxufVxyXG5mdW5jdGlvbiAkNTA3ZmFiZTEwZTcxYzZmYiRleHBvcnQkODM5N2RkZmM1MDRmZGI5YShtb2RhbGl0eSkge1xyXG4gICAgJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJGN1cnJlbnRNb2RhbGl0eSA9IG1vZGFsaXR5O1xyXG4gICAgJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJHRyaWdnZXJDaGFuZ2VIYW5kbGVycyhtb2RhbGl0eSwgbnVsbCk7XHJcbn1cclxuZnVuY3Rpb24gJDUwN2ZhYmUxMGU3MWM2ZmIkZXhwb3J0JDk4ZTIwZWM5MmY2MTRjZmUoKSB7XHJcbiAgICAkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkc2V0dXBHbG9iYWxGb2N1c0V2ZW50cygpO1xyXG4gICAgbGV0IFttb2RhbGl0eSwgc2V0TW9kYWxpdHldID0gKDAsICRieDdTTCR1c2VTdGF0ZSkoJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJGN1cnJlbnRNb2RhbGl0eSk7XHJcbiAgICAoMCwgJGJ4N1NMJHVzZUVmZmVjdCkoKCk9PntcclxuICAgICAgICBsZXQgaGFuZGxlciA9ICgpPT57XHJcbiAgICAgICAgICAgIHNldE1vZGFsaXR5KCQ1MDdmYWJlMTBlNzFjNmZiJHZhciRjdXJyZW50TW9kYWxpdHkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJGNoYW5nZUhhbmRsZXJzLmFkZChoYW5kbGVyKTtcclxuICAgICAgICByZXR1cm4gKCk9PntcclxuICAgICAgICAgICAgJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJGNoYW5nZUhhbmRsZXJzLmRlbGV0ZShoYW5kbGVyKTtcclxuICAgICAgICB9O1xyXG4gICAgfSwgW10pO1xyXG4gICAgcmV0dXJuICgwLCAkYng3U0wkdXNlSXNTU1IpKCkgPyBudWxsIDogbW9kYWxpdHk7XHJcbn1cclxuY29uc3QgJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJG5vblRleHRJbnB1dFR5cGVzID0gbmV3IFNldChbXHJcbiAgICBcImNoZWNrYm94XCIsXHJcbiAgICBcInJhZGlvXCIsXHJcbiAgICBcInJhbmdlXCIsXHJcbiAgICBcImNvbG9yXCIsXHJcbiAgICBcImZpbGVcIixcclxuICAgIFwiaW1hZ2VcIixcclxuICAgIFwiYnV0dG9uXCIsXHJcbiAgICBcInN1Ym1pdFwiLFxyXG4gICAgXCJyZXNldFwiXHJcbl0pO1xyXG4vKipcclxuICogSWYgdGhpcyBpcyBhdHRhY2hlZCB0byB0ZXh0IGlucHV0IGNvbXBvbmVudCwgcmV0dXJuIGlmIHRoZSBldmVudCBpcyBhIGZvY3VzIGV2ZW50IChUYWIvRXNjYXBlIGtleXMgcHJlc3NlZCkgc28gdGhhdFxyXG4gKiBmb2N1cyB2aXNpYmxlIHN0eWxlIGNhbiBiZSBwcm9wZXJseSBzZXQuXHJcbiAqLyBmdW5jdGlvbiAkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkaXNLZXlib2FyZEZvY3VzRXZlbnQoaXNUZXh0SW5wdXQsIG1vZGFsaXR5LCBlKSB7XHJcbiAgICB2YXIgX2VfdGFyZ2V0O1xyXG4gICAgY29uc3QgSUhUTUxJbnB1dEVsZW1lbnQgPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gKDAsICRieDdTTCRnZXRPd25lcldpbmRvdykoZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLnRhcmdldCkuSFRNTElucHV0RWxlbWVudCA6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICBjb25zdCBJSFRNTFRleHRBcmVhRWxlbWVudCA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyAoMCwgJGJ4N1NMJGdldE93bmVyV2luZG93KShlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUudGFyZ2V0KS5IVE1MVGV4dEFyZWFFbGVtZW50IDogSFRNTFRleHRBcmVhRWxlbWVudDtcclxuICAgIGNvbnN0IElIVE1MRWxlbWVudCA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyAoMCwgJGJ4N1NMJGdldE93bmVyV2luZG93KShlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUudGFyZ2V0KS5IVE1MRWxlbWVudCA6IEhUTUxFbGVtZW50O1xyXG4gICAgY29uc3QgSUtleWJvYXJkRXZlbnQgPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gKDAsICRieDdTTCRnZXRPd25lcldpbmRvdykoZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLnRhcmdldCkuS2V5Ym9hcmRFdmVudCA6IEtleWJvYXJkRXZlbnQ7XHJcbiAgICBpc1RleHRJbnB1dCA9IGlzVGV4dElucHV0IHx8IChlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUudGFyZ2V0KSBpbnN0YW5jZW9mIElIVE1MSW5wdXRFbGVtZW50ICYmICEkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkbm9uVGV4dElucHV0VHlwZXMuaGFzKGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9lX3RhcmdldCA9IGUudGFyZ2V0KSA9PT0gbnVsbCB8fCBfZV90YXJnZXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lX3RhcmdldC50eXBlKSB8fCAoZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLnRhcmdldCkgaW5zdGFuY2VvZiBJSFRNTFRleHRBcmVhRWxlbWVudCB8fCAoZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLnRhcmdldCkgaW5zdGFuY2VvZiBJSFRNTEVsZW1lbnQgJiYgKGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS50YXJnZXQuaXNDb250ZW50RWRpdGFibGUpO1xyXG4gICAgcmV0dXJuICEoaXNUZXh0SW5wdXQgJiYgbW9kYWxpdHkgPT09IFwia2V5Ym9hcmRcIiAmJiBlIGluc3RhbmNlb2YgSUtleWJvYXJkRXZlbnQgJiYgISQ1MDdmYWJlMTBlNzFjNmZiJHZhciRGT0NVU19WSVNJQkxFX0lOUFVUX0tFWVNbZS5rZXldKTtcclxufVxyXG5mdW5jdGlvbiAkNTA3ZmFiZTEwZTcxYzZmYiRleHBvcnQkZmZkOWU1MDIxYzFmYjJkNihwcm9wcyA9IHt9KSB7XHJcbiAgICBsZXQgeyBpc1RleHRJbnB1dDogaXNUZXh0SW5wdXQsIGF1dG9Gb2N1czogYXV0b0ZvY3VzIH0gPSBwcm9wcztcclxuICAgIGxldCBbaXNGb2N1c1Zpc2libGVTdGF0ZSwgc2V0Rm9jdXNWaXNpYmxlXSA9ICgwLCAkYng3U0wkdXNlU3RhdGUpKGF1dG9Gb2N1cyB8fCAkNTA3ZmFiZTEwZTcxYzZmYiRleHBvcnQkYjliM2RmZGRhYjE3ZGIyNygpKTtcclxuICAgICQ1MDdmYWJlMTBlNzFjNmZiJGV4cG9ydCRlYzcxYjRiODNhYzA4ZWMzKChpc0ZvY3VzVmlzaWJsZSk9PntcclxuICAgICAgICBzZXRGb2N1c1Zpc2libGUoaXNGb2N1c1Zpc2libGUpO1xyXG4gICAgfSwgW1xyXG4gICAgICAgIGlzVGV4dElucHV0XHJcbiAgICBdLCB7XHJcbiAgICAgICAgaXNUZXh0SW5wdXQ6IGlzVGV4dElucHV0XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaXNGb2N1c1Zpc2libGU6IGlzRm9jdXNWaXNpYmxlU3RhdGVcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gJDUwN2ZhYmUxMGU3MWM2ZmIkZXhwb3J0JGVjNzFiNGI4M2FjMDhlYzMoZm4sIGRlcHMsIG9wdHMpIHtcclxuICAgICQ1MDdmYWJlMTBlNzFjNmZiJHZhciRzZXR1cEdsb2JhbEZvY3VzRXZlbnRzKCk7XHJcbiAgICAoMCwgJGJ4N1NMJHVzZUVmZmVjdCkoKCk9PntcclxuICAgICAgICBsZXQgaGFuZGxlciA9IChtb2RhbGl0eSwgZSk9PntcclxuICAgICAgICAgICAgaWYgKCEkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkaXNLZXlib2FyZEZvY3VzRXZlbnQoISEob3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLmlzVGV4dElucHV0KSwgbW9kYWxpdHksIGUpKSByZXR1cm47XHJcbiAgICAgICAgICAgIGZuKCQ1MDdmYWJlMTBlNzFjNmZiJGV4cG9ydCRiOWIzZGZkZGFiMTdkYjI3KCkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJGNoYW5nZUhhbmRsZXJzLmFkZChoYW5kbGVyKTtcclxuICAgICAgICByZXR1cm4gKCk9PntcclxuICAgICAgICAgICAgJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJGNoYW5nZUhhbmRsZXJzLmRlbGV0ZShoYW5kbGVyKTtcclxuICAgICAgICB9O1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xyXG4gICAgfSwgZGVwcyk7XHJcbn1cclxuXHJcblxyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxyXG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyAvLyBQb3J0aW9ucyBvZiB0aGUgY29kZSBpbiB0aGlzIGZpbGUgYXJlIGJhc2VkIG9uIGNvZGUgZnJvbSByZWFjdC5cclxuLy8gT3JpZ2luYWwgbGljZW5zaW5nIGZvciB0aGUgZm9sbG93aW5nIGNhbiBiZSBmb3VuZCBpbiB0aGVcclxuLy8gTk9USUNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXHJcbi8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvdHJlZS9jYzdjMWFlY2U0NmE2YjY5YjQxOTU4ZDczMWUwZmQyN2M5NGJmYzZjL3BhY2thZ2VzL3JlYWN0LWludGVyYWN0aW9uc1xyXG5cclxuXHJcbmZ1bmN0aW9uICQ5YWI5NDI2MmJkMDA0N2M3JGV4cG9ydCQ0MjBlNjgyNzMxNjVmNGVjKHByb3BzKSB7XHJcbiAgICBsZXQgeyBpc0Rpc2FibGVkOiBpc0Rpc2FibGVkLCBvbkJsdXJXaXRoaW46IG9uQmx1cldpdGhpbiwgb25Gb2N1c1dpdGhpbjogb25Gb2N1c1dpdGhpbiwgb25Gb2N1c1dpdGhpbkNoYW5nZTogb25Gb2N1c1dpdGhpbkNoYW5nZSB9ID0gcHJvcHM7XHJcbiAgICBsZXQgc3RhdGUgPSAoMCwgJGJ4N1NMJHVzZVJlZikoe1xyXG4gICAgICAgIGlzRm9jdXNXaXRoaW46IGZhbHNlXHJcbiAgICB9KTtcclxuICAgIGxldCBvbkJsdXIgPSAoMCwgJGJ4N1NMJHVzZUNhbGxiYWNrKSgoZSk9PntcclxuICAgICAgICAvLyBXZSBkb24ndCB3YW50IHRvIHRyaWdnZXIgb25CbHVyV2l0aGluIGFuZCB0aGVuIGltbWVkaWF0ZWx5IG9uRm9jdXNXaXRoaW4gYWdhaW5cclxuICAgICAgICAvLyB3aGVuIG1vdmluZyBmb2N1cyBpbnNpZGUgdGhlIGVsZW1lbnQuIE9ubHkgdHJpZ2dlciBpZiB0aGUgY3VycmVudFRhcmdldCBkb2Vzbid0XHJcbiAgICAgICAgLy8gaW5jbHVkZSB0aGUgcmVsYXRlZFRhcmdldCAod2hlcmUgZm9jdXMgaXMgbW92aW5nKS5cclxuICAgICAgICBpZiAoc3RhdGUuY3VycmVudC5pc0ZvY3VzV2l0aGluICYmICFlLmN1cnJlbnRUYXJnZXQuY29udGFpbnMoZS5yZWxhdGVkVGFyZ2V0KSkge1xyXG4gICAgICAgICAgICBzdGF0ZS5jdXJyZW50LmlzRm9jdXNXaXRoaW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKG9uQmx1cldpdGhpbikgb25CbHVyV2l0aGluKGUpO1xyXG4gICAgICAgICAgICBpZiAob25Gb2N1c1dpdGhpbkNoYW5nZSkgb25Gb2N1c1dpdGhpbkNoYW5nZShmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgW1xyXG4gICAgICAgIG9uQmx1cldpdGhpbixcclxuICAgICAgICBvbkZvY3VzV2l0aGluQ2hhbmdlLFxyXG4gICAgICAgIHN0YXRlXHJcbiAgICBdKTtcclxuICAgIGxldCBvblN5bnRoZXRpY0ZvY3VzID0gKDAsICQ4YTljYjI3OWRjODdlMTMwJGV4cG9ydCQ3MTVjNjgyZDA5ZDYzOWNjKShvbkJsdXIpO1xyXG4gICAgbGV0IG9uRm9jdXMgPSAoMCwgJGJ4N1NMJHVzZUNhbGxiYWNrKSgoZSk9PntcclxuICAgICAgICAvLyBEb3VibGUgY2hlY2sgdGhhdCBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGFjdHVhbGx5IG1hdGNoZXMgZS50YXJnZXQgaW4gY2FzZSBhIHByZXZpb3VzbHkgY2hhaW5lZFxyXG4gICAgICAgIC8vIGZvY3VzIGhhbmRsZXIgYWxyZWFkeSBtb3ZlZCBmb2N1cyBzb21ld2hlcmUgZWxzZS5cclxuICAgICAgICBpZiAoIXN0YXRlLmN1cnJlbnQuaXNGb2N1c1dpdGhpbiAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBlLnRhcmdldCkge1xyXG4gICAgICAgICAgICBpZiAob25Gb2N1c1dpdGhpbikgb25Gb2N1c1dpdGhpbihlKTtcclxuICAgICAgICAgICAgaWYgKG9uRm9jdXNXaXRoaW5DaGFuZ2UpIG9uRm9jdXNXaXRoaW5DaGFuZ2UodHJ1ZSk7XHJcbiAgICAgICAgICAgIHN0YXRlLmN1cnJlbnQuaXNGb2N1c1dpdGhpbiA9IHRydWU7XHJcbiAgICAgICAgICAgIG9uU3ludGhldGljRm9jdXMoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgW1xyXG4gICAgICAgIG9uRm9jdXNXaXRoaW4sXHJcbiAgICAgICAgb25Gb2N1c1dpdGhpbkNoYW5nZSxcclxuICAgICAgICBvblN5bnRoZXRpY0ZvY3VzXHJcbiAgICBdKTtcclxuICAgIGlmIChpc0Rpc2FibGVkKSByZXR1cm4ge1xyXG4gICAgICAgIGZvY3VzV2l0aGluUHJvcHM6IHtcclxuICAgICAgICAgICAgLy8gVGhlc2Ugc2hvdWxkIG5vdCBoYXZlIGJlZW4gbnVsbCwgdGhhdCB3b3VsZCBjb25mbGljdCBpbiBtZXJnZVByb3BzXHJcbiAgICAgICAgICAgIG9uRm9jdXM6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgb25CbHVyOiB1bmRlZmluZWRcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBmb2N1c1dpdGhpblByb3BzOiB7XHJcbiAgICAgICAgICAgIG9uRm9jdXM6IG9uRm9jdXMsXHJcbiAgICAgICAgICAgIG9uQmx1cjogb25CbHVyXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuXHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIC8vIFBvcnRpb25zIG9mIHRoZSBjb2RlIGluIHRoaXMgZmlsZSBhcmUgYmFzZWQgb24gY29kZSBmcm9tIHJlYWN0LlxyXG4vLyBPcmlnaW5hbCBsaWNlbnNpbmcgZm9yIHRoZSBmb2xsb3dpbmcgY2FuIGJlIGZvdW5kIGluIHRoZVxyXG4vLyBOT1RJQ0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cclxuLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC90cmVlL2NjN2MxYWVjZTQ2YTZiNjliNDE5NThkNzMxZTBmZDI3Yzk0YmZjNmMvcGFja2FnZXMvcmVhY3QtaW50ZXJhY3Rpb25zXHJcblxyXG4vLyBpT1MgZmlyZXMgb25Qb2ludGVyRW50ZXIgdHdpY2U6IG9uY2Ugd2l0aCBwb2ludGVyVHlwZT1cInRvdWNoXCIgYW5kIGFnYWluIHdpdGggcG9pbnRlclR5cGU9XCJtb3VzZVwiLlxyXG4vLyBXZSB3YW50IHRvIGlnbm9yZSB0aGVzZSBlbXVsYXRlZCBldmVudHMgc28gdGhleSBkbyBub3QgdHJpZ2dlciBob3ZlciBiZWhhdmlvci5cclxuLy8gU2VlIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yMTQ2MDkuXHJcbmxldCAkNjE3OWI5MzY3MDVlNzZkMyR2YXIkZ2xvYmFsSWdub3JlRW11bGF0ZWRNb3VzZUV2ZW50cyA9IGZhbHNlO1xyXG5sZXQgJDYxNzliOTM2NzA1ZTc2ZDMkdmFyJGhvdmVyQ291bnQgPSAwO1xyXG5mdW5jdGlvbiAkNjE3OWI5MzY3MDVlNzZkMyR2YXIkc2V0R2xvYmFsSWdub3JlRW11bGF0ZWRNb3VzZUV2ZW50cygpIHtcclxuICAgICQ2MTc5YjkzNjcwNWU3NmQzJHZhciRnbG9iYWxJZ25vcmVFbXVsYXRlZE1vdXNlRXZlbnRzID0gdHJ1ZTtcclxuICAgIC8vIENsZWFyIGdsb2JhbElnbm9yZUVtdWxhdGVkTW91c2VFdmVudHMgYWZ0ZXIgYSBzaG9ydCB0aW1lb3V0LiBpT1MgZmlyZXMgb25Qb2ludGVyRW50ZXJcclxuICAgIC8vIHdpdGggcG9pbnRlclR5cGU9XCJtb3VzZVwiIGltbWVkaWF0ZWx5IGFmdGVyIG9uUG9pbnRlclVwIGFuZCBiZWZvcmUgb25Gb2N1cy4gT24gb3RoZXJcclxuICAgIC8vIGRldmljZXMgdGhhdCBkb24ndCBoYXZlIHRoaXMgcXVpcmssIHdlIGRvbid0IHdhbnQgdG8gaWdub3JlIGEgbW91c2UgaG92ZXIgc29tZXRpbWUgaW5cclxuICAgIC8vIHRoZSBkaXN0YW50IGZ1dHVyZSBiZWNhdXNlIGEgdXNlciBwcmV2aW91c2x5IHRvdWNoZWQgdGhlIGVsZW1lbnQuXHJcbiAgICBzZXRUaW1lb3V0KCgpPT57XHJcbiAgICAgICAgJDYxNzliOTM2NzA1ZTc2ZDMkdmFyJGdsb2JhbElnbm9yZUVtdWxhdGVkTW91c2VFdmVudHMgPSBmYWxzZTtcclxuICAgIH0sIDUwKTtcclxufVxyXG5mdW5jdGlvbiAkNjE3OWI5MzY3MDVlNzZkMyR2YXIkaGFuZGxlR2xvYmFsUG9pbnRlckV2ZW50KGUpIHtcclxuICAgIGlmIChlLnBvaW50ZXJUeXBlID09PSBcInRvdWNoXCIpICQ2MTc5YjkzNjcwNWU3NmQzJHZhciRzZXRHbG9iYWxJZ25vcmVFbXVsYXRlZE1vdXNlRXZlbnRzKCk7XHJcbn1cclxuZnVuY3Rpb24gJDYxNzliOTM2NzA1ZTc2ZDMkdmFyJHNldHVwR2xvYmFsVG91Y2hFdmVudHMoKSB7XHJcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm47XHJcbiAgICBpZiAodHlwZW9mIFBvaW50ZXJFdmVudCAhPT0gXCJ1bmRlZmluZWRcIikgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCAkNjE3OWI5MzY3MDVlNzZkMyR2YXIkaGFuZGxlR2xvYmFsUG9pbnRlckV2ZW50KTtcclxuICAgIGVsc2UgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsICQ2MTc5YjkzNjcwNWU3NmQzJHZhciRzZXRHbG9iYWxJZ25vcmVFbXVsYXRlZE1vdXNlRXZlbnRzKTtcclxuICAgICQ2MTc5YjkzNjcwNWU3NmQzJHZhciRob3ZlckNvdW50Kys7XHJcbiAgICByZXR1cm4gKCk9PntcclxuICAgICAgICAkNjE3OWI5MzY3MDVlNzZkMyR2YXIkaG92ZXJDb3VudC0tO1xyXG4gICAgICAgIGlmICgkNjE3OWI5MzY3MDVlNzZkMyR2YXIkaG92ZXJDb3VudCA+IDApIHJldHVybjtcclxuICAgICAgICBpZiAodHlwZW9mIFBvaW50ZXJFdmVudCAhPT0gXCJ1bmRlZmluZWRcIikgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCAkNjE3OWI5MzY3MDVlNzZkMyR2YXIkaGFuZGxlR2xvYmFsUG9pbnRlckV2ZW50KTtcclxuICAgICAgICBlbHNlIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCAkNjE3OWI5MzY3MDVlNzZkMyR2YXIkc2V0R2xvYmFsSWdub3JlRW11bGF0ZWRNb3VzZUV2ZW50cyk7XHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uICQ2MTc5YjkzNjcwNWU3NmQzJGV4cG9ydCRhZTc4MGRhZjI5ZTZkNDU2KHByb3BzKSB7XHJcbiAgICBsZXQgeyBvbkhvdmVyU3RhcnQ6IG9uSG92ZXJTdGFydCwgb25Ib3ZlckNoYW5nZTogb25Ib3ZlckNoYW5nZSwgb25Ib3ZlckVuZDogb25Ib3ZlckVuZCwgaXNEaXNhYmxlZDogaXNEaXNhYmxlZCB9ID0gcHJvcHM7XHJcbiAgICBsZXQgW2lzSG92ZXJlZCwgc2V0SG92ZXJlZF0gPSAoMCwgJGJ4N1NMJHVzZVN0YXRlKShmYWxzZSk7XHJcbiAgICBsZXQgc3RhdGUgPSAoMCwgJGJ4N1NMJHVzZVJlZikoe1xyXG4gICAgICAgIGlzSG92ZXJlZDogZmFsc2UsXHJcbiAgICAgICAgaWdub3JlRW11bGF0ZWRNb3VzZUV2ZW50czogZmFsc2UsXHJcbiAgICAgICAgcG9pbnRlclR5cGU6IFwiXCIsXHJcbiAgICAgICAgdGFyZ2V0OiBudWxsXHJcbiAgICB9KS5jdXJyZW50O1xyXG4gICAgKDAsICRieDdTTCR1c2VFZmZlY3QpKCQ2MTc5YjkzNjcwNWU3NmQzJHZhciRzZXR1cEdsb2JhbFRvdWNoRXZlbnRzLCBbXSk7XHJcbiAgICBsZXQgeyBob3ZlclByb3BzOiBob3ZlclByb3BzLCB0cmlnZ2VySG92ZXJFbmQ6IHRyaWdnZXJIb3ZlckVuZCB9ID0gKDAsICRieDdTTCR1c2VNZW1vKSgoKT0+e1xyXG4gICAgICAgIGxldCB0cmlnZ2VySG92ZXJTdGFydCA9IChldmVudCwgcG9pbnRlclR5cGUpPT57XHJcbiAgICAgICAgICAgIHN0YXRlLnBvaW50ZXJUeXBlID0gcG9pbnRlclR5cGU7XHJcbiAgICAgICAgICAgIGlmIChpc0Rpc2FibGVkIHx8IHBvaW50ZXJUeXBlID09PSBcInRvdWNoXCIgfHwgc3RhdGUuaXNIb3ZlcmVkIHx8ICFldmVudC5jdXJyZW50VGFyZ2V0LmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHJldHVybjtcclxuICAgICAgICAgICAgc3RhdGUuaXNIb3ZlcmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgbGV0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XHJcbiAgICAgICAgICAgIHN0YXRlLnRhcmdldCA9IHRhcmdldDtcclxuICAgICAgICAgICAgaWYgKG9uSG92ZXJTdGFydCkgb25Ib3ZlclN0YXJ0KHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiaG92ZXJzdGFydFwiLFxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXQsXHJcbiAgICAgICAgICAgICAgICBwb2ludGVyVHlwZTogcG9pbnRlclR5cGVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChvbkhvdmVyQ2hhbmdlKSBvbkhvdmVyQ2hhbmdlKHRydWUpO1xyXG4gICAgICAgICAgICBzZXRIb3ZlcmVkKHRydWUpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgbGV0IHRyaWdnZXJIb3ZlckVuZCA9IChldmVudCwgcG9pbnRlclR5cGUpPT57XHJcbiAgICAgICAgICAgIHN0YXRlLnBvaW50ZXJUeXBlID0gXCJcIjtcclxuICAgICAgICAgICAgc3RhdGUudGFyZ2V0ID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKHBvaW50ZXJUeXBlID09PSBcInRvdWNoXCIgfHwgIXN0YXRlLmlzSG92ZXJlZCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBzdGF0ZS5pc0hvdmVyZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgbGV0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XHJcbiAgICAgICAgICAgIGlmIChvbkhvdmVyRW5kKSBvbkhvdmVyRW5kKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiaG92ZXJlbmRcIixcclxuICAgICAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0LFxyXG4gICAgICAgICAgICAgICAgcG9pbnRlclR5cGU6IHBvaW50ZXJUeXBlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAob25Ib3ZlckNoYW5nZSkgb25Ib3ZlckNoYW5nZShmYWxzZSk7XHJcbiAgICAgICAgICAgIHNldEhvdmVyZWQoZmFsc2UpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgbGV0IGhvdmVyUHJvcHMgPSB7fTtcclxuICAgICAgICBpZiAodHlwZW9mIFBvaW50ZXJFdmVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICBob3ZlclByb3BzLm9uUG9pbnRlckVudGVyID0gKGUpPT57XHJcbiAgICAgICAgICAgICAgICBpZiAoJDYxNzliOTM2NzA1ZTc2ZDMkdmFyJGdsb2JhbElnbm9yZUVtdWxhdGVkTW91c2VFdmVudHMgJiYgZS5wb2ludGVyVHlwZSA9PT0gXCJtb3VzZVwiKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB0cmlnZ2VySG92ZXJTdGFydChlLCBlLnBvaW50ZXJUeXBlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaG92ZXJQcm9wcy5vblBvaW50ZXJMZWF2ZSA9IChlKT0+e1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc0Rpc2FibGVkICYmIGUuY3VycmVudFRhcmdldC5jb250YWlucyhlLnRhcmdldCkpIHRyaWdnZXJIb3ZlckVuZChlLCBlLnBvaW50ZXJUeXBlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBob3ZlclByb3BzLm9uVG91Y2hTdGFydCA9ICgpPT57XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5pZ25vcmVFbXVsYXRlZE1vdXNlRXZlbnRzID0gdHJ1ZTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaG92ZXJQcm9wcy5vbk1vdXNlRW50ZXIgPSAoZSk9PntcclxuICAgICAgICAgICAgICAgIGlmICghc3RhdGUuaWdub3JlRW11bGF0ZWRNb3VzZUV2ZW50cyAmJiAhJDYxNzliOTM2NzA1ZTc2ZDMkdmFyJGdsb2JhbElnbm9yZUVtdWxhdGVkTW91c2VFdmVudHMpIHRyaWdnZXJIb3ZlclN0YXJ0KGUsIFwibW91c2VcIik7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5pZ25vcmVFbXVsYXRlZE1vdXNlRXZlbnRzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGhvdmVyUHJvcHMub25Nb3VzZUxlYXZlID0gKGUpPT57XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzRGlzYWJsZWQgJiYgZS5jdXJyZW50VGFyZ2V0LmNvbnRhaW5zKGUudGFyZ2V0KSkgdHJpZ2dlckhvdmVyRW5kKGUsIFwibW91c2VcIik7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGhvdmVyUHJvcHM6IGhvdmVyUHJvcHMsXHJcbiAgICAgICAgICAgIHRyaWdnZXJIb3ZlckVuZDogdHJpZ2dlckhvdmVyRW5kXHJcbiAgICAgICAgfTtcclxuICAgIH0sIFtcclxuICAgICAgICBvbkhvdmVyU3RhcnQsXHJcbiAgICAgICAgb25Ib3ZlckNoYW5nZSxcclxuICAgICAgICBvbkhvdmVyRW5kLFxyXG4gICAgICAgIGlzRGlzYWJsZWQsXHJcbiAgICAgICAgc3RhdGVcclxuICAgIF0pO1xyXG4gICAgKDAsICRieDdTTCR1c2VFZmZlY3QpKCgpPT57XHJcbiAgICAgICAgLy8gQ2FsbCB0aGUgdHJpZ2dlckhvdmVyRW5kIGFzIHNvb24gYXMgaXNEaXNhYmxlZCBjaGFuZ2VzIHRvIHRydWVcclxuICAgICAgICAvLyBTYWZlIHRvIGNhbGwgdHJpZ2dlckhvdmVyRW5kLCBpdCB3aWxsIGVhcmx5IHJldHVybiBpZiB3ZSBhcmVuJ3QgY3VycmVudGx5IGhvdmVyaW5nXHJcbiAgICAgICAgaWYgKGlzRGlzYWJsZWQpIHRyaWdnZXJIb3ZlckVuZCh7XHJcbiAgICAgICAgICAgIGN1cnJlbnRUYXJnZXQ6IHN0YXRlLnRhcmdldFxyXG4gICAgICAgIH0sIHN0YXRlLnBvaW50ZXJUeXBlKTtcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcclxuICAgIH0sIFtcclxuICAgICAgICBpc0Rpc2FibGVkXHJcbiAgICBdKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaG92ZXJQcm9wczogaG92ZXJQcm9wcyxcclxuICAgICAgICBpc0hvdmVyZWQ6IGlzSG92ZXJlZFxyXG4gICAgfTtcclxufVxyXG5cclxuXHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIC8vIFBvcnRpb25zIG9mIHRoZSBjb2RlIGluIHRoaXMgZmlsZSBhcmUgYmFzZWQgb24gY29kZSBmcm9tIHJlYWN0LlxyXG4vLyBPcmlnaW5hbCBsaWNlbnNpbmcgZm9yIHRoZSBmb2xsb3dpbmcgY2FuIGJlIGZvdW5kIGluIHRoZVxyXG4vLyBOT1RJQ0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cclxuLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC90cmVlL2NjN2MxYWVjZTQ2YTZiNjliNDE5NThkNzMxZTBmZDI3Yzk0YmZjNmMvcGFja2FnZXMvcmVhY3QtaW50ZXJhY3Rpb25zXHJcblxyXG5cclxuZnVuY3Rpb24gJGUwYjZlMGI2OGVjN2Y1MGYkZXhwb3J0JDg3MmI2NjBhYzVhMWZmOTgocHJvcHMpIHtcclxuICAgIGxldCB7IHJlZjogcmVmLCBvbkludGVyYWN0T3V0c2lkZTogb25JbnRlcmFjdE91dHNpZGUsIGlzRGlzYWJsZWQ6IGlzRGlzYWJsZWQsIG9uSW50ZXJhY3RPdXRzaWRlU3RhcnQ6IG9uSW50ZXJhY3RPdXRzaWRlU3RhcnQgfSA9IHByb3BzO1xyXG4gICAgbGV0IHN0YXRlUmVmID0gKDAsICRieDdTTCR1c2VSZWYpKHtcclxuICAgICAgICBpc1BvaW50ZXJEb3duOiBmYWxzZSxcclxuICAgICAgICBpZ25vcmVFbXVsYXRlZE1vdXNlRXZlbnRzOiBmYWxzZVxyXG4gICAgfSk7XHJcbiAgICBsZXQgb25Qb2ludGVyRG93biA9ICgwLCAkYng3U0wkdXNlRWZmZWN0RXZlbnQpKChlKT0+e1xyXG4gICAgICAgIGlmIChvbkludGVyYWN0T3V0c2lkZSAmJiAkZTBiNmUwYjY4ZWM3ZjUwZiR2YXIkaXNWYWxpZEV2ZW50KGUsIHJlZikpIHtcclxuICAgICAgICAgICAgaWYgKG9uSW50ZXJhY3RPdXRzaWRlU3RhcnQpIG9uSW50ZXJhY3RPdXRzaWRlU3RhcnQoZSk7XHJcbiAgICAgICAgICAgIHN0YXRlUmVmLmN1cnJlbnQuaXNQb2ludGVyRG93biA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBsZXQgdHJpZ2dlckludGVyYWN0T3V0c2lkZSA9ICgwLCAkYng3U0wkdXNlRWZmZWN0RXZlbnQpKChlKT0+e1xyXG4gICAgICAgIGlmIChvbkludGVyYWN0T3V0c2lkZSkgb25JbnRlcmFjdE91dHNpZGUoZSk7XHJcbiAgICB9KTtcclxuICAgICgwLCAkYng3U0wkdXNlRWZmZWN0KSgoKT0+e1xyXG4gICAgICAgIGxldCBzdGF0ZSA9IHN0YXRlUmVmLmN1cnJlbnQ7XHJcbiAgICAgICAgaWYgKGlzRGlzYWJsZWQpIHJldHVybjtcclxuICAgICAgICBjb25zdCBlbGVtZW50ID0gcmVmLmN1cnJlbnQ7XHJcbiAgICAgICAgY29uc3QgZG9jdW1lbnRPYmplY3QgPSAoMCwgJGJ4N1NMJGdldE93bmVyRG9jdW1lbnQpKGVsZW1lbnQpO1xyXG4gICAgICAgIC8vIFVzZSBwb2ludGVyIGV2ZW50cyBpZiBhdmFpbGFibGUuIE90aGVyd2lzZSwgZmFsbCBiYWNrIHRvIG1vdXNlIGFuZCB0b3VjaCBldmVudHMuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBQb2ludGVyRXZlbnQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgbGV0IG9uUG9pbnRlclVwID0gKGUpPT57XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuaXNQb2ludGVyRG93biAmJiAkZTBiNmUwYjY4ZWM3ZjUwZiR2YXIkaXNWYWxpZEV2ZW50KGUsIHJlZikpIHRyaWdnZXJJbnRlcmFjdE91dHNpZGUoZSk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5pc1BvaW50ZXJEb3duID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIGNoYW5naW5nIHRoZXNlIHRvIGNhcHR1cmUgcGhhc2UgZml4ZWQgY29tYm9ib3hcclxuICAgICAgICAgICAgZG9jdW1lbnRPYmplY3QuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIG9uUG9pbnRlckRvd24sIHRydWUpO1xyXG4gICAgICAgICAgICBkb2N1bWVudE9iamVjdC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIG9uUG9pbnRlclVwLCB0cnVlKTtcclxuICAgICAgICAgICAgcmV0dXJuICgpPT57XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudE9iamVjdC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgb25Qb2ludGVyRG93biwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudE9iamVjdC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIG9uUG9pbnRlclVwLCB0cnVlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgb25Nb3VzZVVwID0gKGUpPT57XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuaWdub3JlRW11bGF0ZWRNb3VzZUV2ZW50cykgc3RhdGUuaWdub3JlRW11bGF0ZWRNb3VzZUV2ZW50cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc3RhdGUuaXNQb2ludGVyRG93biAmJiAkZTBiNmUwYjY4ZWM3ZjUwZiR2YXIkaXNWYWxpZEV2ZW50KGUsIHJlZikpIHRyaWdnZXJJbnRlcmFjdE91dHNpZGUoZSk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5pc1BvaW50ZXJEb3duID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGxldCBvblRvdWNoRW5kID0gKGUpPT57XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5pZ25vcmVFbXVsYXRlZE1vdXNlRXZlbnRzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5pc1BvaW50ZXJEb3duICYmICRlMGI2ZTBiNjhlYzdmNTBmJHZhciRpc1ZhbGlkRXZlbnQoZSwgcmVmKSkgdHJpZ2dlckludGVyYWN0T3V0c2lkZShlKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLmlzUG9pbnRlckRvd24gPSBmYWxzZTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZG9jdW1lbnRPYmplY3QuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBvblBvaW50ZXJEb3duLCB0cnVlKTtcclxuICAgICAgICAgICAgZG9jdW1lbnRPYmplY3QuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgb25Nb3VzZVVwLCB0cnVlKTtcclxuICAgICAgICAgICAgZG9jdW1lbnRPYmplY3QuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgb25Qb2ludGVyRG93biwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50T2JqZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCBvblRvdWNoRW5kLCB0cnVlKTtcclxuICAgICAgICAgICAgcmV0dXJuICgpPT57XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudE9iamVjdC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIG9uUG9pbnRlckRvd24sIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRPYmplY3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgb25Nb3VzZVVwLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50T2JqZWN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIG9uUG9pbnRlckRvd24sIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRPYmplY3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIG9uVG91Y2hFbmQsIHRydWUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH0sIFtcclxuICAgICAgICByZWYsXHJcbiAgICAgICAgaXNEaXNhYmxlZCxcclxuICAgICAgICBvblBvaW50ZXJEb3duLFxyXG4gICAgICAgIHRyaWdnZXJJbnRlcmFjdE91dHNpZGVcclxuICAgIF0pO1xyXG59XHJcbmZ1bmN0aW9uICRlMGI2ZTBiNjhlYzdmNTBmJHZhciRpc1ZhbGlkRXZlbnQoZXZlbnQsIHJlZikge1xyXG4gICAgaWYgKGV2ZW50LmJ1dHRvbiA+IDApIHJldHVybiBmYWxzZTtcclxuICAgIGlmIChldmVudC50YXJnZXQpIHtcclxuICAgICAgICAvLyBpZiB0aGUgZXZlbnQgdGFyZ2V0IGlzIG5vIGxvbmdlciBpbiB0aGUgZG9jdW1lbnQsIGlnbm9yZVxyXG4gICAgICAgIGNvbnN0IG93bmVyRG9jdW1lbnQgPSBldmVudC50YXJnZXQub3duZXJEb2N1bWVudDtcclxuICAgICAgICBpZiAoIW93bmVyRG9jdW1lbnQgfHwgIW93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAvLyBJZiB0aGUgdGFyZ2V0IGlzIHdpdGhpbiBhIHRvcCBsYXllciBlbGVtZW50IChlLmcuIHRvYXN0cyksIGlnbm9yZS5cclxuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCJbZGF0YS1yZWFjdC1hcmlhLXRvcC1sYXllcl1cIikpIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiByZWYuY3VycmVudCAmJiAhcmVmLmN1cnJlbnQuY29udGFpbnMoZXZlbnQudGFyZ2V0KTtcclxufVxyXG5cclxuXHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIC8qXHJcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIGZ1bmN0aW9uICQ5MzkyNTA4M2VjYmIzNThjJGV4cG9ydCQ0OGQxZWE2MzIwODMwMjYwKGhhbmRsZXIpIHtcclxuICAgIGlmICghaGFuZGxlcikgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIGxldCBzaG91bGRTdG9wUHJvcGFnYXRpb24gPSB0cnVlO1xyXG4gICAgcmV0dXJuIChlKT0+e1xyXG4gICAgICAgIGxldCBldmVudCA9IHtcclxuICAgICAgICAgICAgLi4uZSxcclxuICAgICAgICAgICAgcHJldmVudERlZmF1bHQgKCkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBpc0RlZmF1bHRQcmV2ZW50ZWQgKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuaXNEZWZhdWx0UHJldmVudGVkKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN0b3BQcm9wYWdhdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwic3RvcFByb3BhZ2F0aW9uIGlzIG5vdyB0aGUgZGVmYXVsdCBiZWhhdmlvciBmb3IgZXZlbnRzIGluIFJlYWN0IFNwZWN0cnVtLiBZb3UgY2FuIHVzZSBjb250aW51ZVByb3BhZ2F0aW9uKCkgdG8gcmV2ZXJ0IHRoaXMgYmVoYXZpb3IuXCIpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb250aW51ZVByb3BhZ2F0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHNob3VsZFN0b3BQcm9wYWdhdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBoYW5kbGVyKGV2ZW50KTtcclxuICAgICAgICBpZiAoc2hvdWxkU3RvcFByb3BhZ2F0aW9uKSBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uICQ0NmQ4MTlmY2JhZjM1NjU0JGV4cG9ydCQ4ZjcxNjU0ODAxYzJmN2NkKHByb3BzKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGtleWJvYXJkUHJvcHM6IHByb3BzLmlzRGlzYWJsZWQgPyB7fSA6IHtcclxuICAgICAgICAgICAgb25LZXlEb3duOiAoMCwgJDkzOTI1MDgzZWNiYjM1OGMkZXhwb3J0JDQ4ZDFlYTYzMjA4MzAyNjApKHByb3BzLm9uS2V5RG93biksXHJcbiAgICAgICAgICAgIG9uS2V5VXA6ICgwLCAkOTM5MjUwODNlY2JiMzU4YyRleHBvcnQkNDhkMWVhNjMyMDgzMDI2MCkocHJvcHMub25LZXlVcClcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5cclxuLypcclxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gXHJcblxyXG5cclxuZnVuY3Rpb24gJGU4YTcwMjJjZjg3Y2JhMmEkZXhwb3J0JDM2ZGE5NjM3OWY3OWYyNDUocHJvcHMpIHtcclxuICAgIGxldCB7IG9uTW92ZVN0YXJ0OiBvbk1vdmVTdGFydCwgb25Nb3ZlOiBvbk1vdmUsIG9uTW92ZUVuZDogb25Nb3ZlRW5kIH0gPSBwcm9wcztcclxuICAgIGxldCBzdGF0ZSA9ICgwLCAkYng3U0wkdXNlUmVmKSh7XHJcbiAgICAgICAgZGlkTW92ZTogZmFsc2UsXHJcbiAgICAgICAgbGFzdFBvc2l0aW9uOiBudWxsLFxyXG4gICAgICAgIGlkOiBudWxsXHJcbiAgICB9KTtcclxuICAgIGxldCB7IGFkZEdsb2JhbExpc3RlbmVyOiBhZGRHbG9iYWxMaXN0ZW5lciwgcmVtb3ZlR2xvYmFsTGlzdGVuZXI6IHJlbW92ZUdsb2JhbExpc3RlbmVyIH0gPSAoMCwgJGJ4N1NMJHVzZUdsb2JhbExpc3RlbmVycykoKTtcclxuICAgIGxldCBtb3ZlID0gKDAsICRieDdTTCR1c2VFZmZlY3RFdmVudCkoKG9yaWdpbmFsRXZlbnQsIHBvaW50ZXJUeXBlLCBkZWx0YVgsIGRlbHRhWSk9PntcclxuICAgICAgICBpZiAoZGVsdGFYID09PSAwICYmIGRlbHRhWSA9PT0gMCkgcmV0dXJuO1xyXG4gICAgICAgIGlmICghc3RhdGUuY3VycmVudC5kaWRNb3ZlKSB7XHJcbiAgICAgICAgICAgIHN0YXRlLmN1cnJlbnQuZGlkTW92ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIG9uTW92ZVN0YXJ0ID09PSBudWxsIHx8IG9uTW92ZVN0YXJ0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbk1vdmVTdGFydCh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcIm1vdmVzdGFydFwiLFxyXG4gICAgICAgICAgICAgICAgcG9pbnRlclR5cGU6IHBvaW50ZXJUeXBlLFxyXG4gICAgICAgICAgICAgICAgc2hpZnRLZXk6IG9yaWdpbmFsRXZlbnQuc2hpZnRLZXksXHJcbiAgICAgICAgICAgICAgICBtZXRhS2V5OiBvcmlnaW5hbEV2ZW50Lm1ldGFLZXksXHJcbiAgICAgICAgICAgICAgICBjdHJsS2V5OiBvcmlnaW5hbEV2ZW50LmN0cmxLZXksXHJcbiAgICAgICAgICAgICAgICBhbHRLZXk6IG9yaWdpbmFsRXZlbnQuYWx0S2V5XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBvbk1vdmUgPT09IG51bGwgfHwgb25Nb3ZlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbk1vdmUoe1xyXG4gICAgICAgICAgICB0eXBlOiBcIm1vdmVcIixcclxuICAgICAgICAgICAgcG9pbnRlclR5cGU6IHBvaW50ZXJUeXBlLFxyXG4gICAgICAgICAgICBkZWx0YVg6IGRlbHRhWCxcclxuICAgICAgICAgICAgZGVsdGFZOiBkZWx0YVksXHJcbiAgICAgICAgICAgIHNoaWZ0S2V5OiBvcmlnaW5hbEV2ZW50LnNoaWZ0S2V5LFxyXG4gICAgICAgICAgICBtZXRhS2V5OiBvcmlnaW5hbEV2ZW50Lm1ldGFLZXksXHJcbiAgICAgICAgICAgIGN0cmxLZXk6IG9yaWdpbmFsRXZlbnQuY3RybEtleSxcclxuICAgICAgICAgICAgYWx0S2V5OiBvcmlnaW5hbEV2ZW50LmFsdEtleVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICBsZXQgZW5kID0gKDAsICRieDdTTCR1c2VFZmZlY3RFdmVudCkoKG9yaWdpbmFsRXZlbnQsIHBvaW50ZXJUeXBlKT0+e1xyXG4gICAgICAgICgwLCAkMTRjMGI3MjUwOWQ3MDIyNSRleHBvcnQkYjBkNmZhMWFiMzJlMzI5NSkoKTtcclxuICAgICAgICBpZiAoc3RhdGUuY3VycmVudC5kaWRNb3ZlKSBvbk1vdmVFbmQgPT09IG51bGwgfHwgb25Nb3ZlRW5kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbk1vdmVFbmQoe1xyXG4gICAgICAgICAgICB0eXBlOiBcIm1vdmVlbmRcIixcclxuICAgICAgICAgICAgcG9pbnRlclR5cGU6IHBvaW50ZXJUeXBlLFxyXG4gICAgICAgICAgICBzaGlmdEtleTogb3JpZ2luYWxFdmVudC5zaGlmdEtleSxcclxuICAgICAgICAgICAgbWV0YUtleTogb3JpZ2luYWxFdmVudC5tZXRhS2V5LFxyXG4gICAgICAgICAgICBjdHJsS2V5OiBvcmlnaW5hbEV2ZW50LmN0cmxLZXksXHJcbiAgICAgICAgICAgIGFsdEtleTogb3JpZ2luYWxFdmVudC5hbHRLZXlcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgbGV0IG1vdmVQcm9wcyA9ICgwLCAkYng3U0wkdXNlTWVtbykoKCk9PntcclxuICAgICAgICBsZXQgbW92ZVByb3BzID0ge307XHJcbiAgICAgICAgbGV0IHN0YXJ0ID0gKCk9PntcclxuICAgICAgICAgICAgKDAsICQxNGMwYjcyNTA5ZDcwMjI1JGV4cG9ydCQxNmE0Njk3NDY3MTc1NDg3KSgpO1xyXG4gICAgICAgICAgICBzdGF0ZS5jdXJyZW50LmRpZE1vdmUgPSBmYWxzZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh0eXBlb2YgUG9pbnRlckV2ZW50ID09PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgIGxldCBvbk1vdXNlTW92ZSA9IChlKT0+e1xyXG4gICAgICAgICAgICAgICAgaWYgKGUuYnV0dG9uID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9zdGF0ZV9jdXJyZW50X2xhc3RQb3NpdGlvbiwgX3N0YXRlX2N1cnJlbnRfbGFzdFBvc2l0aW9uMTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgX3N0YXRlX2N1cnJlbnRfbGFzdFBvc2l0aW9uX3BhZ2VYLCBfc3RhdGVfY3VycmVudF9sYXN0UG9zaXRpb25fcGFnZVk7XHJcbiAgICAgICAgICAgICAgICAgICAgbW92ZShlLCBcIm1vdXNlXCIsIGUucGFnZVggLSAoKF9zdGF0ZV9jdXJyZW50X2xhc3RQb3NpdGlvbl9wYWdlWCA9IChfc3RhdGVfY3VycmVudF9sYXN0UG9zaXRpb24gPSBzdGF0ZS5jdXJyZW50Lmxhc3RQb3NpdGlvbikgPT09IG51bGwgfHwgX3N0YXRlX2N1cnJlbnRfbGFzdFBvc2l0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc3RhdGVfY3VycmVudF9sYXN0UG9zaXRpb24ucGFnZVgpICE9PSBudWxsICYmIF9zdGF0ZV9jdXJyZW50X2xhc3RQb3NpdGlvbl9wYWdlWCAhPT0gdm9pZCAwID8gX3N0YXRlX2N1cnJlbnRfbGFzdFBvc2l0aW9uX3BhZ2VYIDogMCksIGUucGFnZVkgLSAoKF9zdGF0ZV9jdXJyZW50X2xhc3RQb3NpdGlvbl9wYWdlWSA9IChfc3RhdGVfY3VycmVudF9sYXN0UG9zaXRpb24xID0gc3RhdGUuY3VycmVudC5sYXN0UG9zaXRpb24pID09PSBudWxsIHx8IF9zdGF0ZV9jdXJyZW50X2xhc3RQb3NpdGlvbjEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zdGF0ZV9jdXJyZW50X2xhc3RQb3NpdGlvbjEucGFnZVkpICE9PSBudWxsICYmIF9zdGF0ZV9jdXJyZW50X2xhc3RQb3NpdGlvbl9wYWdlWSAhPT0gdm9pZCAwID8gX3N0YXRlX2N1cnJlbnRfbGFzdFBvc2l0aW9uX3BhZ2VZIDogMCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmN1cnJlbnQubGFzdFBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlWDogZS5wYWdlWCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZVk6IGUucGFnZVlcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBsZXQgb25Nb3VzZVVwID0gKGUpPT57XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5idXR0b24gPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBlbmQoZSwgXCJtb3VzZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVHbG9iYWxMaXN0ZW5lcih3aW5kb3csIFwibW91c2Vtb3ZlXCIsIG9uTW91c2VNb3ZlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlR2xvYmFsTGlzdGVuZXIod2luZG93LCBcIm1vdXNldXBcIiwgb25Nb3VzZVVwLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIG1vdmVQcm9wcy5vbk1vdXNlRG93biA9IChlKT0+e1xyXG4gICAgICAgICAgICAgICAgaWYgKGUuYnV0dG9uID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5jdXJyZW50Lmxhc3RQb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZVg6IGUucGFnZVgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VZOiBlLnBhZ2VZXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBhZGRHbG9iYWxMaXN0ZW5lcih3aW5kb3csIFwibW91c2Vtb3ZlXCIsIG9uTW91c2VNb3ZlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkR2xvYmFsTGlzdGVuZXIod2luZG93LCBcIm1vdXNldXBcIiwgb25Nb3VzZVVwLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGxldCBvblRvdWNoTW92ZSA9IChlKT0+e1xyXG4gICAgICAgICAgICAgICAgbGV0IHRvdWNoID0gW1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLmUuY2hhbmdlZFRvdWNoZXNcclxuICAgICAgICAgICAgICAgIF0uZmluZEluZGV4KCh7IGlkZW50aWZpZXI6IGlkZW50aWZpZXIgfSk9PmlkZW50aWZpZXIgPT09IHN0YXRlLmN1cnJlbnQuaWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRvdWNoID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgX3N0YXRlX2N1cnJlbnRfbGFzdFBvc2l0aW9uLCBfc3RhdGVfY3VycmVudF9sYXN0UG9zaXRpb24xO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB7IHBhZ2VYOiBwYWdlWCwgcGFnZVk6IHBhZ2VZIH0gPSBlLmNoYW5nZWRUb3VjaGVzW3RvdWNoXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgX3N0YXRlX2N1cnJlbnRfbGFzdFBvc2l0aW9uX3BhZ2VYLCBfc3RhdGVfY3VycmVudF9sYXN0UG9zaXRpb25fcGFnZVk7XHJcbiAgICAgICAgICAgICAgICAgICAgbW92ZShlLCBcInRvdWNoXCIsIHBhZ2VYIC0gKChfc3RhdGVfY3VycmVudF9sYXN0UG9zaXRpb25fcGFnZVggPSAoX3N0YXRlX2N1cnJlbnRfbGFzdFBvc2l0aW9uID0gc3RhdGUuY3VycmVudC5sYXN0UG9zaXRpb24pID09PSBudWxsIHx8IF9zdGF0ZV9jdXJyZW50X2xhc3RQb3NpdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3N0YXRlX2N1cnJlbnRfbGFzdFBvc2l0aW9uLnBhZ2VYKSAhPT0gbnVsbCAmJiBfc3RhdGVfY3VycmVudF9sYXN0UG9zaXRpb25fcGFnZVggIT09IHZvaWQgMCA/IF9zdGF0ZV9jdXJyZW50X2xhc3RQb3NpdGlvbl9wYWdlWCA6IDApLCBwYWdlWSAtICgoX3N0YXRlX2N1cnJlbnRfbGFzdFBvc2l0aW9uX3BhZ2VZID0gKF9zdGF0ZV9jdXJyZW50X2xhc3RQb3NpdGlvbjEgPSBzdGF0ZS5jdXJyZW50Lmxhc3RQb3NpdGlvbikgPT09IG51bGwgfHwgX3N0YXRlX2N1cnJlbnRfbGFzdFBvc2l0aW9uMSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3N0YXRlX2N1cnJlbnRfbGFzdFBvc2l0aW9uMS5wYWdlWSkgIT09IG51bGwgJiYgX3N0YXRlX2N1cnJlbnRfbGFzdFBvc2l0aW9uX3BhZ2VZICE9PSB2b2lkIDAgPyBfc3RhdGVfY3VycmVudF9sYXN0UG9zaXRpb25fcGFnZVkgOiAwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuY3VycmVudC5sYXN0UG9zaXRpb24gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VYOiBwYWdlWCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZVk6IHBhZ2VZXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgbGV0IG9uVG91Y2hFbmQgPSAoZSk9PntcclxuICAgICAgICAgICAgICAgIGxldCB0b3VjaCA9IFtcclxuICAgICAgICAgICAgICAgICAgICAuLi5lLmNoYW5nZWRUb3VjaGVzXHJcbiAgICAgICAgICAgICAgICBdLmZpbmRJbmRleCgoeyBpZGVudGlmaWVyOiBpZGVudGlmaWVyIH0pPT5pZGVudGlmaWVyID09PSBzdGF0ZS5jdXJyZW50LmlkKTtcclxuICAgICAgICAgICAgICAgIGlmICh0b3VjaCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5kKGUsIFwidG91Y2hcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuY3VycmVudC5pZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlR2xvYmFsTGlzdGVuZXIod2luZG93LCBcInRvdWNobW92ZVwiLCBvblRvdWNoTW92ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlR2xvYmFsTGlzdGVuZXIod2luZG93LCBcInRvdWNoZW5kXCIsIG9uVG91Y2hFbmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUdsb2JhbExpc3RlbmVyKHdpbmRvdywgXCJ0b3VjaGNhbmNlbFwiLCBvblRvdWNoRW5kKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgbW92ZVByb3BzLm9uVG91Y2hTdGFydCA9IChlKT0+e1xyXG4gICAgICAgICAgICAgICAgaWYgKGUuY2hhbmdlZFRvdWNoZXMubGVuZ3RoID09PSAwIHx8IHN0YXRlLmN1cnJlbnQuaWQgIT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgbGV0IHsgcGFnZVg6IHBhZ2VYLCBwYWdlWTogcGFnZVksIGlkZW50aWZpZXI6IGlkZW50aWZpZXIgfSA9IGUuY2hhbmdlZFRvdWNoZXNbMF07XHJcbiAgICAgICAgICAgICAgICBzdGFydCgpO1xyXG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLmN1cnJlbnQubGFzdFBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VYOiBwYWdlWCxcclxuICAgICAgICAgICAgICAgICAgICBwYWdlWTogcGFnZVlcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5jdXJyZW50LmlkID0gaWRlbnRpZmllcjtcclxuICAgICAgICAgICAgICAgIGFkZEdsb2JhbExpc3RlbmVyKHdpbmRvdywgXCJ0b3VjaG1vdmVcIiwgb25Ub3VjaE1vdmUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGFkZEdsb2JhbExpc3RlbmVyKHdpbmRvdywgXCJ0b3VjaGVuZFwiLCBvblRvdWNoRW5kLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBhZGRHbG9iYWxMaXN0ZW5lcih3aW5kb3csIFwidG91Y2hjYW5jZWxcIiwgb25Ub3VjaEVuZCwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBvblBvaW50ZXJNb3ZlID0gKGUpPT57XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5wb2ludGVySWQgPT09IHN0YXRlLmN1cnJlbnQuaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgX3N0YXRlX2N1cnJlbnRfbGFzdFBvc2l0aW9uLCBfc3RhdGVfY3VycmVudF9sYXN0UG9zaXRpb24xO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwb2ludGVyVHlwZSA9IGUucG9pbnRlclR5cGUgfHwgXCJtb3VzZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBfc3RhdGVfY3VycmVudF9sYXN0UG9zaXRpb25fcGFnZVgsIF9zdGF0ZV9jdXJyZW50X2xhc3RQb3NpdGlvbl9wYWdlWTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBQcm9ibGVtcyB3aXRoIFBvaW50ZXJFdmVudCNtb3ZlbWVudFgvbW92ZW1lbnRZOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIDEuIGl0IGlzIGFsd2F5cyAwIG9uIG1hY09TIFNhZmFyaS5cclxuICAgICAgICAgICAgICAgICAgICAvLyAyLiBPbiBDaHJvbWUgQW5kcm9pZCwgaXQncyBzY2FsZWQgYnkgZGV2aWNlUGl4ZWxSYXRpbywgYnV0IG5vdCBvbiBDaHJvbWUgbWFjT1NcclxuICAgICAgICAgICAgICAgICAgICBtb3ZlKGUsIHBvaW50ZXJUeXBlLCBlLnBhZ2VYIC0gKChfc3RhdGVfY3VycmVudF9sYXN0UG9zaXRpb25fcGFnZVggPSAoX3N0YXRlX2N1cnJlbnRfbGFzdFBvc2l0aW9uID0gc3RhdGUuY3VycmVudC5sYXN0UG9zaXRpb24pID09PSBudWxsIHx8IF9zdGF0ZV9jdXJyZW50X2xhc3RQb3NpdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3N0YXRlX2N1cnJlbnRfbGFzdFBvc2l0aW9uLnBhZ2VYKSAhPT0gbnVsbCAmJiBfc3RhdGVfY3VycmVudF9sYXN0UG9zaXRpb25fcGFnZVggIT09IHZvaWQgMCA/IF9zdGF0ZV9jdXJyZW50X2xhc3RQb3NpdGlvbl9wYWdlWCA6IDApLCBlLnBhZ2VZIC0gKChfc3RhdGVfY3VycmVudF9sYXN0UG9zaXRpb25fcGFnZVkgPSAoX3N0YXRlX2N1cnJlbnRfbGFzdFBvc2l0aW9uMSA9IHN0YXRlLmN1cnJlbnQubGFzdFBvc2l0aW9uKSA9PT0gbnVsbCB8fCBfc3RhdGVfY3VycmVudF9sYXN0UG9zaXRpb24xID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc3RhdGVfY3VycmVudF9sYXN0UG9zaXRpb24xLnBhZ2VZKSAhPT0gbnVsbCAmJiBfc3RhdGVfY3VycmVudF9sYXN0UG9zaXRpb25fcGFnZVkgIT09IHZvaWQgMCA/IF9zdGF0ZV9jdXJyZW50X2xhc3RQb3NpdGlvbl9wYWdlWSA6IDApKTtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5jdXJyZW50Lmxhc3RQb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZVg6IGUucGFnZVgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VZOiBlLnBhZ2VZXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgbGV0IG9uUG9pbnRlclVwID0gKGUpPT57XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5wb2ludGVySWQgPT09IHN0YXRlLmN1cnJlbnQuaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcG9pbnRlclR5cGUgPSBlLnBvaW50ZXJUeXBlIHx8IFwibW91c2VcIjtcclxuICAgICAgICAgICAgICAgICAgICBlbmQoZSwgcG9pbnRlclR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmN1cnJlbnQuaWQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUdsb2JhbExpc3RlbmVyKHdpbmRvdywgXCJwb2ludGVybW92ZVwiLCBvblBvaW50ZXJNb3ZlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlR2xvYmFsTGlzdGVuZXIod2luZG93LCBcInBvaW50ZXJ1cFwiLCBvblBvaW50ZXJVcCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUdsb2JhbExpc3RlbmVyKHdpbmRvdywgXCJwb2ludGVyY2FuY2VsXCIsIG9uUG9pbnRlclVwLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIG1vdmVQcm9wcy5vblBvaW50ZXJEb3duID0gKGUpPT57XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5idXR0b24gPT09IDAgJiYgc3RhdGUuY3VycmVudC5pZCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5jdXJyZW50Lmxhc3RQb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZVg6IGUucGFnZVgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VZOiBlLnBhZ2VZXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5jdXJyZW50LmlkID0gZS5wb2ludGVySWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkR2xvYmFsTGlzdGVuZXIod2luZG93LCBcInBvaW50ZXJtb3ZlXCIsIG9uUG9pbnRlck1vdmUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICBhZGRHbG9iYWxMaXN0ZW5lcih3aW5kb3csIFwicG9pbnRlcnVwXCIsIG9uUG9pbnRlclVwLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkR2xvYmFsTGlzdGVuZXIod2luZG93LCBcInBvaW50ZXJjYW5jZWxcIiwgb25Qb2ludGVyVXAsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHRyaWdnZXJLZXlib2FyZE1vdmUgPSAoZSwgZGVsdGFYLCBkZWx0YVkpPT57XHJcbiAgICAgICAgICAgIHN0YXJ0KCk7XHJcbiAgICAgICAgICAgIG1vdmUoZSwgXCJrZXlib2FyZFwiLCBkZWx0YVgsIGRlbHRhWSk7XHJcbiAgICAgICAgICAgIGVuZChlLCBcImtleWJvYXJkXCIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgbW92ZVByb3BzLm9uS2V5RG93biA9IChlKT0+e1xyXG4gICAgICAgICAgICBzd2l0Y2goZS5rZXkpe1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkxlZnRcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJBcnJvd0xlZnRcIjpcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyS2V5Ym9hcmRNb3ZlKGUsIC0xLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJSaWdodFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkFycm93UmlnaHRcIjpcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyS2V5Ym9hcmRNb3ZlKGUsIDEsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlVwXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiQXJyb3dVcFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXJLZXlib2FyZE1vdmUoZSwgMCwgLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkRvd25cIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJBcnJvd0Rvd25cIjpcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyS2V5Ym9hcmRNb3ZlKGUsIDAsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gbW92ZVByb3BzO1xyXG4gICAgfSwgW1xyXG4gICAgICAgIHN0YXRlLFxyXG4gICAgICAgIGFkZEdsb2JhbExpc3RlbmVyLFxyXG4gICAgICAgIHJlbW92ZUdsb2JhbExpc3RlbmVyLFxyXG4gICAgICAgIG1vdmUsXHJcbiAgICAgICAgZW5kXHJcbiAgICBdKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbW92ZVByb3BzOiBtb3ZlUHJvcHNcclxuICAgIH07XHJcbn1cclxuXHJcblxyXG5cclxuLypcclxuICogQ29weXJpZ2h0IDIwMjEgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gXHJcblxyXG5mdW5jdGlvbiAkN2QwYTYzNmQ3YTRkY2VmZCRleHBvcnQkMjEyM2ZmMmI4N2M4MWNhKHByb3BzLCByZWYpIHtcclxuICAgIGxldCB7IG9uU2Nyb2xsOiBvblNjcm9sbCwgaXNEaXNhYmxlZDogaXNEaXNhYmxlZCB9ID0gcHJvcHM7XHJcbiAgICBsZXQgb25TY3JvbGxIYW5kbGVyID0gKDAsICRieDdTTCR1c2VDYWxsYmFjaykoKGUpPT57XHJcbiAgICAgICAgLy8gSWYgdGhlIGN0cmxLZXkgaXMgcHJlc3NlZCwgdGhpcyBpcyBhIHpvb20gZXZlbnQsIGRvIG5vdGhpbmcuXHJcbiAgICAgICAgaWYgKGUuY3RybEtleSkgcmV0dXJuO1xyXG4gICAgICAgIC8vIHN0b3Agc2Nyb2xsaW5nIHRoZSBwYWdlXHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgaWYgKG9uU2Nyb2xsKSBvblNjcm9sbCh7XHJcbiAgICAgICAgICAgIGRlbHRhWDogZS5kZWx0YVgsXHJcbiAgICAgICAgICAgIGRlbHRhWTogZS5kZWx0YVlcclxuICAgICAgICB9KTtcclxuICAgIH0sIFtcclxuICAgICAgICBvblNjcm9sbFxyXG4gICAgXSk7XHJcbiAgICAoMCwgJGJ4N1NMJHVzZUV2ZW50KShyZWYsIFwid2hlZWxcIiwgaXNEaXNhYmxlZCA/IHVuZGVmaW5lZCA6IG9uU2Nyb2xsSGFuZGxlcik7XHJcbn1cclxuXHJcblxyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxyXG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyBcclxuXHJcblxyXG5jb25zdCAkOGEyNjU2MWQyODc3MjM2ZSR2YXIkREVGQVVMVF9USFJFU0hPTEQgPSA1MDA7XHJcbmZ1bmN0aW9uICQ4YTI2NTYxZDI4NzcyMzZlJGV4cG9ydCRjMjRlZDAxMDRkMDdlYWI5KHByb3BzKSB7XHJcbiAgICBsZXQgeyBpc0Rpc2FibGVkOiBpc0Rpc2FibGVkLCBvbkxvbmdQcmVzc1N0YXJ0OiBvbkxvbmdQcmVzc1N0YXJ0LCBvbkxvbmdQcmVzc0VuZDogb25Mb25nUHJlc3NFbmQsIG9uTG9uZ1ByZXNzOiBvbkxvbmdQcmVzcywgdGhyZXNob2xkOiB0aHJlc2hvbGQgPSAkOGEyNjU2MWQyODc3MjM2ZSR2YXIkREVGQVVMVF9USFJFU0hPTEQsIGFjY2Vzc2liaWxpdHlEZXNjcmlwdGlvbjogYWNjZXNzaWJpbGl0eURlc2NyaXB0aW9uIH0gPSBwcm9wcztcclxuICAgIGNvbnN0IHRpbWVSZWYgPSAoMCwgJGJ4N1NMJHVzZVJlZikoKTtcclxuICAgIGxldCB7IGFkZEdsb2JhbExpc3RlbmVyOiBhZGRHbG9iYWxMaXN0ZW5lciwgcmVtb3ZlR2xvYmFsTGlzdGVuZXI6IHJlbW92ZUdsb2JhbExpc3RlbmVyIH0gPSAoMCwgJGJ4N1NMJHVzZUdsb2JhbExpc3RlbmVycykoKTtcclxuICAgIGxldCB7IHByZXNzUHJvcHM6IHByZXNzUHJvcHMgfSA9ICgwLCAkZjZjMzFjY2UyYWRmNjU0ZiRleHBvcnQkNDU3MTJlY2VkYTZmYWQyMSkoe1xyXG4gICAgICAgIGlzRGlzYWJsZWQ6IGlzRGlzYWJsZWQsXHJcbiAgICAgICAgb25QcmVzc1N0YXJ0IChlKSB7XHJcbiAgICAgICAgICAgIGUuY29udGludWVQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICBpZiAoZS5wb2ludGVyVHlwZSA9PT0gXCJtb3VzZVwiIHx8IGUucG9pbnRlclR5cGUgPT09IFwidG91Y2hcIikge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9uTG9uZ1ByZXNzU3RhcnQpIG9uTG9uZ1ByZXNzU3RhcnQoe1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLmUsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJsb25ncHJlc3NzdGFydFwiXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRpbWVSZWYuY3VycmVudCA9IHNldFRpbWVvdXQoKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IG90aGVyIHVzZVByZXNzIGhhbmRsZXJzIGZyb20gYWxzbyBoYW5kbGluZyB0aGlzIGV2ZW50LlxyXG4gICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LmRpc3BhdGNoRXZlbnQobmV3IFBvaW50ZXJFdmVudChcInBvaW50ZXJjYW5jZWxcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWJibGVzOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvbkxvbmdQcmVzcykgb25Mb25nUHJlc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImxvbmdwcmVzc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZVJlZi5jdXJyZW50ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgfSwgdGhyZXNob2xkKTtcclxuICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgY29udGV4dCBtZW51LCB3aGljaCBtYXkgYmUgb3BlbmVkIG9uIGxvbmcgcHJlc3Mgb24gdG91Y2ggZGV2aWNlc1xyXG4gICAgICAgICAgICAgICAgaWYgKGUucG9pbnRlclR5cGUgPT09IFwidG91Y2hcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBvbkNvbnRleHRNZW51ID0gKGUpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZEdsb2JhbExpc3RlbmVyKGUudGFyZ2V0LCBcImNvbnRleHRtZW51XCIsIG9uQ29udGV4dE1lbnUsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25jZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZEdsb2JhbExpc3RlbmVyKHdpbmRvdywgXCJwb2ludGVydXBcIiwgKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgbm8gY29udGV4dG1lbnUgZXZlbnQgaXMgZmlyZWQgcXVpY2tseSBhZnRlciBwb2ludGVydXAsIHJlbW92ZSB0aGUgaGFuZGxlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzbyBmdXR1cmUgY29udGV4dCBtZW51IGV2ZW50cyBvdXRzaWRlIGEgbG9uZyBwcmVzcyBhcmUgbm90IHByZXZlbnRlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlR2xvYmFsTGlzdGVuZXIoZS50YXJnZXQsIFwiY29udGV4dG1lbnVcIiwgb25Db250ZXh0TWVudSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uY2U6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25QcmVzc0VuZCAoZSkge1xyXG4gICAgICAgICAgICBpZiAodGltZVJlZi5jdXJyZW50KSBjbGVhclRpbWVvdXQodGltZVJlZi5jdXJyZW50KTtcclxuICAgICAgICAgICAgaWYgKG9uTG9uZ1ByZXNzRW5kICYmIChlLnBvaW50ZXJUeXBlID09PSBcIm1vdXNlXCIgfHwgZS5wb2ludGVyVHlwZSA9PT0gXCJ0b3VjaFwiKSkgb25Mb25nUHJlc3NFbmQoe1xyXG4gICAgICAgICAgICAgICAgLi4uZSxcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwibG9uZ3ByZXNzZW5kXCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBsZXQgZGVzY3JpcHRpb25Qcm9wcyA9ICgwLCAkYng3U0wkdXNlRGVzY3JpcHRpb24pKG9uTG9uZ1ByZXNzICYmICFpc0Rpc2FibGVkID8gYWNjZXNzaWJpbGl0eURlc2NyaXB0aW9uIDogdW5kZWZpbmVkKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbG9uZ1ByZXNzUHJvcHM6ICgwLCAkYng3U0wkbWVyZ2VQcm9wcykocHJlc3NQcm9wcywgZGVzY3JpcHRpb25Qcm9wcylcclxuICAgIH07XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbmV4cG9ydCB7JDNiMTE3ZTQzZGMwY2E5NWQkZXhwb3J0JDI3YzcwMWVkOWU0NDllOTkgYXMgUHJlc3NhYmxlLCAkZjFhYjhjNzU0NzhjNmY3MyRleHBvcnQkMzM1MTg3MWVlNGIyODhiOCBhcyBQcmVzc1Jlc3BvbmRlciwgJGYxYWI4Yzc1NDc4YzZmNzMkZXhwb3J0JGNmNzU0MjhlMGI5ZWQxZWEgYXMgQ2xlYXJQcmVzc1Jlc3BvbmRlciwgJGExZWE1OWQ2ODI3MGYwZGQkZXhwb3J0JGY4MTY4ZDhkZDhmZDY2ZTYgYXMgdXNlRm9jdXMsICQ1MDdmYWJlMTBlNzFjNmZiJGV4cG9ydCRiOWIzZGZkZGFiMTdkYjI3IGFzIGlzRm9jdXNWaXNpYmxlLCAkNTA3ZmFiZTEwZTcxYzZmYiRleHBvcnQkNjMwZmY2NTNjNWFkYTZhOSBhcyBnZXRJbnRlcmFjdGlvbk1vZGFsaXR5LCAkNTA3ZmFiZTEwZTcxYzZmYiRleHBvcnQkODM5N2RkZmM1MDRmZGI5YSBhcyBzZXRJbnRlcmFjdGlvbk1vZGFsaXR5LCAkNTA3ZmFiZTEwZTcxYzZmYiRleHBvcnQkMmYxODg4MTEyZjU1OGE3ZCBhcyBhZGRXaW5kb3dGb2N1c1RyYWNraW5nLCAkNTA3ZmFiZTEwZTcxYzZmYiRleHBvcnQkOThlMjBlYzkyZjYxNGNmZSBhcyB1c2VJbnRlcmFjdGlvbk1vZGFsaXR5LCAkNTA3ZmFiZTEwZTcxYzZmYiRleHBvcnQkZmZkOWU1MDIxYzFmYjJkNiBhcyB1c2VGb2N1c1Zpc2libGUsICQ1MDdmYWJlMTBlNzFjNmZiJGV4cG9ydCRlYzcxYjRiODNhYzA4ZWMzIGFzIHVzZUZvY3VzVmlzaWJsZUxpc3RlbmVyLCAkOWFiOTQyNjJiZDAwNDdjNyRleHBvcnQkNDIwZTY4MjczMTY1ZjRlYyBhcyB1c2VGb2N1c1dpdGhpbiwgJDYxNzliOTM2NzA1ZTc2ZDMkZXhwb3J0JGFlNzgwZGFmMjllNmQ0NTYgYXMgdXNlSG92ZXIsICRlMGI2ZTBiNjhlYzdmNTBmJGV4cG9ydCQ4NzJiNjYwYWM1YTFmZjk4IGFzIHVzZUludGVyYWN0T3V0c2lkZSwgJDQ2ZDgxOWZjYmFmMzU2NTQkZXhwb3J0JDhmNzE2NTQ4MDFjMmY3Y2QgYXMgdXNlS2V5Ym9hcmQsICRlOGE3MDIyY2Y4N2NiYTJhJGV4cG9ydCQzNmRhOTYzNzlmNzlmMjQ1IGFzIHVzZU1vdmUsICRmNmMzMWNjZTJhZGY2NTRmJGV4cG9ydCQ0NTcxMmVjZWRhNmZhZDIxIGFzIHVzZVByZXNzLCAkN2QwYTYzNmQ3YTRkY2VmZCRleHBvcnQkMjEyM2ZmMmI4N2M4MWNhIGFzIHVzZVNjcm9sbFdoZWVsLCAkOGEyNjU2MWQyODc3MjM2ZSRleHBvcnQkYzI0ZWQwMTA0ZDA3ZWFiOSBhcyB1c2VMb25nUHJlc3N9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1tb2R1bGUuanMubWFwXHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-aria/interactions/dist/import.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-aria/label/dist/import.mjs":
/*!********************************************************!*\
  !*** ./node_modules/@react-aria/label/dist/import.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useField: () => (/* binding */ $2baaea4c71418dea$export$294aa081a6c6f55d),\n/* harmony export */   useLabel: () => (/* binding */ $d191a55c9702f145$export$8467354a121f1b9f)\n/* harmony export */ });\n/* harmony import */ var _react_aria_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @react-aria/utils */ \"(ssr)/./node_modules/@react-aria/utils/dist/import.mjs\");\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ /*\r\n * Copyright 2021 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ /*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\nfunction $d191a55c9702f145$export$8467354a121f1b9f(props) {\r\n    let { id: id, label: label, \"aria-labelledby\": ariaLabelledby, \"aria-label\": ariaLabel, labelElementType: labelElementType = \"label\" } = props;\r\n    id = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_0__.useId)(id);\r\n    let labelId = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_0__.useId)();\r\n    let labelProps = {};\r\n    if (label) {\r\n        ariaLabelledby = ariaLabelledby ? `${labelId} ${ariaLabelledby}` : labelId;\r\n        labelProps = {\r\n            id: labelId,\r\n            htmlFor: labelElementType === \"label\" ? id : undefined\r\n        };\r\n    } else if (!ariaLabelledby && !ariaLabel) console.warn(\"If you do not provide a visible label, you must specify an aria-label or aria-labelledby attribute for accessibility\");\r\n    let fieldProps = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_0__.useLabels)({\r\n        id: id,\r\n        \"aria-label\": ariaLabel,\r\n        \"aria-labelledby\": ariaLabelledby\r\n    });\r\n    return {\r\n        labelProps: labelProps,\r\n        fieldProps: fieldProps\r\n    };\r\n}\r\n\r\n\r\n\r\nfunction $2baaea4c71418dea$export$294aa081a6c6f55d(props) {\r\n    let { description: description, errorMessage: errorMessage, isInvalid: isInvalid, validationState: validationState } = props;\r\n    let { labelProps: labelProps, fieldProps: fieldProps } = (0, $d191a55c9702f145$export$8467354a121f1b9f)(props);\r\n    let descriptionId = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_0__.useSlotId)([\r\n        Boolean(description),\r\n        Boolean(errorMessage),\r\n        isInvalid,\r\n        validationState\r\n    ]);\r\n    let errorMessageId = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_0__.useSlotId)([\r\n        Boolean(description),\r\n        Boolean(errorMessage),\r\n        isInvalid,\r\n        validationState\r\n    ]);\r\n    fieldProps = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_0__.mergeProps)(fieldProps, {\r\n        \"aria-describedby\": [\r\n            descriptionId,\r\n            // Use aria-describedby for error message because aria-errormessage is unsupported using VoiceOver or NVDA. See https://github.com/adobe/react-spectrum/issues/1346#issuecomment-740136268\r\n            errorMessageId,\r\n            props[\"aria-describedby\"]\r\n        ].filter(Boolean).join(\" \") || undefined\r\n    });\r\n    return {\r\n        labelProps: labelProps,\r\n        fieldProps: fieldProps,\r\n        descriptionProps: {\r\n            id: descriptionId\r\n        },\r\n        errorMessageProps: {\r\n            id: errorMessageId\r\n        }\r\n    };\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n//# sourceMappingURL=module.js.map\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvbGFiZWwvZGlzdC9pbXBvcnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF1SjtBQUN2SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGlJQUFpSTtBQUMzSSxhQUFhLG9EQUFZO0FBQ3pCLHNCQUFzQixvREFBWTtBQUNsQztBQUNBO0FBQ0EsNkNBQTZDLFNBQVMsRUFBRSxlQUFlO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLHlCQUF5Qix3REFBZ0I7QUFDekM7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsK0dBQStHO0FBQ3pILFVBQVUsaURBQWlEO0FBQzNELDRCQUE0Qix3REFBZ0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix3REFBZ0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix5REFBaUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDc0g7QUFDdEgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9udXRyaS1zbWFydC8uL25vZGVfbW9kdWxlcy9AcmVhY3QtYXJpYS9sYWJlbC9kaXN0L2ltcG9ydC5tanM/MmEyOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge3VzZVNsb3RJZCBhcyAkaUQ3cTAkdXNlU2xvdElkLCBtZXJnZVByb3BzIGFzICRpRDdxMCRtZXJnZVByb3BzLCB1c2VJZCBhcyAkaUQ3cTAkdXNlSWQsIHVzZUxhYmVscyBhcyAkaUQ3cTAkdXNlTGFiZWxzfSBmcm9tIFwiQHJlYWN0LWFyaWEvdXRpbHNcIjtcclxuXHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIC8qXHJcbiAqIENvcHlyaWdodCAyMDIxIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIC8qXHJcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIFxyXG5mdW5jdGlvbiAkZDE5MWE1NWM5NzAyZjE0NSRleHBvcnQkODQ2NzM1NGExMjFmMWI5Zihwcm9wcykge1xyXG4gICAgbGV0IHsgaWQ6IGlkLCBsYWJlbDogbGFiZWwsIFwiYXJpYS1sYWJlbGxlZGJ5XCI6IGFyaWFMYWJlbGxlZGJ5LCBcImFyaWEtbGFiZWxcIjogYXJpYUxhYmVsLCBsYWJlbEVsZW1lbnRUeXBlOiBsYWJlbEVsZW1lbnRUeXBlID0gXCJsYWJlbFwiIH0gPSBwcm9wcztcclxuICAgIGlkID0gKDAsICRpRDdxMCR1c2VJZCkoaWQpO1xyXG4gICAgbGV0IGxhYmVsSWQgPSAoMCwgJGlEN3EwJHVzZUlkKSgpO1xyXG4gICAgbGV0IGxhYmVsUHJvcHMgPSB7fTtcclxuICAgIGlmIChsYWJlbCkge1xyXG4gICAgICAgIGFyaWFMYWJlbGxlZGJ5ID0gYXJpYUxhYmVsbGVkYnkgPyBgJHtsYWJlbElkfSAke2FyaWFMYWJlbGxlZGJ5fWAgOiBsYWJlbElkO1xyXG4gICAgICAgIGxhYmVsUHJvcHMgPSB7XHJcbiAgICAgICAgICAgIGlkOiBsYWJlbElkLFxyXG4gICAgICAgICAgICBodG1sRm9yOiBsYWJlbEVsZW1lbnRUeXBlID09PSBcImxhYmVsXCIgPyBpZCA6IHVuZGVmaW5lZFxyXG4gICAgICAgIH07XHJcbiAgICB9IGVsc2UgaWYgKCFhcmlhTGFiZWxsZWRieSAmJiAhYXJpYUxhYmVsKSBjb25zb2xlLndhcm4oXCJJZiB5b3UgZG8gbm90IHByb3ZpZGUgYSB2aXNpYmxlIGxhYmVsLCB5b3UgbXVzdCBzcGVjaWZ5IGFuIGFyaWEtbGFiZWwgb3IgYXJpYS1sYWJlbGxlZGJ5IGF0dHJpYnV0ZSBmb3IgYWNjZXNzaWJpbGl0eVwiKTtcclxuICAgIGxldCBmaWVsZFByb3BzID0gKDAsICRpRDdxMCR1c2VMYWJlbHMpKHtcclxuICAgICAgICBpZDogaWQsXHJcbiAgICAgICAgXCJhcmlhLWxhYmVsXCI6IGFyaWFMYWJlbCxcclxuICAgICAgICBcImFyaWEtbGFiZWxsZWRieVwiOiBhcmlhTGFiZWxsZWRieVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGxhYmVsUHJvcHM6IGxhYmVsUHJvcHMsXHJcbiAgICAgICAgZmllbGRQcm9wczogZmllbGRQcm9wc1xyXG4gICAgfTtcclxufVxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiAkMmJhYWVhNGM3MTQxOGRlYSRleHBvcnQkMjk0YWEwODFhNmM2ZjU1ZChwcm9wcykge1xyXG4gICAgbGV0IHsgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLCBlcnJvck1lc3NhZ2U6IGVycm9yTWVzc2FnZSwgaXNJbnZhbGlkOiBpc0ludmFsaWQsIHZhbGlkYXRpb25TdGF0ZTogdmFsaWRhdGlvblN0YXRlIH0gPSBwcm9wcztcclxuICAgIGxldCB7IGxhYmVsUHJvcHM6IGxhYmVsUHJvcHMsIGZpZWxkUHJvcHM6IGZpZWxkUHJvcHMgfSA9ICgwLCAkZDE5MWE1NWM5NzAyZjE0NSRleHBvcnQkODQ2NzM1NGExMjFmMWI5ZikocHJvcHMpO1xyXG4gICAgbGV0IGRlc2NyaXB0aW9uSWQgPSAoMCwgJGlEN3EwJHVzZVNsb3RJZCkoW1xyXG4gICAgICAgIEJvb2xlYW4oZGVzY3JpcHRpb24pLFxyXG4gICAgICAgIEJvb2xlYW4oZXJyb3JNZXNzYWdlKSxcclxuICAgICAgICBpc0ludmFsaWQsXHJcbiAgICAgICAgdmFsaWRhdGlvblN0YXRlXHJcbiAgICBdKTtcclxuICAgIGxldCBlcnJvck1lc3NhZ2VJZCA9ICgwLCAkaUQ3cTAkdXNlU2xvdElkKShbXHJcbiAgICAgICAgQm9vbGVhbihkZXNjcmlwdGlvbiksXHJcbiAgICAgICAgQm9vbGVhbihlcnJvck1lc3NhZ2UpLFxyXG4gICAgICAgIGlzSW52YWxpZCxcclxuICAgICAgICB2YWxpZGF0aW9uU3RhdGVcclxuICAgIF0pO1xyXG4gICAgZmllbGRQcm9wcyA9ICgwLCAkaUQ3cTAkbWVyZ2VQcm9wcykoZmllbGRQcm9wcywge1xyXG4gICAgICAgIFwiYXJpYS1kZXNjcmliZWRieVwiOiBbXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uSWQsXHJcbiAgICAgICAgICAgIC8vIFVzZSBhcmlhLWRlc2NyaWJlZGJ5IGZvciBlcnJvciBtZXNzYWdlIGJlY2F1c2UgYXJpYS1lcnJvcm1lc3NhZ2UgaXMgdW5zdXBwb3J0ZWQgdXNpbmcgVm9pY2VPdmVyIG9yIE5WREEuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYWRvYmUvcmVhY3Qtc3BlY3RydW0vaXNzdWVzLzEzNDYjaXNzdWVjb21tZW50LTc0MDEzNjI2OFxyXG4gICAgICAgICAgICBlcnJvck1lc3NhZ2VJZCxcclxuICAgICAgICAgICAgcHJvcHNbXCJhcmlhLWRlc2NyaWJlZGJ5XCJdXHJcbiAgICAgICAgXS5maWx0ZXIoQm9vbGVhbikuam9pbihcIiBcIikgfHwgdW5kZWZpbmVkXHJcbiAgICB9KTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbGFiZWxQcm9wczogbGFiZWxQcm9wcyxcclxuICAgICAgICBmaWVsZFByb3BzOiBmaWVsZFByb3BzLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uUHJvcHM6IHtcclxuICAgICAgICAgICAgaWQ6IGRlc2NyaXB0aW9uSWRcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVycm9yTWVzc2FnZVByb3BzOiB7XHJcbiAgICAgICAgICAgIGlkOiBlcnJvck1lc3NhZ2VJZFxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG5leHBvcnQgeyQyYmFhZWE0YzcxNDE4ZGVhJGV4cG9ydCQyOTRhYTA4MWE2YzZmNTVkIGFzIHVzZUZpZWxkLCAkZDE5MWE1NWM5NzAyZjE0NSRleHBvcnQkODQ2NzM1NGExMjFmMWI5ZiBhcyB1c2VMYWJlbH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vZHVsZS5qcy5tYXBcclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-aria/label/dist/import.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-aria/listbox/dist/import.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/@react-aria/listbox/dist/import.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getItemId: () => (/* binding */ $b1f0cad8af73213b$export$9145995848b05025),\n/* harmony export */   listData: () => (/* binding */ $b1f0cad8af73213b$export$3585ede4d035bf14),\n/* harmony export */   useListBox: () => (/* binding */ $c132121280ec012d$export$50eacbbf140a3141),\n/* harmony export */   useListBoxSection: () => (/* binding */ $af383d3bef1cfdc9$export$c3f9f39876e4bc7),\n/* harmony export */   useOption: () => (/* binding */ $293f70390ea03370$export$497855f14858aa34)\n/* harmony export */ });\n/* harmony import */ var _react_aria_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @react-aria/utils */ \"(ssr)/./node_modules/@react-aria/utils/dist/import.mjs\");\n/* harmony import */ var _react_aria_interactions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @react-aria/interactions */ \"(ssr)/./node_modules/@react-aria/interactions/dist/import.mjs\");\n/* harmony import */ var _react_aria_label__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @react-aria/label */ \"(ssr)/./node_modules/@react-aria/label/dist/import.mjs\");\n/* harmony import */ var _react_aria_selection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @react-aria/selection */ \"(ssr)/./node_modules/@react-aria/selection/dist/import.mjs\");\n/* harmony import */ var _react_stately_collections__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @react-stately/collections */ \"(ssr)/./node_modules/@react-stately/collections/dist/import.mjs\");\n\r\n\r\n\r\n\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ /*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ const $b1f0cad8af73213b$export$3585ede4d035bf14 = new WeakMap();\r\nfunction $b1f0cad8af73213b$var$normalizeKey(key) {\r\n    if (typeof key === \"string\") return key.replace(/\\s*/g, \"\");\r\n    return \"\" + key;\r\n}\r\nfunction $b1f0cad8af73213b$export$9145995848b05025(state, itemKey) {\r\n    let data = $b1f0cad8af73213b$export$3585ede4d035bf14.get(state);\r\n    if (!data) throw new Error(\"Unknown list\");\r\n    return `${data.id}-option-${$b1f0cad8af73213b$var$normalizeKey(itemKey)}`;\r\n}\r\n\r\n\r\n\r\n\r\n\r\nfunction $c132121280ec012d$export$50eacbbf140a3141(props, state, ref) {\r\n    let domProps = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_0__.filterDOMProps)(props, {\r\n        labelable: true\r\n    });\r\n    // Use props instead of state here. We don't want this to change due to long press.\r\n    let selectionBehavior = props.selectionBehavior || \"toggle\";\r\n    let linkBehavior = props.linkBehavior || (selectionBehavior === \"replace\" ? \"action\" : \"override\");\r\n    if (selectionBehavior === \"toggle\" && linkBehavior === \"action\") // linkBehavior=\"action\" does not work with selectionBehavior=\"toggle\" because there is no way\r\n    // to initiate selection (checkboxes are not allowed inside a listbox). Link items will not be\r\n    // selectable in this configuration.\r\n    linkBehavior = \"override\";\r\n    let { listProps: listProps } = (0, _react_aria_selection__WEBPACK_IMPORTED_MODULE_1__.useSelectableList)({\r\n        ...props,\r\n        ref: ref,\r\n        selectionManager: state.selectionManager,\r\n        collection: state.collection,\r\n        disabledKeys: state.disabledKeys,\r\n        linkBehavior: linkBehavior\r\n    });\r\n    let { focusWithinProps: focusWithinProps } = (0, _react_aria_interactions__WEBPACK_IMPORTED_MODULE_2__.useFocusWithin)({\r\n        onFocusWithin: props.onFocus,\r\n        onBlurWithin: props.onBlur,\r\n        onFocusWithinChange: props.onFocusChange\r\n    });\r\n    // Share list id and some props with child options.\r\n    let id = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_0__.useId)(props.id);\r\n    (0, $b1f0cad8af73213b$export$3585ede4d035bf14).set(state, {\r\n        id: id,\r\n        shouldUseVirtualFocus: props.shouldUseVirtualFocus,\r\n        shouldSelectOnPressUp: props.shouldSelectOnPressUp,\r\n        shouldFocusOnHover: props.shouldFocusOnHover,\r\n        isVirtualized: props.isVirtualized,\r\n        onAction: props.onAction,\r\n        linkBehavior: linkBehavior\r\n    });\r\n    let { labelProps: labelProps, fieldProps: fieldProps } = (0, _react_aria_label__WEBPACK_IMPORTED_MODULE_3__.useLabel)({\r\n        ...props,\r\n        id: id,\r\n        // listbox is not an HTML input element so it\r\n        // shouldn't be labeled by a <label> element.\r\n        labelElementType: \"span\"\r\n    });\r\n    return {\r\n        labelProps: labelProps,\r\n        listBoxProps: (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_0__.mergeProps)(domProps, focusWithinProps, state.selectionManager.selectionMode === \"multiple\" ? {\r\n            \"aria-multiselectable\": \"true\"\r\n        } : {}, {\r\n            role: \"listbox\",\r\n            ...(0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_0__.mergeProps)(fieldProps, listProps)\r\n        })\r\n    };\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n\r\n\r\n\r\n\r\nfunction $293f70390ea03370$export$497855f14858aa34(props, state, ref) {\r\n    var _item_props;\r\n    let { key: key } = props;\r\n    let data = (0, $b1f0cad8af73213b$export$3585ede4d035bf14).get(state);\r\n    var _props_isDisabled;\r\n    let isDisabled = (_props_isDisabled = props.isDisabled) !== null && _props_isDisabled !== void 0 ? _props_isDisabled : state.disabledKeys.has(key);\r\n    var _props_isSelected;\r\n    let isSelected = (_props_isSelected = props.isSelected) !== null && _props_isSelected !== void 0 ? _props_isSelected : state.selectionManager.isSelected(key);\r\n    var _props_shouldSelectOnPressUp;\r\n    let shouldSelectOnPressUp = (_props_shouldSelectOnPressUp = props.shouldSelectOnPressUp) !== null && _props_shouldSelectOnPressUp !== void 0 ? _props_shouldSelectOnPressUp : data === null || data === void 0 ? void 0 : data.shouldSelectOnPressUp;\r\n    var _props_shouldFocusOnHover;\r\n    let shouldFocusOnHover = (_props_shouldFocusOnHover = props.shouldFocusOnHover) !== null && _props_shouldFocusOnHover !== void 0 ? _props_shouldFocusOnHover : data === null || data === void 0 ? void 0 : data.shouldFocusOnHover;\r\n    var _props_shouldUseVirtualFocus;\r\n    let shouldUseVirtualFocus = (_props_shouldUseVirtualFocus = props.shouldUseVirtualFocus) !== null && _props_shouldUseVirtualFocus !== void 0 ? _props_shouldUseVirtualFocus : data === null || data === void 0 ? void 0 : data.shouldUseVirtualFocus;\r\n    var _props_isVirtualized;\r\n    let isVirtualized = (_props_isVirtualized = props.isVirtualized) !== null && _props_isVirtualized !== void 0 ? _props_isVirtualized : data === null || data === void 0 ? void 0 : data.isVirtualized;\r\n    let labelId = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_0__.useSlotId)();\r\n    let descriptionId = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_0__.useSlotId)();\r\n    let optionProps = {\r\n        role: \"option\",\r\n        \"aria-disabled\": isDisabled || undefined,\r\n        \"aria-selected\": state.selectionManager.selectionMode !== \"none\" ? isSelected : undefined\r\n    };\r\n    // Safari with VoiceOver on macOS misreads options with aria-labelledby or aria-label as simply \"text\".\r\n    // We should not map slots to the label and description on Safari and instead just have VoiceOver read the textContent.\r\n    // https://bugs.webkit.org/show_bug.cgi?id=209279\r\n    if (!((0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_0__.isMac)() && (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_0__.isWebKit)())) {\r\n        optionProps[\"aria-label\"] = props[\"aria-label\"];\r\n        optionProps[\"aria-labelledby\"] = labelId;\r\n        optionProps[\"aria-describedby\"] = descriptionId;\r\n    }\r\n    let item = state.collection.getItem(key);\r\n    if (isVirtualized) {\r\n        let index = Number(item === null || item === void 0 ? void 0 : item.index);\r\n        optionProps[\"aria-posinset\"] = Number.isNaN(index) ? undefined : index + 1;\r\n        optionProps[\"aria-setsize\"] = (0, _react_stately_collections__WEBPACK_IMPORTED_MODULE_4__.getItemCount)(state.collection);\r\n    }\r\n    let { itemProps: itemProps, isPressed: isPressed, isFocused: isFocused, hasAction: hasAction, allowsSelection: allowsSelection } = (0, _react_aria_selection__WEBPACK_IMPORTED_MODULE_1__.useSelectableItem)({\r\n        selectionManager: state.selectionManager,\r\n        key: key,\r\n        ref: ref,\r\n        shouldSelectOnPressUp: shouldSelectOnPressUp,\r\n        allowsDifferentPressOrigin: shouldSelectOnPressUp && shouldFocusOnHover,\r\n        isVirtualized: isVirtualized,\r\n        shouldUseVirtualFocus: shouldUseVirtualFocus,\r\n        isDisabled: isDisabled,\r\n        onAction: (data === null || data === void 0 ? void 0 : data.onAction) ? ()=>{\r\n            var _data_onAction;\r\n            return data === null || data === void 0 ? void 0 : (_data_onAction = data.onAction) === null || _data_onAction === void 0 ? void 0 : _data_onAction.call(data, key);\r\n        } : undefined,\r\n        linkBehavior: data === null || data === void 0 ? void 0 : data.linkBehavior\r\n    });\r\n    let { hoverProps: hoverProps } = (0, _react_aria_interactions__WEBPACK_IMPORTED_MODULE_2__.useHover)({\r\n        isDisabled: isDisabled || !shouldFocusOnHover,\r\n        onHoverStart () {\r\n            if (!(0, _react_aria_interactions__WEBPACK_IMPORTED_MODULE_2__.isFocusVisible)()) {\r\n                state.selectionManager.setFocused(true);\r\n                state.selectionManager.setFocusedKey(key);\r\n            }\r\n        }\r\n    });\r\n    let domProps = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_0__.filterDOMProps)(item === null || item === void 0 ? void 0 : item.props, {\r\n        isLink: !!(item === null || item === void 0 ? void 0 : (_item_props = item.props) === null || _item_props === void 0 ? void 0 : _item_props.href)\r\n    });\r\n    delete domProps.id;\r\n    return {\r\n        optionProps: {\r\n            ...optionProps,\r\n            ...(0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_0__.mergeProps)(domProps, itemProps, hoverProps),\r\n            id: (0, $b1f0cad8af73213b$export$9145995848b05025)(state, key)\r\n        },\r\n        labelProps: {\r\n            id: labelId\r\n        },\r\n        descriptionProps: {\r\n            id: descriptionId\r\n        },\r\n        isFocused: isFocused,\r\n        isFocusVisible: isFocused && (0, _react_aria_interactions__WEBPACK_IMPORTED_MODULE_2__.isFocusVisible)(),\r\n        isSelected: isSelected,\r\n        isDisabled: isDisabled,\r\n        isPressed: isPressed,\r\n        allowsSelection: allowsSelection,\r\n        hasAction: hasAction\r\n    };\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\nfunction $af383d3bef1cfdc9$export$c3f9f39876e4bc7(props) {\r\n    let { heading: heading, \"aria-label\": ariaLabel } = props;\r\n    let headingId = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_0__.useId)();\r\n    return {\r\n        itemProps: {\r\n            role: \"presentation\"\r\n        },\r\n        headingProps: heading ? {\r\n            // Techincally, listbox cannot contain headings according to ARIA.\r\n            // We hide the heading from assistive technology, using role=\"presentation\",\r\n            // and only use it as a visual label for the nested group.\r\n            id: headingId,\r\n            role: \"presentation\"\r\n        } : {},\r\n        groupProps: {\r\n            role: \"group\",\r\n            \"aria-label\": ariaLabel,\r\n            \"aria-labelledby\": heading ? headingId : undefined\r\n        }\r\n    };\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n//# sourceMappingURL=module.js.map\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvbGlzdGJveC9kaXN0L2ltcG9ydC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFxTjtBQUM5RDtBQUN6RjtBQUNxRTtBQUNwRDtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsUUFBUSxVQUFVLDRDQUE0QztBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw2REFBcUI7QUFDNUM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHVCQUF1QixNQUFNLG9FQUF3QjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsVUFBVSxxQ0FBcUMsTUFBTSxvRUFBcUI7QUFDMUU7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsaUJBQWlCLG9EQUFZO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsVUFBVSxpREFBaUQsTUFBTSx1REFBZTtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSwwQkFBMEIseURBQWlCO0FBQzNDO0FBQ0EsVUFBVSxJQUFJO0FBQ2Q7QUFDQSxtQkFBbUIseURBQWlCO0FBQ3BDLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLFdBQVc7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isd0RBQWdCO0FBQ3RDLDRCQUE0Qix3REFBZ0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsb0RBQVksV0FBVyx1REFBZTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLG9FQUFtQjtBQUM3RDtBQUNBLFVBQVUsMkhBQTJILE1BQU0sb0VBQXdCO0FBQ25LO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxLQUFLO0FBQ0wsVUFBVSx5QkFBeUIsTUFBTSw4REFBZTtBQUN4RDtBQUNBO0FBQ0EscUJBQXFCLG9FQUFxQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCx1QkFBdUIsNkRBQXFCO0FBQzVDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHlEQUFpQjtBQUNwQztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSx5Q0FBeUMsb0VBQXFCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsNENBQTRDO0FBQ3RELHdCQUF3QixvREFBWTtBQUNwQztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxJQUFJO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3VTO0FBQ3ZTIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnV0cmktc21hcnQvLi9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvbGlzdGJveC9kaXN0L2ltcG9ydC5tanM/MGE5MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2ZpbHRlckRPTVByb3BzIGFzICRmcldNQyRmaWx0ZXJET01Qcm9wcywgdXNlSWQgYXMgJGZyV01DJHVzZUlkLCBtZXJnZVByb3BzIGFzICRmcldNQyRtZXJnZVByb3BzLCB1c2VTbG90SWQgYXMgJGZyV01DJHVzZVNsb3RJZCwgaXNNYWMgYXMgJGZyV01DJGlzTWFjLCBpc1dlYktpdCBhcyAkZnJXTUMkaXNXZWJLaXR9IGZyb20gXCJAcmVhY3QtYXJpYS91dGlsc1wiO1xyXG5pbXBvcnQge3VzZUZvY3VzV2l0aGluIGFzICRmcldNQyR1c2VGb2N1c1dpdGhpbiwgdXNlSG92ZXIgYXMgJGZyV01DJHVzZUhvdmVyLCBpc0ZvY3VzVmlzaWJsZSBhcyAkZnJXTUMkaXNGb2N1c1Zpc2libGV9IGZyb20gXCJAcmVhY3QtYXJpYS9pbnRlcmFjdGlvbnNcIjtcclxuaW1wb3J0IHt1c2VMYWJlbCBhcyAkZnJXTUMkdXNlTGFiZWx9IGZyb20gXCJAcmVhY3QtYXJpYS9sYWJlbFwiO1xyXG5pbXBvcnQge3VzZVNlbGVjdGFibGVMaXN0IGFzICRmcldNQyR1c2VTZWxlY3RhYmxlTGlzdCwgdXNlU2VsZWN0YWJsZUl0ZW0gYXMgJGZyV01DJHVzZVNlbGVjdGFibGVJdGVtfSBmcm9tIFwiQHJlYWN0LWFyaWEvc2VsZWN0aW9uXCI7XHJcbmltcG9ydCB7Z2V0SXRlbUNvdW50IGFzICRmcldNQyRnZXRJdGVtQ291bnR9IGZyb20gXCJAcmVhY3Qtc3RhdGVseS9jb2xsZWN0aW9uc1wiO1xyXG5cclxuLypcclxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gLypcclxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gXHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIGNvbnN0ICRiMWYwY2FkOGFmNzMyMTNiJGV4cG9ydCQzNTg1ZWRlNGQwMzViZjE0ID0gbmV3IFdlYWtNYXAoKTtcclxuZnVuY3Rpb24gJGIxZjBjYWQ4YWY3MzIxM2IkdmFyJG5vcm1hbGl6ZUtleShrZXkpIHtcclxuICAgIGlmICh0eXBlb2Yga2V5ID09PSBcInN0cmluZ1wiKSByZXR1cm4ga2V5LnJlcGxhY2UoL1xccyovZywgXCJcIik7XHJcbiAgICByZXR1cm4gXCJcIiArIGtleTtcclxufVxyXG5mdW5jdGlvbiAkYjFmMGNhZDhhZjczMjEzYiRleHBvcnQkOTE0NTk5NTg0OGIwNTAyNShzdGF0ZSwgaXRlbUtleSkge1xyXG4gICAgbGV0IGRhdGEgPSAkYjFmMGNhZDhhZjczMjEzYiRleHBvcnQkMzU4NWVkZTRkMDM1YmYxNC5nZXQoc3RhdGUpO1xyXG4gICAgaWYgKCFkYXRhKSB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIGxpc3RcIik7XHJcbiAgICByZXR1cm4gYCR7ZGF0YS5pZH0tb3B0aW9uLSR7JGIxZjBjYWQ4YWY3MzIxM2IkdmFyJG5vcm1hbGl6ZUtleShpdGVtS2V5KX1gO1xyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gJGMxMzIxMjEyODBlYzAxMmQkZXhwb3J0JDUwZWFjYmJmMTQwYTMxNDEocHJvcHMsIHN0YXRlLCByZWYpIHtcclxuICAgIGxldCBkb21Qcm9wcyA9ICgwLCAkZnJXTUMkZmlsdGVyRE9NUHJvcHMpKHByb3BzLCB7XHJcbiAgICAgICAgbGFiZWxhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8vIFVzZSBwcm9wcyBpbnN0ZWFkIG9mIHN0YXRlIGhlcmUuIFdlIGRvbid0IHdhbnQgdGhpcyB0byBjaGFuZ2UgZHVlIHRvIGxvbmcgcHJlc3MuXHJcbiAgICBsZXQgc2VsZWN0aW9uQmVoYXZpb3IgPSBwcm9wcy5zZWxlY3Rpb25CZWhhdmlvciB8fCBcInRvZ2dsZVwiO1xyXG4gICAgbGV0IGxpbmtCZWhhdmlvciA9IHByb3BzLmxpbmtCZWhhdmlvciB8fCAoc2VsZWN0aW9uQmVoYXZpb3IgPT09IFwicmVwbGFjZVwiID8gXCJhY3Rpb25cIiA6IFwib3ZlcnJpZGVcIik7XHJcbiAgICBpZiAoc2VsZWN0aW9uQmVoYXZpb3IgPT09IFwidG9nZ2xlXCIgJiYgbGlua0JlaGF2aW9yID09PSBcImFjdGlvblwiKSAvLyBsaW5rQmVoYXZpb3I9XCJhY3Rpb25cIiBkb2VzIG5vdCB3b3JrIHdpdGggc2VsZWN0aW9uQmVoYXZpb3I9XCJ0b2dnbGVcIiBiZWNhdXNlIHRoZXJlIGlzIG5vIHdheVxyXG4gICAgLy8gdG8gaW5pdGlhdGUgc2VsZWN0aW9uIChjaGVja2JveGVzIGFyZSBub3QgYWxsb3dlZCBpbnNpZGUgYSBsaXN0Ym94KS4gTGluayBpdGVtcyB3aWxsIG5vdCBiZVxyXG4gICAgLy8gc2VsZWN0YWJsZSBpbiB0aGlzIGNvbmZpZ3VyYXRpb24uXHJcbiAgICBsaW5rQmVoYXZpb3IgPSBcIm92ZXJyaWRlXCI7XHJcbiAgICBsZXQgeyBsaXN0UHJvcHM6IGxpc3RQcm9wcyB9ID0gKDAsICRmcldNQyR1c2VTZWxlY3RhYmxlTGlzdCkoe1xyXG4gICAgICAgIC4uLnByb3BzLFxyXG4gICAgICAgIHJlZjogcmVmLFxyXG4gICAgICAgIHNlbGVjdGlvbk1hbmFnZXI6IHN0YXRlLnNlbGVjdGlvbk1hbmFnZXIsXHJcbiAgICAgICAgY29sbGVjdGlvbjogc3RhdGUuY29sbGVjdGlvbixcclxuICAgICAgICBkaXNhYmxlZEtleXM6IHN0YXRlLmRpc2FibGVkS2V5cyxcclxuICAgICAgICBsaW5rQmVoYXZpb3I6IGxpbmtCZWhhdmlvclxyXG4gICAgfSk7XHJcbiAgICBsZXQgeyBmb2N1c1dpdGhpblByb3BzOiBmb2N1c1dpdGhpblByb3BzIH0gPSAoMCwgJGZyV01DJHVzZUZvY3VzV2l0aGluKSh7XHJcbiAgICAgICAgb25Gb2N1c1dpdGhpbjogcHJvcHMub25Gb2N1cyxcclxuICAgICAgICBvbkJsdXJXaXRoaW46IHByb3BzLm9uQmx1cixcclxuICAgICAgICBvbkZvY3VzV2l0aGluQ2hhbmdlOiBwcm9wcy5vbkZvY3VzQ2hhbmdlXHJcbiAgICB9KTtcclxuICAgIC8vIFNoYXJlIGxpc3QgaWQgYW5kIHNvbWUgcHJvcHMgd2l0aCBjaGlsZCBvcHRpb25zLlxyXG4gICAgbGV0IGlkID0gKDAsICRmcldNQyR1c2VJZCkocHJvcHMuaWQpO1xyXG4gICAgKDAsICRiMWYwY2FkOGFmNzMyMTNiJGV4cG9ydCQzNTg1ZWRlNGQwMzViZjE0KS5zZXQoc3RhdGUsIHtcclxuICAgICAgICBpZDogaWQsXHJcbiAgICAgICAgc2hvdWxkVXNlVmlydHVhbEZvY3VzOiBwcm9wcy5zaG91bGRVc2VWaXJ0dWFsRm9jdXMsXHJcbiAgICAgICAgc2hvdWxkU2VsZWN0T25QcmVzc1VwOiBwcm9wcy5zaG91bGRTZWxlY3RPblByZXNzVXAsXHJcbiAgICAgICAgc2hvdWxkRm9jdXNPbkhvdmVyOiBwcm9wcy5zaG91bGRGb2N1c09uSG92ZXIsXHJcbiAgICAgICAgaXNWaXJ0dWFsaXplZDogcHJvcHMuaXNWaXJ0dWFsaXplZCxcclxuICAgICAgICBvbkFjdGlvbjogcHJvcHMub25BY3Rpb24sXHJcbiAgICAgICAgbGlua0JlaGF2aW9yOiBsaW5rQmVoYXZpb3JcclxuICAgIH0pO1xyXG4gICAgbGV0IHsgbGFiZWxQcm9wczogbGFiZWxQcm9wcywgZmllbGRQcm9wczogZmllbGRQcm9wcyB9ID0gKDAsICRmcldNQyR1c2VMYWJlbCkoe1xyXG4gICAgICAgIC4uLnByb3BzLFxyXG4gICAgICAgIGlkOiBpZCxcclxuICAgICAgICAvLyBsaXN0Ym94IGlzIG5vdCBhbiBIVE1MIGlucHV0IGVsZW1lbnQgc28gaXRcclxuICAgICAgICAvLyBzaG91bGRuJ3QgYmUgbGFiZWxlZCBieSBhIDxsYWJlbD4gZWxlbWVudC5cclxuICAgICAgICBsYWJlbEVsZW1lbnRUeXBlOiBcInNwYW5cIlxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGxhYmVsUHJvcHM6IGxhYmVsUHJvcHMsXHJcbiAgICAgICAgbGlzdEJveFByb3BzOiAoMCwgJGZyV01DJG1lcmdlUHJvcHMpKGRvbVByb3BzLCBmb2N1c1dpdGhpblByb3BzLCBzdGF0ZS5zZWxlY3Rpb25NYW5hZ2VyLnNlbGVjdGlvbk1vZGUgPT09IFwibXVsdGlwbGVcIiA/IHtcclxuICAgICAgICAgICAgXCJhcmlhLW11bHRpc2VsZWN0YWJsZVwiOiBcInRydWVcIlxyXG4gICAgICAgIH0gOiB7fSwge1xyXG4gICAgICAgICAgICByb2xlOiBcImxpc3Rib3hcIixcclxuICAgICAgICAgICAgLi4uKDAsICRmcldNQyRtZXJnZVByb3BzKShmaWVsZFByb3BzLCBsaXN0UHJvcHMpXHJcbiAgICAgICAgfSlcclxuICAgIH07XHJcbn1cclxuXHJcblxyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxyXG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyBcclxuXHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uICQyOTNmNzAzOTBlYTAzMzcwJGV4cG9ydCQ0OTc4NTVmMTQ4NThhYTM0KHByb3BzLCBzdGF0ZSwgcmVmKSB7XHJcbiAgICB2YXIgX2l0ZW1fcHJvcHM7XHJcbiAgICBsZXQgeyBrZXk6IGtleSB9ID0gcHJvcHM7XHJcbiAgICBsZXQgZGF0YSA9ICgwLCAkYjFmMGNhZDhhZjczMjEzYiRleHBvcnQkMzU4NWVkZTRkMDM1YmYxNCkuZ2V0KHN0YXRlKTtcclxuICAgIHZhciBfcHJvcHNfaXNEaXNhYmxlZDtcclxuICAgIGxldCBpc0Rpc2FibGVkID0gKF9wcm9wc19pc0Rpc2FibGVkID0gcHJvcHMuaXNEaXNhYmxlZCkgIT09IG51bGwgJiYgX3Byb3BzX2lzRGlzYWJsZWQgIT09IHZvaWQgMCA/IF9wcm9wc19pc0Rpc2FibGVkIDogc3RhdGUuZGlzYWJsZWRLZXlzLmhhcyhrZXkpO1xyXG4gICAgdmFyIF9wcm9wc19pc1NlbGVjdGVkO1xyXG4gICAgbGV0IGlzU2VsZWN0ZWQgPSAoX3Byb3BzX2lzU2VsZWN0ZWQgPSBwcm9wcy5pc1NlbGVjdGVkKSAhPT0gbnVsbCAmJiBfcHJvcHNfaXNTZWxlY3RlZCAhPT0gdm9pZCAwID8gX3Byb3BzX2lzU2VsZWN0ZWQgOiBzdGF0ZS5zZWxlY3Rpb25NYW5hZ2VyLmlzU2VsZWN0ZWQoa2V5KTtcclxuICAgIHZhciBfcHJvcHNfc2hvdWxkU2VsZWN0T25QcmVzc1VwO1xyXG4gICAgbGV0IHNob3VsZFNlbGVjdE9uUHJlc3NVcCA9IChfcHJvcHNfc2hvdWxkU2VsZWN0T25QcmVzc1VwID0gcHJvcHMuc2hvdWxkU2VsZWN0T25QcmVzc1VwKSAhPT0gbnVsbCAmJiBfcHJvcHNfc2hvdWxkU2VsZWN0T25QcmVzc1VwICE9PSB2b2lkIDAgPyBfcHJvcHNfc2hvdWxkU2VsZWN0T25QcmVzc1VwIDogZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhLnNob3VsZFNlbGVjdE9uUHJlc3NVcDtcclxuICAgIHZhciBfcHJvcHNfc2hvdWxkRm9jdXNPbkhvdmVyO1xyXG4gICAgbGV0IHNob3VsZEZvY3VzT25Ib3ZlciA9IChfcHJvcHNfc2hvdWxkRm9jdXNPbkhvdmVyID0gcHJvcHMuc2hvdWxkRm9jdXNPbkhvdmVyKSAhPT0gbnVsbCAmJiBfcHJvcHNfc2hvdWxkRm9jdXNPbkhvdmVyICE9PSB2b2lkIDAgPyBfcHJvcHNfc2hvdWxkRm9jdXNPbkhvdmVyIDogZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhLnNob3VsZEZvY3VzT25Ib3ZlcjtcclxuICAgIHZhciBfcHJvcHNfc2hvdWxkVXNlVmlydHVhbEZvY3VzO1xyXG4gICAgbGV0IHNob3VsZFVzZVZpcnR1YWxGb2N1cyA9IChfcHJvcHNfc2hvdWxkVXNlVmlydHVhbEZvY3VzID0gcHJvcHMuc2hvdWxkVXNlVmlydHVhbEZvY3VzKSAhPT0gbnVsbCAmJiBfcHJvcHNfc2hvdWxkVXNlVmlydHVhbEZvY3VzICE9PSB2b2lkIDAgPyBfcHJvcHNfc2hvdWxkVXNlVmlydHVhbEZvY3VzIDogZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhLnNob3VsZFVzZVZpcnR1YWxGb2N1cztcclxuICAgIHZhciBfcHJvcHNfaXNWaXJ0dWFsaXplZDtcclxuICAgIGxldCBpc1ZpcnR1YWxpemVkID0gKF9wcm9wc19pc1ZpcnR1YWxpemVkID0gcHJvcHMuaXNWaXJ0dWFsaXplZCkgIT09IG51bGwgJiYgX3Byb3BzX2lzVmlydHVhbGl6ZWQgIT09IHZvaWQgMCA/IF9wcm9wc19pc1ZpcnR1YWxpemVkIDogZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhLmlzVmlydHVhbGl6ZWQ7XHJcbiAgICBsZXQgbGFiZWxJZCA9ICgwLCAkZnJXTUMkdXNlU2xvdElkKSgpO1xyXG4gICAgbGV0IGRlc2NyaXB0aW9uSWQgPSAoMCwgJGZyV01DJHVzZVNsb3RJZCkoKTtcclxuICAgIGxldCBvcHRpb25Qcm9wcyA9IHtcclxuICAgICAgICByb2xlOiBcIm9wdGlvblwiLFxyXG4gICAgICAgIFwiYXJpYS1kaXNhYmxlZFwiOiBpc0Rpc2FibGVkIHx8IHVuZGVmaW5lZCxcclxuICAgICAgICBcImFyaWEtc2VsZWN0ZWRcIjogc3RhdGUuc2VsZWN0aW9uTWFuYWdlci5zZWxlY3Rpb25Nb2RlICE9PSBcIm5vbmVcIiA/IGlzU2VsZWN0ZWQgOiB1bmRlZmluZWRcclxuICAgIH07XHJcbiAgICAvLyBTYWZhcmkgd2l0aCBWb2ljZU92ZXIgb24gbWFjT1MgbWlzcmVhZHMgb3B0aW9ucyB3aXRoIGFyaWEtbGFiZWxsZWRieSBvciBhcmlhLWxhYmVsIGFzIHNpbXBseSBcInRleHRcIi5cclxuICAgIC8vIFdlIHNob3VsZCBub3QgbWFwIHNsb3RzIHRvIHRoZSBsYWJlbCBhbmQgZGVzY3JpcHRpb24gb24gU2FmYXJpIGFuZCBpbnN0ZWFkIGp1c3QgaGF2ZSBWb2ljZU92ZXIgcmVhZCB0aGUgdGV4dENvbnRlbnQuXHJcbiAgICAvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjA5Mjc5XHJcbiAgICBpZiAoISgoMCwgJGZyV01DJGlzTWFjKSgpICYmICgwLCAkZnJXTUMkaXNXZWJLaXQpKCkpKSB7XHJcbiAgICAgICAgb3B0aW9uUHJvcHNbXCJhcmlhLWxhYmVsXCJdID0gcHJvcHNbXCJhcmlhLWxhYmVsXCJdO1xyXG4gICAgICAgIG9wdGlvblByb3BzW1wiYXJpYS1sYWJlbGxlZGJ5XCJdID0gbGFiZWxJZDtcclxuICAgICAgICBvcHRpb25Qcm9wc1tcImFyaWEtZGVzY3JpYmVkYnlcIl0gPSBkZXNjcmlwdGlvbklkO1xyXG4gICAgfVxyXG4gICAgbGV0IGl0ZW0gPSBzdGF0ZS5jb2xsZWN0aW9uLmdldEl0ZW0oa2V5KTtcclxuICAgIGlmIChpc1ZpcnR1YWxpemVkKSB7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gTnVtYmVyKGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogaXRlbS5pbmRleCk7XHJcbiAgICAgICAgb3B0aW9uUHJvcHNbXCJhcmlhLXBvc2luc2V0XCJdID0gTnVtYmVyLmlzTmFOKGluZGV4KSA/IHVuZGVmaW5lZCA6IGluZGV4ICsgMTtcclxuICAgICAgICBvcHRpb25Qcm9wc1tcImFyaWEtc2V0c2l6ZVwiXSA9ICgwLCAkZnJXTUMkZ2V0SXRlbUNvdW50KShzdGF0ZS5jb2xsZWN0aW9uKTtcclxuICAgIH1cclxuICAgIGxldCB7IGl0ZW1Qcm9wczogaXRlbVByb3BzLCBpc1ByZXNzZWQ6IGlzUHJlc3NlZCwgaXNGb2N1c2VkOiBpc0ZvY3VzZWQsIGhhc0FjdGlvbjogaGFzQWN0aW9uLCBhbGxvd3NTZWxlY3Rpb246IGFsbG93c1NlbGVjdGlvbiB9ID0gKDAsICRmcldNQyR1c2VTZWxlY3RhYmxlSXRlbSkoe1xyXG4gICAgICAgIHNlbGVjdGlvbk1hbmFnZXI6IHN0YXRlLnNlbGVjdGlvbk1hbmFnZXIsXHJcbiAgICAgICAga2V5OiBrZXksXHJcbiAgICAgICAgcmVmOiByZWYsXHJcbiAgICAgICAgc2hvdWxkU2VsZWN0T25QcmVzc1VwOiBzaG91bGRTZWxlY3RPblByZXNzVXAsXHJcbiAgICAgICAgYWxsb3dzRGlmZmVyZW50UHJlc3NPcmlnaW46IHNob3VsZFNlbGVjdE9uUHJlc3NVcCAmJiBzaG91bGRGb2N1c09uSG92ZXIsXHJcbiAgICAgICAgaXNWaXJ0dWFsaXplZDogaXNWaXJ0dWFsaXplZCxcclxuICAgICAgICBzaG91bGRVc2VWaXJ0dWFsRm9jdXM6IHNob3VsZFVzZVZpcnR1YWxGb2N1cyxcclxuICAgICAgICBpc0Rpc2FibGVkOiBpc0Rpc2FibGVkLFxyXG4gICAgICAgIG9uQWN0aW9uOiAoZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhLm9uQWN0aW9uKSA/ICgpPT57XHJcbiAgICAgICAgICAgIHZhciBfZGF0YV9vbkFjdGlvbjtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kYXRhX29uQWN0aW9uID0gZGF0YS5vbkFjdGlvbikgPT09IG51bGwgfHwgX2RhdGFfb25BY3Rpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kYXRhX29uQWN0aW9uLmNhbGwoZGF0YSwga2V5KTtcclxuICAgICAgICB9IDogdW5kZWZpbmVkLFxyXG4gICAgICAgIGxpbmtCZWhhdmlvcjogZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhLmxpbmtCZWhhdmlvclxyXG4gICAgfSk7XHJcbiAgICBsZXQgeyBob3ZlclByb3BzOiBob3ZlclByb3BzIH0gPSAoMCwgJGZyV01DJHVzZUhvdmVyKSh7XHJcbiAgICAgICAgaXNEaXNhYmxlZDogaXNEaXNhYmxlZCB8fCAhc2hvdWxkRm9jdXNPbkhvdmVyLFxyXG4gICAgICAgIG9uSG92ZXJTdGFydCAoKSB7XHJcbiAgICAgICAgICAgIGlmICghKDAsICRmcldNQyRpc0ZvY3VzVmlzaWJsZSkoKSkge1xyXG4gICAgICAgICAgICAgICAgc3RhdGUuc2VsZWN0aW9uTWFuYWdlci5zZXRGb2N1c2VkKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUuc2VsZWN0aW9uTWFuYWdlci5zZXRGb2N1c2VkS2V5KGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIGxldCBkb21Qcm9wcyA9ICgwLCAkZnJXTUMkZmlsdGVyRE9NUHJvcHMpKGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogaXRlbS5wcm9wcywge1xyXG4gICAgICAgIGlzTGluazogISEoaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2l0ZW1fcHJvcHMgPSBpdGVtLnByb3BzKSA9PT0gbnVsbCB8fCBfaXRlbV9wcm9wcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW1fcHJvcHMuaHJlZilcclxuICAgIH0pO1xyXG4gICAgZGVsZXRlIGRvbVByb3BzLmlkO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBvcHRpb25Qcm9wczoge1xyXG4gICAgICAgICAgICAuLi5vcHRpb25Qcm9wcyxcclxuICAgICAgICAgICAgLi4uKDAsICRmcldNQyRtZXJnZVByb3BzKShkb21Qcm9wcywgaXRlbVByb3BzLCBob3ZlclByb3BzKSxcclxuICAgICAgICAgICAgaWQ6ICgwLCAkYjFmMGNhZDhhZjczMjEzYiRleHBvcnQkOTE0NTk5NTg0OGIwNTAyNSkoc3RhdGUsIGtleSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxhYmVsUHJvcHM6IHtcclxuICAgICAgICAgICAgaWQ6IGxhYmVsSWRcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRlc2NyaXB0aW9uUHJvcHM6IHtcclxuICAgICAgICAgICAgaWQ6IGRlc2NyaXB0aW9uSWRcclxuICAgICAgICB9LFxyXG4gICAgICAgIGlzRm9jdXNlZDogaXNGb2N1c2VkLFxyXG4gICAgICAgIGlzRm9jdXNWaXNpYmxlOiBpc0ZvY3VzZWQgJiYgKDAsICRmcldNQyRpc0ZvY3VzVmlzaWJsZSkoKSxcclxuICAgICAgICBpc1NlbGVjdGVkOiBpc1NlbGVjdGVkLFxyXG4gICAgICAgIGlzRGlzYWJsZWQ6IGlzRGlzYWJsZWQsXHJcbiAgICAgICAgaXNQcmVzc2VkOiBpc1ByZXNzZWQsXHJcbiAgICAgICAgYWxsb3dzU2VsZWN0aW9uOiBhbGxvd3NTZWxlY3Rpb24sXHJcbiAgICAgICAgaGFzQWN0aW9uOiBoYXNBY3Rpb25cclxuICAgIH07XHJcbn1cclxuXHJcblxyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxyXG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyBcclxuZnVuY3Rpb24gJGFmMzgzZDNiZWYxY2ZkYzkkZXhwb3J0JGMzZjlmMzk4NzZlNGJjNyhwcm9wcykge1xyXG4gICAgbGV0IHsgaGVhZGluZzogaGVhZGluZywgXCJhcmlhLWxhYmVsXCI6IGFyaWFMYWJlbCB9ID0gcHJvcHM7XHJcbiAgICBsZXQgaGVhZGluZ0lkID0gKDAsICRmcldNQyR1c2VJZCkoKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaXRlbVByb3BzOiB7XHJcbiAgICAgICAgICAgIHJvbGU6IFwicHJlc2VudGF0aW9uXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGhlYWRpbmdQcm9wczogaGVhZGluZyA/IHtcclxuICAgICAgICAgICAgLy8gVGVjaGluY2FsbHksIGxpc3Rib3ggY2Fubm90IGNvbnRhaW4gaGVhZGluZ3MgYWNjb3JkaW5nIHRvIEFSSUEuXHJcbiAgICAgICAgICAgIC8vIFdlIGhpZGUgdGhlIGhlYWRpbmcgZnJvbSBhc3Npc3RpdmUgdGVjaG5vbG9neSwgdXNpbmcgcm9sZT1cInByZXNlbnRhdGlvblwiLFxyXG4gICAgICAgICAgICAvLyBhbmQgb25seSB1c2UgaXQgYXMgYSB2aXN1YWwgbGFiZWwgZm9yIHRoZSBuZXN0ZWQgZ3JvdXAuXHJcbiAgICAgICAgICAgIGlkOiBoZWFkaW5nSWQsXHJcbiAgICAgICAgICAgIHJvbGU6IFwicHJlc2VudGF0aW9uXCJcclxuICAgICAgICB9IDoge30sXHJcbiAgICAgICAgZ3JvdXBQcm9wczoge1xyXG4gICAgICAgICAgICByb2xlOiBcImdyb3VwXCIsXHJcbiAgICAgICAgICAgIFwiYXJpYS1sYWJlbFwiOiBhcmlhTGFiZWwsXHJcbiAgICAgICAgICAgIFwiYXJpYS1sYWJlbGxlZGJ5XCI6IGhlYWRpbmcgPyBoZWFkaW5nSWQgOiB1bmRlZmluZWRcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuZXhwb3J0IHskYzEzMjEyMTI4MGVjMDEyZCRleHBvcnQkNTBlYWNiYmYxNDBhMzE0MSBhcyB1c2VMaXN0Qm94LCAkMjkzZjcwMzkwZWEwMzM3MCRleHBvcnQkNDk3ODU1ZjE0ODU4YWEzNCBhcyB1c2VPcHRpb24sICRhZjM4M2QzYmVmMWNmZGM5JGV4cG9ydCRjM2Y5ZjM5ODc2ZTRiYzcgYXMgdXNlTGlzdEJveFNlY3Rpb24sICRiMWYwY2FkOGFmNzMyMTNiJGV4cG9ydCQzNTg1ZWRlNGQwMzViZjE0IGFzIGxpc3REYXRhLCAkYjFmMGNhZDhhZjczMjEzYiRleHBvcnQkOTE0NTk5NTg0OGIwNTAyNSBhcyBnZXRJdGVtSWR9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1tb2R1bGUuanMubWFwXHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-aria/listbox/dist/import.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-aria/selection/dist/import.mjs":
/*!************************************************************!*\
  !*** ./node_modules/@react-aria/selection/dist/import.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ListKeyboardDelegate: () => (/* binding */ $2a25aae57d74318e$export$a05409b8bb224a5a),\n/* harmony export */   useSelectableCollection: () => (/* binding */ $ae20dd8cbca75726$export$d6daf82dcd84e87c),\n/* harmony export */   useSelectableItem: () => (/* binding */ $880e95eb8b93ba9a$export$ecf600387e221c37),\n/* harmony export */   useSelectableList: () => (/* binding */ $982254629710d113$export$b95089534ab7c1fd),\n/* harmony export */   useTypeSelect: () => (/* binding */ $fb3050f43d946246$export$e32c88dfddc6e1d8)\n/* harmony export */ });\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-dom */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-dom.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _react_aria_focus__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @react-aria/focus */ \"(ssr)/./node_modules/@react-aria/focus/dist/import.mjs\");\n/* harmony import */ var _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @react-aria/utils */ \"(ssr)/./node_modules/@react-aria/utils/dist/import.mjs\");\n/* harmony import */ var _react_aria_interactions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @react-aria/interactions */ \"(ssr)/./node_modules/@react-aria/interactions/dist/import.mjs\");\n/* harmony import */ var _react_aria_i18n__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @react-aria/i18n */ \"(ssr)/./node_modules/@react-aria/i18n/dist/real-module.mjs\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ /*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n\r\n\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\nfunction $feb5ffebff200149$export$d3e3bd3e26688c04(e) {\r\n    // Ctrl + Arrow Up/Arrow Down has a system wide meaning on macOS, so use Alt instead.\r\n    // On Windows and Ubuntu, Alt + Space has a system wide meaning.\r\n    return (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.isAppleDevice)() ? e.altKey : e.ctrlKey;\r\n}\r\nfunction $feb5ffebff200149$export$16792effe837dba3(e) {\r\n    if ((0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.isMac)()) return e.metaKey;\r\n    return e.ctrlKey;\r\n}\r\n\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n/**\r\n * Controls how long to wait before clearing the typeahead buffer.\r\n */ const $fb3050f43d946246$var$TYPEAHEAD_DEBOUNCE_WAIT_MS = 1000; // 1 second\r\nfunction $fb3050f43d946246$export$e32c88dfddc6e1d8(options) {\r\n    let { keyboardDelegate: keyboardDelegate, selectionManager: selectionManager, onTypeSelect: onTypeSelect } = options;\r\n    let state = (0, react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\r\n        search: \"\",\r\n        timeout: null\r\n    }).current;\r\n    let onKeyDown = (e)=>{\r\n        let character = $fb3050f43d946246$var$getStringForKey(e.key);\r\n        if (!character || e.ctrlKey || e.metaKey || !e.currentTarget.contains(e.target)) return;\r\n        // Do not propagate the Spacebar event if it's meant to be part of the search.\r\n        // When we time out, the search term becomes empty, hence the check on length.\r\n        // Trimming is to account for the case of pressing the Spacebar more than once,\r\n        // which should cycle through the selection/deselection of the focused item.\r\n        if (character === \" \" && state.search.trim().length > 0) {\r\n            e.preventDefault();\r\n            if (!(\"continuePropagation\" in e)) e.stopPropagation();\r\n        }\r\n        state.search += character;\r\n        // Use the delegate to find a key to focus.\r\n        // Prioritize items after the currently focused item, falling back to searching the whole list.\r\n        let key = keyboardDelegate.getKeyForSearch(state.search, selectionManager.focusedKey);\r\n        // If no key found, search from the top.\r\n        if (key == null) key = keyboardDelegate.getKeyForSearch(state.search);\r\n        if (key != null) {\r\n            selectionManager.setFocusedKey(key);\r\n            if (onTypeSelect) onTypeSelect(key);\r\n        }\r\n        clearTimeout(state.timeout);\r\n        state.timeout = setTimeout(()=>{\r\n            state.search = \"\";\r\n        }, $fb3050f43d946246$var$TYPEAHEAD_DEBOUNCE_WAIT_MS);\r\n    };\r\n    return {\r\n        typeSelectProps: {\r\n            // Using a capturing listener to catch the keydown event before\r\n            // other hooks in order to handle the Spacebar event.\r\n            onKeyDownCapture: keyboardDelegate.getKeyForSearch ? onKeyDown : null\r\n        }\r\n    };\r\n}\r\nfunction $fb3050f43d946246$var$getStringForKey(key) {\r\n    // If the key is of length 1, it is an ASCII value.\r\n    // Otherwise, if there are no ASCII characters in the key name,\r\n    // it is a Unicode character.\r\n    // See https://www.w3.org/TR/uievents-key/\r\n    if (key.length === 1 || !/^[A-Z]/i.test(key)) return key;\r\n    return \"\";\r\n}\r\n\r\n\r\nfunction $ae20dd8cbca75726$export$d6daf82dcd84e87c(options) {\r\n    let { selectionManager: manager, keyboardDelegate: delegate, ref: ref, autoFocus: autoFocus = false, shouldFocusWrap: shouldFocusWrap = false, disallowEmptySelection: disallowEmptySelection = false, disallowSelectAll: disallowSelectAll = false, selectOnFocus: selectOnFocus = manager.selectionBehavior === \"replace\", disallowTypeAhead: disallowTypeAhead = false, shouldUseVirtualFocus: shouldUseVirtualFocus, allowsTabNavigation: allowsTabNavigation = false, isVirtualized: isVirtualized, scrollRef: // If no scrollRef is provided, assume the collection ref is the scrollable region\r\n    scrollRef = ref, linkBehavior: linkBehavior = \"action\" } = options;\r\n    let { direction: direction } = (0, _react_aria_i18n__WEBPACK_IMPORTED_MODULE_3__.useLocale)();\r\n    let router = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\r\n    let onKeyDown = (e)=>{\r\n        // Prevent option + tab from doing anything since it doesn't move focus to the cells, only buttons/checkboxes\r\n        if (e.altKey && e.key === \"Tab\") e.preventDefault();\r\n        // Keyboard events bubble through portals. Don't handle keyboard events\r\n        // for elements outside the collection (e.g. menus).\r\n        if (!ref.current.contains(e.target)) return;\r\n        const navigateToKey = (key, childFocus)=>{\r\n            if (key != null) {\r\n                if (manager.isLink(key) && linkBehavior === \"selection\" && selectOnFocus && !(0, $feb5ffebff200149$export$d3e3bd3e26688c04)(e)) {\r\n                    // Set focused key and re-render synchronously to bring item into view if needed.\r\n                    (0, react_dom__WEBPACK_IMPORTED_MODULE_0__.flushSync)(()=>{\r\n                        manager.setFocusedKey(key, childFocus);\r\n                    });\r\n                    let item = scrollRef.current.querySelector(`[data-key=\"${CSS.escape(key.toString())}\"]`);\r\n                    router.open(item, e);\r\n                    return;\r\n                }\r\n                manager.setFocusedKey(key, childFocus);\r\n                if (manager.isLink(key) && linkBehavior === \"override\") return;\r\n                if (e.shiftKey && manager.selectionMode === \"multiple\") manager.extendSelection(key);\r\n                else if (selectOnFocus && !(0, $feb5ffebff200149$export$d3e3bd3e26688c04)(e)) manager.replaceSelection(key);\r\n            }\r\n        };\r\n        switch(e.key){\r\n            case \"ArrowDown\":\r\n                if (delegate.getKeyBelow) {\r\n                    var _delegate_getFirstKey, _delegate_getFirstKey1;\r\n                    e.preventDefault();\r\n                    let nextKey = manager.focusedKey != null ? delegate.getKeyBelow(manager.focusedKey) : (_delegate_getFirstKey = delegate.getFirstKey) === null || _delegate_getFirstKey === void 0 ? void 0 : _delegate_getFirstKey.call(delegate);\r\n                    if (nextKey == null && shouldFocusWrap) nextKey = (_delegate_getFirstKey1 = delegate.getFirstKey) === null || _delegate_getFirstKey1 === void 0 ? void 0 : _delegate_getFirstKey1.call(delegate, manager.focusedKey);\r\n                    navigateToKey(nextKey);\r\n                }\r\n                break;\r\n            case \"ArrowUp\":\r\n                if (delegate.getKeyAbove) {\r\n                    var _delegate_getLastKey, _delegate_getLastKey1;\r\n                    e.preventDefault();\r\n                    let nextKey = manager.focusedKey != null ? delegate.getKeyAbove(manager.focusedKey) : (_delegate_getLastKey = delegate.getLastKey) === null || _delegate_getLastKey === void 0 ? void 0 : _delegate_getLastKey.call(delegate);\r\n                    if (nextKey == null && shouldFocusWrap) nextKey = (_delegate_getLastKey1 = delegate.getLastKey) === null || _delegate_getLastKey1 === void 0 ? void 0 : _delegate_getLastKey1.call(delegate, manager.focusedKey);\r\n                    navigateToKey(nextKey);\r\n                }\r\n                break;\r\n            case \"ArrowLeft\":\r\n                if (delegate.getKeyLeftOf) {\r\n                    var _delegate_getFirstKey2, _delegate_getLastKey2;\r\n                    e.preventDefault();\r\n                    let nextKey = delegate.getKeyLeftOf(manager.focusedKey);\r\n                    if (nextKey == null && shouldFocusWrap) nextKey = direction === \"rtl\" ? (_delegate_getFirstKey2 = delegate.getFirstKey) === null || _delegate_getFirstKey2 === void 0 ? void 0 : _delegate_getFirstKey2.call(delegate, manager.focusedKey) : (_delegate_getLastKey2 = delegate.getLastKey) === null || _delegate_getLastKey2 === void 0 ? void 0 : _delegate_getLastKey2.call(delegate, manager.focusedKey);\r\n                    navigateToKey(nextKey, direction === \"rtl\" ? \"first\" : \"last\");\r\n                }\r\n                break;\r\n            case \"ArrowRight\":\r\n                if (delegate.getKeyRightOf) {\r\n                    var _delegate_getLastKey3, _delegate_getFirstKey3;\r\n                    e.preventDefault();\r\n                    let nextKey = delegate.getKeyRightOf(manager.focusedKey);\r\n                    if (nextKey == null && shouldFocusWrap) nextKey = direction === \"rtl\" ? (_delegate_getLastKey3 = delegate.getLastKey) === null || _delegate_getLastKey3 === void 0 ? void 0 : _delegate_getLastKey3.call(delegate, manager.focusedKey) : (_delegate_getFirstKey3 = delegate.getFirstKey) === null || _delegate_getFirstKey3 === void 0 ? void 0 : _delegate_getFirstKey3.call(delegate, manager.focusedKey);\r\n                    navigateToKey(nextKey, direction === \"rtl\" ? \"last\" : \"first\");\r\n                }\r\n                break;\r\n            case \"Home\":\r\n                if (delegate.getFirstKey) {\r\n                    e.preventDefault();\r\n                    let firstKey = delegate.getFirstKey(manager.focusedKey, (0, $feb5ffebff200149$export$16792effe837dba3)(e));\r\n                    manager.setFocusedKey(firstKey);\r\n                    if ((0, $feb5ffebff200149$export$16792effe837dba3)(e) && e.shiftKey && manager.selectionMode === \"multiple\") manager.extendSelection(firstKey);\r\n                    else if (selectOnFocus) manager.replaceSelection(firstKey);\r\n                }\r\n                break;\r\n            case \"End\":\r\n                if (delegate.getLastKey) {\r\n                    e.preventDefault();\r\n                    let lastKey = delegate.getLastKey(manager.focusedKey, (0, $feb5ffebff200149$export$16792effe837dba3)(e));\r\n                    manager.setFocusedKey(lastKey);\r\n                    if ((0, $feb5ffebff200149$export$16792effe837dba3)(e) && e.shiftKey && manager.selectionMode === \"multiple\") manager.extendSelection(lastKey);\r\n                    else if (selectOnFocus) manager.replaceSelection(lastKey);\r\n                }\r\n                break;\r\n            case \"PageDown\":\r\n                if (delegate.getKeyPageBelow) {\r\n                    e.preventDefault();\r\n                    let nextKey = delegate.getKeyPageBelow(manager.focusedKey);\r\n                    navigateToKey(nextKey);\r\n                }\r\n                break;\r\n            case \"PageUp\":\r\n                if (delegate.getKeyPageAbove) {\r\n                    e.preventDefault();\r\n                    let nextKey = delegate.getKeyPageAbove(manager.focusedKey);\r\n                    navigateToKey(nextKey);\r\n                }\r\n                break;\r\n            case \"a\":\r\n                if ((0, $feb5ffebff200149$export$16792effe837dba3)(e) && manager.selectionMode === \"multiple\" && disallowSelectAll !== true) {\r\n                    e.preventDefault();\r\n                    manager.selectAll();\r\n                }\r\n                break;\r\n            case \"Escape\":\r\n                e.preventDefault();\r\n                if (!disallowEmptySelection) manager.clearSelection();\r\n                break;\r\n            case \"Tab\":\r\n                if (!allowsTabNavigation) {\r\n                    // There may be elements that are \"tabbable\" inside a collection (e.g. in a grid cell).\r\n                    // However, collections should be treated as a single tab stop, with arrow key navigation internally.\r\n                    // We don't control the rendering of these, so we can't override the tabIndex to prevent tabbing.\r\n                    // Instead, we handle the Tab key, and move focus manually to the first/last tabbable element\r\n                    // in the collection, so that the browser default behavior will apply starting from that element\r\n                    // rather than the currently focused one.\r\n                    if (e.shiftKey) ref.current.focus();\r\n                    else {\r\n                        let walker = (0, _react_aria_focus__WEBPACK_IMPORTED_MODULE_4__.getFocusableTreeWalker)(ref.current, {\r\n                            tabbable: true\r\n                        });\r\n                        let next;\r\n                        let last;\r\n                        do {\r\n                            last = walker.lastChild();\r\n                            if (last) next = last;\r\n                        }while (last);\r\n                        if (next && !next.contains(document.activeElement)) (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.focusWithoutScrolling)(next);\r\n                    }\r\n                    break;\r\n                }\r\n        }\r\n    };\r\n    // Store the scroll position so we can restore it later.\r\n    let scrollPos = (0, react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\r\n        top: 0,\r\n        left: 0\r\n    });\r\n    (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.useEvent)(scrollRef, \"scroll\", isVirtualized ? null : ()=>{\r\n        scrollPos.current = {\r\n            top: scrollRef.current.scrollTop,\r\n            left: scrollRef.current.scrollLeft\r\n        };\r\n    });\r\n    let onFocus = (e)=>{\r\n        if (manager.isFocused) {\r\n            // If a focus event bubbled through a portal, reset focus state.\r\n            if (!e.currentTarget.contains(e.target)) manager.setFocused(false);\r\n            return;\r\n        }\r\n        // Focus events can bubble through portals. Ignore these events.\r\n        if (!e.currentTarget.contains(e.target)) return;\r\n        manager.setFocused(true);\r\n        if (manager.focusedKey == null) {\r\n            let navigateToFirstKey = (key)=>{\r\n                if (key != null) {\r\n                    manager.setFocusedKey(key);\r\n                    if (selectOnFocus) manager.replaceSelection(key);\r\n                }\r\n            };\r\n            // If the user hasn't yet interacted with the collection, there will be no focusedKey set.\r\n            // Attempt to detect whether the user is tabbing forward or backward into the collection\r\n            // and either focus the first or last item accordingly.\r\n            let relatedTarget = e.relatedTarget;\r\n            var _manager_lastSelectedKey, _manager_firstSelectedKey;\r\n            if (relatedTarget && e.currentTarget.compareDocumentPosition(relatedTarget) & Node.DOCUMENT_POSITION_FOLLOWING) navigateToFirstKey((_manager_lastSelectedKey = manager.lastSelectedKey) !== null && _manager_lastSelectedKey !== void 0 ? _manager_lastSelectedKey : delegate.getLastKey());\r\n            else navigateToFirstKey((_manager_firstSelectedKey = manager.firstSelectedKey) !== null && _manager_firstSelectedKey !== void 0 ? _manager_firstSelectedKey : delegate.getFirstKey());\r\n        } else if (!isVirtualized) {\r\n            // Restore the scroll position to what it was before.\r\n            scrollRef.current.scrollTop = scrollPos.current.top;\r\n            scrollRef.current.scrollLeft = scrollPos.current.left;\r\n        }\r\n        if (!isVirtualized && manager.focusedKey != null) {\r\n            // Refocus and scroll the focused item into view if it exists within the scrollable region.\r\n            let element = scrollRef.current.querySelector(`[data-key=\"${CSS.escape(manager.focusedKey.toString())}\"]`);\r\n            if (element) {\r\n                // This prevents a flash of focus on the first/last element in the collection, or the collection itself.\r\n                if (!element.contains(document.activeElement)) (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.focusWithoutScrolling)(element);\r\n                let modality = (0, _react_aria_interactions__WEBPACK_IMPORTED_MODULE_5__.getInteractionModality)();\r\n                if (modality === \"keyboard\") (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.scrollIntoViewport)(element, {\r\n                    containingElement: ref.current\r\n                });\r\n            }\r\n        }\r\n    };\r\n    let onBlur = (e)=>{\r\n        // Don't set blurred and then focused again if moving focus within the collection.\r\n        if (!e.currentTarget.contains(e.relatedTarget)) manager.setFocused(false);\r\n    };\r\n    const autoFocusRef = (0, react__WEBPACK_IMPORTED_MODULE_1__.useRef)(autoFocus);\r\n    (0, react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\r\n        if (autoFocusRef.current) {\r\n            let focusedKey = null;\r\n            // Check focus strategy to determine which item to focus\r\n            if (autoFocus === \"first\") focusedKey = delegate.getFirstKey();\r\n            if (autoFocus === \"last\") focusedKey = delegate.getLastKey();\r\n            // If there are any selected keys, make the first one the new focus target\r\n            let selectedKeys = manager.selectedKeys;\r\n            if (selectedKeys.size) {\r\n                for (let key of selectedKeys)if (manager.canSelectItem(key)) {\r\n                    focusedKey = key;\r\n                    break;\r\n                }\r\n            }\r\n            manager.setFocused(true);\r\n            manager.setFocusedKey(focusedKey);\r\n            // If no default focus key is selected, focus the collection itself.\r\n            if (focusedKey == null && !shouldUseVirtualFocus) (0, _react_aria_focus__WEBPACK_IMPORTED_MODULE_4__.focusSafely)(ref.current);\r\n        }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n    // If not virtualized, scroll the focused element into view when the focusedKey changes.\r\n    // When virtualized, Virtualizer handles this internally.\r\n    let lastFocusedKey = (0, react__WEBPACK_IMPORTED_MODULE_1__.useRef)(manager.focusedKey);\r\n    (0, react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\r\n        let modality = (0, _react_aria_interactions__WEBPACK_IMPORTED_MODULE_5__.getInteractionModality)();\r\n        if (manager.isFocused && manager.focusedKey != null && (scrollRef === null || scrollRef === void 0 ? void 0 : scrollRef.current)) {\r\n            let element = scrollRef.current.querySelector(`[data-key=\"${CSS.escape(manager.focusedKey.toString())}\"]`);\r\n            if (element && (modality === \"keyboard\" || autoFocusRef.current)) {\r\n                if (!isVirtualized) (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.scrollIntoView)(scrollRef.current, element);\r\n                // Avoid scroll in iOS VO, since it may cause overlay to close (i.e. RAC submenu)\r\n                if (modality !== \"virtual\") (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.scrollIntoViewport)(element, {\r\n                    containingElement: ref.current\r\n                });\r\n            }\r\n        }\r\n        // If the focused key becomes null (e.g. the last item is deleted), focus the whole collection.\r\n        if (manager.isFocused && manager.focusedKey == null && lastFocusedKey.current != null) (0, _react_aria_focus__WEBPACK_IMPORTED_MODULE_4__.focusSafely)(ref.current);\r\n        lastFocusedKey.current = manager.focusedKey;\r\n        autoFocusRef.current = false;\r\n    }, [\r\n        isVirtualized,\r\n        scrollRef,\r\n        manager.focusedKey,\r\n        manager.isFocused,\r\n        ref\r\n    ]);\r\n    let handlers = {\r\n        onKeyDown: onKeyDown,\r\n        onFocus: onFocus,\r\n        onBlur: onBlur,\r\n        onMouseDown (e) {\r\n            // Ignore events that bubbled through portals.\r\n            if (scrollRef.current === e.target) // Prevent focus going to the collection when clicking on the scrollbar.\r\n            e.preventDefault();\r\n        }\r\n    };\r\n    let { typeSelectProps: typeSelectProps } = (0, $fb3050f43d946246$export$e32c88dfddc6e1d8)({\r\n        keyboardDelegate: delegate,\r\n        selectionManager: manager\r\n    });\r\n    if (!disallowTypeAhead) handlers = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.mergeProps)(typeSelectProps, handlers);\r\n    // If nothing is focused within the collection, make the collection itself tabbable.\r\n    // This will be marshalled to either the first or last item depending on where focus came from.\r\n    // If using virtual focus, don't set a tabIndex at all so that VoiceOver on iOS 14 doesn't try\r\n    // to move real DOM focus to the element anyway.\r\n    let tabIndex;\r\n    if (!shouldUseVirtualFocus) tabIndex = manager.focusedKey == null ? 0 : -1;\r\n    return {\r\n        collectionProps: {\r\n            ...handlers,\r\n            tabIndex: tabIndex\r\n        }\r\n    };\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n\r\n\r\n\r\n\r\nfunction $880e95eb8b93ba9a$export$ecf600387e221c37(options) {\r\n    let { selectionManager: manager, key: key, ref: ref, shouldSelectOnPressUp: shouldSelectOnPressUp, shouldUseVirtualFocus: shouldUseVirtualFocus, focus: focus, isDisabled: isDisabled, onAction: onAction, allowsDifferentPressOrigin: allowsDifferentPressOrigin, linkBehavior: linkBehavior = \"action\" } = options;\r\n    let router = (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\r\n    let onSelect = (e)=>{\r\n        if (e.pointerType === \"keyboard\" && (0, $feb5ffebff200149$export$d3e3bd3e26688c04)(e)) manager.toggleSelection(key);\r\n        else {\r\n            if (manager.selectionMode === \"none\") return;\r\n            if (manager.isLink(key)) {\r\n                if (linkBehavior === \"selection\") {\r\n                    router.open(ref.current, e);\r\n                    // Always set selected keys back to what they were so that select and combobox close.\r\n                    manager.setSelectedKeys(manager.selectedKeys);\r\n                    return;\r\n                } else if (linkBehavior === \"override\" || linkBehavior === \"none\") return;\r\n            }\r\n            if (manager.selectionMode === \"single\") {\r\n                if (manager.isSelected(key) && !manager.disallowEmptySelection) manager.toggleSelection(key);\r\n                else manager.replaceSelection(key);\r\n            } else if (e && e.shiftKey) manager.extendSelection(key);\r\n            else if (manager.selectionBehavior === \"toggle\" || e && ((0, $feb5ffebff200149$export$16792effe837dba3)(e) || e.pointerType === \"touch\" || e.pointerType === \"virtual\")) // if touch or virtual (VO) then we just want to toggle, otherwise it's impossible to multi select because they don't have modifier keys\r\n            manager.toggleSelection(key);\r\n            else manager.replaceSelection(key);\r\n        }\r\n    };\r\n    // Focus the associated DOM node when this item becomes the focusedKey\r\n    (0, react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\r\n        let isFocused = key === manager.focusedKey;\r\n        if (isFocused && manager.isFocused && !shouldUseVirtualFocus) {\r\n            if (focus) focus();\r\n            else if (document.activeElement !== ref.current) (0, _react_aria_focus__WEBPACK_IMPORTED_MODULE_4__.focusSafely)(ref.current);\r\n        }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [\r\n        ref,\r\n        key,\r\n        manager.focusedKey,\r\n        manager.childFocusStrategy,\r\n        manager.isFocused,\r\n        shouldUseVirtualFocus\r\n    ]);\r\n    isDisabled = isDisabled || manager.isDisabled(key);\r\n    // Set tabIndex to 0 if the element is focused, or -1 otherwise so that only the last focused\r\n    // item is tabbable.  If using virtual focus, don't set a tabIndex at all so that VoiceOver\r\n    // on iOS 14 doesn't try to move real DOM focus to the item anyway.\r\n    let itemProps = {};\r\n    if (!shouldUseVirtualFocus && !isDisabled) itemProps = {\r\n        tabIndex: key === manager.focusedKey ? 0 : -1,\r\n        onFocus (e) {\r\n            if (e.target === ref.current) manager.setFocusedKey(key);\r\n        }\r\n    };\r\n    else if (isDisabled) itemProps.onMouseDown = (e)=>{\r\n        // Prevent focus going to the body when clicking on a disabled item.\r\n        e.preventDefault();\r\n    };\r\n    // With checkbox selection, onAction (i.e. navigation) becomes primary, and occurs on a single click of the row.\r\n    // Clicking the checkbox enters selection mode, after which clicking anywhere on any row toggles selection for that row.\r\n    // With highlight selection, onAction is secondary, and occurs on double click. Single click selects the row.\r\n    // With touch, onAction occurs on single tap, and long press enters selection mode.\r\n    let isLinkOverride = manager.isLink(key) && linkBehavior === \"override\";\r\n    let hasLinkAction = manager.isLink(key) && linkBehavior !== \"selection\" && linkBehavior !== \"none\";\r\n    let allowsSelection = !isDisabled && manager.canSelectItem(key) && !isLinkOverride;\r\n    let allowsActions = (onAction || hasLinkAction) && !isDisabled;\r\n    let hasPrimaryAction = allowsActions && (manager.selectionBehavior === \"replace\" ? !allowsSelection : !allowsSelection || manager.isEmpty);\r\n    let hasSecondaryAction = allowsActions && allowsSelection && manager.selectionBehavior === \"replace\";\r\n    let hasAction = hasPrimaryAction || hasSecondaryAction;\r\n    let modality = (0, react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\r\n    let longPressEnabled = hasAction && allowsSelection;\r\n    let longPressEnabledOnPressStart = (0, react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\r\n    let hadPrimaryActionOnPressStart = (0, react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\r\n    let performAction = (e)=>{\r\n        if (onAction) onAction();\r\n        if (hasLinkAction) router.open(ref.current, e);\r\n    };\r\n    // By default, selection occurs on pointer down. This can be strange if selecting an\r\n    // item causes the UI to disappear immediately (e.g. menus).\r\n    // If shouldSelectOnPressUp is true, we use onPressUp instead of onPressStart.\r\n    // onPress requires a pointer down event on the same element as pointer up. For menus,\r\n    // we want to be able to have the pointer down on the trigger that opens the menu and\r\n    // the pointer up on the menu item rather than requiring a separate press.\r\n    // For keyboard events, selection still occurs on key down.\r\n    let itemPressProps = {};\r\n    if (shouldSelectOnPressUp) {\r\n        itemPressProps.onPressStart = (e)=>{\r\n            modality.current = e.pointerType;\r\n            longPressEnabledOnPressStart.current = longPressEnabled;\r\n            if (e.pointerType === \"keyboard\" && (!hasAction || $880e95eb8b93ba9a$var$isSelectionKey())) onSelect(e);\r\n        };\r\n        // If allowsDifferentPressOrigin, make selection happen on pressUp (e.g. open menu on press down, selection on menu item happens on press up.)\r\n        // Otherwise, have selection happen onPress (prevents listview row selection when clicking on interactable elements in the row)\r\n        if (!allowsDifferentPressOrigin) itemPressProps.onPress = (e)=>{\r\n            if (hasPrimaryAction || hasSecondaryAction && e.pointerType !== \"mouse\") {\r\n                if (e.pointerType === \"keyboard\" && !$880e95eb8b93ba9a$var$isActionKey()) return;\r\n                performAction(e);\r\n            } else if (e.pointerType !== \"keyboard\" && allowsSelection) onSelect(e);\r\n        };\r\n        else {\r\n            itemPressProps.onPressUp = hasPrimaryAction ? null : (e)=>{\r\n                if (e.pointerType !== \"keyboard\" && allowsSelection) onSelect(e);\r\n            };\r\n            itemPressProps.onPress = hasPrimaryAction ? performAction : null;\r\n        }\r\n    } else {\r\n        itemPressProps.onPressStart = (e)=>{\r\n            modality.current = e.pointerType;\r\n            longPressEnabledOnPressStart.current = longPressEnabled;\r\n            hadPrimaryActionOnPressStart.current = hasPrimaryAction;\r\n            // Select on mouse down unless there is a primary action which will occur on mouse up.\r\n            // For keyboard, select on key down. If there is an action, the Space key selects on key down,\r\n            // and the Enter key performs onAction on key up.\r\n            if (allowsSelection && (e.pointerType === \"mouse\" && !hasPrimaryAction || e.pointerType === \"keyboard\" && (!allowsActions || $880e95eb8b93ba9a$var$isSelectionKey()))) onSelect(e);\r\n        };\r\n        itemPressProps.onPress = (e)=>{\r\n            // Selection occurs on touch up. Primary actions always occur on pointer up.\r\n            // Both primary and secondary actions occur on Enter key up. The only exception\r\n            // is secondary actions, which occur on double click with a mouse.\r\n            if (e.pointerType === \"touch\" || e.pointerType === \"pen\" || e.pointerType === \"virtual\" || e.pointerType === \"keyboard\" && hasAction && $880e95eb8b93ba9a$var$isActionKey() || e.pointerType === \"mouse\" && hadPrimaryActionOnPressStart.current) {\r\n                if (hasAction) performAction(e);\r\n                else if (allowsSelection) onSelect(e);\r\n            }\r\n        };\r\n    }\r\n    itemProps[\"data-key\"] = key;\r\n    itemPressProps.preventFocusOnPress = shouldUseVirtualFocus;\r\n    let { pressProps: pressProps, isPressed: isPressed } = (0, _react_aria_interactions__WEBPACK_IMPORTED_MODULE_5__.usePress)(itemPressProps);\r\n    // Double clicking with a mouse with selectionBehavior = 'replace' performs an action.\r\n    let onDoubleClick = hasSecondaryAction ? (e)=>{\r\n        if (modality.current === \"mouse\") {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            performAction(e);\r\n        }\r\n    } : undefined;\r\n    // Long pressing an item with touch when selectionBehavior = 'replace' switches the selection behavior\r\n    // to 'toggle'. This changes the single tap behavior from performing an action (i.e. navigating) to\r\n    // selecting, and may toggle the appearance of a UI affordance like checkboxes on each item.\r\n    let { longPressProps: longPressProps } = (0, _react_aria_interactions__WEBPACK_IMPORTED_MODULE_5__.useLongPress)({\r\n        isDisabled: !longPressEnabled,\r\n        onLongPress (e) {\r\n            if (e.pointerType === \"touch\") {\r\n                onSelect(e);\r\n                manager.setSelectionBehavior(\"toggle\");\r\n            }\r\n        }\r\n    });\r\n    // Prevent native drag and drop on long press if we also select on long press.\r\n    // Once the user is in selection mode, they can long press again to drag.\r\n    // Use a capturing listener to ensure this runs before useDrag, regardless of\r\n    // the order the props get merged.\r\n    let onDragStartCapture = (e)=>{\r\n        if (modality.current === \"touch\" && longPressEnabledOnPressStart.current) e.preventDefault();\r\n    };\r\n    // Prevent default on link clicks so that we control exactly\r\n    // when they open (to match selection behavior).\r\n    let onClick = manager.isLink(key) ? (e)=>{\r\n        if (!(0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.openLink).isOpening) e.preventDefault();\r\n    } : undefined;\r\n    return {\r\n        itemProps: (0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.mergeProps)(itemProps, allowsSelection || hasPrimaryAction ? pressProps : {}, longPressEnabled ? longPressProps : {}, {\r\n            onDoubleClick: onDoubleClick,\r\n            onDragStartCapture: onDragStartCapture,\r\n            onClick: onClick\r\n        }),\r\n        isPressed: isPressed,\r\n        isSelected: manager.isSelected(key),\r\n        isFocused: manager.isFocused && manager.focusedKey === key,\r\n        isDisabled: isDisabled,\r\n        allowsSelection: allowsSelection,\r\n        hasAction: hasAction\r\n    };\r\n}\r\nfunction $880e95eb8b93ba9a$var$isActionKey() {\r\n    let event = window.event;\r\n    return (event === null || event === void 0 ? void 0 : event.key) === \"Enter\";\r\n}\r\nfunction $880e95eb8b93ba9a$var$isSelectionKey() {\r\n    let event = window.event;\r\n    return (event === null || event === void 0 ? void 0 : event.key) === \" \" || (event === null || event === void 0 ? void 0 : event.code) === \"Space\";\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\nclass $2a25aae57d74318e$export$a05409b8bb224a5a {\r\n    getNextKey(key) {\r\n        key = this.collection.getKeyAfter(key);\r\n        while(key != null){\r\n            let item = this.collection.getItem(key);\r\n            if (item.type === \"item\" && !this.disabledKeys.has(key)) return key;\r\n            key = this.collection.getKeyAfter(key);\r\n        }\r\n        return null;\r\n    }\r\n    getPreviousKey(key) {\r\n        key = this.collection.getKeyBefore(key);\r\n        while(key != null){\r\n            let item = this.collection.getItem(key);\r\n            if (item.type === \"item\" && !this.disabledKeys.has(key)) return key;\r\n            key = this.collection.getKeyBefore(key);\r\n        }\r\n        return null;\r\n    }\r\n    findKey(key, nextKey, shouldSkip) {\r\n        let item = this.getItem(key);\r\n        if (!item) return null;\r\n        // Find the item above or below in the same column.\r\n        let prevRect = item.getBoundingClientRect();\r\n        do {\r\n            key = nextKey(key);\r\n            item = this.getItem(key);\r\n        }while (item && shouldSkip(prevRect, item.getBoundingClientRect()));\r\n        return key;\r\n    }\r\n    isSameRow(prevRect, itemRect) {\r\n        return prevRect.top === itemRect.top || prevRect.left !== itemRect.left;\r\n    }\r\n    isSameColumn(prevRect, itemRect) {\r\n        return prevRect.left === itemRect.left || prevRect.top !== itemRect.top;\r\n    }\r\n    getKeyBelow(key) {\r\n        if (this.layout === \"grid\" && this.orientation === \"vertical\") return this.findKey(key, (key)=>this.getNextKey(key), this.isSameRow);\r\n        else return this.getNextKey(key);\r\n    }\r\n    getKeyAbove(key) {\r\n        if (this.layout === \"grid\" && this.orientation === \"vertical\") return this.findKey(key, (key)=>this.getPreviousKey(key), this.isSameRow);\r\n        else return this.getPreviousKey(key);\r\n    }\r\n    getNextColumn(key, right) {\r\n        return right ? this.getPreviousKey(key) : this.getNextKey(key);\r\n    }\r\n    getKeyRightOf(key) {\r\n        if (this.layout === \"grid\") {\r\n            if (this.orientation === \"vertical\") return this.getNextColumn(key, this.direction === \"rtl\");\r\n            else return this.findKey(key, (key)=>this.getNextColumn(key, this.direction === \"rtl\"), this.isSameColumn);\r\n        } else if (this.orientation === \"horizontal\") return this.getNextColumn(key, this.direction === \"rtl\");\r\n        return null;\r\n    }\r\n    getKeyLeftOf(key) {\r\n        if (this.layout === \"grid\") {\r\n            if (this.orientation === \"vertical\") return this.getNextColumn(key, this.direction === \"ltr\");\r\n            else return this.findKey(key, (key)=>this.getNextColumn(key, this.direction === \"ltr\"), this.isSameColumn);\r\n        } else if (this.orientation === \"horizontal\") return this.getNextColumn(key, this.direction === \"ltr\");\r\n        return null;\r\n    }\r\n    getFirstKey() {\r\n        let key = this.collection.getFirstKey();\r\n        while(key != null){\r\n            let item = this.collection.getItem(key);\r\n            if ((item === null || item === void 0 ? void 0 : item.type) === \"item\" && !this.disabledKeys.has(key)) return key;\r\n            key = this.collection.getKeyAfter(key);\r\n        }\r\n        return null;\r\n    }\r\n    getLastKey() {\r\n        let key = this.collection.getLastKey();\r\n        while(key != null){\r\n            let item = this.collection.getItem(key);\r\n            if (item.type === \"item\" && !this.disabledKeys.has(key)) return key;\r\n            key = this.collection.getKeyBefore(key);\r\n        }\r\n        return null;\r\n    }\r\n    getItem(key) {\r\n        return this.ref.current.querySelector(`[data-key=\"${CSS.escape(key.toString())}\"]`);\r\n    }\r\n    getKeyPageAbove(key) {\r\n        let menu = this.ref.current;\r\n        let item = this.getItem(key);\r\n        if (!item) return null;\r\n        if (!(0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.isScrollable)(menu)) return this.getFirstKey();\r\n        let containerRect = menu.getBoundingClientRect();\r\n        let itemRect = item.getBoundingClientRect();\r\n        if (this.orientation === \"horizontal\") {\r\n            let containerX = containerRect.x - menu.scrollLeft;\r\n            let pageX = Math.max(0, itemRect.x - containerX + itemRect.width - containerRect.width);\r\n            while(item && itemRect.x - containerX > pageX){\r\n                key = this.getKeyAbove(key);\r\n                item = key == null ? null : this.getItem(key);\r\n                itemRect = item === null || item === void 0 ? void 0 : item.getBoundingClientRect();\r\n            }\r\n        } else {\r\n            let containerY = containerRect.y - menu.scrollTop;\r\n            let pageY = Math.max(0, itemRect.y - containerY + itemRect.height - containerRect.height);\r\n            while(item && itemRect.y - containerY > pageY){\r\n                key = this.getKeyAbove(key);\r\n                item = key == null ? null : this.getItem(key);\r\n                itemRect = item === null || item === void 0 ? void 0 : item.getBoundingClientRect();\r\n            }\r\n        }\r\n        return key !== null && key !== void 0 ? key : this.getFirstKey();\r\n    }\r\n    getKeyPageBelow(key) {\r\n        let menu = this.ref.current;\r\n        let item = this.getItem(key);\r\n        if (!item) return null;\r\n        if (!(0, _react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.isScrollable)(menu)) return this.getLastKey();\r\n        let containerRect = menu.getBoundingClientRect();\r\n        let itemRect = item.getBoundingClientRect();\r\n        if (this.orientation === \"horizontal\") {\r\n            let containerX = containerRect.x - menu.scrollLeft;\r\n            let pageX = Math.min(menu.scrollWidth, itemRect.x - containerX - itemRect.width + containerRect.width);\r\n            while(item && itemRect.x - containerX < pageX){\r\n                key = this.getKeyBelow(key);\r\n                item = key == null ? null : this.getItem(key);\r\n                itemRect = item === null || item === void 0 ? void 0 : item.getBoundingClientRect();\r\n            }\r\n        } else {\r\n            let containerY = containerRect.y - menu.scrollTop;\r\n            let pageY = Math.min(menu.scrollHeight, itemRect.y - containerY - itemRect.height + containerRect.height);\r\n            while(item && itemRect.y - containerY < pageY){\r\n                key = this.getKeyBelow(key);\r\n                item = key == null ? null : this.getItem(key);\r\n                itemRect = item === null || item === void 0 ? void 0 : item.getBoundingClientRect();\r\n            }\r\n        }\r\n        return key !== null && key !== void 0 ? key : this.getLastKey();\r\n    }\r\n    getKeyForSearch(search, fromKey) {\r\n        if (!this.collator) return null;\r\n        let collection = this.collection;\r\n        let key = fromKey || this.getFirstKey();\r\n        while(key != null){\r\n            let item = collection.getItem(key);\r\n            let substring = item.textValue.slice(0, search.length);\r\n            if (item.textValue && this.collator.compare(substring, search) === 0) return key;\r\n            key = this.getKeyBelow(key);\r\n        }\r\n        return null;\r\n    }\r\n    constructor(...args){\r\n        if (args.length === 1) {\r\n            let opts = args[0];\r\n            this.collection = opts.collection;\r\n            this.ref = opts.ref;\r\n            this.collator = opts.collator;\r\n            this.disabledKeys = opts.disabledKeys || new Set();\r\n            this.orientation = opts.orientation;\r\n            this.direction = opts.direction;\r\n            this.layout = opts.layout || \"stack\";\r\n        } else {\r\n            this.collection = args[0];\r\n            this.disabledKeys = args[1];\r\n            this.ref = args[2];\r\n            this.collator = args[3];\r\n            this.layout = \"stack\";\r\n            this.orientation = \"vertical\";\r\n        }\r\n        // If this is a vertical stack, remove the left/right methods completely\r\n        // so they aren't called by useDroppableCollection.\r\n        if (this.layout === \"stack\" && this.orientation === \"vertical\") {\r\n            this.getKeyLeftOf = undefined;\r\n            this.getKeyRightOf = undefined;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nfunction $982254629710d113$export$b95089534ab7c1fd(props) {\r\n    let { selectionManager: selectionManager, collection: collection, disabledKeys: disabledKeys, ref: ref, keyboardDelegate: keyboardDelegate } = props;\r\n    // By default, a KeyboardDelegate is provided which uses the DOM to query layout information (e.g. for page up/page down).\r\n    // When virtualized, the layout object will be passed in as a prop and override this.\r\n    let collator = (0, _react_aria_i18n__WEBPACK_IMPORTED_MODULE_3__.useCollator)({\r\n        usage: \"search\",\r\n        sensitivity: \"base\"\r\n    });\r\n    let disabledBehavior = selectionManager.disabledBehavior;\r\n    let delegate = (0, react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>keyboardDelegate || new (0, $2a25aae57d74318e$export$a05409b8bb224a5a)(collection, disabledBehavior === \"selection\" ? new Set() : disabledKeys, ref, collator), [\r\n        keyboardDelegate,\r\n        collection,\r\n        disabledKeys,\r\n        ref,\r\n        collator,\r\n        disabledBehavior\r\n    ]);\r\n    let { collectionProps: collectionProps } = (0, $ae20dd8cbca75726$export$d6daf82dcd84e87c)({\r\n        ...props,\r\n        ref: ref,\r\n        selectionManager: selectionManager,\r\n        keyboardDelegate: delegate\r\n    });\r\n    return {\r\n        listProps: collectionProps\r\n    };\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//# sourceMappingURL=module.js.map\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvc2VsZWN0aW9uL2Rpc3QvaW1wb3J0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUF3RDtBQUNnRDtBQUNxQjtBQUNrUjtBQUM1TztBQUNqRTtBQUNsRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNERBQW9CO0FBQ25DO0FBQ0E7QUFDQSxZQUFZLG9EQUFZO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1FQUFtRTtBQUNuRTtBQUNBLFVBQVUscUdBQXFHO0FBQy9HLG9CQUFvQix5Q0FBYTtBQUNqQztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLDZEQUE2RDtBQUM3RCxVQUFVLHVCQUF1QixNQUFNLHVEQUFnQjtBQUN2RCxxQkFBcUIsd0RBQWdCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdEQUFnQjtBQUN4QztBQUNBLHFCQUFxQjtBQUNyQiw2RUFBNkUsMkJBQTJCO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMscUVBQTZCO0FBQ3RFO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIsZ0ZBQWdGLG9FQUE0QjtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUNBQWE7QUFDckM7QUFDQTtBQUNBLEtBQUs7QUFDTCxRQUFRLHVEQUFlO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0VBQXdFLDBDQUEwQztBQUNsSDtBQUNBO0FBQ0EsbUVBQW1FLG9FQUE0QjtBQUMvRixtQ0FBbUMsNEVBQTZCO0FBQ2hFLGlEQUFpRCxpRUFBeUI7QUFDMUU7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIseUNBQWE7QUFDMUMsUUFBUSw0Q0FBZ0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRUFBa0UsMERBQWtCO0FBQ3BGO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDZCQUE2Qix5Q0FBYTtBQUMxQyxRQUFRLDRDQUFnQjtBQUN4QiwyQkFBMkIsNEVBQTZCO0FBQ3hEO0FBQ0Esd0VBQXdFLDBDQUEwQztBQUNsSDtBQUNBLHdDQUF3Qyw2REFBcUI7QUFDN0Q7QUFDQSxnREFBZ0QsaUVBQXlCO0FBQ3pFO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLG1HQUFtRywwREFBa0I7QUFDckg7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsbUNBQW1DO0FBQzdDO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsMkNBQTJDLHlEQUFpQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUscVNBQXFTO0FBQy9TLHFCQUFxQix3REFBZ0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw0Q0FBZ0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLDBEQUFrQjtBQUNuRjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix5Q0FBYTtBQUNwQztBQUNBLDJDQUEyQyx5Q0FBYTtBQUN4RCwyQ0FBMkMseUNBQWE7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsK0NBQStDLE1BQU0sOERBQWU7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsVUFBVSxpQ0FBaUMsTUFBTSxrRUFBbUI7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsdURBQWU7QUFDaEMsTUFBTTtBQUNOO0FBQ0EsdUJBQXVCLHlEQUFpQixrRUFBa0Usd0NBQXdDO0FBQ2xKO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsMkJBQTJCO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsMkRBQW1CO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsMkRBQW1CO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsdUlBQXVJO0FBQ2pKO0FBQ0E7QUFDQSx1QkFBdUIseURBQWtCO0FBQ3pDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSx1QkFBdUIsMENBQWM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLG1DQUFtQztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUM2VTtBQUM3VSIsInNvdXJjZXMiOlsid2VicGFjazovL251dHJpLXNtYXJ0Ly4vbm9kZV9tb2R1bGVzL0ByZWFjdC1hcmlhL3NlbGVjdGlvbi9kaXN0L2ltcG9ydC5tanM/MjFmMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2ZsdXNoU3luYyBhcyAkZUNBSU8kZmx1c2hTeW5jfSBmcm9tIFwicmVhY3QtZG9tXCI7XHJcbmltcG9ydCB7dXNlUmVmIGFzICRlQ0FJTyR1c2VSZWYsIHVzZUVmZmVjdCBhcyAkZUNBSU8kdXNlRWZmZWN0LCB1c2VNZW1vIGFzICRlQ0FJTyR1c2VNZW1vfSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHtnZXRGb2N1c2FibGVUcmVlV2Fsa2VyIGFzICRlQ0FJTyRnZXRGb2N1c2FibGVUcmVlV2Fsa2VyLCBmb2N1c1NhZmVseSBhcyAkZUNBSU8kZm9jdXNTYWZlbHl9IGZyb20gXCJAcmVhY3QtYXJpYS9mb2N1c1wiO1xyXG5pbXBvcnQge3VzZVJvdXRlciBhcyAkZUNBSU8kdXNlUm91dGVyLCBmb2N1c1dpdGhvdXRTY3JvbGxpbmcgYXMgJGVDQUlPJGZvY3VzV2l0aG91dFNjcm9sbGluZywgdXNlRXZlbnQgYXMgJGVDQUlPJHVzZUV2ZW50LCBzY3JvbGxJbnRvVmlld3BvcnQgYXMgJGVDQUlPJHNjcm9sbEludG9WaWV3cG9ydCwgc2Nyb2xsSW50b1ZpZXcgYXMgJGVDQUlPJHNjcm9sbEludG9WaWV3LCBtZXJnZVByb3BzIGFzICRlQ0FJTyRtZXJnZVByb3BzLCBpc0FwcGxlRGV2aWNlIGFzICRlQ0FJTyRpc0FwcGxlRGV2aWNlLCBpc01hYyBhcyAkZUNBSU8kaXNNYWMsIG9wZW5MaW5rIGFzICRlQ0FJTyRvcGVuTGluaywgaXNTY3JvbGxhYmxlIGFzICRlQ0FJTyRpc1Njcm9sbGFibGV9IGZyb20gXCJAcmVhY3QtYXJpYS91dGlsc1wiO1xyXG5pbXBvcnQge2dldEludGVyYWN0aW9uTW9kYWxpdHkgYXMgJGVDQUlPJGdldEludGVyYWN0aW9uTW9kYWxpdHksIHVzZVByZXNzIGFzICRlQ0FJTyR1c2VQcmVzcywgdXNlTG9uZ1ByZXNzIGFzICRlQ0FJTyR1c2VMb25nUHJlc3N9IGZyb20gXCJAcmVhY3QtYXJpYS9pbnRlcmFjdGlvbnNcIjtcclxuaW1wb3J0IHt1c2VMb2NhbGUgYXMgJGVDQUlPJHVzZUxvY2FsZSwgdXNlQ29sbGF0b3IgYXMgJGVDQUlPJHVzZUNvbGxhdG9yfSBmcm9tIFwiQHJlYWN0LWFyaWEvaTE4blwiO1xyXG5cclxuLypcclxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gLypcclxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gXHJcblxyXG5cclxuXHJcblxyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxyXG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyBcclxuZnVuY3Rpb24gJGZlYjVmZmViZmYyMDAxNDkkZXhwb3J0JGQzZTNiZDNlMjY2ODhjMDQoZSkge1xyXG4gICAgLy8gQ3RybCArIEFycm93IFVwL0Fycm93IERvd24gaGFzIGEgc3lzdGVtIHdpZGUgbWVhbmluZyBvbiBtYWNPUywgc28gdXNlIEFsdCBpbnN0ZWFkLlxyXG4gICAgLy8gT24gV2luZG93cyBhbmQgVWJ1bnR1LCBBbHQgKyBTcGFjZSBoYXMgYSBzeXN0ZW0gd2lkZSBtZWFuaW5nLlxyXG4gICAgcmV0dXJuICgwLCAkZUNBSU8kaXNBcHBsZURldmljZSkoKSA/IGUuYWx0S2V5IDogZS5jdHJsS2V5O1xyXG59XHJcbmZ1bmN0aW9uICRmZWI1ZmZlYmZmMjAwMTQ5JGV4cG9ydCQxNjc5MmVmZmU4MzdkYmEzKGUpIHtcclxuICAgIGlmICgoMCwgJGVDQUlPJGlzTWFjKSgpKSByZXR1cm4gZS5tZXRhS2V5O1xyXG4gICAgcmV0dXJuIGUuY3RybEtleTtcclxufVxyXG5cclxuXHJcblxyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxyXG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyBcclxuLyoqXHJcbiAqIENvbnRyb2xzIGhvdyBsb25nIHRvIHdhaXQgYmVmb3JlIGNsZWFyaW5nIHRoZSB0eXBlYWhlYWQgYnVmZmVyLlxyXG4gKi8gY29uc3QgJGZiMzA1MGY0M2Q5NDYyNDYkdmFyJFRZUEVBSEVBRF9ERUJPVU5DRV9XQUlUX01TID0gMTAwMDsgLy8gMSBzZWNvbmRcclxuZnVuY3Rpb24gJGZiMzA1MGY0M2Q5NDYyNDYkZXhwb3J0JGUzMmM4OGRmZGRjNmUxZDgob3B0aW9ucykge1xyXG4gICAgbGV0IHsga2V5Ym9hcmREZWxlZ2F0ZToga2V5Ym9hcmREZWxlZ2F0ZSwgc2VsZWN0aW9uTWFuYWdlcjogc2VsZWN0aW9uTWFuYWdlciwgb25UeXBlU2VsZWN0OiBvblR5cGVTZWxlY3QgfSA9IG9wdGlvbnM7XHJcbiAgICBsZXQgc3RhdGUgPSAoMCwgJGVDQUlPJHVzZVJlZikoe1xyXG4gICAgICAgIHNlYXJjaDogXCJcIixcclxuICAgICAgICB0aW1lb3V0OiBudWxsXHJcbiAgICB9KS5jdXJyZW50O1xyXG4gICAgbGV0IG9uS2V5RG93biA9IChlKT0+e1xyXG4gICAgICAgIGxldCBjaGFyYWN0ZXIgPSAkZmIzMDUwZjQzZDk0NjI0NiR2YXIkZ2V0U3RyaW5nRm9yS2V5KGUua2V5KTtcclxuICAgICAgICBpZiAoIWNoYXJhY3RlciB8fCBlLmN0cmxLZXkgfHwgZS5tZXRhS2V5IHx8ICFlLmN1cnJlbnRUYXJnZXQuY29udGFpbnMoZS50YXJnZXQpKSByZXR1cm47XHJcbiAgICAgICAgLy8gRG8gbm90IHByb3BhZ2F0ZSB0aGUgU3BhY2ViYXIgZXZlbnQgaWYgaXQncyBtZWFudCB0byBiZSBwYXJ0IG9mIHRoZSBzZWFyY2guXHJcbiAgICAgICAgLy8gV2hlbiB3ZSB0aW1lIG91dCwgdGhlIHNlYXJjaCB0ZXJtIGJlY29tZXMgZW1wdHksIGhlbmNlIHRoZSBjaGVjayBvbiBsZW5ndGguXHJcbiAgICAgICAgLy8gVHJpbW1pbmcgaXMgdG8gYWNjb3VudCBmb3IgdGhlIGNhc2Ugb2YgcHJlc3NpbmcgdGhlIFNwYWNlYmFyIG1vcmUgdGhhbiBvbmNlLFxyXG4gICAgICAgIC8vIHdoaWNoIHNob3VsZCBjeWNsZSB0aHJvdWdoIHRoZSBzZWxlY3Rpb24vZGVzZWxlY3Rpb24gb2YgdGhlIGZvY3VzZWQgaXRlbS5cclxuICAgICAgICBpZiAoY2hhcmFjdGVyID09PSBcIiBcIiAmJiBzdGF0ZS5zZWFyY2gudHJpbSgpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAoIShcImNvbnRpbnVlUHJvcGFnYXRpb25cIiBpbiBlKSkgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3RhdGUuc2VhcmNoICs9IGNoYXJhY3RlcjtcclxuICAgICAgICAvLyBVc2UgdGhlIGRlbGVnYXRlIHRvIGZpbmQgYSBrZXkgdG8gZm9jdXMuXHJcbiAgICAgICAgLy8gUHJpb3JpdGl6ZSBpdGVtcyBhZnRlciB0aGUgY3VycmVudGx5IGZvY3VzZWQgaXRlbSwgZmFsbGluZyBiYWNrIHRvIHNlYXJjaGluZyB0aGUgd2hvbGUgbGlzdC5cclxuICAgICAgICBsZXQga2V5ID0ga2V5Ym9hcmREZWxlZ2F0ZS5nZXRLZXlGb3JTZWFyY2goc3RhdGUuc2VhcmNoLCBzZWxlY3Rpb25NYW5hZ2VyLmZvY3VzZWRLZXkpO1xyXG4gICAgICAgIC8vIElmIG5vIGtleSBmb3VuZCwgc2VhcmNoIGZyb20gdGhlIHRvcC5cclxuICAgICAgICBpZiAoa2V5ID09IG51bGwpIGtleSA9IGtleWJvYXJkRGVsZWdhdGUuZ2V0S2V5Rm9yU2VhcmNoKHN0YXRlLnNlYXJjaCk7XHJcbiAgICAgICAgaWYgKGtleSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGlvbk1hbmFnZXIuc2V0Rm9jdXNlZEtleShrZXkpO1xyXG4gICAgICAgICAgICBpZiAob25UeXBlU2VsZWN0KSBvblR5cGVTZWxlY3Qoa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHN0YXRlLnRpbWVvdXQpO1xyXG4gICAgICAgIHN0YXRlLnRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpPT57XHJcbiAgICAgICAgICAgIHN0YXRlLnNlYXJjaCA9IFwiXCI7XHJcbiAgICAgICAgfSwgJGZiMzA1MGY0M2Q5NDYyNDYkdmFyJFRZUEVBSEVBRF9ERUJPVU5DRV9XQUlUX01TKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHR5cGVTZWxlY3RQcm9wczoge1xyXG4gICAgICAgICAgICAvLyBVc2luZyBhIGNhcHR1cmluZyBsaXN0ZW5lciB0byBjYXRjaCB0aGUga2V5ZG93biBldmVudCBiZWZvcmVcclxuICAgICAgICAgICAgLy8gb3RoZXIgaG9va3MgaW4gb3JkZXIgdG8gaGFuZGxlIHRoZSBTcGFjZWJhciBldmVudC5cclxuICAgICAgICAgICAgb25LZXlEb3duQ2FwdHVyZToga2V5Ym9hcmREZWxlZ2F0ZS5nZXRLZXlGb3JTZWFyY2ggPyBvbktleURvd24gOiBudWxsXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiAkZmIzMDUwZjQzZDk0NjI0NiR2YXIkZ2V0U3RyaW5nRm9yS2V5KGtleSkge1xyXG4gICAgLy8gSWYgdGhlIGtleSBpcyBvZiBsZW5ndGggMSwgaXQgaXMgYW4gQVNDSUkgdmFsdWUuXHJcbiAgICAvLyBPdGhlcndpc2UsIGlmIHRoZXJlIGFyZSBubyBBU0NJSSBjaGFyYWN0ZXJzIGluIHRoZSBrZXkgbmFtZSxcclxuICAgIC8vIGl0IGlzIGEgVW5pY29kZSBjaGFyYWN0ZXIuXHJcbiAgICAvLyBTZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL3VpZXZlbnRzLWtleS9cclxuICAgIGlmIChrZXkubGVuZ3RoID09PSAxIHx8ICEvXltBLVpdL2kudGVzdChrZXkpKSByZXR1cm4ga2V5O1xyXG4gICAgcmV0dXJuIFwiXCI7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiAkYWUyMGRkOGNiY2E3NTcyNiRleHBvcnQkZDZkYWY4MmRjZDg0ZTg3YyhvcHRpb25zKSB7XHJcbiAgICBsZXQgeyBzZWxlY3Rpb25NYW5hZ2VyOiBtYW5hZ2VyLCBrZXlib2FyZERlbGVnYXRlOiBkZWxlZ2F0ZSwgcmVmOiByZWYsIGF1dG9Gb2N1czogYXV0b0ZvY3VzID0gZmFsc2UsIHNob3VsZEZvY3VzV3JhcDogc2hvdWxkRm9jdXNXcmFwID0gZmFsc2UsIGRpc2FsbG93RW1wdHlTZWxlY3Rpb246IGRpc2FsbG93RW1wdHlTZWxlY3Rpb24gPSBmYWxzZSwgZGlzYWxsb3dTZWxlY3RBbGw6IGRpc2FsbG93U2VsZWN0QWxsID0gZmFsc2UsIHNlbGVjdE9uRm9jdXM6IHNlbGVjdE9uRm9jdXMgPSBtYW5hZ2VyLnNlbGVjdGlvbkJlaGF2aW9yID09PSBcInJlcGxhY2VcIiwgZGlzYWxsb3dUeXBlQWhlYWQ6IGRpc2FsbG93VHlwZUFoZWFkID0gZmFsc2UsIHNob3VsZFVzZVZpcnR1YWxGb2N1czogc2hvdWxkVXNlVmlydHVhbEZvY3VzLCBhbGxvd3NUYWJOYXZpZ2F0aW9uOiBhbGxvd3NUYWJOYXZpZ2F0aW9uID0gZmFsc2UsIGlzVmlydHVhbGl6ZWQ6IGlzVmlydHVhbGl6ZWQsIHNjcm9sbFJlZjogLy8gSWYgbm8gc2Nyb2xsUmVmIGlzIHByb3ZpZGVkLCBhc3N1bWUgdGhlIGNvbGxlY3Rpb24gcmVmIGlzIHRoZSBzY3JvbGxhYmxlIHJlZ2lvblxyXG4gICAgc2Nyb2xsUmVmID0gcmVmLCBsaW5rQmVoYXZpb3I6IGxpbmtCZWhhdmlvciA9IFwiYWN0aW9uXCIgfSA9IG9wdGlvbnM7XHJcbiAgICBsZXQgeyBkaXJlY3Rpb246IGRpcmVjdGlvbiB9ID0gKDAsICRlQ0FJTyR1c2VMb2NhbGUpKCk7XHJcbiAgICBsZXQgcm91dGVyID0gKDAsICRlQ0FJTyR1c2VSb3V0ZXIpKCk7XHJcbiAgICBsZXQgb25LZXlEb3duID0gKGUpPT57XHJcbiAgICAgICAgLy8gUHJldmVudCBvcHRpb24gKyB0YWIgZnJvbSBkb2luZyBhbnl0aGluZyBzaW5jZSBpdCBkb2Vzbid0IG1vdmUgZm9jdXMgdG8gdGhlIGNlbGxzLCBvbmx5IGJ1dHRvbnMvY2hlY2tib3hlc1xyXG4gICAgICAgIGlmIChlLmFsdEtleSAmJiBlLmtleSA9PT0gXCJUYWJcIikgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIC8vIEtleWJvYXJkIGV2ZW50cyBidWJibGUgdGhyb3VnaCBwb3J0YWxzLiBEb24ndCBoYW5kbGUga2V5Ym9hcmQgZXZlbnRzXHJcbiAgICAgICAgLy8gZm9yIGVsZW1lbnRzIG91dHNpZGUgdGhlIGNvbGxlY3Rpb24gKGUuZy4gbWVudXMpLlxyXG4gICAgICAgIGlmICghcmVmLmN1cnJlbnQuY29udGFpbnMoZS50YXJnZXQpKSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgbmF2aWdhdGVUb0tleSA9IChrZXksIGNoaWxkRm9jdXMpPT57XHJcbiAgICAgICAgICAgIGlmIChrZXkgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hbmFnZXIuaXNMaW5rKGtleSkgJiYgbGlua0JlaGF2aW9yID09PSBcInNlbGVjdGlvblwiICYmIHNlbGVjdE9uRm9jdXMgJiYgISgwLCAkZmViNWZmZWJmZjIwMDE0OSRleHBvcnQkZDNlM2JkM2UyNjY4OGMwNCkoZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBTZXQgZm9jdXNlZCBrZXkgYW5kIHJlLXJlbmRlciBzeW5jaHJvbm91c2x5IHRvIGJyaW5nIGl0ZW0gaW50byB2aWV3IGlmIG5lZWRlZC5cclxuICAgICAgICAgICAgICAgICAgICAoMCwgJGVDQUlPJGZsdXNoU3luYykoKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFuYWdlci5zZXRGb2N1c2VkS2V5KGtleSwgY2hpbGRGb2N1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGl0ZW0gPSBzY3JvbGxSZWYuY3VycmVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1rZXk9XCIke0NTUy5lc2NhcGUoa2V5LnRvU3RyaW5nKCkpfVwiXWApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJvdXRlci5vcGVuKGl0ZW0sIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG1hbmFnZXIuc2V0Rm9jdXNlZEtleShrZXksIGNoaWxkRm9jdXMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hbmFnZXIuaXNMaW5rKGtleSkgJiYgbGlua0JlaGF2aW9yID09PSBcIm92ZXJyaWRlXCIpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGlmIChlLnNoaWZ0S2V5ICYmIG1hbmFnZXIuc2VsZWN0aW9uTW9kZSA9PT0gXCJtdWx0aXBsZVwiKSBtYW5hZ2VyLmV4dGVuZFNlbGVjdGlvbihrZXkpO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc2VsZWN0T25Gb2N1cyAmJiAhKDAsICRmZWI1ZmZlYmZmMjAwMTQ5JGV4cG9ydCRkM2UzYmQzZTI2Njg4YzA0KShlKSkgbWFuYWdlci5yZXBsYWNlU2VsZWN0aW9uKGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHN3aXRjaChlLmtleSl7XHJcbiAgICAgICAgICAgIGNhc2UgXCJBcnJvd0Rvd25cIjpcclxuICAgICAgICAgICAgICAgIGlmIChkZWxlZ2F0ZS5nZXRLZXlCZWxvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBfZGVsZWdhdGVfZ2V0Rmlyc3RLZXksIF9kZWxlZ2F0ZV9nZXRGaXJzdEtleTE7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXh0S2V5ID0gbWFuYWdlci5mb2N1c2VkS2V5ICE9IG51bGwgPyBkZWxlZ2F0ZS5nZXRLZXlCZWxvdyhtYW5hZ2VyLmZvY3VzZWRLZXkpIDogKF9kZWxlZ2F0ZV9nZXRGaXJzdEtleSA9IGRlbGVnYXRlLmdldEZpcnN0S2V5KSA9PT0gbnVsbCB8fCBfZGVsZWdhdGVfZ2V0Rmlyc3RLZXkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kZWxlZ2F0ZV9nZXRGaXJzdEtleS5jYWxsKGRlbGVnYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dEtleSA9PSBudWxsICYmIHNob3VsZEZvY3VzV3JhcCkgbmV4dEtleSA9IChfZGVsZWdhdGVfZ2V0Rmlyc3RLZXkxID0gZGVsZWdhdGUuZ2V0Rmlyc3RLZXkpID09PSBudWxsIHx8IF9kZWxlZ2F0ZV9nZXRGaXJzdEtleTEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kZWxlZ2F0ZV9nZXRGaXJzdEtleTEuY2FsbChkZWxlZ2F0ZSwgbWFuYWdlci5mb2N1c2VkS2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0ZVRvS2V5KG5leHRLZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJBcnJvd1VwXCI6XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVsZWdhdGUuZ2V0S2V5QWJvdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgX2RlbGVnYXRlX2dldExhc3RLZXksIF9kZWxlZ2F0ZV9nZXRMYXN0S2V5MTtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5leHRLZXkgPSBtYW5hZ2VyLmZvY3VzZWRLZXkgIT0gbnVsbCA/IGRlbGVnYXRlLmdldEtleUFib3ZlKG1hbmFnZXIuZm9jdXNlZEtleSkgOiAoX2RlbGVnYXRlX2dldExhc3RLZXkgPSBkZWxlZ2F0ZS5nZXRMYXN0S2V5KSA9PT0gbnVsbCB8fCBfZGVsZWdhdGVfZ2V0TGFzdEtleSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RlbGVnYXRlX2dldExhc3RLZXkuY2FsbChkZWxlZ2F0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRLZXkgPT0gbnVsbCAmJiBzaG91bGRGb2N1c1dyYXApIG5leHRLZXkgPSAoX2RlbGVnYXRlX2dldExhc3RLZXkxID0gZGVsZWdhdGUuZ2V0TGFzdEtleSkgPT09IG51bGwgfHwgX2RlbGVnYXRlX2dldExhc3RLZXkxID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGVsZWdhdGVfZ2V0TGFzdEtleTEuY2FsbChkZWxlZ2F0ZSwgbWFuYWdlci5mb2N1c2VkS2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0ZVRvS2V5KG5leHRLZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJBcnJvd0xlZnRcIjpcclxuICAgICAgICAgICAgICAgIGlmIChkZWxlZ2F0ZS5nZXRLZXlMZWZ0T2YpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgX2RlbGVnYXRlX2dldEZpcnN0S2V5MiwgX2RlbGVnYXRlX2dldExhc3RLZXkyO1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbmV4dEtleSA9IGRlbGVnYXRlLmdldEtleUxlZnRPZihtYW5hZ2VyLmZvY3VzZWRLZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0S2V5ID09IG51bGwgJiYgc2hvdWxkRm9jdXNXcmFwKSBuZXh0S2V5ID0gZGlyZWN0aW9uID09PSBcInJ0bFwiID8gKF9kZWxlZ2F0ZV9nZXRGaXJzdEtleTIgPSBkZWxlZ2F0ZS5nZXRGaXJzdEtleSkgPT09IG51bGwgfHwgX2RlbGVnYXRlX2dldEZpcnN0S2V5MiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RlbGVnYXRlX2dldEZpcnN0S2V5Mi5jYWxsKGRlbGVnYXRlLCBtYW5hZ2VyLmZvY3VzZWRLZXkpIDogKF9kZWxlZ2F0ZV9nZXRMYXN0S2V5MiA9IGRlbGVnYXRlLmdldExhc3RLZXkpID09PSBudWxsIHx8IF9kZWxlZ2F0ZV9nZXRMYXN0S2V5MiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RlbGVnYXRlX2dldExhc3RLZXkyLmNhbGwoZGVsZWdhdGUsIG1hbmFnZXIuZm9jdXNlZEtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGVUb0tleShuZXh0S2V5LCBkaXJlY3Rpb24gPT09IFwicnRsXCIgPyBcImZpcnN0XCIgOiBcImxhc3RcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIkFycm93UmlnaHRcIjpcclxuICAgICAgICAgICAgICAgIGlmIChkZWxlZ2F0ZS5nZXRLZXlSaWdodE9mKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9kZWxlZ2F0ZV9nZXRMYXN0S2V5MywgX2RlbGVnYXRlX2dldEZpcnN0S2V5MztcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5leHRLZXkgPSBkZWxlZ2F0ZS5nZXRLZXlSaWdodE9mKG1hbmFnZXIuZm9jdXNlZEtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRLZXkgPT0gbnVsbCAmJiBzaG91bGRGb2N1c1dyYXApIG5leHRLZXkgPSBkaXJlY3Rpb24gPT09IFwicnRsXCIgPyAoX2RlbGVnYXRlX2dldExhc3RLZXkzID0gZGVsZWdhdGUuZ2V0TGFzdEtleSkgPT09IG51bGwgfHwgX2RlbGVnYXRlX2dldExhc3RLZXkzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGVsZWdhdGVfZ2V0TGFzdEtleTMuY2FsbChkZWxlZ2F0ZSwgbWFuYWdlci5mb2N1c2VkS2V5KSA6IChfZGVsZWdhdGVfZ2V0Rmlyc3RLZXkzID0gZGVsZWdhdGUuZ2V0Rmlyc3RLZXkpID09PSBudWxsIHx8IF9kZWxlZ2F0ZV9nZXRGaXJzdEtleTMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kZWxlZ2F0ZV9nZXRGaXJzdEtleTMuY2FsbChkZWxlZ2F0ZSwgbWFuYWdlci5mb2N1c2VkS2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0ZVRvS2V5KG5leHRLZXksIGRpcmVjdGlvbiA9PT0gXCJydGxcIiA/IFwibGFzdFwiIDogXCJmaXJzdFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiSG9tZVwiOlxyXG4gICAgICAgICAgICAgICAgaWYgKGRlbGVnYXRlLmdldEZpcnN0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmaXJzdEtleSA9IGRlbGVnYXRlLmdldEZpcnN0S2V5KG1hbmFnZXIuZm9jdXNlZEtleSwgKDAsICRmZWI1ZmZlYmZmMjAwMTQ5JGV4cG9ydCQxNjc5MmVmZmU4MzdkYmEzKShlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFuYWdlci5zZXRGb2N1c2VkS2V5KGZpcnN0S2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKDAsICRmZWI1ZmZlYmZmMjAwMTQ5JGV4cG9ydCQxNjc5MmVmZmU4MzdkYmEzKShlKSAmJiBlLnNoaWZ0S2V5ICYmIG1hbmFnZXIuc2VsZWN0aW9uTW9kZSA9PT0gXCJtdWx0aXBsZVwiKSBtYW5hZ2VyLmV4dGVuZFNlbGVjdGlvbihmaXJzdEtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc2VsZWN0T25Gb2N1cykgbWFuYWdlci5yZXBsYWNlU2VsZWN0aW9uKGZpcnN0S2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiRW5kXCI6XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVsZWdhdGUuZ2V0TGFzdEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbGFzdEtleSA9IGRlbGVnYXRlLmdldExhc3RLZXkobWFuYWdlci5mb2N1c2VkS2V5LCAoMCwgJGZlYjVmZmViZmYyMDAxNDkkZXhwb3J0JDE2NzkyZWZmZTgzN2RiYTMpKGUpKTtcclxuICAgICAgICAgICAgICAgICAgICBtYW5hZ2VyLnNldEZvY3VzZWRLZXkobGFzdEtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCgwLCAkZmViNWZmZWJmZjIwMDE0OSRleHBvcnQkMTY3OTJlZmZlODM3ZGJhMykoZSkgJiYgZS5zaGlmdEtleSAmJiBtYW5hZ2VyLnNlbGVjdGlvbk1vZGUgPT09IFwibXVsdGlwbGVcIikgbWFuYWdlci5leHRlbmRTZWxlY3Rpb24obGFzdEtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc2VsZWN0T25Gb2N1cykgbWFuYWdlci5yZXBsYWNlU2VsZWN0aW9uKGxhc3RLZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJQYWdlRG93blwiOlxyXG4gICAgICAgICAgICAgICAgaWYgKGRlbGVnYXRlLmdldEtleVBhZ2VCZWxvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbmV4dEtleSA9IGRlbGVnYXRlLmdldEtleVBhZ2VCZWxvdyhtYW5hZ2VyLmZvY3VzZWRLZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5hdmlnYXRlVG9LZXkobmV4dEtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIlBhZ2VVcFwiOlxyXG4gICAgICAgICAgICAgICAgaWYgKGRlbGVnYXRlLmdldEtleVBhZ2VBYm92ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbmV4dEtleSA9IGRlbGVnYXRlLmdldEtleVBhZ2VBYm92ZShtYW5hZ2VyLmZvY3VzZWRLZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5hdmlnYXRlVG9LZXkobmV4dEtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImFcIjpcclxuICAgICAgICAgICAgICAgIGlmICgoMCwgJGZlYjVmZmViZmYyMDAxNDkkZXhwb3J0JDE2NzkyZWZmZTgzN2RiYTMpKGUpICYmIG1hbmFnZXIuc2VsZWN0aW9uTW9kZSA9PT0gXCJtdWx0aXBsZVwiICYmIGRpc2FsbG93U2VsZWN0QWxsICE9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hbmFnZXIuc2VsZWN0QWxsKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIkVzY2FwZVwiOlxyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkaXNhbGxvd0VtcHR5U2VsZWN0aW9uKSBtYW5hZ2VyLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIlRhYlwiOlxyXG4gICAgICAgICAgICAgICAgaWYgKCFhbGxvd3NUYWJOYXZpZ2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlcmUgbWF5IGJlIGVsZW1lbnRzIHRoYXQgYXJlIFwidGFiYmFibGVcIiBpbnNpZGUgYSBjb2xsZWN0aW9uIChlLmcuIGluIGEgZ3JpZCBjZWxsKS5cclxuICAgICAgICAgICAgICAgICAgICAvLyBIb3dldmVyLCBjb2xsZWN0aW9ucyBzaG91bGQgYmUgdHJlYXRlZCBhcyBhIHNpbmdsZSB0YWIgc3RvcCwgd2l0aCBhcnJvdyBrZXkgbmF2aWdhdGlvbiBpbnRlcm5hbGx5LlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IGNvbnRyb2wgdGhlIHJlbmRlcmluZyBvZiB0aGVzZSwgc28gd2UgY2FuJ3Qgb3ZlcnJpZGUgdGhlIHRhYkluZGV4IHRvIHByZXZlbnQgdGFiYmluZy5cclxuICAgICAgICAgICAgICAgICAgICAvLyBJbnN0ZWFkLCB3ZSBoYW5kbGUgdGhlIFRhYiBrZXksIGFuZCBtb3ZlIGZvY3VzIG1hbnVhbGx5IHRvIHRoZSBmaXJzdC9sYXN0IHRhYmJhYmxlIGVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAvLyBpbiB0aGUgY29sbGVjdGlvbiwgc28gdGhhdCB0aGUgYnJvd3NlciBkZWZhdWx0IGJlaGF2aW9yIHdpbGwgYXBwbHkgc3RhcnRpbmcgZnJvbSB0aGF0IGVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAvLyByYXRoZXIgdGhhbiB0aGUgY3VycmVudGx5IGZvY3VzZWQgb25lLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLnNoaWZ0S2V5KSByZWYuY3VycmVudC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgd2Fsa2VyID0gKDAsICRlQ0FJTyRnZXRGb2N1c2FibGVUcmVlV2Fsa2VyKShyZWYuY3VycmVudCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiYmFibGU6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGFzdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdCA9IHdhbGtlci5sYXN0Q2hpbGQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXN0KSBuZXh0ID0gbGFzdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfXdoaWxlIChsYXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQgJiYgIW5leHQuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpICgwLCAkZUNBSU8kZm9jdXNXaXRob3V0U2Nyb2xsaW5nKShuZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIFN0b3JlIHRoZSBzY3JvbGwgcG9zaXRpb24gc28gd2UgY2FuIHJlc3RvcmUgaXQgbGF0ZXIuXHJcbiAgICBsZXQgc2Nyb2xsUG9zID0gKDAsICRlQ0FJTyR1c2VSZWYpKHtcclxuICAgICAgICB0b3A6IDAsXHJcbiAgICAgICAgbGVmdDogMFxyXG4gICAgfSk7XHJcbiAgICAoMCwgJGVDQUlPJHVzZUV2ZW50KShzY3JvbGxSZWYsIFwic2Nyb2xsXCIsIGlzVmlydHVhbGl6ZWQgPyBudWxsIDogKCk9PntcclxuICAgICAgICBzY3JvbGxQb3MuY3VycmVudCA9IHtcclxuICAgICAgICAgICAgdG9wOiBzY3JvbGxSZWYuY3VycmVudC5zY3JvbGxUb3AsXHJcbiAgICAgICAgICAgIGxlZnQ6IHNjcm9sbFJlZi5jdXJyZW50LnNjcm9sbExlZnRcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcbiAgICBsZXQgb25Gb2N1cyA9IChlKT0+e1xyXG4gICAgICAgIGlmIChtYW5hZ2VyLmlzRm9jdXNlZCkge1xyXG4gICAgICAgICAgICAvLyBJZiBhIGZvY3VzIGV2ZW50IGJ1YmJsZWQgdGhyb3VnaCBhIHBvcnRhbCwgcmVzZXQgZm9jdXMgc3RhdGUuXHJcbiAgICAgICAgICAgIGlmICghZS5jdXJyZW50VGFyZ2V0LmNvbnRhaW5zKGUudGFyZ2V0KSkgbWFuYWdlci5zZXRGb2N1c2VkKGZhbHNlKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBGb2N1cyBldmVudHMgY2FuIGJ1YmJsZSB0aHJvdWdoIHBvcnRhbHMuIElnbm9yZSB0aGVzZSBldmVudHMuXHJcbiAgICAgICAgaWYgKCFlLmN1cnJlbnRUYXJnZXQuY29udGFpbnMoZS50YXJnZXQpKSByZXR1cm47XHJcbiAgICAgICAgbWFuYWdlci5zZXRGb2N1c2VkKHRydWUpO1xyXG4gICAgICAgIGlmIChtYW5hZ2VyLmZvY3VzZWRLZXkgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBsZXQgbmF2aWdhdGVUb0ZpcnN0S2V5ID0gKGtleSk9PntcclxuICAgICAgICAgICAgICAgIGlmIChrZXkgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hbmFnZXIuc2V0Rm9jdXNlZEtleShrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RPbkZvY3VzKSBtYW5hZ2VyLnJlcGxhY2VTZWxlY3Rpb24oa2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgaGFzbid0IHlldCBpbnRlcmFjdGVkIHdpdGggdGhlIGNvbGxlY3Rpb24sIHRoZXJlIHdpbGwgYmUgbm8gZm9jdXNlZEtleSBzZXQuXHJcbiAgICAgICAgICAgIC8vIEF0dGVtcHQgdG8gZGV0ZWN0IHdoZXRoZXIgdGhlIHVzZXIgaXMgdGFiYmluZyBmb3J3YXJkIG9yIGJhY2t3YXJkIGludG8gdGhlIGNvbGxlY3Rpb25cclxuICAgICAgICAgICAgLy8gYW5kIGVpdGhlciBmb2N1cyB0aGUgZmlyc3Qgb3IgbGFzdCBpdGVtIGFjY29yZGluZ2x5LlxyXG4gICAgICAgICAgICBsZXQgcmVsYXRlZFRhcmdldCA9IGUucmVsYXRlZFRhcmdldDtcclxuICAgICAgICAgICAgdmFyIF9tYW5hZ2VyX2xhc3RTZWxlY3RlZEtleSwgX21hbmFnZXJfZmlyc3RTZWxlY3RlZEtleTtcclxuICAgICAgICAgICAgaWYgKHJlbGF0ZWRUYXJnZXQgJiYgZS5jdXJyZW50VGFyZ2V0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHJlbGF0ZWRUYXJnZXQpICYgTm9kZS5ET0NVTUVOVF9QT1NJVElPTl9GT0xMT1dJTkcpIG5hdmlnYXRlVG9GaXJzdEtleSgoX21hbmFnZXJfbGFzdFNlbGVjdGVkS2V5ID0gbWFuYWdlci5sYXN0U2VsZWN0ZWRLZXkpICE9PSBudWxsICYmIF9tYW5hZ2VyX2xhc3RTZWxlY3RlZEtleSAhPT0gdm9pZCAwID8gX21hbmFnZXJfbGFzdFNlbGVjdGVkS2V5IDogZGVsZWdhdGUuZ2V0TGFzdEtleSgpKTtcclxuICAgICAgICAgICAgZWxzZSBuYXZpZ2F0ZVRvRmlyc3RLZXkoKF9tYW5hZ2VyX2ZpcnN0U2VsZWN0ZWRLZXkgPSBtYW5hZ2VyLmZpcnN0U2VsZWN0ZWRLZXkpICE9PSBudWxsICYmIF9tYW5hZ2VyX2ZpcnN0U2VsZWN0ZWRLZXkgIT09IHZvaWQgMCA/IF9tYW5hZ2VyX2ZpcnN0U2VsZWN0ZWRLZXkgOiBkZWxlZ2F0ZS5nZXRGaXJzdEtleSgpKTtcclxuICAgICAgICB9IGVsc2UgaWYgKCFpc1ZpcnR1YWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIFJlc3RvcmUgdGhlIHNjcm9sbCBwb3NpdGlvbiB0byB3aGF0IGl0IHdhcyBiZWZvcmUuXHJcbiAgICAgICAgICAgIHNjcm9sbFJlZi5jdXJyZW50LnNjcm9sbFRvcCA9IHNjcm9sbFBvcy5jdXJyZW50LnRvcDtcclxuICAgICAgICAgICAgc2Nyb2xsUmVmLmN1cnJlbnQuc2Nyb2xsTGVmdCA9IHNjcm9sbFBvcy5jdXJyZW50LmxlZnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghaXNWaXJ0dWFsaXplZCAmJiBtYW5hZ2VyLmZvY3VzZWRLZXkgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAvLyBSZWZvY3VzIGFuZCBzY3JvbGwgdGhlIGZvY3VzZWQgaXRlbSBpbnRvIHZpZXcgaWYgaXQgZXhpc3RzIHdpdGhpbiB0aGUgc2Nyb2xsYWJsZSByZWdpb24uXHJcbiAgICAgICAgICAgIGxldCBlbGVtZW50ID0gc2Nyb2xsUmVmLmN1cnJlbnQucXVlcnlTZWxlY3RvcihgW2RhdGEta2V5PVwiJHtDU1MuZXNjYXBlKG1hbmFnZXIuZm9jdXNlZEtleS50b1N0cmluZygpKX1cIl1gKTtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgcHJldmVudHMgYSBmbGFzaCBvZiBmb2N1cyBvbiB0aGUgZmlyc3QvbGFzdCBlbGVtZW50IGluIHRoZSBjb2xsZWN0aW9uLCBvciB0aGUgY29sbGVjdGlvbiBpdHNlbGYuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWVsZW1lbnQuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpICgwLCAkZUNBSU8kZm9jdXNXaXRob3V0U2Nyb2xsaW5nKShlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIGxldCBtb2RhbGl0eSA9ICgwLCAkZUNBSU8kZ2V0SW50ZXJhY3Rpb25Nb2RhbGl0eSkoKTtcclxuICAgICAgICAgICAgICAgIGlmIChtb2RhbGl0eSA9PT0gXCJrZXlib2FyZFwiKSAoMCwgJGVDQUlPJHNjcm9sbEludG9WaWV3cG9ydCkoZWxlbWVudCwge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5pbmdFbGVtZW50OiByZWYuY3VycmVudFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgbGV0IG9uQmx1ciA9IChlKT0+e1xyXG4gICAgICAgIC8vIERvbid0IHNldCBibHVycmVkIGFuZCB0aGVuIGZvY3VzZWQgYWdhaW4gaWYgbW92aW5nIGZvY3VzIHdpdGhpbiB0aGUgY29sbGVjdGlvbi5cclxuICAgICAgICBpZiAoIWUuY3VycmVudFRhcmdldC5jb250YWlucyhlLnJlbGF0ZWRUYXJnZXQpKSBtYW5hZ2VyLnNldEZvY3VzZWQoZmFsc2UpO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IGF1dG9Gb2N1c1JlZiA9ICgwLCAkZUNBSU8kdXNlUmVmKShhdXRvRm9jdXMpO1xyXG4gICAgKDAsICRlQ0FJTyR1c2VFZmZlY3QpKCgpPT57XHJcbiAgICAgICAgaWYgKGF1dG9Gb2N1c1JlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgIGxldCBmb2N1c2VkS2V5ID0gbnVsbDtcclxuICAgICAgICAgICAgLy8gQ2hlY2sgZm9jdXMgc3RyYXRlZ3kgdG8gZGV0ZXJtaW5lIHdoaWNoIGl0ZW0gdG8gZm9jdXNcclxuICAgICAgICAgICAgaWYgKGF1dG9Gb2N1cyA9PT0gXCJmaXJzdFwiKSBmb2N1c2VkS2V5ID0gZGVsZWdhdGUuZ2V0Rmlyc3RLZXkoKTtcclxuICAgICAgICAgICAgaWYgKGF1dG9Gb2N1cyA9PT0gXCJsYXN0XCIpIGZvY3VzZWRLZXkgPSBkZWxlZ2F0ZS5nZXRMYXN0S2V5KCk7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBhbnkgc2VsZWN0ZWQga2V5cywgbWFrZSB0aGUgZmlyc3Qgb25lIHRoZSBuZXcgZm9jdXMgdGFyZ2V0XHJcbiAgICAgICAgICAgIGxldCBzZWxlY3RlZEtleXMgPSBtYW5hZ2VyLnNlbGVjdGVkS2V5cztcclxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkS2V5cy5zaXplKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgb2Ygc2VsZWN0ZWRLZXlzKWlmIChtYW5hZ2VyLmNhblNlbGVjdEl0ZW0oa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvY3VzZWRLZXkgPSBrZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWFuYWdlci5zZXRGb2N1c2VkKHRydWUpO1xyXG4gICAgICAgICAgICBtYW5hZ2VyLnNldEZvY3VzZWRLZXkoZm9jdXNlZEtleSk7XHJcbiAgICAgICAgICAgIC8vIElmIG5vIGRlZmF1bHQgZm9jdXMga2V5IGlzIHNlbGVjdGVkLCBmb2N1cyB0aGUgY29sbGVjdGlvbiBpdHNlbGYuXHJcbiAgICAgICAgICAgIGlmIChmb2N1c2VkS2V5ID09IG51bGwgJiYgIXNob3VsZFVzZVZpcnR1YWxGb2N1cykgKDAsICRlQ0FJTyRmb2N1c1NhZmVseSkocmVmLmN1cnJlbnQpO1xyXG4gICAgICAgIH1cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcclxuICAgIH0sIFtdKTtcclxuICAgIC8vIElmIG5vdCB2aXJ0dWFsaXplZCwgc2Nyb2xsIHRoZSBmb2N1c2VkIGVsZW1lbnQgaW50byB2aWV3IHdoZW4gdGhlIGZvY3VzZWRLZXkgY2hhbmdlcy5cclxuICAgIC8vIFdoZW4gdmlydHVhbGl6ZWQsIFZpcnR1YWxpemVyIGhhbmRsZXMgdGhpcyBpbnRlcm5hbGx5LlxyXG4gICAgbGV0IGxhc3RGb2N1c2VkS2V5ID0gKDAsICRlQ0FJTyR1c2VSZWYpKG1hbmFnZXIuZm9jdXNlZEtleSk7XHJcbiAgICAoMCwgJGVDQUlPJHVzZUVmZmVjdCkoKCk9PntcclxuICAgICAgICBsZXQgbW9kYWxpdHkgPSAoMCwgJGVDQUlPJGdldEludGVyYWN0aW9uTW9kYWxpdHkpKCk7XHJcbiAgICAgICAgaWYgKG1hbmFnZXIuaXNGb2N1c2VkICYmIG1hbmFnZXIuZm9jdXNlZEtleSAhPSBudWxsICYmIChzY3JvbGxSZWYgPT09IG51bGwgfHwgc2Nyb2xsUmVmID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzY3JvbGxSZWYuY3VycmVudCkpIHtcclxuICAgICAgICAgICAgbGV0IGVsZW1lbnQgPSBzY3JvbGxSZWYuY3VycmVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1rZXk9XCIke0NTUy5lc2NhcGUobWFuYWdlci5mb2N1c2VkS2V5LnRvU3RyaW5nKCkpfVwiXWApO1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudCAmJiAobW9kYWxpdHkgPT09IFwia2V5Ym9hcmRcIiB8fCBhdXRvRm9jdXNSZWYuY3VycmVudCkpIHtcclxuICAgICAgICAgICAgICAgIGlmICghaXNWaXJ0dWFsaXplZCkgKDAsICRlQ0FJTyRzY3JvbGxJbnRvVmlldykoc2Nyb2xsUmVmLmN1cnJlbnQsIGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgLy8gQXZvaWQgc2Nyb2xsIGluIGlPUyBWTywgc2luY2UgaXQgbWF5IGNhdXNlIG92ZXJsYXkgdG8gY2xvc2UgKGkuZS4gUkFDIHN1Ym1lbnUpXHJcbiAgICAgICAgICAgICAgICBpZiAobW9kYWxpdHkgIT09IFwidmlydHVhbFwiKSAoMCwgJGVDQUlPJHNjcm9sbEludG9WaWV3cG9ydCkoZWxlbWVudCwge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5pbmdFbGVtZW50OiByZWYuY3VycmVudFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgdGhlIGZvY3VzZWQga2V5IGJlY29tZXMgbnVsbCAoZS5nLiB0aGUgbGFzdCBpdGVtIGlzIGRlbGV0ZWQpLCBmb2N1cyB0aGUgd2hvbGUgY29sbGVjdGlvbi5cclxuICAgICAgICBpZiAobWFuYWdlci5pc0ZvY3VzZWQgJiYgbWFuYWdlci5mb2N1c2VkS2V5ID09IG51bGwgJiYgbGFzdEZvY3VzZWRLZXkuY3VycmVudCAhPSBudWxsKSAoMCwgJGVDQUlPJGZvY3VzU2FmZWx5KShyZWYuY3VycmVudCk7XHJcbiAgICAgICAgbGFzdEZvY3VzZWRLZXkuY3VycmVudCA9IG1hbmFnZXIuZm9jdXNlZEtleTtcclxuICAgICAgICBhdXRvRm9jdXNSZWYuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgfSwgW1xyXG4gICAgICAgIGlzVmlydHVhbGl6ZWQsXHJcbiAgICAgICAgc2Nyb2xsUmVmLFxyXG4gICAgICAgIG1hbmFnZXIuZm9jdXNlZEtleSxcclxuICAgICAgICBtYW5hZ2VyLmlzRm9jdXNlZCxcclxuICAgICAgICByZWZcclxuICAgIF0pO1xyXG4gICAgbGV0IGhhbmRsZXJzID0ge1xyXG4gICAgICAgIG9uS2V5RG93bjogb25LZXlEb3duLFxyXG4gICAgICAgIG9uRm9jdXM6IG9uRm9jdXMsXHJcbiAgICAgICAgb25CbHVyOiBvbkJsdXIsXHJcbiAgICAgICAgb25Nb3VzZURvd24gKGUpIHtcclxuICAgICAgICAgICAgLy8gSWdub3JlIGV2ZW50cyB0aGF0IGJ1YmJsZWQgdGhyb3VnaCBwb3J0YWxzLlxyXG4gICAgICAgICAgICBpZiAoc2Nyb2xsUmVmLmN1cnJlbnQgPT09IGUudGFyZ2V0KSAvLyBQcmV2ZW50IGZvY3VzIGdvaW5nIHRvIHRoZSBjb2xsZWN0aW9uIHdoZW4gY2xpY2tpbmcgb24gdGhlIHNjcm9sbGJhci5cclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBsZXQgeyB0eXBlU2VsZWN0UHJvcHM6IHR5cGVTZWxlY3RQcm9wcyB9ID0gKDAsICRmYjMwNTBmNDNkOTQ2MjQ2JGV4cG9ydCRlMzJjODhkZmRkYzZlMWQ4KSh7XHJcbiAgICAgICAga2V5Ym9hcmREZWxlZ2F0ZTogZGVsZWdhdGUsXHJcbiAgICAgICAgc2VsZWN0aW9uTWFuYWdlcjogbWFuYWdlclxyXG4gICAgfSk7XHJcbiAgICBpZiAoIWRpc2FsbG93VHlwZUFoZWFkKSBoYW5kbGVycyA9ICgwLCAkZUNBSU8kbWVyZ2VQcm9wcykodHlwZVNlbGVjdFByb3BzLCBoYW5kbGVycyk7XHJcbiAgICAvLyBJZiBub3RoaW5nIGlzIGZvY3VzZWQgd2l0aGluIHRoZSBjb2xsZWN0aW9uLCBtYWtlIHRoZSBjb2xsZWN0aW9uIGl0c2VsZiB0YWJiYWJsZS5cclxuICAgIC8vIFRoaXMgd2lsbCBiZSBtYXJzaGFsbGVkIHRvIGVpdGhlciB0aGUgZmlyc3Qgb3IgbGFzdCBpdGVtIGRlcGVuZGluZyBvbiB3aGVyZSBmb2N1cyBjYW1lIGZyb20uXHJcbiAgICAvLyBJZiB1c2luZyB2aXJ0dWFsIGZvY3VzLCBkb24ndCBzZXQgYSB0YWJJbmRleCBhdCBhbGwgc28gdGhhdCBWb2ljZU92ZXIgb24gaU9TIDE0IGRvZXNuJ3QgdHJ5XHJcbiAgICAvLyB0byBtb3ZlIHJlYWwgRE9NIGZvY3VzIHRvIHRoZSBlbGVtZW50IGFueXdheS5cclxuICAgIGxldCB0YWJJbmRleDtcclxuICAgIGlmICghc2hvdWxkVXNlVmlydHVhbEZvY3VzKSB0YWJJbmRleCA9IG1hbmFnZXIuZm9jdXNlZEtleSA9PSBudWxsID8gMCA6IC0xO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBjb2xsZWN0aW9uUHJvcHM6IHtcclxuICAgICAgICAgICAgLi4uaGFuZGxlcnMsXHJcbiAgICAgICAgICAgIHRhYkluZGV4OiB0YWJJbmRleFxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcblxyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxyXG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyBcclxuXHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uICQ4ODBlOTVlYjhiOTNiYTlhJGV4cG9ydCRlY2Y2MDAzODdlMjIxYzM3KG9wdGlvbnMpIHtcclxuICAgIGxldCB7IHNlbGVjdGlvbk1hbmFnZXI6IG1hbmFnZXIsIGtleToga2V5LCByZWY6IHJlZiwgc2hvdWxkU2VsZWN0T25QcmVzc1VwOiBzaG91bGRTZWxlY3RPblByZXNzVXAsIHNob3VsZFVzZVZpcnR1YWxGb2N1czogc2hvdWxkVXNlVmlydHVhbEZvY3VzLCBmb2N1czogZm9jdXMsIGlzRGlzYWJsZWQ6IGlzRGlzYWJsZWQsIG9uQWN0aW9uOiBvbkFjdGlvbiwgYWxsb3dzRGlmZmVyZW50UHJlc3NPcmlnaW46IGFsbG93c0RpZmZlcmVudFByZXNzT3JpZ2luLCBsaW5rQmVoYXZpb3I6IGxpbmtCZWhhdmlvciA9IFwiYWN0aW9uXCIgfSA9IG9wdGlvbnM7XHJcbiAgICBsZXQgcm91dGVyID0gKDAsICRlQ0FJTyR1c2VSb3V0ZXIpKCk7XHJcbiAgICBsZXQgb25TZWxlY3QgPSAoZSk9PntcclxuICAgICAgICBpZiAoZS5wb2ludGVyVHlwZSA9PT0gXCJrZXlib2FyZFwiICYmICgwLCAkZmViNWZmZWJmZjIwMDE0OSRleHBvcnQkZDNlM2JkM2UyNjY4OGMwNCkoZSkpIG1hbmFnZXIudG9nZ2xlU2VsZWN0aW9uKGtleSk7XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChtYW5hZ2VyLnNlbGVjdGlvbk1vZGUgPT09IFwibm9uZVwiKSByZXR1cm47XHJcbiAgICAgICAgICAgIGlmIChtYW5hZ2VyLmlzTGluayhrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGlua0JlaGF2aW9yID09PSBcInNlbGVjdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm91dGVyLm9wZW4ocmVmLmN1cnJlbnQsIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFsd2F5cyBzZXQgc2VsZWN0ZWQga2V5cyBiYWNrIHRvIHdoYXQgdGhleSB3ZXJlIHNvIHRoYXQgc2VsZWN0IGFuZCBjb21ib2JveCBjbG9zZS5cclxuICAgICAgICAgICAgICAgICAgICBtYW5hZ2VyLnNldFNlbGVjdGVkS2V5cyhtYW5hZ2VyLnNlbGVjdGVkS2V5cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaW5rQmVoYXZpb3IgPT09IFwib3ZlcnJpZGVcIiB8fCBsaW5rQmVoYXZpb3IgPT09IFwibm9uZVwiKSByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG1hbmFnZXIuc2VsZWN0aW9uTW9kZSA9PT0gXCJzaW5nbGVcIikge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hbmFnZXIuaXNTZWxlY3RlZChrZXkpICYmICFtYW5hZ2VyLmRpc2FsbG93RW1wdHlTZWxlY3Rpb24pIG1hbmFnZXIudG9nZ2xlU2VsZWN0aW9uKGtleSk7XHJcbiAgICAgICAgICAgICAgICBlbHNlIG1hbmFnZXIucmVwbGFjZVNlbGVjdGlvbihrZXkpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUgJiYgZS5zaGlmdEtleSkgbWFuYWdlci5leHRlbmRTZWxlY3Rpb24oa2V5KTtcclxuICAgICAgICAgICAgZWxzZSBpZiAobWFuYWdlci5zZWxlY3Rpb25CZWhhdmlvciA9PT0gXCJ0b2dnbGVcIiB8fCBlICYmICgoMCwgJGZlYjVmZmViZmYyMDAxNDkkZXhwb3J0JDE2NzkyZWZmZTgzN2RiYTMpKGUpIHx8IGUucG9pbnRlclR5cGUgPT09IFwidG91Y2hcIiB8fCBlLnBvaW50ZXJUeXBlID09PSBcInZpcnR1YWxcIikpIC8vIGlmIHRvdWNoIG9yIHZpcnR1YWwgKFZPKSB0aGVuIHdlIGp1c3Qgd2FudCB0byB0b2dnbGUsIG90aGVyd2lzZSBpdCdzIGltcG9zc2libGUgdG8gbXVsdGkgc2VsZWN0IGJlY2F1c2UgdGhleSBkb24ndCBoYXZlIG1vZGlmaWVyIGtleXNcclxuICAgICAgICAgICAgbWFuYWdlci50b2dnbGVTZWxlY3Rpb24oa2V5KTtcclxuICAgICAgICAgICAgZWxzZSBtYW5hZ2VyLnJlcGxhY2VTZWxlY3Rpb24oa2V5KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8gRm9jdXMgdGhlIGFzc29jaWF0ZWQgRE9NIG5vZGUgd2hlbiB0aGlzIGl0ZW0gYmVjb21lcyB0aGUgZm9jdXNlZEtleVxyXG4gICAgKDAsICRlQ0FJTyR1c2VFZmZlY3QpKCgpPT57XHJcbiAgICAgICAgbGV0IGlzRm9jdXNlZCA9IGtleSA9PT0gbWFuYWdlci5mb2N1c2VkS2V5O1xyXG4gICAgICAgIGlmIChpc0ZvY3VzZWQgJiYgbWFuYWdlci5pc0ZvY3VzZWQgJiYgIXNob3VsZFVzZVZpcnR1YWxGb2N1cykge1xyXG4gICAgICAgICAgICBpZiAoZm9jdXMpIGZvY3VzKCk7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IHJlZi5jdXJyZW50KSAoMCwgJGVDQUlPJGZvY3VzU2FmZWx5KShyZWYuY3VycmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xyXG4gICAgfSwgW1xyXG4gICAgICAgIHJlZixcclxuICAgICAgICBrZXksXHJcbiAgICAgICAgbWFuYWdlci5mb2N1c2VkS2V5LFxyXG4gICAgICAgIG1hbmFnZXIuY2hpbGRGb2N1c1N0cmF0ZWd5LFxyXG4gICAgICAgIG1hbmFnZXIuaXNGb2N1c2VkLFxyXG4gICAgICAgIHNob3VsZFVzZVZpcnR1YWxGb2N1c1xyXG4gICAgXSk7XHJcbiAgICBpc0Rpc2FibGVkID0gaXNEaXNhYmxlZCB8fCBtYW5hZ2VyLmlzRGlzYWJsZWQoa2V5KTtcclxuICAgIC8vIFNldCB0YWJJbmRleCB0byAwIGlmIHRoZSBlbGVtZW50IGlzIGZvY3VzZWQsIG9yIC0xIG90aGVyd2lzZSBzbyB0aGF0IG9ubHkgdGhlIGxhc3QgZm9jdXNlZFxyXG4gICAgLy8gaXRlbSBpcyB0YWJiYWJsZS4gIElmIHVzaW5nIHZpcnR1YWwgZm9jdXMsIGRvbid0IHNldCBhIHRhYkluZGV4IGF0IGFsbCBzbyB0aGF0IFZvaWNlT3ZlclxyXG4gICAgLy8gb24gaU9TIDE0IGRvZXNuJ3QgdHJ5IHRvIG1vdmUgcmVhbCBET00gZm9jdXMgdG8gdGhlIGl0ZW0gYW55d2F5LlxyXG4gICAgbGV0IGl0ZW1Qcm9wcyA9IHt9O1xyXG4gICAgaWYgKCFzaG91bGRVc2VWaXJ0dWFsRm9jdXMgJiYgIWlzRGlzYWJsZWQpIGl0ZW1Qcm9wcyA9IHtcclxuICAgICAgICB0YWJJbmRleDoga2V5ID09PSBtYW5hZ2VyLmZvY3VzZWRLZXkgPyAwIDogLTEsXHJcbiAgICAgICAgb25Gb2N1cyAoZSkge1xyXG4gICAgICAgICAgICBpZiAoZS50YXJnZXQgPT09IHJlZi5jdXJyZW50KSBtYW5hZ2VyLnNldEZvY3VzZWRLZXkoa2V5KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgZWxzZSBpZiAoaXNEaXNhYmxlZCkgaXRlbVByb3BzLm9uTW91c2VEb3duID0gKGUpPT57XHJcbiAgICAgICAgLy8gUHJldmVudCBmb2N1cyBnb2luZyB0byB0aGUgYm9keSB3aGVuIGNsaWNraW5nIG9uIGEgZGlzYWJsZWQgaXRlbS5cclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9O1xyXG4gICAgLy8gV2l0aCBjaGVja2JveCBzZWxlY3Rpb24sIG9uQWN0aW9uIChpLmUuIG5hdmlnYXRpb24pIGJlY29tZXMgcHJpbWFyeSwgYW5kIG9jY3VycyBvbiBhIHNpbmdsZSBjbGljayBvZiB0aGUgcm93LlxyXG4gICAgLy8gQ2xpY2tpbmcgdGhlIGNoZWNrYm94IGVudGVycyBzZWxlY3Rpb24gbW9kZSwgYWZ0ZXIgd2hpY2ggY2xpY2tpbmcgYW55d2hlcmUgb24gYW55IHJvdyB0b2dnbGVzIHNlbGVjdGlvbiBmb3IgdGhhdCByb3cuXHJcbiAgICAvLyBXaXRoIGhpZ2hsaWdodCBzZWxlY3Rpb24sIG9uQWN0aW9uIGlzIHNlY29uZGFyeSwgYW5kIG9jY3VycyBvbiBkb3VibGUgY2xpY2suIFNpbmdsZSBjbGljayBzZWxlY3RzIHRoZSByb3cuXHJcbiAgICAvLyBXaXRoIHRvdWNoLCBvbkFjdGlvbiBvY2N1cnMgb24gc2luZ2xlIHRhcCwgYW5kIGxvbmcgcHJlc3MgZW50ZXJzIHNlbGVjdGlvbiBtb2RlLlxyXG4gICAgbGV0IGlzTGlua092ZXJyaWRlID0gbWFuYWdlci5pc0xpbmsoa2V5KSAmJiBsaW5rQmVoYXZpb3IgPT09IFwib3ZlcnJpZGVcIjtcclxuICAgIGxldCBoYXNMaW5rQWN0aW9uID0gbWFuYWdlci5pc0xpbmsoa2V5KSAmJiBsaW5rQmVoYXZpb3IgIT09IFwic2VsZWN0aW9uXCIgJiYgbGlua0JlaGF2aW9yICE9PSBcIm5vbmVcIjtcclxuICAgIGxldCBhbGxvd3NTZWxlY3Rpb24gPSAhaXNEaXNhYmxlZCAmJiBtYW5hZ2VyLmNhblNlbGVjdEl0ZW0oa2V5KSAmJiAhaXNMaW5rT3ZlcnJpZGU7XHJcbiAgICBsZXQgYWxsb3dzQWN0aW9ucyA9IChvbkFjdGlvbiB8fCBoYXNMaW5rQWN0aW9uKSAmJiAhaXNEaXNhYmxlZDtcclxuICAgIGxldCBoYXNQcmltYXJ5QWN0aW9uID0gYWxsb3dzQWN0aW9ucyAmJiAobWFuYWdlci5zZWxlY3Rpb25CZWhhdmlvciA9PT0gXCJyZXBsYWNlXCIgPyAhYWxsb3dzU2VsZWN0aW9uIDogIWFsbG93c1NlbGVjdGlvbiB8fCBtYW5hZ2VyLmlzRW1wdHkpO1xyXG4gICAgbGV0IGhhc1NlY29uZGFyeUFjdGlvbiA9IGFsbG93c0FjdGlvbnMgJiYgYWxsb3dzU2VsZWN0aW9uICYmIG1hbmFnZXIuc2VsZWN0aW9uQmVoYXZpb3IgPT09IFwicmVwbGFjZVwiO1xyXG4gICAgbGV0IGhhc0FjdGlvbiA9IGhhc1ByaW1hcnlBY3Rpb24gfHwgaGFzU2Vjb25kYXJ5QWN0aW9uO1xyXG4gICAgbGV0IG1vZGFsaXR5ID0gKDAsICRlQ0FJTyR1c2VSZWYpKG51bGwpO1xyXG4gICAgbGV0IGxvbmdQcmVzc0VuYWJsZWQgPSBoYXNBY3Rpb24gJiYgYWxsb3dzU2VsZWN0aW9uO1xyXG4gICAgbGV0IGxvbmdQcmVzc0VuYWJsZWRPblByZXNzU3RhcnQgPSAoMCwgJGVDQUlPJHVzZVJlZikoZmFsc2UpO1xyXG4gICAgbGV0IGhhZFByaW1hcnlBY3Rpb25PblByZXNzU3RhcnQgPSAoMCwgJGVDQUlPJHVzZVJlZikoZmFsc2UpO1xyXG4gICAgbGV0IHBlcmZvcm1BY3Rpb24gPSAoZSk9PntcclxuICAgICAgICBpZiAob25BY3Rpb24pIG9uQWN0aW9uKCk7XHJcbiAgICAgICAgaWYgKGhhc0xpbmtBY3Rpb24pIHJvdXRlci5vcGVuKHJlZi5jdXJyZW50LCBlKTtcclxuICAgIH07XHJcbiAgICAvLyBCeSBkZWZhdWx0LCBzZWxlY3Rpb24gb2NjdXJzIG9uIHBvaW50ZXIgZG93bi4gVGhpcyBjYW4gYmUgc3RyYW5nZSBpZiBzZWxlY3RpbmcgYW5cclxuICAgIC8vIGl0ZW0gY2F1c2VzIHRoZSBVSSB0byBkaXNhcHBlYXIgaW1tZWRpYXRlbHkgKGUuZy4gbWVudXMpLlxyXG4gICAgLy8gSWYgc2hvdWxkU2VsZWN0T25QcmVzc1VwIGlzIHRydWUsIHdlIHVzZSBvblByZXNzVXAgaW5zdGVhZCBvZiBvblByZXNzU3RhcnQuXHJcbiAgICAvLyBvblByZXNzIHJlcXVpcmVzIGEgcG9pbnRlciBkb3duIGV2ZW50IG9uIHRoZSBzYW1lIGVsZW1lbnQgYXMgcG9pbnRlciB1cC4gRm9yIG1lbnVzLFxyXG4gICAgLy8gd2Ugd2FudCB0byBiZSBhYmxlIHRvIGhhdmUgdGhlIHBvaW50ZXIgZG93biBvbiB0aGUgdHJpZ2dlciB0aGF0IG9wZW5zIHRoZSBtZW51IGFuZFxyXG4gICAgLy8gdGhlIHBvaW50ZXIgdXAgb24gdGhlIG1lbnUgaXRlbSByYXRoZXIgdGhhbiByZXF1aXJpbmcgYSBzZXBhcmF0ZSBwcmVzcy5cclxuICAgIC8vIEZvciBrZXlib2FyZCBldmVudHMsIHNlbGVjdGlvbiBzdGlsbCBvY2N1cnMgb24ga2V5IGRvd24uXHJcbiAgICBsZXQgaXRlbVByZXNzUHJvcHMgPSB7fTtcclxuICAgIGlmIChzaG91bGRTZWxlY3RPblByZXNzVXApIHtcclxuICAgICAgICBpdGVtUHJlc3NQcm9wcy5vblByZXNzU3RhcnQgPSAoZSk9PntcclxuICAgICAgICAgICAgbW9kYWxpdHkuY3VycmVudCA9IGUucG9pbnRlclR5cGU7XHJcbiAgICAgICAgICAgIGxvbmdQcmVzc0VuYWJsZWRPblByZXNzU3RhcnQuY3VycmVudCA9IGxvbmdQcmVzc0VuYWJsZWQ7XHJcbiAgICAgICAgICAgIGlmIChlLnBvaW50ZXJUeXBlID09PSBcImtleWJvYXJkXCIgJiYgKCFoYXNBY3Rpb24gfHwgJDg4MGU5NWViOGI5M2JhOWEkdmFyJGlzU2VsZWN0aW9uS2V5KCkpKSBvblNlbGVjdChlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIElmIGFsbG93c0RpZmZlcmVudFByZXNzT3JpZ2luLCBtYWtlIHNlbGVjdGlvbiBoYXBwZW4gb24gcHJlc3NVcCAoZS5nLiBvcGVuIG1lbnUgb24gcHJlc3MgZG93biwgc2VsZWN0aW9uIG9uIG1lbnUgaXRlbSBoYXBwZW5zIG9uIHByZXNzIHVwLilcclxuICAgICAgICAvLyBPdGhlcndpc2UsIGhhdmUgc2VsZWN0aW9uIGhhcHBlbiBvblByZXNzIChwcmV2ZW50cyBsaXN0dmlldyByb3cgc2VsZWN0aW9uIHdoZW4gY2xpY2tpbmcgb24gaW50ZXJhY3RhYmxlIGVsZW1lbnRzIGluIHRoZSByb3cpXHJcbiAgICAgICAgaWYgKCFhbGxvd3NEaWZmZXJlbnRQcmVzc09yaWdpbikgaXRlbVByZXNzUHJvcHMub25QcmVzcyA9IChlKT0+e1xyXG4gICAgICAgICAgICBpZiAoaGFzUHJpbWFyeUFjdGlvbiB8fCBoYXNTZWNvbmRhcnlBY3Rpb24gJiYgZS5wb2ludGVyVHlwZSAhPT0gXCJtb3VzZVwiKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5wb2ludGVyVHlwZSA9PT0gXCJrZXlib2FyZFwiICYmICEkODgwZTk1ZWI4YjkzYmE5YSR2YXIkaXNBY3Rpb25LZXkoKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgcGVyZm9ybUFjdGlvbihlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLnBvaW50ZXJUeXBlICE9PSBcImtleWJvYXJkXCIgJiYgYWxsb3dzU2VsZWN0aW9uKSBvblNlbGVjdChlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpdGVtUHJlc3NQcm9wcy5vblByZXNzVXAgPSBoYXNQcmltYXJ5QWN0aW9uID8gbnVsbCA6IChlKT0+e1xyXG4gICAgICAgICAgICAgICAgaWYgKGUucG9pbnRlclR5cGUgIT09IFwia2V5Ym9hcmRcIiAmJiBhbGxvd3NTZWxlY3Rpb24pIG9uU2VsZWN0KGUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpdGVtUHJlc3NQcm9wcy5vblByZXNzID0gaGFzUHJpbWFyeUFjdGlvbiA/IHBlcmZvcm1BY3Rpb24gOiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaXRlbVByZXNzUHJvcHMub25QcmVzc1N0YXJ0ID0gKGUpPT57XHJcbiAgICAgICAgICAgIG1vZGFsaXR5LmN1cnJlbnQgPSBlLnBvaW50ZXJUeXBlO1xyXG4gICAgICAgICAgICBsb25nUHJlc3NFbmFibGVkT25QcmVzc1N0YXJ0LmN1cnJlbnQgPSBsb25nUHJlc3NFbmFibGVkO1xyXG4gICAgICAgICAgICBoYWRQcmltYXJ5QWN0aW9uT25QcmVzc1N0YXJ0LmN1cnJlbnQgPSBoYXNQcmltYXJ5QWN0aW9uO1xyXG4gICAgICAgICAgICAvLyBTZWxlY3Qgb24gbW91c2UgZG93biB1bmxlc3MgdGhlcmUgaXMgYSBwcmltYXJ5IGFjdGlvbiB3aGljaCB3aWxsIG9jY3VyIG9uIG1vdXNlIHVwLlxyXG4gICAgICAgICAgICAvLyBGb3Iga2V5Ym9hcmQsIHNlbGVjdCBvbiBrZXkgZG93bi4gSWYgdGhlcmUgaXMgYW4gYWN0aW9uLCB0aGUgU3BhY2Uga2V5IHNlbGVjdHMgb24ga2V5IGRvd24sXHJcbiAgICAgICAgICAgIC8vIGFuZCB0aGUgRW50ZXIga2V5IHBlcmZvcm1zIG9uQWN0aW9uIG9uIGtleSB1cC5cclxuICAgICAgICAgICAgaWYgKGFsbG93c1NlbGVjdGlvbiAmJiAoZS5wb2ludGVyVHlwZSA9PT0gXCJtb3VzZVwiICYmICFoYXNQcmltYXJ5QWN0aW9uIHx8IGUucG9pbnRlclR5cGUgPT09IFwia2V5Ym9hcmRcIiAmJiAoIWFsbG93c0FjdGlvbnMgfHwgJDg4MGU5NWViOGI5M2JhOWEkdmFyJGlzU2VsZWN0aW9uS2V5KCkpKSkgb25TZWxlY3QoZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpdGVtUHJlc3NQcm9wcy5vblByZXNzID0gKGUpPT57XHJcbiAgICAgICAgICAgIC8vIFNlbGVjdGlvbiBvY2N1cnMgb24gdG91Y2ggdXAuIFByaW1hcnkgYWN0aW9ucyBhbHdheXMgb2NjdXIgb24gcG9pbnRlciB1cC5cclxuICAgICAgICAgICAgLy8gQm90aCBwcmltYXJ5IGFuZCBzZWNvbmRhcnkgYWN0aW9ucyBvY2N1ciBvbiBFbnRlciBrZXkgdXAuIFRoZSBvbmx5IGV4Y2VwdGlvblxyXG4gICAgICAgICAgICAvLyBpcyBzZWNvbmRhcnkgYWN0aW9ucywgd2hpY2ggb2NjdXIgb24gZG91YmxlIGNsaWNrIHdpdGggYSBtb3VzZS5cclxuICAgICAgICAgICAgaWYgKGUucG9pbnRlclR5cGUgPT09IFwidG91Y2hcIiB8fCBlLnBvaW50ZXJUeXBlID09PSBcInBlblwiIHx8IGUucG9pbnRlclR5cGUgPT09IFwidmlydHVhbFwiIHx8IGUucG9pbnRlclR5cGUgPT09IFwia2V5Ym9hcmRcIiAmJiBoYXNBY3Rpb24gJiYgJDg4MGU5NWViOGI5M2JhOWEkdmFyJGlzQWN0aW9uS2V5KCkgfHwgZS5wb2ludGVyVHlwZSA9PT0gXCJtb3VzZVwiICYmIGhhZFByaW1hcnlBY3Rpb25PblByZXNzU3RhcnQuY3VycmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhhc0FjdGlvbikgcGVyZm9ybUFjdGlvbihlKTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFsbG93c1NlbGVjdGlvbikgb25TZWxlY3QoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgaXRlbVByb3BzW1wiZGF0YS1rZXlcIl0gPSBrZXk7XHJcbiAgICBpdGVtUHJlc3NQcm9wcy5wcmV2ZW50Rm9jdXNPblByZXNzID0gc2hvdWxkVXNlVmlydHVhbEZvY3VzO1xyXG4gICAgbGV0IHsgcHJlc3NQcm9wczogcHJlc3NQcm9wcywgaXNQcmVzc2VkOiBpc1ByZXNzZWQgfSA9ICgwLCAkZUNBSU8kdXNlUHJlc3MpKGl0ZW1QcmVzc1Byb3BzKTtcclxuICAgIC8vIERvdWJsZSBjbGlja2luZyB3aXRoIGEgbW91c2Ugd2l0aCBzZWxlY3Rpb25CZWhhdmlvciA9ICdyZXBsYWNlJyBwZXJmb3JtcyBhbiBhY3Rpb24uXHJcbiAgICBsZXQgb25Eb3VibGVDbGljayA9IGhhc1NlY29uZGFyeUFjdGlvbiA/IChlKT0+e1xyXG4gICAgICAgIGlmIChtb2RhbGl0eS5jdXJyZW50ID09PSBcIm1vdXNlXCIpIHtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBwZXJmb3JtQWN0aW9uKGUpO1xyXG4gICAgICAgIH1cclxuICAgIH0gOiB1bmRlZmluZWQ7XHJcbiAgICAvLyBMb25nIHByZXNzaW5nIGFuIGl0ZW0gd2l0aCB0b3VjaCB3aGVuIHNlbGVjdGlvbkJlaGF2aW9yID0gJ3JlcGxhY2UnIHN3aXRjaGVzIHRoZSBzZWxlY3Rpb24gYmVoYXZpb3JcclxuICAgIC8vIHRvICd0b2dnbGUnLiBUaGlzIGNoYW5nZXMgdGhlIHNpbmdsZSB0YXAgYmVoYXZpb3IgZnJvbSBwZXJmb3JtaW5nIGFuIGFjdGlvbiAoaS5lLiBuYXZpZ2F0aW5nKSB0b1xyXG4gICAgLy8gc2VsZWN0aW5nLCBhbmQgbWF5IHRvZ2dsZSB0aGUgYXBwZWFyYW5jZSBvZiBhIFVJIGFmZm9yZGFuY2UgbGlrZSBjaGVja2JveGVzIG9uIGVhY2ggaXRlbS5cclxuICAgIGxldCB7IGxvbmdQcmVzc1Byb3BzOiBsb25nUHJlc3NQcm9wcyB9ID0gKDAsICRlQ0FJTyR1c2VMb25nUHJlc3MpKHtcclxuICAgICAgICBpc0Rpc2FibGVkOiAhbG9uZ1ByZXNzRW5hYmxlZCxcclxuICAgICAgICBvbkxvbmdQcmVzcyAoZSkge1xyXG4gICAgICAgICAgICBpZiAoZS5wb2ludGVyVHlwZSA9PT0gXCJ0b3VjaFwiKSB7XHJcbiAgICAgICAgICAgICAgICBvblNlbGVjdChlKTtcclxuICAgICAgICAgICAgICAgIG1hbmFnZXIuc2V0U2VsZWN0aW9uQmVoYXZpb3IoXCJ0b2dnbGVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIC8vIFByZXZlbnQgbmF0aXZlIGRyYWcgYW5kIGRyb3Agb24gbG9uZyBwcmVzcyBpZiB3ZSBhbHNvIHNlbGVjdCBvbiBsb25nIHByZXNzLlxyXG4gICAgLy8gT25jZSB0aGUgdXNlciBpcyBpbiBzZWxlY3Rpb24gbW9kZSwgdGhleSBjYW4gbG9uZyBwcmVzcyBhZ2FpbiB0byBkcmFnLlxyXG4gICAgLy8gVXNlIGEgY2FwdHVyaW5nIGxpc3RlbmVyIHRvIGVuc3VyZSB0aGlzIHJ1bnMgYmVmb3JlIHVzZURyYWcsIHJlZ2FyZGxlc3Mgb2ZcclxuICAgIC8vIHRoZSBvcmRlciB0aGUgcHJvcHMgZ2V0IG1lcmdlZC5cclxuICAgIGxldCBvbkRyYWdTdGFydENhcHR1cmUgPSAoZSk9PntcclxuICAgICAgICBpZiAobW9kYWxpdHkuY3VycmVudCA9PT0gXCJ0b3VjaFwiICYmIGxvbmdQcmVzc0VuYWJsZWRPblByZXNzU3RhcnQuY3VycmVudCkgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfTtcclxuICAgIC8vIFByZXZlbnQgZGVmYXVsdCBvbiBsaW5rIGNsaWNrcyBzbyB0aGF0IHdlIGNvbnRyb2wgZXhhY3RseVxyXG4gICAgLy8gd2hlbiB0aGV5IG9wZW4gKHRvIG1hdGNoIHNlbGVjdGlvbiBiZWhhdmlvcikuXHJcbiAgICBsZXQgb25DbGljayA9IG1hbmFnZXIuaXNMaW5rKGtleSkgPyAoZSk9PntcclxuICAgICAgICBpZiAoISgwLCAkZUNBSU8kb3BlbkxpbmspLmlzT3BlbmluZykgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSA6IHVuZGVmaW5lZDtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaXRlbVByb3BzOiAoMCwgJGVDQUlPJG1lcmdlUHJvcHMpKGl0ZW1Qcm9wcywgYWxsb3dzU2VsZWN0aW9uIHx8IGhhc1ByaW1hcnlBY3Rpb24gPyBwcmVzc1Byb3BzIDoge30sIGxvbmdQcmVzc0VuYWJsZWQgPyBsb25nUHJlc3NQcm9wcyA6IHt9LCB7XHJcbiAgICAgICAgICAgIG9uRG91YmxlQ2xpY2s6IG9uRG91YmxlQ2xpY2ssXHJcbiAgICAgICAgICAgIG9uRHJhZ1N0YXJ0Q2FwdHVyZTogb25EcmFnU3RhcnRDYXB0dXJlLFxyXG4gICAgICAgICAgICBvbkNsaWNrOiBvbkNsaWNrXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgaXNQcmVzc2VkOiBpc1ByZXNzZWQsXHJcbiAgICAgICAgaXNTZWxlY3RlZDogbWFuYWdlci5pc1NlbGVjdGVkKGtleSksXHJcbiAgICAgICAgaXNGb2N1c2VkOiBtYW5hZ2VyLmlzRm9jdXNlZCAmJiBtYW5hZ2VyLmZvY3VzZWRLZXkgPT09IGtleSxcclxuICAgICAgICBpc0Rpc2FibGVkOiBpc0Rpc2FibGVkLFxyXG4gICAgICAgIGFsbG93c1NlbGVjdGlvbjogYWxsb3dzU2VsZWN0aW9uLFxyXG4gICAgICAgIGhhc0FjdGlvbjogaGFzQWN0aW9uXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uICQ4ODBlOTVlYjhiOTNiYTlhJHZhciRpc0FjdGlvbktleSgpIHtcclxuICAgIGxldCBldmVudCA9IHdpbmRvdy5ldmVudDtcclxuICAgIHJldHVybiAoZXZlbnQgPT09IG51bGwgfHwgZXZlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGV2ZW50LmtleSkgPT09IFwiRW50ZXJcIjtcclxufVxyXG5mdW5jdGlvbiAkODgwZTk1ZWI4YjkzYmE5YSR2YXIkaXNTZWxlY3Rpb25LZXkoKSB7XHJcbiAgICBsZXQgZXZlbnQgPSB3aW5kb3cuZXZlbnQ7XHJcbiAgICByZXR1cm4gKGV2ZW50ID09PSBudWxsIHx8IGV2ZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBldmVudC5rZXkpID09PSBcIiBcIiB8fCAoZXZlbnQgPT09IG51bGwgfHwgZXZlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGV2ZW50LmNvZGUpID09PSBcIlNwYWNlXCI7XHJcbn1cclxuXHJcblxyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxyXG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyBcclxuLypcclxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gXHJcbmNsYXNzICQyYTI1YWFlNTdkNzQzMThlJGV4cG9ydCRhMDU0MDliOGJiMjI0YTVhIHtcclxuICAgIGdldE5leHRLZXkoa2V5KSB7XHJcbiAgICAgICAga2V5ID0gdGhpcy5jb2xsZWN0aW9uLmdldEtleUFmdGVyKGtleSk7XHJcbiAgICAgICAgd2hpbGUoa2V5ICE9IG51bGwpe1xyXG4gICAgICAgICAgICBsZXQgaXRlbSA9IHRoaXMuY29sbGVjdGlvbi5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09IFwiaXRlbVwiICYmICF0aGlzLmRpc2FibGVkS2V5cy5oYXMoa2V5KSkgcmV0dXJuIGtleTtcclxuICAgICAgICAgICAga2V5ID0gdGhpcy5jb2xsZWN0aW9uLmdldEtleUFmdGVyKGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgZ2V0UHJldmlvdXNLZXkoa2V5KSB7XHJcbiAgICAgICAga2V5ID0gdGhpcy5jb2xsZWN0aW9uLmdldEtleUJlZm9yZShrZXkpO1xyXG4gICAgICAgIHdoaWxlKGtleSAhPSBudWxsKXtcclxuICAgICAgICAgICAgbGV0IGl0ZW0gPSB0aGlzLmNvbGxlY3Rpb24uZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSBcIml0ZW1cIiAmJiAhdGhpcy5kaXNhYmxlZEtleXMuaGFzKGtleSkpIHJldHVybiBrZXk7XHJcbiAgICAgICAgICAgIGtleSA9IHRoaXMuY29sbGVjdGlvbi5nZXRLZXlCZWZvcmUoa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBmaW5kS2V5KGtleSwgbmV4dEtleSwgc2hvdWxkU2tpcCkge1xyXG4gICAgICAgIGxldCBpdGVtID0gdGhpcy5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgaWYgKCFpdGVtKSByZXR1cm4gbnVsbDtcclxuICAgICAgICAvLyBGaW5kIHRoZSBpdGVtIGFib3ZlIG9yIGJlbG93IGluIHRoZSBzYW1lIGNvbHVtbi5cclxuICAgICAgICBsZXQgcHJldlJlY3QgPSBpdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGRvIHtcclxuICAgICAgICAgICAga2V5ID0gbmV4dEtleShrZXkpO1xyXG4gICAgICAgICAgICBpdGVtID0gdGhpcy5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgfXdoaWxlIChpdGVtICYmIHNob3VsZFNraXAocHJldlJlY3QsIGl0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpKTtcclxuICAgICAgICByZXR1cm4ga2V5O1xyXG4gICAgfVxyXG4gICAgaXNTYW1lUm93KHByZXZSZWN0LCBpdGVtUmVjdCkge1xyXG4gICAgICAgIHJldHVybiBwcmV2UmVjdC50b3AgPT09IGl0ZW1SZWN0LnRvcCB8fCBwcmV2UmVjdC5sZWZ0ICE9PSBpdGVtUmVjdC5sZWZ0O1xyXG4gICAgfVxyXG4gICAgaXNTYW1lQ29sdW1uKHByZXZSZWN0LCBpdGVtUmVjdCkge1xyXG4gICAgICAgIHJldHVybiBwcmV2UmVjdC5sZWZ0ID09PSBpdGVtUmVjdC5sZWZ0IHx8IHByZXZSZWN0LnRvcCAhPT0gaXRlbVJlY3QudG9wO1xyXG4gICAgfVxyXG4gICAgZ2V0S2V5QmVsb3coa2V5KSB7XHJcbiAgICAgICAgaWYgKHRoaXMubGF5b3V0ID09PSBcImdyaWRcIiAmJiB0aGlzLm9yaWVudGF0aW9uID09PSBcInZlcnRpY2FsXCIpIHJldHVybiB0aGlzLmZpbmRLZXkoa2V5LCAoa2V5KT0+dGhpcy5nZXROZXh0S2V5KGtleSksIHRoaXMuaXNTYW1lUm93KTtcclxuICAgICAgICBlbHNlIHJldHVybiB0aGlzLmdldE5leHRLZXkoa2V5KTtcclxuICAgIH1cclxuICAgIGdldEtleUFib3ZlKGtleSkge1xyXG4gICAgICAgIGlmICh0aGlzLmxheW91dCA9PT0gXCJncmlkXCIgJiYgdGhpcy5vcmllbnRhdGlvbiA9PT0gXCJ2ZXJ0aWNhbFwiKSByZXR1cm4gdGhpcy5maW5kS2V5KGtleSwgKGtleSk9PnRoaXMuZ2V0UHJldmlvdXNLZXkoa2V5KSwgdGhpcy5pc1NhbWVSb3cpO1xyXG4gICAgICAgIGVsc2UgcmV0dXJuIHRoaXMuZ2V0UHJldmlvdXNLZXkoa2V5KTtcclxuICAgIH1cclxuICAgIGdldE5leHRDb2x1bW4oa2V5LCByaWdodCkge1xyXG4gICAgICAgIHJldHVybiByaWdodCA/IHRoaXMuZ2V0UHJldmlvdXNLZXkoa2V5KSA6IHRoaXMuZ2V0TmV4dEtleShrZXkpO1xyXG4gICAgfVxyXG4gICAgZ2V0S2V5UmlnaHRPZihrZXkpIHtcclxuICAgICAgICBpZiAodGhpcy5sYXlvdXQgPT09IFwiZ3JpZFwiKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9yaWVudGF0aW9uID09PSBcInZlcnRpY2FsXCIpIHJldHVybiB0aGlzLmdldE5leHRDb2x1bW4oa2V5LCB0aGlzLmRpcmVjdGlvbiA9PT0gXCJydGxcIik7XHJcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuIHRoaXMuZmluZEtleShrZXksIChrZXkpPT50aGlzLmdldE5leHRDb2x1bW4oa2V5LCB0aGlzLmRpcmVjdGlvbiA9PT0gXCJydGxcIiksIHRoaXMuaXNTYW1lQ29sdW1uKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMub3JpZW50YXRpb24gPT09IFwiaG9yaXpvbnRhbFwiKSByZXR1cm4gdGhpcy5nZXROZXh0Q29sdW1uKGtleSwgdGhpcy5kaXJlY3Rpb24gPT09IFwicnRsXCIpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgZ2V0S2V5TGVmdE9mKGtleSkge1xyXG4gICAgICAgIGlmICh0aGlzLmxheW91dCA9PT0gXCJncmlkXCIpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub3JpZW50YXRpb24gPT09IFwidmVydGljYWxcIikgcmV0dXJuIHRoaXMuZ2V0TmV4dENvbHVtbihrZXksIHRoaXMuZGlyZWN0aW9uID09PSBcImx0clwiKTtcclxuICAgICAgICAgICAgZWxzZSByZXR1cm4gdGhpcy5maW5kS2V5KGtleSwgKGtleSk9PnRoaXMuZ2V0TmV4dENvbHVtbihrZXksIHRoaXMuZGlyZWN0aW9uID09PSBcImx0clwiKSwgdGhpcy5pc1NhbWVDb2x1bW4pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5vcmllbnRhdGlvbiA9PT0gXCJob3Jpem9udGFsXCIpIHJldHVybiB0aGlzLmdldE5leHRDb2x1bW4oa2V5LCB0aGlzLmRpcmVjdGlvbiA9PT0gXCJsdHJcIik7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBnZXRGaXJzdEtleSgpIHtcclxuICAgICAgICBsZXQga2V5ID0gdGhpcy5jb2xsZWN0aW9uLmdldEZpcnN0S2V5KCk7XHJcbiAgICAgICAgd2hpbGUoa2V5ICE9IG51bGwpe1xyXG4gICAgICAgICAgICBsZXQgaXRlbSA9IHRoaXMuY29sbGVjdGlvbi5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgICAgIGlmICgoaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpdGVtLnR5cGUpID09PSBcIml0ZW1cIiAmJiAhdGhpcy5kaXNhYmxlZEtleXMuaGFzKGtleSkpIHJldHVybiBrZXk7XHJcbiAgICAgICAgICAgIGtleSA9IHRoaXMuY29sbGVjdGlvbi5nZXRLZXlBZnRlcihrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGdldExhc3RLZXkoKSB7XHJcbiAgICAgICAgbGV0IGtleSA9IHRoaXMuY29sbGVjdGlvbi5nZXRMYXN0S2V5KCk7XHJcbiAgICAgICAgd2hpbGUoa2V5ICE9IG51bGwpe1xyXG4gICAgICAgICAgICBsZXQgaXRlbSA9IHRoaXMuY29sbGVjdGlvbi5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09IFwiaXRlbVwiICYmICF0aGlzLmRpc2FibGVkS2V5cy5oYXMoa2V5KSkgcmV0dXJuIGtleTtcclxuICAgICAgICAgICAga2V5ID0gdGhpcy5jb2xsZWN0aW9uLmdldEtleUJlZm9yZShrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGdldEl0ZW0oa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmLmN1cnJlbnQucXVlcnlTZWxlY3RvcihgW2RhdGEta2V5PVwiJHtDU1MuZXNjYXBlKGtleS50b1N0cmluZygpKX1cIl1gKTtcclxuICAgIH1cclxuICAgIGdldEtleVBhZ2VBYm92ZShrZXkpIHtcclxuICAgICAgICBsZXQgbWVudSA9IHRoaXMucmVmLmN1cnJlbnQ7XHJcbiAgICAgICAgbGV0IGl0ZW0gPSB0aGlzLmdldEl0ZW0oa2V5KTtcclxuICAgICAgICBpZiAoIWl0ZW0pIHJldHVybiBudWxsO1xyXG4gICAgICAgIGlmICghKDAsICRlQ0FJTyRpc1Njcm9sbGFibGUpKG1lbnUpKSByZXR1cm4gdGhpcy5nZXRGaXJzdEtleSgpO1xyXG4gICAgICAgIGxldCBjb250YWluZXJSZWN0ID0gbWVudS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICBsZXQgaXRlbVJlY3QgPSBpdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGlmICh0aGlzLm9yaWVudGF0aW9uID09PSBcImhvcml6b250YWxcIikge1xyXG4gICAgICAgICAgICBsZXQgY29udGFpbmVyWCA9IGNvbnRhaW5lclJlY3QueCAtIG1lbnUuc2Nyb2xsTGVmdDtcclxuICAgICAgICAgICAgbGV0IHBhZ2VYID0gTWF0aC5tYXgoMCwgaXRlbVJlY3QueCAtIGNvbnRhaW5lclggKyBpdGVtUmVjdC53aWR0aCAtIGNvbnRhaW5lclJlY3Qud2lkdGgpO1xyXG4gICAgICAgICAgICB3aGlsZShpdGVtICYmIGl0ZW1SZWN0LnggLSBjb250YWluZXJYID4gcGFnZVgpe1xyXG4gICAgICAgICAgICAgICAga2V5ID0gdGhpcy5nZXRLZXlBYm92ZShrZXkpO1xyXG4gICAgICAgICAgICAgICAgaXRlbSA9IGtleSA9PSBudWxsID8gbnVsbCA6IHRoaXMuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgICAgICAgICAgaXRlbVJlY3QgPSBpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGl0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgY29udGFpbmVyWSA9IGNvbnRhaW5lclJlY3QueSAtIG1lbnUuc2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICBsZXQgcGFnZVkgPSBNYXRoLm1heCgwLCBpdGVtUmVjdC55IC0gY29udGFpbmVyWSArIGl0ZW1SZWN0LmhlaWdodCAtIGNvbnRhaW5lclJlY3QuaGVpZ2h0KTtcclxuICAgICAgICAgICAgd2hpbGUoaXRlbSAmJiBpdGVtUmVjdC55IC0gY29udGFpbmVyWSA+IHBhZ2VZKXtcclxuICAgICAgICAgICAgICAgIGtleSA9IHRoaXMuZ2V0S2V5QWJvdmUoa2V5KTtcclxuICAgICAgICAgICAgICAgIGl0ZW0gPSBrZXkgPT0gbnVsbCA/IG51bGwgOiB0aGlzLmdldEl0ZW0oa2V5KTtcclxuICAgICAgICAgICAgICAgIGl0ZW1SZWN0ID0gaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBrZXkgIT09IG51bGwgJiYga2V5ICE9PSB2b2lkIDAgPyBrZXkgOiB0aGlzLmdldEZpcnN0S2V5KCk7XHJcbiAgICB9XHJcbiAgICBnZXRLZXlQYWdlQmVsb3coa2V5KSB7XHJcbiAgICAgICAgbGV0IG1lbnUgPSB0aGlzLnJlZi5jdXJyZW50O1xyXG4gICAgICAgIGxldCBpdGVtID0gdGhpcy5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgaWYgKCFpdGVtKSByZXR1cm4gbnVsbDtcclxuICAgICAgICBpZiAoISgwLCAkZUNBSU8kaXNTY3JvbGxhYmxlKShtZW51KSkgcmV0dXJuIHRoaXMuZ2V0TGFzdEtleSgpO1xyXG4gICAgICAgIGxldCBjb250YWluZXJSZWN0ID0gbWVudS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICBsZXQgaXRlbVJlY3QgPSBpdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGlmICh0aGlzLm9yaWVudGF0aW9uID09PSBcImhvcml6b250YWxcIikge1xyXG4gICAgICAgICAgICBsZXQgY29udGFpbmVyWCA9IGNvbnRhaW5lclJlY3QueCAtIG1lbnUuc2Nyb2xsTGVmdDtcclxuICAgICAgICAgICAgbGV0IHBhZ2VYID0gTWF0aC5taW4obWVudS5zY3JvbGxXaWR0aCwgaXRlbVJlY3QueCAtIGNvbnRhaW5lclggLSBpdGVtUmVjdC53aWR0aCArIGNvbnRhaW5lclJlY3Qud2lkdGgpO1xyXG4gICAgICAgICAgICB3aGlsZShpdGVtICYmIGl0ZW1SZWN0LnggLSBjb250YWluZXJYIDwgcGFnZVgpe1xyXG4gICAgICAgICAgICAgICAga2V5ID0gdGhpcy5nZXRLZXlCZWxvdyhrZXkpO1xyXG4gICAgICAgICAgICAgICAgaXRlbSA9IGtleSA9PSBudWxsID8gbnVsbCA6IHRoaXMuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgICAgICAgICAgaXRlbVJlY3QgPSBpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGl0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgY29udGFpbmVyWSA9IGNvbnRhaW5lclJlY3QueSAtIG1lbnUuc2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICBsZXQgcGFnZVkgPSBNYXRoLm1pbihtZW51LnNjcm9sbEhlaWdodCwgaXRlbVJlY3QueSAtIGNvbnRhaW5lclkgLSBpdGVtUmVjdC5oZWlnaHQgKyBjb250YWluZXJSZWN0LmhlaWdodCk7XHJcbiAgICAgICAgICAgIHdoaWxlKGl0ZW0gJiYgaXRlbVJlY3QueSAtIGNvbnRhaW5lclkgPCBwYWdlWSl7XHJcbiAgICAgICAgICAgICAgICBrZXkgPSB0aGlzLmdldEtleUJlbG93KGtleSk7XHJcbiAgICAgICAgICAgICAgICBpdGVtID0ga2V5ID09IG51bGwgPyBudWxsIDogdGhpcy5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgICAgICAgICBpdGVtUmVjdCA9IGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogaXRlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ga2V5ICE9PSBudWxsICYmIGtleSAhPT0gdm9pZCAwID8ga2V5IDogdGhpcy5nZXRMYXN0S2V5KCk7XHJcbiAgICB9XHJcbiAgICBnZXRLZXlGb3JTZWFyY2goc2VhcmNoLCBmcm9tS2V5KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbGxhdG9yKSByZXR1cm4gbnVsbDtcclxuICAgICAgICBsZXQgY29sbGVjdGlvbiA9IHRoaXMuY29sbGVjdGlvbjtcclxuICAgICAgICBsZXQga2V5ID0gZnJvbUtleSB8fCB0aGlzLmdldEZpcnN0S2V5KCk7XHJcbiAgICAgICAgd2hpbGUoa2V5ICE9IG51bGwpe1xyXG4gICAgICAgICAgICBsZXQgaXRlbSA9IGNvbGxlY3Rpb24uZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgICAgICBsZXQgc3Vic3RyaW5nID0gaXRlbS50ZXh0VmFsdWUuc2xpY2UoMCwgc2VhcmNoLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLnRleHRWYWx1ZSAmJiB0aGlzLmNvbGxhdG9yLmNvbXBhcmUoc3Vic3RyaW5nLCBzZWFyY2gpID09PSAwKSByZXR1cm4ga2V5O1xyXG4gICAgICAgICAgICBrZXkgPSB0aGlzLmdldEtleUJlbG93KGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY29uc3RydWN0b3IoLi4uYXJncyl7XHJcbiAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgIGxldCBvcHRzID0gYXJnc1swXTtcclxuICAgICAgICAgICAgdGhpcy5jb2xsZWN0aW9uID0gb3B0cy5jb2xsZWN0aW9uO1xyXG4gICAgICAgICAgICB0aGlzLnJlZiA9IG9wdHMucmVmO1xyXG4gICAgICAgICAgICB0aGlzLmNvbGxhdG9yID0gb3B0cy5jb2xsYXRvcjtcclxuICAgICAgICAgICAgdGhpcy5kaXNhYmxlZEtleXMgPSBvcHRzLmRpc2FibGVkS2V5cyB8fCBuZXcgU2V0KCk7XHJcbiAgICAgICAgICAgIHRoaXMub3JpZW50YXRpb24gPSBvcHRzLm9yaWVudGF0aW9uO1xyXG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IG9wdHMuZGlyZWN0aW9uO1xyXG4gICAgICAgICAgICB0aGlzLmxheW91dCA9IG9wdHMubGF5b3V0IHx8IFwic3RhY2tcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSBhcmdzWzBdO1xyXG4gICAgICAgICAgICB0aGlzLmRpc2FibGVkS2V5cyA9IGFyZ3NbMV07XHJcbiAgICAgICAgICAgIHRoaXMucmVmID0gYXJnc1syXTtcclxuICAgICAgICAgICAgdGhpcy5jb2xsYXRvciA9IGFyZ3NbM107XHJcbiAgICAgICAgICAgIHRoaXMubGF5b3V0ID0gXCJzdGFja1wiO1xyXG4gICAgICAgICAgICB0aGlzLm9yaWVudGF0aW9uID0gXCJ2ZXJ0aWNhbFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiB0aGlzIGlzIGEgdmVydGljYWwgc3RhY2ssIHJlbW92ZSB0aGUgbGVmdC9yaWdodCBtZXRob2RzIGNvbXBsZXRlbHlcclxuICAgICAgICAvLyBzbyB0aGV5IGFyZW4ndCBjYWxsZWQgYnkgdXNlRHJvcHBhYmxlQ29sbGVjdGlvbi5cclxuICAgICAgICBpZiAodGhpcy5sYXlvdXQgPT09IFwic3RhY2tcIiAmJiB0aGlzLm9yaWVudGF0aW9uID09PSBcInZlcnRpY2FsXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRLZXlMZWZ0T2YgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0S2V5UmlnaHRPZiA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uICQ5ODIyNTQ2Mjk3MTBkMTEzJGV4cG9ydCRiOTUwODk1MzRhYjdjMWZkKHByb3BzKSB7XHJcbiAgICBsZXQgeyBzZWxlY3Rpb25NYW5hZ2VyOiBzZWxlY3Rpb25NYW5hZ2VyLCBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uLCBkaXNhYmxlZEtleXM6IGRpc2FibGVkS2V5cywgcmVmOiByZWYsIGtleWJvYXJkRGVsZWdhdGU6IGtleWJvYXJkRGVsZWdhdGUgfSA9IHByb3BzO1xyXG4gICAgLy8gQnkgZGVmYXVsdCwgYSBLZXlib2FyZERlbGVnYXRlIGlzIHByb3ZpZGVkIHdoaWNoIHVzZXMgdGhlIERPTSB0byBxdWVyeSBsYXlvdXQgaW5mb3JtYXRpb24gKGUuZy4gZm9yIHBhZ2UgdXAvcGFnZSBkb3duKS5cclxuICAgIC8vIFdoZW4gdmlydHVhbGl6ZWQsIHRoZSBsYXlvdXQgb2JqZWN0IHdpbGwgYmUgcGFzc2VkIGluIGFzIGEgcHJvcCBhbmQgb3ZlcnJpZGUgdGhpcy5cclxuICAgIGxldCBjb2xsYXRvciA9ICgwLCAkZUNBSU8kdXNlQ29sbGF0b3IpKHtcclxuICAgICAgICB1c2FnZTogXCJzZWFyY2hcIixcclxuICAgICAgICBzZW5zaXRpdml0eTogXCJiYXNlXCJcclxuICAgIH0pO1xyXG4gICAgbGV0IGRpc2FibGVkQmVoYXZpb3IgPSBzZWxlY3Rpb25NYW5hZ2VyLmRpc2FibGVkQmVoYXZpb3I7XHJcbiAgICBsZXQgZGVsZWdhdGUgPSAoMCwgJGVDQUlPJHVzZU1lbW8pKCgpPT5rZXlib2FyZERlbGVnYXRlIHx8IG5ldyAoMCwgJDJhMjVhYWU1N2Q3NDMxOGUkZXhwb3J0JGEwNTQwOWI4YmIyMjRhNWEpKGNvbGxlY3Rpb24sIGRpc2FibGVkQmVoYXZpb3IgPT09IFwic2VsZWN0aW9uXCIgPyBuZXcgU2V0KCkgOiBkaXNhYmxlZEtleXMsIHJlZiwgY29sbGF0b3IpLCBbXHJcbiAgICAgICAga2V5Ym9hcmREZWxlZ2F0ZSxcclxuICAgICAgICBjb2xsZWN0aW9uLFxyXG4gICAgICAgIGRpc2FibGVkS2V5cyxcclxuICAgICAgICByZWYsXHJcbiAgICAgICAgY29sbGF0b3IsXHJcbiAgICAgICAgZGlzYWJsZWRCZWhhdmlvclxyXG4gICAgXSk7XHJcbiAgICBsZXQgeyBjb2xsZWN0aW9uUHJvcHM6IGNvbGxlY3Rpb25Qcm9wcyB9ID0gKDAsICRhZTIwZGQ4Y2JjYTc1NzI2JGV4cG9ydCRkNmRhZjgyZGNkODRlODdjKSh7XHJcbiAgICAgICAgLi4ucHJvcHMsXHJcbiAgICAgICAgcmVmOiByZWYsXHJcbiAgICAgICAgc2VsZWN0aW9uTWFuYWdlcjogc2VsZWN0aW9uTWFuYWdlcixcclxuICAgICAgICBrZXlib2FyZERlbGVnYXRlOiBkZWxlZ2F0ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGxpc3RQcm9wczogY29sbGVjdGlvblByb3BzXHJcbiAgICB9O1xyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbmV4cG9ydCB7JGFlMjBkZDhjYmNhNzU3MjYkZXhwb3J0JGQ2ZGFmODJkY2Q4NGU4N2MgYXMgdXNlU2VsZWN0YWJsZUNvbGxlY3Rpb24sICQ4ODBlOTVlYjhiOTNiYTlhJGV4cG9ydCRlY2Y2MDAzODdlMjIxYzM3IGFzIHVzZVNlbGVjdGFibGVJdGVtLCAkOTgyMjU0NjI5NzEwZDExMyRleHBvcnQkYjk1MDg5NTM0YWI3YzFmZCBhcyB1c2VTZWxlY3RhYmxlTGlzdCwgJDJhMjVhYWU1N2Q3NDMxOGUkZXhwb3J0JGEwNTQwOWI4YmIyMjRhNWEgYXMgTGlzdEtleWJvYXJkRGVsZWdhdGUsICRmYjMwNTBmNDNkOTQ2MjQ2JGV4cG9ydCRlMzJjODhkZmRkYzZlMWQ4IGFzIHVzZVR5cGVTZWxlY3R9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1tb2R1bGUuanMubWFwXHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-aria/selection/dist/import.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-aria/ssr/dist/import.mjs":
/*!******************************************************!*\
  !*** ./node_modules/@react-aria/ssr/dist/import.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SSRProvider: () => (/* binding */ $b5e257d569688ac6$export$9f8ac96af4b1b2ae),\n/* harmony export */   useIsSSR: () => (/* binding */ $b5e257d569688ac6$export$535bd6ca7f90a273),\n/* harmony export */   useSSRSafeId: () => (/* binding */ $b5e257d569688ac6$export$619500959fc48b26)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ /*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ // We must avoid a circular dependency with @react-aria/utils, and this useLayoutEffect is\r\n// guarded by a check that it only runs on the client side.\r\n// eslint-disable-next-line rulesdir/useLayoutEffectRule\r\n\r\n// Default context value to use in case there is no SSRProvider. This is fine for\r\n// client-only apps. In order to support multiple copies of React Aria potentially\r\n// being on the page at once, the prefix is set to a random number. SSRProvider\r\n// will reset this to zero for consistency between server and client, so in the\r\n// SSR case multiple copies of React Aria is not supported.\r\nconst $b5e257d569688ac6$var$defaultContext = {\r\n    prefix: String(Math.round(Math.random() * 10000000000)),\r\n    current: 0\r\n};\r\nconst $b5e257d569688ac6$var$SSRContext = /*#__PURE__*/ (0, react__WEBPACK_IMPORTED_MODULE_0__).createContext($b5e257d569688ac6$var$defaultContext);\r\nconst $b5e257d569688ac6$var$IsSSRContext = /*#__PURE__*/ (0, react__WEBPACK_IMPORTED_MODULE_0__).createContext(false);\r\n// This is only used in React < 18.\r\nfunction $b5e257d569688ac6$var$LegacySSRProvider(props) {\r\n    let cur = (0, react__WEBPACK_IMPORTED_MODULE_0__.useContext)($b5e257d569688ac6$var$SSRContext);\r\n    let counter = $b5e257d569688ac6$var$useCounter(cur === $b5e257d569688ac6$var$defaultContext);\r\n    let [isSSR, setIsSSR] = (0, react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\r\n    let value = (0, react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>({\r\n            // If this is the first SSRProvider, start with an empty string prefix, otherwise\r\n            // append and increment the counter.\r\n            prefix: cur === $b5e257d569688ac6$var$defaultContext ? \"\" : `${cur.prefix}-${counter}`,\r\n            current: 0\r\n        }), [\r\n        cur,\r\n        counter\r\n    ]);\r\n    // If on the client, and the component was initially server rendered,\r\n    // then schedule a layout effect to update the component after hydration.\r\n    if (typeof document !== \"undefined\") // This if statement technically breaks the rules of hooks, but is safe\r\n    // because the condition never changes after mounting.\r\n    // eslint-disable-next-line react-hooks/rules-of-hooks\r\n    (0, react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)(()=>{\r\n        setIsSSR(false);\r\n    }, []);\r\n    return /*#__PURE__*/ (0, react__WEBPACK_IMPORTED_MODULE_0__).createElement($b5e257d569688ac6$var$SSRContext.Provider, {\r\n        value: value\r\n    }, /*#__PURE__*/ (0, react__WEBPACK_IMPORTED_MODULE_0__).createElement($b5e257d569688ac6$var$IsSSRContext.Provider, {\r\n        value: isSSR\r\n    }, props.children));\r\n}\r\nlet $b5e257d569688ac6$var$warnedAboutSSRProvider = false;\r\nfunction $b5e257d569688ac6$export$9f8ac96af4b1b2ae(props) {\r\n    if (typeof (0, react__WEBPACK_IMPORTED_MODULE_0__)[\"useId\"] === \"function\") {\r\n        if ( true && !$b5e257d569688ac6$var$warnedAboutSSRProvider) {\r\n            console.warn(\"In React 18, SSRProvider is not necessary and is a noop. You can remove it from your app.\");\r\n            $b5e257d569688ac6$var$warnedAboutSSRProvider = true;\r\n        }\r\n        return /*#__PURE__*/ (0, react__WEBPACK_IMPORTED_MODULE_0__).createElement((0, react__WEBPACK_IMPORTED_MODULE_0__).Fragment, null, props.children);\r\n    }\r\n    return /*#__PURE__*/ (0, react__WEBPACK_IMPORTED_MODULE_0__).createElement($b5e257d569688ac6$var$LegacySSRProvider, props);\r\n}\r\nlet $b5e257d569688ac6$var$canUseDOM = Boolean(typeof window !== \"undefined\" && window.document && window.document.createElement);\r\nlet $b5e257d569688ac6$var$componentIds = new WeakMap();\r\nfunction $b5e257d569688ac6$var$useCounter(isDisabled = false) {\r\n    let ctx = (0, react__WEBPACK_IMPORTED_MODULE_0__.useContext)($b5e257d569688ac6$var$SSRContext);\r\n    let ref = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\r\n    // eslint-disable-next-line rulesdir/pure-render\r\n    if (ref.current === null && !isDisabled) {\r\n        var _React___SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED_ReactCurrentOwner, _React___SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\r\n        // In strict mode, React renders components twice, and the ref will be reset to null on the second render.\r\n        // This means our id counter will be incremented twice instead of once. This is a problem because on the\r\n        // server, components are only rendered once and so ids generated on the server won't match the client.\r\n        // In React 18, useId was introduced to solve this, but it is not available in older versions. So to solve this\r\n        // we need to use some React internals to access the underlying Fiber instance, which is stable between renders.\r\n        // This is exposed as ReactCurrentOwner in development, which is all we need since StrictMode only runs in development.\r\n        // To ensure that we only increment the global counter once, we store the starting id for this component in\r\n        // a weak map associated with the Fiber. On the second render, we reset the global counter to this value.\r\n        // Since React runs the second render immediately after the first, this is safe.\r\n        // @ts-ignore\r\n        let currentOwner = (_React___SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = (0, react__WEBPACK_IMPORTED_MODULE_0__).__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED) === null || _React___SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED === void 0 ? void 0 : (_React___SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED_ReactCurrentOwner = _React___SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner) === null || _React___SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED_ReactCurrentOwner === void 0 ? void 0 : _React___SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED_ReactCurrentOwner.current;\r\n        if (currentOwner) {\r\n            let prevComponentValue = $b5e257d569688ac6$var$componentIds.get(currentOwner);\r\n            if (prevComponentValue == null) // On the first render, and first call to useId, store the id and state in our weak map.\r\n            $b5e257d569688ac6$var$componentIds.set(currentOwner, {\r\n                id: ctx.current,\r\n                state: currentOwner.memoizedState\r\n            });\r\n            else if (currentOwner.memoizedState !== prevComponentValue.state) {\r\n                // On the second render, the memoizedState gets reset by React.\r\n                // Reset the counter, and remove from the weak map so we don't\r\n                // do this for subsequent useId calls.\r\n                ctx.current = prevComponentValue.id;\r\n                $b5e257d569688ac6$var$componentIds.delete(currentOwner);\r\n            }\r\n        }\r\n        // eslint-disable-next-line rulesdir/pure-render\r\n        ref.current = ++ctx.current;\r\n    }\r\n    // eslint-disable-next-line rulesdir/pure-render\r\n    return ref.current;\r\n}\r\nfunction $b5e257d569688ac6$var$useLegacySSRSafeId(defaultId) {\r\n    let ctx = (0, react__WEBPACK_IMPORTED_MODULE_0__.useContext)($b5e257d569688ac6$var$SSRContext);\r\n    // If we are rendering in a non-DOM environment, and there's no SSRProvider,\r\n    // provide a warning to hint to the developer to add one.\r\n    if (ctx === $b5e257d569688ac6$var$defaultContext && !$b5e257d569688ac6$var$canUseDOM) console.warn(\"When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.\");\r\n    let counter = $b5e257d569688ac6$var$useCounter(!!defaultId);\r\n    let prefix = ctx === $b5e257d569688ac6$var$defaultContext && \"development\" === \"test\" ? 0 : `react-aria${ctx.prefix}`;\r\n    return defaultId || `${prefix}-${counter}`;\r\n}\r\nfunction $b5e257d569688ac6$var$useModernSSRSafeId(defaultId) {\r\n    // @ts-ignore\r\n    let id = (0, react__WEBPACK_IMPORTED_MODULE_0__).useId();\r\n    let [didSSR] = (0, react__WEBPACK_IMPORTED_MODULE_0__.useState)($b5e257d569688ac6$export$535bd6ca7f90a273());\r\n    let prefix = didSSR || \"development\" === \"test\" ? \"react-aria\" : `react-aria${$b5e257d569688ac6$var$defaultContext.prefix}`;\r\n    return defaultId || `${prefix}-${id}`;\r\n}\r\nconst $b5e257d569688ac6$export$619500959fc48b26 = typeof (0, react__WEBPACK_IMPORTED_MODULE_0__)[\"useId\"] === \"function\" ? $b5e257d569688ac6$var$useModernSSRSafeId : $b5e257d569688ac6$var$useLegacySSRSafeId;\r\nfunction $b5e257d569688ac6$var$getSnapshot() {\r\n    return false;\r\n}\r\nfunction $b5e257d569688ac6$var$getServerSnapshot() {\r\n    return true;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nfunction $b5e257d569688ac6$var$subscribe(onStoreChange) {\r\n    // noop\r\n    return ()=>{};\r\n}\r\nfunction $b5e257d569688ac6$export$535bd6ca7f90a273() {\r\n    // In React 18, we can use useSyncExternalStore to detect if we're server rendering or hydrating.\r\n    if (typeof (0, react__WEBPACK_IMPORTED_MODULE_0__)[\"useSyncExternalStore\"] === \"function\") return (0, react__WEBPACK_IMPORTED_MODULE_0__)[\"useSyncExternalStore\"]($b5e257d569688ac6$var$subscribe, $b5e257d569688ac6$var$getSnapshot, $b5e257d569688ac6$var$getServerSnapshot);\r\n    // eslint-disable-next-line react-hooks/rules-of-hooks\r\n    return (0, react__WEBPACK_IMPORTED_MODULE_0__.useContext)($b5e257d569688ac6$var$IsSSRContext);\r\n}\r\n\r\n\r\n\r\n\r\n\r\n//# sourceMappingURL=module.js.map\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvc3NyL2Rpc3QvaW1wb3J0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWdNO0FBQ2hNO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELGtDQUFZO0FBQ3ZFLDZEQUE2RCxrQ0FBWTtBQUN6RTtBQUNBO0FBQ0Esa0JBQWtCLDZDQUFpQjtBQUNuQztBQUNBLGdDQUFnQywyQ0FBZTtBQUMvQyxvQkFBb0IsMENBQWM7QUFDbEM7QUFDQTtBQUNBLDJFQUEyRSxXQUFXLEdBQUcsUUFBUTtBQUNqRztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxrREFBc0I7QUFDOUI7QUFDQSxLQUFLO0FBQ0wsNkJBQTZCLGtDQUFZO0FBQ3pDO0FBQ0EsS0FBSyxvQkFBb0Isa0NBQVk7QUFDckM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGtDQUFZO0FBQy9CLFlBQVksS0FBK0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGtDQUFZLG9CQUFvQixrQ0FBWTtBQUM3RTtBQUNBLDZCQUE2QixrQ0FBWTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw2Q0FBaUI7QUFDbkMsa0JBQWtCLHlDQUFhO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEZBQTRGLGtDQUFZO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsNkNBQWlCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLGFBQW9CLGNBQWMsQ0FBWSxnQkFBZ0IsV0FBVztBQUMxSSwyQkFBMkIsT0FBTyxHQUFHLFFBQVE7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGtDQUFZO0FBQzdCLHVCQUF1QiwyQ0FBZTtBQUN0QywyQkFBMkIsYUFBb0IsMENBQTBDLDRDQUE0QztBQUNySSwyQkFBMkIsT0FBTyxHQUFHLEdBQUc7QUFDeEM7QUFDQSw2REFBNkQsa0NBQVk7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsa0NBQVkscURBQXFELGtDQUFZO0FBQ2hHO0FBQ0EsZUFBZSw2Q0FBaUI7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNvTDtBQUNwTCIsInNvdXJjZXMiOlsid2VicGFjazovL251dHJpLXNtYXJ0Ly4vbm9kZV9tb2R1bGVzL0ByZWFjdC1hcmlhL3Nzci9kaXN0L2ltcG9ydC5tanM/NjgxYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJDczU0p4JHJlYWN0LCB7dXNlQ29udGV4dCBhcyAkNzNTSngkdXNlQ29udGV4dCwgdXNlU3RhdGUgYXMgJDczU0p4JHVzZVN0YXRlLCB1c2VNZW1vIGFzICQ3M1NKeCR1c2VNZW1vLCB1c2VMYXlvdXRFZmZlY3QgYXMgJDczU0p4JHVzZUxheW91dEVmZmVjdCwgdXNlUmVmIGFzICQ3M1NKeCR1c2VSZWZ9IGZyb20gXCJyZWFjdFwiO1xyXG5cclxuLypcclxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gLypcclxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gLy8gV2UgbXVzdCBhdm9pZCBhIGNpcmN1bGFyIGRlcGVuZGVuY3kgd2l0aCBAcmVhY3QtYXJpYS91dGlscywgYW5kIHRoaXMgdXNlTGF5b3V0RWZmZWN0IGlzXHJcbi8vIGd1YXJkZWQgYnkgYSBjaGVjayB0aGF0IGl0IG9ubHkgcnVucyBvbiB0aGUgY2xpZW50IHNpZGUuXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBydWxlc2Rpci91c2VMYXlvdXRFZmZlY3RSdWxlXHJcblxyXG4vLyBEZWZhdWx0IGNvbnRleHQgdmFsdWUgdG8gdXNlIGluIGNhc2UgdGhlcmUgaXMgbm8gU1NSUHJvdmlkZXIuIFRoaXMgaXMgZmluZSBmb3JcclxuLy8gY2xpZW50LW9ubHkgYXBwcy4gSW4gb3JkZXIgdG8gc3VwcG9ydCBtdWx0aXBsZSBjb3BpZXMgb2YgUmVhY3QgQXJpYSBwb3RlbnRpYWxseVxyXG4vLyBiZWluZyBvbiB0aGUgcGFnZSBhdCBvbmNlLCB0aGUgcHJlZml4IGlzIHNldCB0byBhIHJhbmRvbSBudW1iZXIuIFNTUlByb3ZpZGVyXHJcbi8vIHdpbGwgcmVzZXQgdGhpcyB0byB6ZXJvIGZvciBjb25zaXN0ZW5jeSBiZXR3ZWVuIHNlcnZlciBhbmQgY2xpZW50LCBzbyBpbiB0aGVcclxuLy8gU1NSIGNhc2UgbXVsdGlwbGUgY29waWVzIG9mIFJlYWN0IEFyaWEgaXMgbm90IHN1cHBvcnRlZC5cclxuY29uc3QgJGI1ZTI1N2Q1Njk2ODhhYzYkdmFyJGRlZmF1bHRDb250ZXh0ID0ge1xyXG4gICAgcHJlZml4OiBTdHJpbmcoTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTAwMDAwMDAwMDApKSxcclxuICAgIGN1cnJlbnQ6IDBcclxufTtcclxuY29uc3QgJGI1ZTI1N2Q1Njk2ODhhYzYkdmFyJFNTUkNvbnRleHQgPSAvKiNfX1BVUkVfXyovICgwLCAkNzNTSngkcmVhY3QpLmNyZWF0ZUNvbnRleHQoJGI1ZTI1N2Q1Njk2ODhhYzYkdmFyJGRlZmF1bHRDb250ZXh0KTtcclxuY29uc3QgJGI1ZTI1N2Q1Njk2ODhhYzYkdmFyJElzU1NSQ29udGV4dCA9IC8qI19fUFVSRV9fKi8gKDAsICQ3M1NKeCRyZWFjdCkuY3JlYXRlQ29udGV4dChmYWxzZSk7XHJcbi8vIFRoaXMgaXMgb25seSB1c2VkIGluIFJlYWN0IDwgMTguXHJcbmZ1bmN0aW9uICRiNWUyNTdkNTY5Njg4YWM2JHZhciRMZWdhY3lTU1JQcm92aWRlcihwcm9wcykge1xyXG4gICAgbGV0IGN1ciA9ICgwLCAkNzNTSngkdXNlQ29udGV4dCkoJGI1ZTI1N2Q1Njk2ODhhYzYkdmFyJFNTUkNvbnRleHQpO1xyXG4gICAgbGV0IGNvdW50ZXIgPSAkYjVlMjU3ZDU2OTY4OGFjNiR2YXIkdXNlQ291bnRlcihjdXIgPT09ICRiNWUyNTdkNTY5Njg4YWM2JHZhciRkZWZhdWx0Q29udGV4dCk7XHJcbiAgICBsZXQgW2lzU1NSLCBzZXRJc1NTUl0gPSAoMCwgJDczU0p4JHVzZVN0YXRlKSh0cnVlKTtcclxuICAgIGxldCB2YWx1ZSA9ICgwLCAkNzNTSngkdXNlTWVtbykoKCk9Pih7XHJcbiAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IFNTUlByb3ZpZGVyLCBzdGFydCB3aXRoIGFuIGVtcHR5IHN0cmluZyBwcmVmaXgsIG90aGVyd2lzZVxyXG4gICAgICAgICAgICAvLyBhcHBlbmQgYW5kIGluY3JlbWVudCB0aGUgY291bnRlci5cclxuICAgICAgICAgICAgcHJlZml4OiBjdXIgPT09ICRiNWUyNTdkNTY5Njg4YWM2JHZhciRkZWZhdWx0Q29udGV4dCA/IFwiXCIgOiBgJHtjdXIucHJlZml4fS0ke2NvdW50ZXJ9YCxcclxuICAgICAgICAgICAgY3VycmVudDogMFxyXG4gICAgICAgIH0pLCBbXHJcbiAgICAgICAgY3VyLFxyXG4gICAgICAgIGNvdW50ZXJcclxuICAgIF0pO1xyXG4gICAgLy8gSWYgb24gdGhlIGNsaWVudCwgYW5kIHRoZSBjb21wb25lbnQgd2FzIGluaXRpYWxseSBzZXJ2ZXIgcmVuZGVyZWQsXHJcbiAgICAvLyB0aGVuIHNjaGVkdWxlIGEgbGF5b3V0IGVmZmVjdCB0byB1cGRhdGUgdGhlIGNvbXBvbmVudCBhZnRlciBoeWRyYXRpb24uXHJcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiKSAvLyBUaGlzIGlmIHN0YXRlbWVudCB0ZWNobmljYWxseSBicmVha3MgdGhlIHJ1bGVzIG9mIGhvb2tzLCBidXQgaXMgc2FmZVxyXG4gICAgLy8gYmVjYXVzZSB0aGUgY29uZGl0aW9uIG5ldmVyIGNoYW5nZXMgYWZ0ZXIgbW91bnRpbmcuXHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvcnVsZXMtb2YtaG9va3NcclxuICAgICgwLCAkNzNTSngkdXNlTGF5b3V0RWZmZWN0KSgoKT0+e1xyXG4gICAgICAgIHNldElzU1NSKGZhbHNlKTtcclxuICAgIH0sIFtdKTtcclxuICAgIHJldHVybiAvKiNfX1BVUkVfXyovICgwLCAkNzNTSngkcmVhY3QpLmNyZWF0ZUVsZW1lbnQoJGI1ZTI1N2Q1Njk2ODhhYzYkdmFyJFNTUkNvbnRleHQuUHJvdmlkZXIsIHtcclxuICAgICAgICB2YWx1ZTogdmFsdWVcclxuICAgIH0sIC8qI19fUFVSRV9fKi8gKDAsICQ3M1NKeCRyZWFjdCkuY3JlYXRlRWxlbWVudCgkYjVlMjU3ZDU2OTY4OGFjNiR2YXIkSXNTU1JDb250ZXh0LlByb3ZpZGVyLCB7XHJcbiAgICAgICAgdmFsdWU6IGlzU1NSXHJcbiAgICB9LCBwcm9wcy5jaGlsZHJlbikpO1xyXG59XHJcbmxldCAkYjVlMjU3ZDU2OTY4OGFjNiR2YXIkd2FybmVkQWJvdXRTU1JQcm92aWRlciA9IGZhbHNlO1xyXG5mdW5jdGlvbiAkYjVlMjU3ZDU2OTY4OGFjNiRleHBvcnQkOWY4YWM5NmFmNGIxYjJhZShwcm9wcykge1xyXG4gICAgaWYgKHR5cGVvZiAoMCwgJDczU0p4JHJlYWN0KVtcInVzZUlkXCJdID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwidGVzdFwiICYmICEkYjVlMjU3ZDU2OTY4OGFjNiR2YXIkd2FybmVkQWJvdXRTU1JQcm92aWRlcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJJbiBSZWFjdCAxOCwgU1NSUHJvdmlkZXIgaXMgbm90IG5lY2Vzc2FyeSBhbmQgaXMgYSBub29wLiBZb3UgY2FuIHJlbW92ZSBpdCBmcm9tIHlvdXIgYXBwLlwiKTtcclxuICAgICAgICAgICAgJGI1ZTI1N2Q1Njk2ODhhYzYkdmFyJHdhcm5lZEFib3V0U1NSUHJvdmlkZXIgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gLyojX19QVVJFX18qLyAoMCwgJDczU0p4JHJlYWN0KS5jcmVhdGVFbGVtZW50KCgwLCAkNzNTSngkcmVhY3QpLkZyYWdtZW50LCBudWxsLCBwcm9wcy5jaGlsZHJlbik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gLyojX19QVVJFX18qLyAoMCwgJDczU0p4JHJlYWN0KS5jcmVhdGVFbGVtZW50KCRiNWUyNTdkNTY5Njg4YWM2JHZhciRMZWdhY3lTU1JQcm92aWRlciwgcHJvcHMpO1xyXG59XHJcbmxldCAkYjVlMjU3ZDU2OTY4OGFjNiR2YXIkY2FuVXNlRE9NID0gQm9vbGVhbih0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5kb2N1bWVudCAmJiB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCk7XHJcbmxldCAkYjVlMjU3ZDU2OTY4OGFjNiR2YXIkY29tcG9uZW50SWRzID0gbmV3IFdlYWtNYXAoKTtcclxuZnVuY3Rpb24gJGI1ZTI1N2Q1Njk2ODhhYzYkdmFyJHVzZUNvdW50ZXIoaXNEaXNhYmxlZCA9IGZhbHNlKSB7XHJcbiAgICBsZXQgY3R4ID0gKDAsICQ3M1NKeCR1c2VDb250ZXh0KSgkYjVlMjU3ZDU2OTY4OGFjNiR2YXIkU1NSQ29udGV4dCk7XHJcbiAgICBsZXQgcmVmID0gKDAsICQ3M1NKeCR1c2VSZWYpKG51bGwpO1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJ1bGVzZGlyL3B1cmUtcmVuZGVyXHJcbiAgICBpZiAocmVmLmN1cnJlbnQgPT09IG51bGwgJiYgIWlzRGlzYWJsZWQpIHtcclxuICAgICAgICB2YXIgX1JlYWN0X19fU0VDUkVUX0lOVEVSTkFMU19ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVEX1JlYWN0Q3VycmVudE93bmVyLCBfUmVhY3RfX19TRUNSRVRfSU5URVJOQUxTX0RPX05PVF9VU0VfT1JfWU9VX1dJTExfQkVfRklSRUQ7XHJcbiAgICAgICAgLy8gSW4gc3RyaWN0IG1vZGUsIFJlYWN0IHJlbmRlcnMgY29tcG9uZW50cyB0d2ljZSwgYW5kIHRoZSByZWYgd2lsbCBiZSByZXNldCB0byBudWxsIG9uIHRoZSBzZWNvbmQgcmVuZGVyLlxyXG4gICAgICAgIC8vIFRoaXMgbWVhbnMgb3VyIGlkIGNvdW50ZXIgd2lsbCBiZSBpbmNyZW1lbnRlZCB0d2ljZSBpbnN0ZWFkIG9mIG9uY2UuIFRoaXMgaXMgYSBwcm9ibGVtIGJlY2F1c2Ugb24gdGhlXHJcbiAgICAgICAgLy8gc2VydmVyLCBjb21wb25lbnRzIGFyZSBvbmx5IHJlbmRlcmVkIG9uY2UgYW5kIHNvIGlkcyBnZW5lcmF0ZWQgb24gdGhlIHNlcnZlciB3b24ndCBtYXRjaCB0aGUgY2xpZW50LlxyXG4gICAgICAgIC8vIEluIFJlYWN0IDE4LCB1c2VJZCB3YXMgaW50cm9kdWNlZCB0byBzb2x2ZSB0aGlzLCBidXQgaXQgaXMgbm90IGF2YWlsYWJsZSBpbiBvbGRlciB2ZXJzaW9ucy4gU28gdG8gc29sdmUgdGhpc1xyXG4gICAgICAgIC8vIHdlIG5lZWQgdG8gdXNlIHNvbWUgUmVhY3QgaW50ZXJuYWxzIHRvIGFjY2VzcyB0aGUgdW5kZXJseWluZyBGaWJlciBpbnN0YW5jZSwgd2hpY2ggaXMgc3RhYmxlIGJldHdlZW4gcmVuZGVycy5cclxuICAgICAgICAvLyBUaGlzIGlzIGV4cG9zZWQgYXMgUmVhY3RDdXJyZW50T3duZXIgaW4gZGV2ZWxvcG1lbnQsIHdoaWNoIGlzIGFsbCB3ZSBuZWVkIHNpbmNlIFN0cmljdE1vZGUgb25seSBydW5zIGluIGRldmVsb3BtZW50LlxyXG4gICAgICAgIC8vIFRvIGVuc3VyZSB0aGF0IHdlIG9ubHkgaW5jcmVtZW50IHRoZSBnbG9iYWwgY291bnRlciBvbmNlLCB3ZSBzdG9yZSB0aGUgc3RhcnRpbmcgaWQgZm9yIHRoaXMgY29tcG9uZW50IGluXHJcbiAgICAgICAgLy8gYSB3ZWFrIG1hcCBhc3NvY2lhdGVkIHdpdGggdGhlIEZpYmVyLiBPbiB0aGUgc2Vjb25kIHJlbmRlciwgd2UgcmVzZXQgdGhlIGdsb2JhbCBjb3VudGVyIHRvIHRoaXMgdmFsdWUuXHJcbiAgICAgICAgLy8gU2luY2UgUmVhY3QgcnVucyB0aGUgc2Vjb25kIHJlbmRlciBpbW1lZGlhdGVseSBhZnRlciB0aGUgZmlyc3QsIHRoaXMgaXMgc2FmZS5cclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgbGV0IGN1cnJlbnRPd25lciA9IChfUmVhY3RfX19TRUNSRVRfSU5URVJOQUxTX0RPX05PVF9VU0VfT1JfWU9VX1dJTExfQkVfRklSRUQgPSAoMCwgJDczU0p4JHJlYWN0KS5fX1NFQ1JFVF9JTlRFUk5BTFNfRE9fTk9UX1VTRV9PUl9ZT1VfV0lMTF9CRV9GSVJFRCkgPT09IG51bGwgfHwgX1JlYWN0X19fU0VDUkVUX0lOVEVSTkFMU19ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVEID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX1JlYWN0X19fU0VDUkVUX0lOVEVSTkFMU19ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVEX1JlYWN0Q3VycmVudE93bmVyID0gX1JlYWN0X19fU0VDUkVUX0lOVEVSTkFMU19ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVELlJlYWN0Q3VycmVudE93bmVyKSA9PT0gbnVsbCB8fCBfUmVhY3RfX19TRUNSRVRfSU5URVJOQUxTX0RPX05PVF9VU0VfT1JfWU9VX1dJTExfQkVfRklSRURfUmVhY3RDdXJyZW50T3duZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9SZWFjdF9fX1NFQ1JFVF9JTlRFUk5BTFNfRE9fTk9UX1VTRV9PUl9ZT1VfV0lMTF9CRV9GSVJFRF9SZWFjdEN1cnJlbnRPd25lci5jdXJyZW50O1xyXG4gICAgICAgIGlmIChjdXJyZW50T3duZXIpIHtcclxuICAgICAgICAgICAgbGV0IHByZXZDb21wb25lbnRWYWx1ZSA9ICRiNWUyNTdkNTY5Njg4YWM2JHZhciRjb21wb25lbnRJZHMuZ2V0KGN1cnJlbnRPd25lcik7XHJcbiAgICAgICAgICAgIGlmIChwcmV2Q29tcG9uZW50VmFsdWUgPT0gbnVsbCkgLy8gT24gdGhlIGZpcnN0IHJlbmRlciwgYW5kIGZpcnN0IGNhbGwgdG8gdXNlSWQsIHN0b3JlIHRoZSBpZCBhbmQgc3RhdGUgaW4gb3VyIHdlYWsgbWFwLlxyXG4gICAgICAgICAgICAkYjVlMjU3ZDU2OTY4OGFjNiR2YXIkY29tcG9uZW50SWRzLnNldChjdXJyZW50T3duZXIsIHtcclxuICAgICAgICAgICAgICAgIGlkOiBjdHguY3VycmVudCxcclxuICAgICAgICAgICAgICAgIHN0YXRlOiBjdXJyZW50T3duZXIubWVtb2l6ZWRTdGF0ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZWxzZSBpZiAoY3VycmVudE93bmVyLm1lbW9pemVkU3RhdGUgIT09IHByZXZDb21wb25lbnRWYWx1ZS5zdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gT24gdGhlIHNlY29uZCByZW5kZXIsIHRoZSBtZW1vaXplZFN0YXRlIGdldHMgcmVzZXQgYnkgUmVhY3QuXHJcbiAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgY291bnRlciwgYW5kIHJlbW92ZSBmcm9tIHRoZSB3ZWFrIG1hcCBzbyB3ZSBkb24ndFxyXG4gICAgICAgICAgICAgICAgLy8gZG8gdGhpcyBmb3Igc3Vic2VxdWVudCB1c2VJZCBjYWxscy5cclxuICAgICAgICAgICAgICAgIGN0eC5jdXJyZW50ID0gcHJldkNvbXBvbmVudFZhbHVlLmlkO1xyXG4gICAgICAgICAgICAgICAgJGI1ZTI1N2Q1Njk2ODhhYzYkdmFyJGNvbXBvbmVudElkcy5kZWxldGUoY3VycmVudE93bmVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcnVsZXNkaXIvcHVyZS1yZW5kZXJcclxuICAgICAgICByZWYuY3VycmVudCA9ICsrY3R4LmN1cnJlbnQ7XHJcbiAgICB9XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcnVsZXNkaXIvcHVyZS1yZW5kZXJcclxuICAgIHJldHVybiByZWYuY3VycmVudDtcclxufVxyXG5mdW5jdGlvbiAkYjVlMjU3ZDU2OTY4OGFjNiR2YXIkdXNlTGVnYWN5U1NSU2FmZUlkKGRlZmF1bHRJZCkge1xyXG4gICAgbGV0IGN0eCA9ICgwLCAkNzNTSngkdXNlQ29udGV4dCkoJGI1ZTI1N2Q1Njk2ODhhYzYkdmFyJFNTUkNvbnRleHQpO1xyXG4gICAgLy8gSWYgd2UgYXJlIHJlbmRlcmluZyBpbiBhIG5vbi1ET00gZW52aXJvbm1lbnQsIGFuZCB0aGVyZSdzIG5vIFNTUlByb3ZpZGVyLFxyXG4gICAgLy8gcHJvdmlkZSBhIHdhcm5pbmcgdG8gaGludCB0byB0aGUgZGV2ZWxvcGVyIHRvIGFkZCBvbmUuXHJcbiAgICBpZiAoY3R4ID09PSAkYjVlMjU3ZDU2OTY4OGFjNiR2YXIkZGVmYXVsdENvbnRleHQgJiYgISRiNWUyNTdkNTY5Njg4YWM2JHZhciRjYW5Vc2VET00pIGNvbnNvbGUud2FybihcIldoZW4gc2VydmVyIHJlbmRlcmluZywgeW91IG11c3Qgd3JhcCB5b3VyIGFwcGxpY2F0aW9uIGluIGFuIDxTU1JQcm92aWRlcj4gdG8gZW5zdXJlIGNvbnNpc3RlbnQgaWRzIGFyZSBnZW5lcmF0ZWQgYmV0d2VlbiB0aGUgY2xpZW50IGFuZCBzZXJ2ZXIuXCIpO1xyXG4gICAgbGV0IGNvdW50ZXIgPSAkYjVlMjU3ZDU2OTY4OGFjNiR2YXIkdXNlQ291bnRlcighIWRlZmF1bHRJZCk7XHJcbiAgICBsZXQgcHJlZml4ID0gY3R4ID09PSAkYjVlMjU3ZDU2OTY4OGFjNiR2YXIkZGVmYXVsdENvbnRleHQgJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwidGVzdFwiID8gXCJyZWFjdC1hcmlhXCIgOiBgcmVhY3QtYXJpYSR7Y3R4LnByZWZpeH1gO1xyXG4gICAgcmV0dXJuIGRlZmF1bHRJZCB8fCBgJHtwcmVmaXh9LSR7Y291bnRlcn1gO1xyXG59XHJcbmZ1bmN0aW9uICRiNWUyNTdkNTY5Njg4YWM2JHZhciR1c2VNb2Rlcm5TU1JTYWZlSWQoZGVmYXVsdElkKSB7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBsZXQgaWQgPSAoMCwgJDczU0p4JHJlYWN0KS51c2VJZCgpO1xyXG4gICAgbGV0IFtkaWRTU1JdID0gKDAsICQ3M1NKeCR1c2VTdGF0ZSkoJGI1ZTI1N2Q1Njk2ODhhYzYkZXhwb3J0JDUzNWJkNmNhN2Y5MGEyNzMoKSk7XHJcbiAgICBsZXQgcHJlZml4ID0gZGlkU1NSIHx8IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInRlc3RcIiA/IFwicmVhY3QtYXJpYVwiIDogYHJlYWN0LWFyaWEkeyRiNWUyNTdkNTY5Njg4YWM2JHZhciRkZWZhdWx0Q29udGV4dC5wcmVmaXh9YDtcclxuICAgIHJldHVybiBkZWZhdWx0SWQgfHwgYCR7cHJlZml4fS0ke2lkfWA7XHJcbn1cclxuY29uc3QgJGI1ZTI1N2Q1Njk2ODhhYzYkZXhwb3J0JDYxOTUwMDk1OWZjNDhiMjYgPSB0eXBlb2YgKDAsICQ3M1NKeCRyZWFjdClbXCJ1c2VJZFwiXSA9PT0gXCJmdW5jdGlvblwiID8gJGI1ZTI1N2Q1Njk2ODhhYzYkdmFyJHVzZU1vZGVyblNTUlNhZmVJZCA6ICRiNWUyNTdkNTY5Njg4YWM2JHZhciR1c2VMZWdhY3lTU1JTYWZlSWQ7XHJcbmZ1bmN0aW9uICRiNWUyNTdkNTY5Njg4YWM2JHZhciRnZXRTbmFwc2hvdCgpIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5mdW5jdGlvbiAkYjVlMjU3ZDU2OTY4OGFjNiR2YXIkZ2V0U2VydmVyU25hcHNob3QoKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXHJcbmZ1bmN0aW9uICRiNWUyNTdkNTY5Njg4YWM2JHZhciRzdWJzY3JpYmUob25TdG9yZUNoYW5nZSkge1xyXG4gICAgLy8gbm9vcFxyXG4gICAgcmV0dXJuICgpPT57fTtcclxufVxyXG5mdW5jdGlvbiAkYjVlMjU3ZDU2OTY4OGFjNiRleHBvcnQkNTM1YmQ2Y2E3ZjkwYTI3MygpIHtcclxuICAgIC8vIEluIFJlYWN0IDE4LCB3ZSBjYW4gdXNlIHVzZVN5bmNFeHRlcm5hbFN0b3JlIHRvIGRldGVjdCBpZiB3ZSdyZSBzZXJ2ZXIgcmVuZGVyaW5nIG9yIGh5ZHJhdGluZy5cclxuICAgIGlmICh0eXBlb2YgKDAsICQ3M1NKeCRyZWFjdClbXCJ1c2VTeW5jRXh0ZXJuYWxTdG9yZVwiXSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gKDAsICQ3M1NKeCRyZWFjdClbXCJ1c2VTeW5jRXh0ZXJuYWxTdG9yZVwiXSgkYjVlMjU3ZDU2OTY4OGFjNiR2YXIkc3Vic2NyaWJlLCAkYjVlMjU3ZDU2OTY4OGFjNiR2YXIkZ2V0U25hcHNob3QsICRiNWUyNTdkNTY5Njg4YWM2JHZhciRnZXRTZXJ2ZXJTbmFwc2hvdCk7XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvcnVsZXMtb2YtaG9va3NcclxuICAgIHJldHVybiAoMCwgJDczU0p4JHVzZUNvbnRleHQpKCRiNWUyNTdkNTY5Njg4YWM2JHZhciRJc1NTUkNvbnRleHQpO1xyXG59XHJcblxyXG5cclxuXHJcblxyXG5leHBvcnQgeyRiNWUyNTdkNTY5Njg4YWM2JGV4cG9ydCQ5ZjhhYzk2YWY0YjFiMmFlIGFzIFNTUlByb3ZpZGVyLCAkYjVlMjU3ZDU2OTY4OGFjNiRleHBvcnQkNjE5NTAwOTU5ZmM0OGIyNiBhcyB1c2VTU1JTYWZlSWQsICRiNWUyNTdkNTY5Njg4YWM2JGV4cG9ydCQ1MzViZDZjYTdmOTBhMjczIGFzIHVzZUlzU1NSfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bW9kdWxlLmpzLm1hcFxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-aria/ssr/dist/import.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-aria/utils/dist/import.mjs":
/*!********************************************************!*\
  !*** ./node_modules/@react-aria/utils/dist/import.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RouterProvider: () => (/* binding */ $ea8dcbcb9ea1b556$export$323e4fc2fa4753fb),\n/* harmony export */   chain: () => (/* binding */ $ff5963eb1fccf552$export$e08e3b67e392101e),\n/* harmony export */   clamp: () => (/* reexport safe */ _react_stately_utils__WEBPACK_IMPORTED_MODULE_3__.clamp),\n/* harmony export */   filterDOMProps: () => (/* binding */ $65484d02dcb7eb3e$export$457c3d6518dd4c6f),\n/* harmony export */   focusWithoutScrolling: () => (/* binding */ $7215afc6de606d6b$export$de79e2c695e052f3),\n/* harmony export */   getOffset: () => (/* binding */ $ab71dadb03a6fb2e$export$622cea445a1c5b7d),\n/* harmony export */   getOwnerDocument: () => (/* binding */ $431fbd86ca7dc216$export$b204af158042fbac),\n/* harmony export */   getOwnerWindow: () => (/* binding */ $431fbd86ca7dc216$export$f21a1ffae260145a),\n/* harmony export */   getScrollParent: () => (/* binding */ $62d8ded9296f3872$export$cfa2225e87938781),\n/* harmony export */   getSyntheticLinkProps: () => (/* binding */ $ea8dcbcb9ea1b556$export$51437d503373d223),\n/* harmony export */   isAndroid: () => (/* binding */ $c87311424ea30a05$export$a11b0059900ceec8),\n/* harmony export */   isAppleDevice: () => (/* binding */ $c87311424ea30a05$export$e1865c3bedcd822b),\n/* harmony export */   isChrome: () => (/* binding */ $c87311424ea30a05$export$6446a186d09e379e),\n/* harmony export */   isFirefox: () => (/* binding */ $c87311424ea30a05$export$b7d78993b74f766d),\n/* harmony export */   isIOS: () => (/* binding */ $c87311424ea30a05$export$fedb369cb70207f1),\n/* harmony export */   isIPad: () => (/* binding */ $c87311424ea30a05$export$7bef049ce92e4224),\n/* harmony export */   isIPhone: () => (/* binding */ $c87311424ea30a05$export$186c6964ca17d99),\n/* harmony export */   isMac: () => (/* binding */ $c87311424ea30a05$export$9ac100e40613ea10),\n/* harmony export */   isScrollable: () => (/* binding */ $62d8ded9296f3872$export$2bb74740c4e19def),\n/* harmony export */   isVirtualClick: () => (/* binding */ $6a7db85432448f7f$export$60278871457622de),\n/* harmony export */   isVirtualPointerEvent: () => (/* binding */ $6a7db85432448f7f$export$29bf1b5f2c56cf63),\n/* harmony export */   isWebKit: () => (/* binding */ $c87311424ea30a05$export$78551043582a6a98),\n/* harmony export */   mergeIds: () => (/* binding */ $bdb11010cef70236$export$cd8c9cb68f842629),\n/* harmony export */   mergeProps: () => (/* binding */ $3ef42575df84b30b$export$9d1611c77c2fe928),\n/* harmony export */   mergeRefs: () => (/* binding */ $5dc95899b306f630$export$c9058316764c140e),\n/* harmony export */   openLink: () => (/* binding */ $ea8dcbcb9ea1b556$export$95185d699e05d4d7),\n/* harmony export */   runAfterTransition: () => (/* binding */ $bbed8b41f857bcc0$export$24490316f764c430),\n/* harmony export */   scrollIntoView: () => (/* binding */ $2f04cbc44ee30ce0$export$53a0910f038337bd),\n/* harmony export */   scrollIntoViewport: () => (/* binding */ $2f04cbc44ee30ce0$export$c826860796309d1b),\n/* harmony export */   shouldClientNavigate: () => (/* binding */ $ea8dcbcb9ea1b556$export$efa8c9099e530235),\n/* harmony export */   snapValueToStep: () => (/* reexport safe */ _react_stately_utils__WEBPACK_IMPORTED_MODULE_3__.snapValueToStep),\n/* harmony export */   useDeepMemo: () => (/* binding */ $5a387cc49350e6db$export$722debc0e56fea39),\n/* harmony export */   useDescription: () => (/* binding */ $ef06256079686ba0$export$f8aeda7b10753fa1),\n/* harmony export */   useDrag1D: () => (/* binding */ $9cc09df9fd7676be$export$7bbed75feba39706),\n/* harmony export */   useEffectEvent: () => (/* binding */ $8ae05eaa5c114e9c$export$7f54fc3180508a52),\n/* harmony export */   useEvent: () => (/* binding */ $e9faafb641e167db$export$90fc3a17d93f704c),\n/* harmony export */   useFormReset: () => (/* binding */ $99facab73266f662$export$5add1d006293d136),\n/* harmony export */   useGlobalListeners: () => (/* binding */ $03deb23ff14920c4$export$4eaf04e54aa8eed6),\n/* harmony export */   useId: () => (/* binding */ $bdb11010cef70236$export$f680877a34711e37),\n/* harmony export */   useLabels: () => (/* binding */ $313b98861ee5dd6c$export$d6875122194c7b44),\n/* harmony export */   useLayoutEffect: () => (/* binding */ $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c),\n/* harmony export */   useObjectRef: () => (/* binding */ $df56164dff5785e2$export$4338b53315abf666),\n/* harmony export */   useResizeObserver: () => (/* binding */ $9daab02d461809db$export$683480f191c0e3ea),\n/* harmony export */   useRouter: () => (/* binding */ $ea8dcbcb9ea1b556$export$9a302a45f65d0572),\n/* harmony export */   useSlotId: () => (/* binding */ $bdb11010cef70236$export$b4cc09c592e8fdb8),\n/* harmony export */   useSyncRef: () => (/* binding */ $e7801be82b4b2a53$export$4debdb1a3f0fa79e),\n/* harmony export */   useUpdateEffect: () => (/* binding */ $4f58c5f72bcf79f7$export$496315a1608d9602),\n/* harmony export */   useValueEffect: () => (/* binding */ $1dbecbe27a04f9af$export$14d238f342723f25),\n/* harmony export */   useViewportSize: () => (/* binding */ $5df64b3807dc15ee$export$d699905dd57c73ca)\n/* harmony export */ });\n/* harmony import */ var _react_stately_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @react-stately/utils */ \"(ssr)/./node_modules/@react-stately/utils/dist/import.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _react_aria_ssr__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @react-aria/ssr */ \"(ssr)/./node_modules/@react-aria/ssr/dist/import.mjs\");\n/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! clsx */ \"(ssr)/./node_modules/@react-aria/utils/node_modules/clsx/dist/clsx.mjs\");\n\r\n\r\n\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ /*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\nconst $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c = typeof document !== \"undefined\" ? (0, react__WEBPACK_IMPORTED_MODULE_0__).useLayoutEffect : ()=>{};\r\n\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n/*\r\n * Copyright 2023 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n\r\nfunction $8ae05eaa5c114e9c$export$7f54fc3180508a52(fn) {\r\n    const ref = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\r\n    (0, $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c)(()=>{\r\n        ref.current = fn;\r\n    }, [\r\n        fn\r\n    ]);\r\n    // @ts-ignore\r\n    return (0, react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((...args)=>{\r\n        const f = ref.current;\r\n        return f === null || f === void 0 ? void 0 : f(...args);\r\n    }, []);\r\n}\r\n\r\n\r\nfunction $1dbecbe27a04f9af$export$14d238f342723f25(defaultValue) {\r\n    let [value, setValue] = (0, react__WEBPACK_IMPORTED_MODULE_0__.useState)(defaultValue);\r\n    let effect = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\r\n    // Store the function in a ref so we can always access the current version\r\n    // which has the proper `value` in scope.\r\n    let nextRef = (0, $8ae05eaa5c114e9c$export$7f54fc3180508a52)(()=>{\r\n        if (!effect.current) return;\r\n        // Run the generator to the next yield.\r\n        let newValue = effect.current.next();\r\n        // If the generator is done, reset the effect.\r\n        if (newValue.done) {\r\n            effect.current = null;\r\n            return;\r\n        }\r\n        // If the value is the same as the current value,\r\n        // then continue to the next yield. Otherwise,\r\n        // set the value in state and wait for the next layout effect.\r\n        if (value === newValue.value) nextRef();\r\n        else setValue(newValue.value);\r\n    });\r\n    (0, $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c)(()=>{\r\n        // If there is an effect currently running, continue to the next yield.\r\n        if (effect.current) nextRef();\r\n    });\r\n    let queue = (0, $8ae05eaa5c114e9c$export$7f54fc3180508a52)((fn)=>{\r\n        effect.current = fn(value);\r\n        nextRef();\r\n    });\r\n    return [\r\n        value,\r\n        queue\r\n    ];\r\n}\r\n\r\n\r\n// copied from SSRProvider.tsx to reduce exports, if needed again, consider sharing\r\nlet $bdb11010cef70236$var$canUseDOM = Boolean(typeof window !== \"undefined\" && window.document && window.document.createElement);\r\nlet $bdb11010cef70236$var$idsUpdaterMap = new Map();\r\nfunction $bdb11010cef70236$export$f680877a34711e37(defaultId) {\r\n    let [value, setValue] = (0, react__WEBPACK_IMPORTED_MODULE_0__.useState)(defaultId);\r\n    let nextId = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\r\n    let res = (0, _react_aria_ssr__WEBPACK_IMPORTED_MODULE_2__.useSSRSafeId)(value);\r\n    let updateValue = (0, react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((val)=>{\r\n        nextId.current = val;\r\n    }, []);\r\n    if ($bdb11010cef70236$var$canUseDOM) $bdb11010cef70236$var$idsUpdaterMap.set(res, updateValue);\r\n    (0, $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c)(()=>{\r\n        let r = res;\r\n        return ()=>{\r\n            $bdb11010cef70236$var$idsUpdaterMap.delete(r);\r\n        };\r\n    }, [\r\n        res\r\n    ]);\r\n    // This cannot cause an infinite loop because the ref is updated first.\r\n    // eslint-disable-next-line\r\n    (0, react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\r\n        let newId = nextId.current;\r\n        if (newId) {\r\n            nextId.current = null;\r\n            setValue(newId);\r\n        }\r\n    });\r\n    return res;\r\n}\r\nfunction $bdb11010cef70236$export$cd8c9cb68f842629(idA, idB) {\r\n    if (idA === idB) return idA;\r\n    let setIdA = $bdb11010cef70236$var$idsUpdaterMap.get(idA);\r\n    if (setIdA) {\r\n        setIdA(idB);\r\n        return idB;\r\n    }\r\n    let setIdB = $bdb11010cef70236$var$idsUpdaterMap.get(idB);\r\n    if (setIdB) {\r\n        setIdB(idA);\r\n        return idA;\r\n    }\r\n    return idB;\r\n}\r\nfunction $bdb11010cef70236$export$b4cc09c592e8fdb8(depArray = []) {\r\n    let id = $bdb11010cef70236$export$f680877a34711e37();\r\n    let [resolvedId, setResolvedId] = (0, $1dbecbe27a04f9af$export$14d238f342723f25)(id);\r\n    let updateId = (0, react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\r\n        setResolvedId(function*() {\r\n            yield id;\r\n            yield document.getElementById(id) ? id : undefined;\r\n        });\r\n    }, [\r\n        id,\r\n        setResolvedId\r\n    ]);\r\n    (0, $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c)(updateId, [\r\n        id,\r\n        updateId,\r\n        ...depArray\r\n    ]);\r\n    return resolvedId;\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ /**\r\n * Calls all functions in the order they were chained with the same arguments.\r\n */ function $ff5963eb1fccf552$export$e08e3b67e392101e(...callbacks) {\r\n    return (...args)=>{\r\n        for (let callback of callbacks)if (typeof callback === \"function\") callback(...args);\r\n    };\r\n}\r\n\r\n\r\nconst $431fbd86ca7dc216$export$b204af158042fbac = (el)=>{\r\n    var _el_ownerDocument;\r\n    return (_el_ownerDocument = el === null || el === void 0 ? void 0 : el.ownerDocument) !== null && _el_ownerDocument !== void 0 ? _el_ownerDocument : document;\r\n};\r\nconst $431fbd86ca7dc216$export$f21a1ffae260145a = (el)=>{\r\n    if (el && \"window\" in el && el.window === el) return el;\r\n    const doc = $431fbd86ca7dc216$export$b204af158042fbac(el);\r\n    return doc.defaultView || window;\r\n};\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n\r\n\r\nfunction $3ef42575df84b30b$export$9d1611c77c2fe928(...args) {\r\n    // Start with a base clone of the first argument. This is a lot faster than starting\r\n    // with an empty object and adding properties as we go.\r\n    let result = {\r\n        ...args[0]\r\n    };\r\n    for(let i = 1; i < args.length; i++){\r\n        let props = args[i];\r\n        for(let key in props){\r\n            let a = result[key];\r\n            let b = props[key];\r\n            // Chain events\r\n            if (typeof a === \"function\" && typeof b === \"function\" && // This is a lot faster than a regex.\r\n            key[0] === \"o\" && key[1] === \"n\" && key.charCodeAt(2) >= /* 'A' */ 65 && key.charCodeAt(2) <= /* 'Z' */ 90) result[key] = (0, $ff5963eb1fccf552$export$e08e3b67e392101e)(a, b);\r\n            else if ((key === \"className\" || key === \"UNSAFE_className\") && typeof a === \"string\" && typeof b === \"string\") result[key] = (0, clsx__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(a, b);\r\n            else if (key === \"id\" && a && b) result.id = (0, $bdb11010cef70236$export$cd8c9cb68f842629)(a, b);\r\n            else result[key] = b !== undefined ? b : a;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ function $5dc95899b306f630$export$c9058316764c140e(...refs) {\r\n    if (refs.length === 1) return refs[0];\r\n    return (value)=>{\r\n        for (let ref of refs){\r\n            if (typeof ref === \"function\") ref(value);\r\n            else if (ref != null) ref.current = value;\r\n        }\r\n    };\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ const $65484d02dcb7eb3e$var$DOMPropNames = new Set([\r\n    \"id\"\r\n]);\r\nconst $65484d02dcb7eb3e$var$labelablePropNames = new Set([\r\n    \"aria-label\",\r\n    \"aria-labelledby\",\r\n    \"aria-describedby\",\r\n    \"aria-details\"\r\n]);\r\n// See LinkDOMProps in dom.d.ts.\r\nconst $65484d02dcb7eb3e$var$linkPropNames = new Set([\r\n    \"href\",\r\n    \"target\",\r\n    \"rel\",\r\n    \"download\",\r\n    \"ping\",\r\n    \"referrerPolicy\"\r\n]);\r\nconst $65484d02dcb7eb3e$var$propRe = /^(data-.*)$/;\r\nfunction $65484d02dcb7eb3e$export$457c3d6518dd4c6f(props, opts = {}) {\r\n    let { labelable: labelable, isLink: isLink, propNames: propNames } = opts;\r\n    let filteredProps = {};\r\n    for(const prop in props)if (Object.prototype.hasOwnProperty.call(props, prop) && ($65484d02dcb7eb3e$var$DOMPropNames.has(prop) || labelable && $65484d02dcb7eb3e$var$labelablePropNames.has(prop) || isLink && $65484d02dcb7eb3e$var$linkPropNames.has(prop) || (propNames === null || propNames === void 0 ? void 0 : propNames.has(prop)) || $65484d02dcb7eb3e$var$propRe.test(prop))) filteredProps[prop] = props[prop];\r\n    return filteredProps;\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ function $7215afc6de606d6b$export$de79e2c695e052f3(element) {\r\n    if ($7215afc6de606d6b$var$supportsPreventScroll()) element.focus({\r\n        preventScroll: true\r\n    });\r\n    else {\r\n        let scrollableElements = $7215afc6de606d6b$var$getScrollableElements(element);\r\n        element.focus();\r\n        $7215afc6de606d6b$var$restoreScrollPosition(scrollableElements);\r\n    }\r\n}\r\nlet $7215afc6de606d6b$var$supportsPreventScrollCached = null;\r\nfunction $7215afc6de606d6b$var$supportsPreventScroll() {\r\n    if ($7215afc6de606d6b$var$supportsPreventScrollCached == null) {\r\n        $7215afc6de606d6b$var$supportsPreventScrollCached = false;\r\n        try {\r\n            let focusElem = document.createElement(\"div\");\r\n            focusElem.focus({\r\n                get preventScroll () {\r\n                    $7215afc6de606d6b$var$supportsPreventScrollCached = true;\r\n                    return true;\r\n                }\r\n            });\r\n        } catch (e) {\r\n        // Ignore\r\n        }\r\n    }\r\n    return $7215afc6de606d6b$var$supportsPreventScrollCached;\r\n}\r\nfunction $7215afc6de606d6b$var$getScrollableElements(element) {\r\n    let parent = element.parentNode;\r\n    let scrollableElements = [];\r\n    let rootScrollingElement = document.scrollingElement || document.documentElement;\r\n    while(parent instanceof HTMLElement && parent !== rootScrollingElement){\r\n        if (parent.offsetHeight < parent.scrollHeight || parent.offsetWidth < parent.scrollWidth) scrollableElements.push({\r\n            element: parent,\r\n            scrollTop: parent.scrollTop,\r\n            scrollLeft: parent.scrollLeft\r\n        });\r\n        parent = parent.parentNode;\r\n    }\r\n    if (rootScrollingElement instanceof HTMLElement) scrollableElements.push({\r\n        element: rootScrollingElement,\r\n        scrollTop: rootScrollingElement.scrollTop,\r\n        scrollLeft: rootScrollingElement.scrollLeft\r\n    });\r\n    return scrollableElements;\r\n}\r\nfunction $7215afc6de606d6b$var$restoreScrollPosition(scrollableElements) {\r\n    for (let { element: element, scrollTop: scrollTop, scrollLeft: scrollLeft } of scrollableElements){\r\n        element.scrollTop = scrollTop;\r\n        element.scrollLeft = scrollLeft;\r\n    }\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ function $ab71dadb03a6fb2e$export$622cea445a1c5b7d(element, reverse, orientation = \"horizontal\") {\r\n    let rect = element.getBoundingClientRect();\r\n    if (reverse) return orientation === \"horizontal\" ? rect.right : rect.bottom;\r\n    return orientation === \"horizontal\" ? rect.left : rect.top;\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2023 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ /*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ function $c87311424ea30a05$var$testUserAgent(re) {\r\n    var _window_navigator_userAgentData;\r\n    if (typeof window === \"undefined\" || window.navigator == null) return false;\r\n    return ((_window_navigator_userAgentData = window.navigator[\"userAgentData\"]) === null || _window_navigator_userAgentData === void 0 ? void 0 : _window_navigator_userAgentData.brands.some((brand)=>re.test(brand.brand))) || re.test(window.navigator.userAgent);\r\n}\r\nfunction $c87311424ea30a05$var$testPlatform(re) {\r\n    var _window_navigator_userAgentData;\r\n    return typeof window !== \"undefined\" && window.navigator != null ? re.test(((_window_navigator_userAgentData = window.navigator[\"userAgentData\"]) === null || _window_navigator_userAgentData === void 0 ? void 0 : _window_navigator_userAgentData.platform) || window.navigator.platform) : false;\r\n}\r\nfunction $c87311424ea30a05$export$9ac100e40613ea10() {\r\n    return $c87311424ea30a05$var$testPlatform(/^Mac/i);\r\n}\r\nfunction $c87311424ea30a05$export$186c6964ca17d99() {\r\n    return $c87311424ea30a05$var$testPlatform(/^iPhone/i);\r\n}\r\nfunction $c87311424ea30a05$export$7bef049ce92e4224() {\r\n    return $c87311424ea30a05$var$testPlatform(/^iPad/i) || // iPadOS 13 lies and says it's a Mac, but we can distinguish by detecting touch support.\r\n    $c87311424ea30a05$export$9ac100e40613ea10() && navigator.maxTouchPoints > 1;\r\n}\r\nfunction $c87311424ea30a05$export$fedb369cb70207f1() {\r\n    return $c87311424ea30a05$export$186c6964ca17d99() || $c87311424ea30a05$export$7bef049ce92e4224();\r\n}\r\nfunction $c87311424ea30a05$export$e1865c3bedcd822b() {\r\n    return $c87311424ea30a05$export$9ac100e40613ea10() || $c87311424ea30a05$export$fedb369cb70207f1();\r\n}\r\nfunction $c87311424ea30a05$export$78551043582a6a98() {\r\n    return $c87311424ea30a05$var$testUserAgent(/AppleWebKit/i) && !$c87311424ea30a05$export$6446a186d09e379e();\r\n}\r\nfunction $c87311424ea30a05$export$6446a186d09e379e() {\r\n    return $c87311424ea30a05$var$testUserAgent(/Chrome/i);\r\n}\r\nfunction $c87311424ea30a05$export$a11b0059900ceec8() {\r\n    return $c87311424ea30a05$var$testUserAgent(/Android/i);\r\n}\r\nfunction $c87311424ea30a05$export$b7d78993b74f766d() {\r\n    return $c87311424ea30a05$var$testUserAgent(/Firefox/i);\r\n}\r\n\r\n\r\n\r\n\r\nconst $ea8dcbcb9ea1b556$var$RouterContext = /*#__PURE__*/ (0, react__WEBPACK_IMPORTED_MODULE_0__.createContext)({\r\n    isNative: true,\r\n    open: $ea8dcbcb9ea1b556$var$openSyntheticLink\r\n});\r\nfunction $ea8dcbcb9ea1b556$export$323e4fc2fa4753fb(props) {\r\n    let { children: children, navigate: navigate } = props;\r\n    let ctx = (0, react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>({\r\n            isNative: false,\r\n            open: (target, modifiers)=>{\r\n                $ea8dcbcb9ea1b556$var$getSyntheticLink(target, (link)=>{\r\n                    if ($ea8dcbcb9ea1b556$export$efa8c9099e530235(link, modifiers)) navigate(link.pathname + link.search + link.hash);\r\n                    else $ea8dcbcb9ea1b556$export$95185d699e05d4d7(link, modifiers);\r\n                });\r\n            }\r\n        }), [\r\n        navigate\r\n    ]);\r\n    return /*#__PURE__*/ (0, react__WEBPACK_IMPORTED_MODULE_0__).createElement($ea8dcbcb9ea1b556$var$RouterContext.Provider, {\r\n        value: ctx\r\n    }, children);\r\n}\r\nfunction $ea8dcbcb9ea1b556$export$9a302a45f65d0572() {\r\n    return (0, react__WEBPACK_IMPORTED_MODULE_0__.useContext)($ea8dcbcb9ea1b556$var$RouterContext);\r\n}\r\nfunction $ea8dcbcb9ea1b556$export$efa8c9099e530235(link, modifiers) {\r\n    // Use getAttribute here instead of link.target. Firefox will default link.target to \"_parent\" when inside an iframe.\r\n    let target = link.getAttribute(\"target\");\r\n    return (!target || target === \"_self\") && link.origin === location.origin && !link.hasAttribute(\"download\") && !modifiers.metaKey && // open in new tab (mac)\r\n    !modifiers.ctrlKey && // open in new tab (windows)\r\n    !modifiers.altKey && // download\r\n    !modifiers.shiftKey;\r\n}\r\nfunction $ea8dcbcb9ea1b556$export$95185d699e05d4d7(target, modifiers, setOpening = true) {\r\n    var _window_event_type, _window_event;\r\n    let { metaKey: metaKey, ctrlKey: ctrlKey, altKey: altKey, shiftKey: shiftKey } = modifiers;\r\n    // Firefox does not recognize keyboard events as a user action by default, and the popup blocker\r\n    // will prevent links with target=\"_blank\" from opening. However, it does allow the event if the\r\n    // Command/Control key is held, which opens the link in a background tab. This seems like the best we can do.\r\n    // See https://bugzilla.mozilla.org/show_bug.cgi?id=257870 and https://bugzilla.mozilla.org/show_bug.cgi?id=746640.\r\n    if ((0, $c87311424ea30a05$export$b7d78993b74f766d)() && ((_window_event = window.event) === null || _window_event === void 0 ? void 0 : (_window_event_type = _window_event.type) === null || _window_event_type === void 0 ? void 0 : _window_event_type.startsWith(\"key\")) && target.target === \"_blank\") {\r\n        if ((0, $c87311424ea30a05$export$9ac100e40613ea10)()) metaKey = true;\r\n        else ctrlKey = true;\r\n    }\r\n    // WebKit does not support firing click events with modifier keys, but does support keyboard events.\r\n    // https://github.com/WebKit/WebKit/blob/c03d0ac6e6db178f90923a0a63080b5ca210d25f/Source/WebCore/html/HTMLAnchorElement.cpp#L184\r\n    let event = (0, $c87311424ea30a05$export$78551043582a6a98)() && (0, $c87311424ea30a05$export$9ac100e40613ea10)() && !(0, $c87311424ea30a05$export$7bef049ce92e4224)() && true ? new KeyboardEvent(\"keydown\", {\r\n        keyIdentifier: \"Enter\",\r\n        metaKey: metaKey,\r\n        ctrlKey: ctrlKey,\r\n        altKey: altKey,\r\n        shiftKey: shiftKey\r\n    }) : new MouseEvent(\"click\", {\r\n        metaKey: metaKey,\r\n        ctrlKey: ctrlKey,\r\n        altKey: altKey,\r\n        shiftKey: shiftKey,\r\n        bubbles: true,\r\n        cancelable: true\r\n    });\r\n    $ea8dcbcb9ea1b556$export$95185d699e05d4d7.isOpening = setOpening;\r\n    (0, $7215afc6de606d6b$export$de79e2c695e052f3)(target);\r\n    target.dispatchEvent(event);\r\n    $ea8dcbcb9ea1b556$export$95185d699e05d4d7.isOpening = false;\r\n}\r\n// https://github.com/parcel-bundler/parcel/issues/8724\r\n$ea8dcbcb9ea1b556$export$95185d699e05d4d7.isOpening = false;\r\nfunction $ea8dcbcb9ea1b556$var$getSyntheticLink(target, open) {\r\n    if (target instanceof HTMLAnchorElement) open(target);\r\n    else if (target.hasAttribute(\"data-href\")) {\r\n        let link = document.createElement(\"a\");\r\n        link.href = target.getAttribute(\"data-href\");\r\n        if (target.hasAttribute(\"data-target\")) link.target = target.getAttribute(\"data-target\");\r\n        if (target.hasAttribute(\"data-rel\")) link.rel = target.getAttribute(\"data-rel\");\r\n        if (target.hasAttribute(\"data-download\")) link.download = target.getAttribute(\"data-download\");\r\n        if (target.hasAttribute(\"data-ping\")) link.ping = target.getAttribute(\"data-ping\");\r\n        if (target.hasAttribute(\"data-referrer-policy\")) link.referrerPolicy = target.getAttribute(\"data-referrer-policy\");\r\n        target.appendChild(link);\r\n        open(link);\r\n        target.removeChild(link);\r\n    }\r\n}\r\nfunction $ea8dcbcb9ea1b556$var$openSyntheticLink(target, modifiers) {\r\n    $ea8dcbcb9ea1b556$var$getSyntheticLink(target, (link)=>$ea8dcbcb9ea1b556$export$95185d699e05d4d7(link, modifiers));\r\n}\r\nfunction $ea8dcbcb9ea1b556$export$51437d503373d223(props) {\r\n    return {\r\n        \"data-href\": props.href,\r\n        \"data-target\": props.target,\r\n        \"data-rel\": props.rel,\r\n        \"data-download\": props.download,\r\n        \"data-ping\": props.ping,\r\n        \"data-referrer-policy\": props.referrerPolicy\r\n    };\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ // We store a global list of elements that are currently transitioning,\r\n// mapped to a set of CSS properties that are transitioning for that element.\r\n// This is necessary rather than a simple count of transitions because of browser\r\n// bugs, e.g. Chrome sometimes fires both transitionend and transitioncancel rather\r\n// than one or the other. So we need to track what's actually transitioning so that\r\n// we can ignore these duplicate events.\r\nlet $bbed8b41f857bcc0$var$transitionsByElement = new Map();\r\n// A list of callbacks to call once there are no transitioning elements.\r\nlet $bbed8b41f857bcc0$var$transitionCallbacks = new Set();\r\nfunction $bbed8b41f857bcc0$var$setupGlobalEvents() {\r\n    if (typeof window === \"undefined\") return;\r\n    function isTransitionEvent(event) {\r\n        return \"propertyName\" in event;\r\n    }\r\n    let onTransitionStart = (e)=>{\r\n        if (!isTransitionEvent(e) || !e.target) return;\r\n        // Add the transitioning property to the list for this element.\r\n        let transitions = $bbed8b41f857bcc0$var$transitionsByElement.get(e.target);\r\n        if (!transitions) {\r\n            transitions = new Set();\r\n            $bbed8b41f857bcc0$var$transitionsByElement.set(e.target, transitions);\r\n            // The transitioncancel event must be registered on the element itself, rather than as a global\r\n            // event. This enables us to handle when the node is deleted from the document while it is transitioning.\r\n            // In that case, the cancel event would have nowhere to bubble to so we need to handle it directly.\r\n            e.target.addEventListener(\"transitioncancel\", onTransitionEnd, {\r\n                once: true\r\n            });\r\n        }\r\n        transitions.add(e.propertyName);\r\n    };\r\n    let onTransitionEnd = (e)=>{\r\n        if (!isTransitionEvent(e) || !e.target) return;\r\n        // Remove property from list of transitioning properties.\r\n        let properties = $bbed8b41f857bcc0$var$transitionsByElement.get(e.target);\r\n        if (!properties) return;\r\n        properties.delete(e.propertyName);\r\n        // If empty, remove transitioncancel event, and remove the element from the list of transitioning elements.\r\n        if (properties.size === 0) {\r\n            e.target.removeEventListener(\"transitioncancel\", onTransitionEnd);\r\n            $bbed8b41f857bcc0$var$transitionsByElement.delete(e.target);\r\n        }\r\n        // If no transitioning elements, call all of the queued callbacks.\r\n        if ($bbed8b41f857bcc0$var$transitionsByElement.size === 0) {\r\n            for (let cb of $bbed8b41f857bcc0$var$transitionCallbacks)cb();\r\n            $bbed8b41f857bcc0$var$transitionCallbacks.clear();\r\n        }\r\n    };\r\n    document.body.addEventListener(\"transitionrun\", onTransitionStart);\r\n    document.body.addEventListener(\"transitionend\", onTransitionEnd);\r\n}\r\nif (typeof document !== \"undefined\") {\r\n    if (document.readyState !== \"loading\") $bbed8b41f857bcc0$var$setupGlobalEvents();\r\n    else document.addEventListener(\"DOMContentLoaded\", $bbed8b41f857bcc0$var$setupGlobalEvents);\r\n}\r\nfunction $bbed8b41f857bcc0$export$24490316f764c430(fn) {\r\n    // Wait one frame to see if an animation starts, e.g. a transition on mount.\r\n    requestAnimationFrame(()=>{\r\n        // If no transitions are running, call the function immediately.\r\n        // Otherwise, add it to a list of callbacks to run at the end of the animation.\r\n        if ($bbed8b41f857bcc0$var$transitionsByElement.size === 0) fn();\r\n        else $bbed8b41f857bcc0$var$transitionCallbacks.add(fn);\r\n    });\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ /* eslint-disable rulesdir/pure-render */ \r\n\r\n// Keep track of elements that we are currently handling dragging for via useDrag1D.\r\n// If there's an ancestor and a descendant both using useDrag1D(), and the user starts\r\n// dragging the descendant, we don't want useDrag1D events to fire for the ancestor.\r\nconst $9cc09df9fd7676be$var$draggingElements = [];\r\nfunction $9cc09df9fd7676be$export$7bbed75feba39706(props) {\r\n    console.warn(\"useDrag1D is deprecated, please use `useMove` instead https://react-spectrum.adobe.com/react-aria/useMove.html\");\r\n    let { containerRef: containerRef, reverse: reverse, orientation: orientation, onHover: onHover, onDrag: onDrag, onPositionChange: onPositionChange, onIncrement: onIncrement, onDecrement: onDecrement, onIncrementToMax: onIncrementToMax, onDecrementToMin: onDecrementToMin, onCollapseToggle: onCollapseToggle } = props;\r\n    let getPosition = (e)=>orientation === \"horizontal\" ? e.clientX : e.clientY;\r\n    let getNextOffset = (e)=>{\r\n        let containerOffset = (0, $ab71dadb03a6fb2e$export$622cea445a1c5b7d)(containerRef.current, reverse, orientation);\r\n        let mouseOffset = getPosition(e);\r\n        let nextOffset = reverse ? containerOffset - mouseOffset : mouseOffset - containerOffset;\r\n        return nextOffset;\r\n    };\r\n    let dragging = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\r\n    let prevPosition = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0);\r\n    // Keep track of the current handlers in a ref so that the events can access them.\r\n    let handlers = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)({\r\n        onPositionChange: onPositionChange,\r\n        onDrag: onDrag\r\n    });\r\n    handlers.current.onDrag = onDrag;\r\n    handlers.current.onPositionChange = onPositionChange;\r\n    let onMouseDragged = (e)=>{\r\n        e.preventDefault();\r\n        let nextOffset = getNextOffset(e);\r\n        if (!dragging.current) {\r\n            dragging.current = true;\r\n            if (handlers.current.onDrag) handlers.current.onDrag(true);\r\n            if (handlers.current.onPositionChange) handlers.current.onPositionChange(nextOffset);\r\n        }\r\n        if (prevPosition.current === nextOffset) return;\r\n        prevPosition.current = nextOffset;\r\n        if (onPositionChange) onPositionChange(nextOffset);\r\n    };\r\n    let onMouseUp = (e)=>{\r\n        const target = e.target;\r\n        dragging.current = false;\r\n        let nextOffset = getNextOffset(e);\r\n        if (handlers.current.onDrag) handlers.current.onDrag(false);\r\n        if (handlers.current.onPositionChange) handlers.current.onPositionChange(nextOffset);\r\n        $9cc09df9fd7676be$var$draggingElements.splice($9cc09df9fd7676be$var$draggingElements.indexOf(target), 1);\r\n        window.removeEventListener(\"mouseup\", onMouseUp, false);\r\n        window.removeEventListener(\"mousemove\", onMouseDragged, false);\r\n    };\r\n    let onMouseDown = (e)=>{\r\n        const target = e.currentTarget;\r\n        // If we're already handling dragging on a descendant with useDrag1D, then\r\n        // we don't want to handle the drag motion on this target as well.\r\n        if ($9cc09df9fd7676be$var$draggingElements.some((elt)=>target.contains(elt))) return;\r\n        $9cc09df9fd7676be$var$draggingElements.push(target);\r\n        window.addEventListener(\"mousemove\", onMouseDragged, false);\r\n        window.addEventListener(\"mouseup\", onMouseUp, false);\r\n    };\r\n    let onMouseEnter = ()=>{\r\n        if (onHover) onHover(true);\r\n    };\r\n    let onMouseOut = ()=>{\r\n        if (onHover) onHover(false);\r\n    };\r\n    let onKeyDown = (e)=>{\r\n        switch(e.key){\r\n            case \"Left\":\r\n            case \"ArrowLeft\":\r\n                if (orientation === \"horizontal\") {\r\n                    e.preventDefault();\r\n                    if (onDecrement && !reverse) onDecrement();\r\n                    else if (onIncrement && reverse) onIncrement();\r\n                }\r\n                break;\r\n            case \"Up\":\r\n            case \"ArrowUp\":\r\n                if (orientation === \"vertical\") {\r\n                    e.preventDefault();\r\n                    if (onDecrement && !reverse) onDecrement();\r\n                    else if (onIncrement && reverse) onIncrement();\r\n                }\r\n                break;\r\n            case \"Right\":\r\n            case \"ArrowRight\":\r\n                if (orientation === \"horizontal\") {\r\n                    e.preventDefault();\r\n                    if (onIncrement && !reverse) onIncrement();\r\n                    else if (onDecrement && reverse) onDecrement();\r\n                }\r\n                break;\r\n            case \"Down\":\r\n            case \"ArrowDown\":\r\n                if (orientation === \"vertical\") {\r\n                    e.preventDefault();\r\n                    if (onIncrement && !reverse) onIncrement();\r\n                    else if (onDecrement && reverse) onDecrement();\r\n                }\r\n                break;\r\n            case \"Home\":\r\n                e.preventDefault();\r\n                if (onDecrementToMin) onDecrementToMin();\r\n                break;\r\n            case \"End\":\r\n                e.preventDefault();\r\n                if (onIncrementToMax) onIncrementToMax();\r\n                break;\r\n            case \"Enter\":\r\n                e.preventDefault();\r\n                if (onCollapseToggle) onCollapseToggle();\r\n                break;\r\n        }\r\n    };\r\n    return {\r\n        onMouseDown: onMouseDown,\r\n        onMouseEnter: onMouseEnter,\r\n        onMouseOut: onMouseOut,\r\n        onKeyDown: onKeyDown\r\n    };\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\nfunction $03deb23ff14920c4$export$4eaf04e54aa8eed6() {\r\n    let globalListeners = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)(new Map());\r\n    let addGlobalListener = (0, react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((eventTarget, type, listener, options)=>{\r\n        // Make sure we remove the listener after it is called with the `once` option.\r\n        let fn = (options === null || options === void 0 ? void 0 : options.once) ? (...args)=>{\r\n            globalListeners.current.delete(listener);\r\n            listener(...args);\r\n        } : listener;\r\n        globalListeners.current.set(listener, {\r\n            type: type,\r\n            eventTarget: eventTarget,\r\n            fn: fn,\r\n            options: options\r\n        });\r\n        eventTarget.addEventListener(type, listener, options);\r\n    }, []);\r\n    let removeGlobalListener = (0, react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((eventTarget, type, listener, options)=>{\r\n        var _globalListeners_current_get;\r\n        let fn = ((_globalListeners_current_get = globalListeners.current.get(listener)) === null || _globalListeners_current_get === void 0 ? void 0 : _globalListeners_current_get.fn) || listener;\r\n        eventTarget.removeEventListener(type, fn, options);\r\n        globalListeners.current.delete(listener);\r\n    }, []);\r\n    let removeAllGlobalListeners = (0, react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\r\n        globalListeners.current.forEach((value, key)=>{\r\n            removeGlobalListener(value.eventTarget, value.type, key, value.options);\r\n        });\r\n    }, [\r\n        removeGlobalListener\r\n    ]);\r\n    // eslint-disable-next-line arrow-body-style\r\n    (0, react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\r\n        return removeAllGlobalListeners;\r\n    }, [\r\n        removeAllGlobalListeners\r\n    ]);\r\n    return {\r\n        addGlobalListener: addGlobalListener,\r\n        removeGlobalListener: removeGlobalListener,\r\n        removeAllGlobalListeners: removeAllGlobalListeners\r\n    };\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\nfunction $313b98861ee5dd6c$export$d6875122194c7b44(props, defaultLabel) {\r\n    let { id: id, \"aria-label\": label, \"aria-labelledby\": labelledBy } = props;\r\n    // If there is both an aria-label and aria-labelledby,\r\n    // combine them by pointing to the element itself.\r\n    id = (0, $bdb11010cef70236$export$f680877a34711e37)(id);\r\n    if (labelledBy && label) {\r\n        let ids = new Set([\r\n            id,\r\n            ...labelledBy.trim().split(/\\s+/)\r\n        ]);\r\n        labelledBy = [\r\n            ...ids\r\n        ].join(\" \");\r\n    } else if (labelledBy) labelledBy = labelledBy.trim().split(/\\s+/).join(\" \");\r\n    // If no labels are provided, use the default\r\n    if (!label && !labelledBy && defaultLabel) label = defaultLabel;\r\n    return {\r\n        id: id,\r\n        \"aria-label\": label,\r\n        \"aria-labelledby\": labelledBy\r\n    };\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2021 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\nfunction $df56164dff5785e2$export$4338b53315abf666(forwardedRef) {\r\n    const objRef = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\r\n    return (0, react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>({\r\n            get current () {\r\n                return objRef.current;\r\n            },\r\n            set current (value){\r\n                objRef.current = value;\r\n                if (typeof forwardedRef === \"function\") forwardedRef(value);\r\n                else if (forwardedRef) forwardedRef.current = value;\r\n            }\r\n        }), [\r\n        forwardedRef\r\n    ]);\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\nfunction $4f58c5f72bcf79f7$export$496315a1608d9602(effect, dependencies) {\r\n    const isInitialMount = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)(true);\r\n    const lastDeps = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\r\n    (0, react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\r\n        isInitialMount.current = true;\r\n        return ()=>{\r\n            isInitialMount.current = false;\r\n        };\r\n    }, []);\r\n    (0, react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\r\n        if (isInitialMount.current) isInitialMount.current = false;\r\n        else if (!lastDeps.current || dependencies.some((dep, i)=>!Object.is(dep, lastDeps[i]))) effect();\r\n        lastDeps.current = dependencies;\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, dependencies);\r\n}\r\n\r\n\r\n\r\n\r\nfunction $9daab02d461809db$var$hasResizeObserver() {\r\n    return typeof window.ResizeObserver !== \"undefined\";\r\n}\r\nfunction $9daab02d461809db$export$683480f191c0e3ea(options) {\r\n    const { ref: ref, onResize: onResize } = options;\r\n    (0, react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\r\n        let element = ref === null || ref === void 0 ? void 0 : ref.current;\r\n        if (!element) return;\r\n        if (!$9daab02d461809db$var$hasResizeObserver()) {\r\n            window.addEventListener(\"resize\", onResize, false);\r\n            return ()=>{\r\n                window.removeEventListener(\"resize\", onResize, false);\r\n            };\r\n        } else {\r\n            const resizeObserverInstance = new window.ResizeObserver((entries)=>{\r\n                if (!entries.length) return;\r\n                onResize();\r\n            });\r\n            resizeObserverInstance.observe(element);\r\n            return ()=>{\r\n                if (element) resizeObserverInstance.unobserve(element);\r\n            };\r\n        }\r\n    }, [\r\n        onResize,\r\n        ref\r\n    ]);\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\nfunction $e7801be82b4b2a53$export$4debdb1a3f0fa79e(context, ref) {\r\n    (0, $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c)(()=>{\r\n        if (context && context.ref && ref) {\r\n            context.ref.current = ref.current;\r\n            return ()=>{\r\n                if (context.ref) context.ref.current = null;\r\n            };\r\n        }\r\n    });\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ function $62d8ded9296f3872$export$cfa2225e87938781(node, checkForOverflow) {\r\n    let scrollableNode = node;\r\n    if ($62d8ded9296f3872$export$2bb74740c4e19def(scrollableNode, checkForOverflow)) scrollableNode = scrollableNode.parentElement;\r\n    while(scrollableNode && !$62d8ded9296f3872$export$2bb74740c4e19def(scrollableNode, checkForOverflow))scrollableNode = scrollableNode.parentElement;\r\n    return scrollableNode || document.scrollingElement || document.documentElement;\r\n}\r\nfunction $62d8ded9296f3872$export$2bb74740c4e19def(node, checkForOverflow) {\r\n    let style = window.getComputedStyle(node);\r\n    let isScrollable = /(auto|scroll)/.test(style.overflow + style.overflowX + style.overflowY);\r\n    if (isScrollable && checkForOverflow) isScrollable = node.scrollHeight !== node.clientHeight || node.scrollWidth !== node.clientWidth;\r\n    return isScrollable;\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n\r\n// @ts-ignore\r\nlet $5df64b3807dc15ee$var$visualViewport = typeof document !== \"undefined\" && window.visualViewport;\r\nfunction $5df64b3807dc15ee$export$d699905dd57c73ca() {\r\n    let isSSR = (0, _react_aria_ssr__WEBPACK_IMPORTED_MODULE_2__.useIsSSR)();\r\n    let [size, setSize] = (0, react__WEBPACK_IMPORTED_MODULE_0__.useState)(()=>isSSR ? {\r\n            width: 0,\r\n            height: 0\r\n        } : $5df64b3807dc15ee$var$getViewportSize());\r\n    (0, react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\r\n        // Use visualViewport api to track available height even on iOS virtual keyboard opening\r\n        let onResize = ()=>{\r\n            setSize((size)=>{\r\n                let newSize = $5df64b3807dc15ee$var$getViewportSize();\r\n                if (newSize.width === size.width && newSize.height === size.height) return size;\r\n                return newSize;\r\n            });\r\n        };\r\n        if (!$5df64b3807dc15ee$var$visualViewport) window.addEventListener(\"resize\", onResize);\r\n        else $5df64b3807dc15ee$var$visualViewport.addEventListener(\"resize\", onResize);\r\n        return ()=>{\r\n            if (!$5df64b3807dc15ee$var$visualViewport) window.removeEventListener(\"resize\", onResize);\r\n            else $5df64b3807dc15ee$var$visualViewport.removeEventListener(\"resize\", onResize);\r\n        };\r\n    }, []);\r\n    return size;\r\n}\r\nfunction $5df64b3807dc15ee$var$getViewportSize() {\r\n    return {\r\n        width: $5df64b3807dc15ee$var$visualViewport && ($5df64b3807dc15ee$var$visualViewport === null || $5df64b3807dc15ee$var$visualViewport === void 0 ? void 0 : $5df64b3807dc15ee$var$visualViewport.width) || window.innerWidth,\r\n        height: $5df64b3807dc15ee$var$visualViewport && ($5df64b3807dc15ee$var$visualViewport === null || $5df64b3807dc15ee$var$visualViewport === void 0 ? void 0 : $5df64b3807dc15ee$var$visualViewport.height) || window.innerHeight\r\n    };\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n\r\nlet $ef06256079686ba0$var$descriptionId = 0;\r\nconst $ef06256079686ba0$var$descriptionNodes = new Map();\r\nfunction $ef06256079686ba0$export$f8aeda7b10753fa1(description) {\r\n    let [id, setId] = (0, react__WEBPACK_IMPORTED_MODULE_0__.useState)();\r\n    (0, $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c)(()=>{\r\n        if (!description) return;\r\n        let desc = $ef06256079686ba0$var$descriptionNodes.get(description);\r\n        if (!desc) {\r\n            let id = `react-aria-description-${$ef06256079686ba0$var$descriptionId++}`;\r\n            setId(id);\r\n            let node = document.createElement(\"div\");\r\n            node.id = id;\r\n            node.style.display = \"none\";\r\n            node.textContent = description;\r\n            document.body.appendChild(node);\r\n            desc = {\r\n                refCount: 0,\r\n                element: node\r\n            };\r\n            $ef06256079686ba0$var$descriptionNodes.set(description, desc);\r\n        } else setId(desc.element.id);\r\n        desc.refCount++;\r\n        return ()=>{\r\n            if (desc && --desc.refCount === 0) {\r\n                desc.element.remove();\r\n                $ef06256079686ba0$var$descriptionNodes.delete(description);\r\n            }\r\n        };\r\n    }, [\r\n        description\r\n    ]);\r\n    return {\r\n        \"aria-describedby\": description ? id : undefined\r\n    };\r\n}\r\n\r\n\r\n\r\n/*\r\n * Copyright 2021 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n\r\nfunction $e9faafb641e167db$export$90fc3a17d93f704c(ref, event, handler, options) {\r\n    let handleEvent = (0, $8ae05eaa5c114e9c$export$7f54fc3180508a52)(handler);\r\n    let isDisabled = handler == null;\r\n    (0, react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\r\n        if (isDisabled || !ref.current) return;\r\n        let element = ref.current;\r\n        element.addEventListener(event, handleEvent, options);\r\n        return ()=>{\r\n            element.removeEventListener(event, handleEvent, options);\r\n        };\r\n    }, [\r\n        ref,\r\n        event,\r\n        options,\r\n        isDisabled,\r\n        handleEvent\r\n    ]);\r\n}\r\n\r\n\r\n\r\n/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\nfunction $2f04cbc44ee30ce0$export$53a0910f038337bd(scrollView, element) {\r\n    let offsetX = $2f04cbc44ee30ce0$var$relativeOffset(scrollView, element, \"left\");\r\n    let offsetY = $2f04cbc44ee30ce0$var$relativeOffset(scrollView, element, \"top\");\r\n    let width = element.offsetWidth;\r\n    let height = element.offsetHeight;\r\n    let x = scrollView.scrollLeft;\r\n    let y = scrollView.scrollTop;\r\n    // Account for top/left border offsetting the scroll top/Left\r\n    let { borderTopWidth: borderTopWidth, borderLeftWidth: borderLeftWidth } = getComputedStyle(scrollView);\r\n    let borderAdjustedX = scrollView.scrollLeft + parseInt(borderLeftWidth, 10);\r\n    let borderAdjustedY = scrollView.scrollTop + parseInt(borderTopWidth, 10);\r\n    // Ignore end/bottom border via clientHeight/Width instead of offsetHeight/Width\r\n    let maxX = borderAdjustedX + scrollView.clientWidth;\r\n    let maxY = borderAdjustedY + scrollView.clientHeight;\r\n    if (offsetX <= x) x = offsetX - parseInt(borderLeftWidth, 10);\r\n    else if (offsetX + width > maxX) x += offsetX + width - maxX;\r\n    if (offsetY <= borderAdjustedY) y = offsetY - parseInt(borderTopWidth, 10);\r\n    else if (offsetY + height > maxY) y += offsetY + height - maxY;\r\n    scrollView.scrollLeft = x;\r\n    scrollView.scrollTop = y;\r\n}\r\n/**\r\n * Computes the offset left or top from child to ancestor by accumulating\r\n * offsetLeft or offsetTop through intervening offsetParents.\r\n */ function $2f04cbc44ee30ce0$var$relativeOffset(ancestor, child, axis) {\r\n    const prop = axis === \"left\" ? \"offsetLeft\" : \"offsetTop\";\r\n    let sum = 0;\r\n    while(child.offsetParent){\r\n        sum += child[prop];\r\n        if (child.offsetParent === ancestor) break;\r\n        else if (child.offsetParent.contains(ancestor)) {\r\n            // If the ancestor is not `position:relative`, then we stop at\r\n            // _its_ offset parent, and we subtract off _its_ offset, so that\r\n            // we end up with the proper offset from child to ancestor.\r\n            sum -= ancestor[prop];\r\n            break;\r\n        }\r\n        child = child.offsetParent;\r\n    }\r\n    return sum;\r\n}\r\nfunction $2f04cbc44ee30ce0$export$c826860796309d1b(targetElement, opts) {\r\n    if (document.contains(targetElement)) {\r\n        let root = document.scrollingElement || document.documentElement;\r\n        let isScrollPrevented = window.getComputedStyle(root).overflow === \"hidden\";\r\n        // If scrolling is not currently prevented then we aren’t in a overlay nor is a overlay open, just use element.scrollIntoView to bring the element into view\r\n        if (!isScrollPrevented) {\r\n            var // use scrollIntoView({block: 'nearest'}) instead of .focus to check if the element is fully in view or not since .focus()\r\n            // won't cause a scroll if the element is already focused and doesn't behave consistently when an element is partially out of view horizontally vs vertically\r\n            _targetElement_scrollIntoView;\r\n            let { left: originalLeft, top: originalTop } = targetElement.getBoundingClientRect();\r\n            targetElement === null || targetElement === void 0 ? void 0 : (_targetElement_scrollIntoView = targetElement.scrollIntoView) === null || _targetElement_scrollIntoView === void 0 ? void 0 : _targetElement_scrollIntoView.call(targetElement, {\r\n                block: \"nearest\"\r\n            });\r\n            let { left: newLeft, top: newTop } = targetElement.getBoundingClientRect();\r\n            // Account for sub pixel differences from rounding\r\n            if (Math.abs(originalLeft - newLeft) > 1 || Math.abs(originalTop - newTop) > 1) {\r\n                var _opts_containingElement_scrollIntoView, _opts_containingElement, _targetElement_scrollIntoView1;\r\n                opts === null || opts === void 0 ? void 0 : (_opts_containingElement = opts.containingElement) === null || _opts_containingElement === void 0 ? void 0 : (_opts_containingElement_scrollIntoView = _opts_containingElement.scrollIntoView) === null || _opts_containingElement_scrollIntoView === void 0 ? void 0 : _opts_containingElement_scrollIntoView.call(_opts_containingElement, {\r\n                    block: \"center\",\r\n                    inline: \"center\"\r\n                });\r\n                (_targetElement_scrollIntoView1 = targetElement.scrollIntoView) === null || _targetElement_scrollIntoView1 === void 0 ? void 0 : _targetElement_scrollIntoView1.call(targetElement, {\r\n                    block: \"nearest\"\r\n                });\r\n            }\r\n        } else {\r\n            let scrollParent = (0, $62d8ded9296f3872$export$cfa2225e87938781)(targetElement);\r\n            // If scrolling is prevented, we don't want to scroll the body since it might move the overlay partially offscreen and the user can't scroll it back into view.\r\n            while(targetElement && scrollParent && targetElement !== root && scrollParent !== root){\r\n                $2f04cbc44ee30ce0$export$53a0910f038337bd(scrollParent, targetElement);\r\n                targetElement = scrollParent;\r\n                scrollParent = (0, $62d8ded9296f3872$export$cfa2225e87938781)(targetElement);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n/*\r\n * Copyright 2022 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\nfunction $6a7db85432448f7f$export$60278871457622de(event) {\r\n    // JAWS/NVDA with Firefox.\r\n    if (event.mozInputSource === 0 && event.isTrusted) return true;\r\n    // Android TalkBack's detail value varies depending on the event listener providing the event so we have specific logic here instead\r\n    // If pointerType is defined, event is from a click listener. For events from mousedown listener, detail === 0 is a sufficient check\r\n    // to detect TalkBack virtual clicks.\r\n    if ((0, $c87311424ea30a05$export$a11b0059900ceec8)() && event.pointerType) return event.type === \"click\" && event.buttons === 1;\r\n    return event.detail === 0 && !event.pointerType;\r\n}\r\nfunction $6a7db85432448f7f$export$29bf1b5f2c56cf63(event) {\r\n    // If the pointer size is zero, then we assume it's from a screen reader.\r\n    // Android TalkBack double tap will sometimes return a event with width and height of 1\r\n    // and pointerType === 'mouse' so we need to check for a specific combination of event attributes.\r\n    // Cannot use \"event.pressure === 0\" as the sole check due to Safari pointer events always returning pressure === 0\r\n    // instead of .5, see https://bugs.webkit.org/show_bug.cgi?id=206216. event.pointerType === 'mouse' is to distingush\r\n    // Talkback double tap from Windows Firefox touch screen press\r\n    return !(0, $c87311424ea30a05$export$a11b0059900ceec8)() && event.width === 0 && event.height === 0 || event.width === 1 && event.height === 1 && event.pressure === 0 && event.detail === 0 && event.pointerType === \"mouse\";\r\n}\r\n\r\n\r\n\r\n/*\r\n * Copyright 2023 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ /* eslint-disable rulesdir/pure-render */ \r\nfunction $5a387cc49350e6db$export$722debc0e56fea39(value, isEqual) {\r\n    // Using a ref during render is ok here because it's only an optimization – both values are equivalent.\r\n    // If a render is thrown away, it'll still work the same no matter if the next render is the same or not.\r\n    let lastValue = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\r\n    if (value && lastValue.current && isEqual(value, lastValue.current)) value = lastValue.current;\r\n    lastValue.current = value;\r\n    return value;\r\n}\r\n\r\n\r\n/*\r\n * Copyright 2023 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */ \r\n\r\nfunction $99facab73266f662$export$5add1d006293d136(ref, initialValue, onReset) {\r\n    let resetValue = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)(initialValue);\r\n    let handleReset = (0, $8ae05eaa5c114e9c$export$7f54fc3180508a52)(()=>{\r\n        if (onReset) onReset(resetValue.current);\r\n    });\r\n    (0, react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\r\n        var _ref_current;\r\n        let form = ref === null || ref === void 0 ? void 0 : (_ref_current = ref.current) === null || _ref_current === void 0 ? void 0 : _ref_current.form;\r\n        form === null || form === void 0 ? void 0 : form.addEventListener(\"reset\", handleReset);\r\n        return ()=>{\r\n            form === null || form === void 0 ? void 0 : form.removeEventListener(\"reset\", handleReset);\r\n        };\r\n    }, [\r\n        ref,\r\n        handleReset\r\n    ]);\r\n}\r\n\r\n\r\n\r\n\r\n\r\n//# sourceMappingURL=module.js.map\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvdXRpbHMvZGlzdC9pbXBvcnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWdKO0FBQzhHO0FBQzdKO0FBQ2xFO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdGQUF3RixrQ0FBWTtBQUNwRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IseUNBQWE7QUFDakM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxlQUFlLDhDQUFrQjtBQUNqQztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDJDQUFlO0FBQy9DLHFCQUFxQix5Q0FBYTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsMkNBQWU7QUFDL0MscUJBQXFCLHlDQUFhO0FBQ2xDLGtCQUFrQix5REFBbUI7QUFDckMsMEJBQTBCLDhDQUFrQjtBQUM1QztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDRDQUFnQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDhDQUFrQjtBQUN6QztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGlCQUFpQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhJQUE4SSw0Q0FBVztBQUN6SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1FQUFtRTtBQUNuRSxVQUFVLDZEQUE2RDtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxlQUFlLGlFQUFpRTtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4REFBOEQsZ0RBQW9CO0FBQ2xGO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxVQUFVLHlDQUF5QztBQUNuRCxrQkFBa0IsMENBQWM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsNkJBQTZCLGtDQUFZO0FBQ3pDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxlQUFlLDZDQUFpQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSx5RUFBeUU7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsK1NBQStTO0FBQ3pUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHlDQUFhO0FBQ3BDLDJCQUEyQix5Q0FBYTtBQUN4QztBQUNBLHVCQUF1Qix5Q0FBYTtBQUNwQztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qix5Q0FBYTtBQUMzQyxnQ0FBZ0MsOENBQWtCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0wsbUNBQW1DLDhDQUFrQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCx1Q0FBdUMsOENBQWtCO0FBQ3pEO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFFBQVEsNENBQWdCO0FBQ3hCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSw2REFBNkQ7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix5Q0FBYTtBQUNwQyxlQUFlLDBDQUFjO0FBQzdCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHlDQUFhO0FBQzVDLHlCQUF5Qix5Q0FBYTtBQUN0QyxRQUFRLDRDQUFnQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxRQUFRLDRDQUFnQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLCtCQUErQjtBQUMzQyxRQUFRLDRDQUFnQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IscURBQWU7QUFDbkMsOEJBQThCLDJDQUFlO0FBQzdDO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsUUFBUSw0Q0FBZ0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDJDQUFlO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLHNDQUFzQztBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsNENBQWdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxtRUFBbUU7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxpQkFBaUI7QUFDeEQ7QUFDQTtBQUNBLGtCQUFrQix1Q0FBdUM7QUFDekQ7QUFDQTtBQUNBLGFBQWE7QUFDYixrQkFBa0IsNkJBQTZCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUNBQWE7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIseUNBQWE7QUFDdEM7QUFDQTtBQUNBLEtBQUs7QUFDTCxRQUFRLDRDQUFnQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUM0MEY7QUFDNTBGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnV0cmktc21hcnQvLi9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvdXRpbHMvZGlzdC9pbXBvcnQubWpzPzE3MDIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtjbGFtcCBhcyAkNDUwNzQ2MWExYjg3MDEyMyRyZV9leHBvcnQkY2xhbXAsIHNuYXBWYWx1ZVRvU3RlcCBhcyAkNDUwNzQ2MWExYjg3MDEyMyRyZV9leHBvcnQkc25hcFZhbHVlVG9TdGVwfSBmcm9tIFwiQHJlYWN0LXN0YXRlbHkvdXRpbHNcIjtcclxuaW1wb3J0ICQxMnVHcCRyZWFjdCwge3VzZVN0YXRlIGFzICQxMnVHcCR1c2VTdGF0ZSwgdXNlUmVmIGFzICQxMnVHcCR1c2VSZWYsIHVzZUNhbGxiYWNrIGFzICQxMnVHcCR1c2VDYWxsYmFjaywgdXNlRWZmZWN0IGFzICQxMnVHcCR1c2VFZmZlY3QsIGNyZWF0ZUNvbnRleHQgYXMgJDEydUdwJGNyZWF0ZUNvbnRleHQsIHVzZU1lbW8gYXMgJDEydUdwJHVzZU1lbW8sIHVzZUNvbnRleHQgYXMgJDEydUdwJHVzZUNvbnRleHR9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQge3VzZVNTUlNhZmVJZCBhcyAkMTJ1R3AkdXNlU1NSU2FmZUlkLCB1c2VJc1NTUiBhcyAkMTJ1R3AkdXNlSXNTU1J9IGZyb20gXCJAcmVhY3QtYXJpYS9zc3JcIjtcclxuaW1wb3J0ICQxMnVHcCRjbHN4IGZyb20gXCJjbHN4XCI7XHJcblxyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxyXG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyAvKlxyXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxyXG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyBcclxuLypcclxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gXHJcbmNvbnN0ICRmMGEwNGNjZDhkYmRkODNiJGV4cG9ydCRlNWM1YTVmOTE3YTU4NzFjID0gdHlwZW9mIGRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiID8gKDAsICQxMnVHcCRyZWFjdCkudXNlTGF5b3V0RWZmZWN0IDogKCk9Pnt9O1xyXG5cclxuXHJcblxyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxyXG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyBcclxuLypcclxuICogQ29weXJpZ2h0IDIwMjMgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gXHJcblxyXG5mdW5jdGlvbiAkOGFlMDVlYWE1YzExNGU5YyRleHBvcnQkN2Y1NGZjMzE4MDUwOGE1Mihmbikge1xyXG4gICAgY29uc3QgcmVmID0gKDAsICQxMnVHcCR1c2VSZWYpKG51bGwpO1xyXG4gICAgKDAsICRmMGEwNGNjZDhkYmRkODNiJGV4cG9ydCRlNWM1YTVmOTE3YTU4NzFjKSgoKT0+e1xyXG4gICAgICAgIHJlZi5jdXJyZW50ID0gZm47XHJcbiAgICB9LCBbXHJcbiAgICAgICAgZm5cclxuICAgIF0pO1xyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgcmV0dXJuICgwLCAkMTJ1R3AkdXNlQ2FsbGJhY2spKCguLi5hcmdzKT0+e1xyXG4gICAgICAgIGNvbnN0IGYgPSByZWYuY3VycmVudDtcclxuICAgICAgICByZXR1cm4gZiA9PT0gbnVsbCB8fCBmID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmKC4uLmFyZ3MpO1xyXG4gICAgfSwgW10pO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gJDFkYmVjYmUyN2EwNGY5YWYkZXhwb3J0JDE0ZDIzOGYzNDI3MjNmMjUoZGVmYXVsdFZhbHVlKSB7XHJcbiAgICBsZXQgW3ZhbHVlLCBzZXRWYWx1ZV0gPSAoMCwgJDEydUdwJHVzZVN0YXRlKShkZWZhdWx0VmFsdWUpO1xyXG4gICAgbGV0IGVmZmVjdCA9ICgwLCAkMTJ1R3AkdXNlUmVmKShudWxsKTtcclxuICAgIC8vIFN0b3JlIHRoZSBmdW5jdGlvbiBpbiBhIHJlZiBzbyB3ZSBjYW4gYWx3YXlzIGFjY2VzcyB0aGUgY3VycmVudCB2ZXJzaW9uXHJcbiAgICAvLyB3aGljaCBoYXMgdGhlIHByb3BlciBgdmFsdWVgIGluIHNjb3BlLlxyXG4gICAgbGV0IG5leHRSZWYgPSAoMCwgJDhhZTA1ZWFhNWMxMTRlOWMkZXhwb3J0JDdmNTRmYzMxODA1MDhhNTIpKCgpPT57XHJcbiAgICAgICAgaWYgKCFlZmZlY3QuY3VycmVudCkgcmV0dXJuO1xyXG4gICAgICAgIC8vIFJ1biB0aGUgZ2VuZXJhdG9yIHRvIHRoZSBuZXh0IHlpZWxkLlxyXG4gICAgICAgIGxldCBuZXdWYWx1ZSA9IGVmZmVjdC5jdXJyZW50Lm5leHQoKTtcclxuICAgICAgICAvLyBJZiB0aGUgZ2VuZXJhdG9yIGlzIGRvbmUsIHJlc2V0IHRoZSBlZmZlY3QuXHJcbiAgICAgICAgaWYgKG5ld1ZhbHVlLmRvbmUpIHtcclxuICAgICAgICAgICAgZWZmZWN0LmN1cnJlbnQgPSBudWxsO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHRoZSB2YWx1ZSBpcyB0aGUgc2FtZSBhcyB0aGUgY3VycmVudCB2YWx1ZSxcclxuICAgICAgICAvLyB0aGVuIGNvbnRpbnVlIHRvIHRoZSBuZXh0IHlpZWxkLiBPdGhlcndpc2UsXHJcbiAgICAgICAgLy8gc2V0IHRoZSB2YWx1ZSBpbiBzdGF0ZSBhbmQgd2FpdCBmb3IgdGhlIG5leHQgbGF5b3V0IGVmZmVjdC5cclxuICAgICAgICBpZiAodmFsdWUgPT09IG5ld1ZhbHVlLnZhbHVlKSBuZXh0UmVmKCk7XHJcbiAgICAgICAgZWxzZSBzZXRWYWx1ZShuZXdWYWx1ZS52YWx1ZSk7XHJcbiAgICB9KTtcclxuICAgICgwLCAkZjBhMDRjY2Q4ZGJkZDgzYiRleHBvcnQkZTVjNWE1ZjkxN2E1ODcxYykoKCk9PntcclxuICAgICAgICAvLyBJZiB0aGVyZSBpcyBhbiBlZmZlY3QgY3VycmVudGx5IHJ1bm5pbmcsIGNvbnRpbnVlIHRvIHRoZSBuZXh0IHlpZWxkLlxyXG4gICAgICAgIGlmIChlZmZlY3QuY3VycmVudCkgbmV4dFJlZigpO1xyXG4gICAgfSk7XHJcbiAgICBsZXQgcXVldWUgPSAoMCwgJDhhZTA1ZWFhNWMxMTRlOWMkZXhwb3J0JDdmNTRmYzMxODA1MDhhNTIpKChmbik9PntcclxuICAgICAgICBlZmZlY3QuY3VycmVudCA9IGZuKHZhbHVlKTtcclxuICAgICAgICBuZXh0UmVmKCk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgcXVldWVcclxuICAgIF07XHJcbn1cclxuXHJcblxyXG4vLyBjb3BpZWQgZnJvbSBTU1JQcm92aWRlci50c3ggdG8gcmVkdWNlIGV4cG9ydHMsIGlmIG5lZWRlZCBhZ2FpbiwgY29uc2lkZXIgc2hhcmluZ1xyXG5sZXQgJGJkYjExMDEwY2VmNzAyMzYkdmFyJGNhblVzZURPTSA9IEJvb2xlYW4odHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cuZG9jdW1lbnQgJiYgd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpO1xyXG5sZXQgJGJkYjExMDEwY2VmNzAyMzYkdmFyJGlkc1VwZGF0ZXJNYXAgPSBuZXcgTWFwKCk7XHJcbmZ1bmN0aW9uICRiZGIxMTAxMGNlZjcwMjM2JGV4cG9ydCRmNjgwODc3YTM0NzExZTM3KGRlZmF1bHRJZCkge1xyXG4gICAgbGV0IFt2YWx1ZSwgc2V0VmFsdWVdID0gKDAsICQxMnVHcCR1c2VTdGF0ZSkoZGVmYXVsdElkKTtcclxuICAgIGxldCBuZXh0SWQgPSAoMCwgJDEydUdwJHVzZVJlZikobnVsbCk7XHJcbiAgICBsZXQgcmVzID0gKDAsICQxMnVHcCR1c2VTU1JTYWZlSWQpKHZhbHVlKTtcclxuICAgIGxldCB1cGRhdGVWYWx1ZSA9ICgwLCAkMTJ1R3AkdXNlQ2FsbGJhY2spKCh2YWwpPT57XHJcbiAgICAgICAgbmV4dElkLmN1cnJlbnQgPSB2YWw7XHJcbiAgICB9LCBbXSk7XHJcbiAgICBpZiAoJGJkYjExMDEwY2VmNzAyMzYkdmFyJGNhblVzZURPTSkgJGJkYjExMDEwY2VmNzAyMzYkdmFyJGlkc1VwZGF0ZXJNYXAuc2V0KHJlcywgdXBkYXRlVmFsdWUpO1xyXG4gICAgKDAsICRmMGEwNGNjZDhkYmRkODNiJGV4cG9ydCRlNWM1YTVmOTE3YTU4NzFjKSgoKT0+e1xyXG4gICAgICAgIGxldCByID0gcmVzO1xyXG4gICAgICAgIHJldHVybiAoKT0+e1xyXG4gICAgICAgICAgICAkYmRiMTEwMTBjZWY3MDIzNiR2YXIkaWRzVXBkYXRlck1hcC5kZWxldGUocik7XHJcbiAgICAgICAgfTtcclxuICAgIH0sIFtcclxuICAgICAgICByZXNcclxuICAgIF0pO1xyXG4gICAgLy8gVGhpcyBjYW5ub3QgY2F1c2UgYW4gaW5maW5pdGUgbG9vcCBiZWNhdXNlIHRoZSByZWYgaXMgdXBkYXRlZCBmaXJzdC5cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxyXG4gICAgKDAsICQxMnVHcCR1c2VFZmZlY3QpKCgpPT57XHJcbiAgICAgICAgbGV0IG5ld0lkID0gbmV4dElkLmN1cnJlbnQ7XHJcbiAgICAgICAgaWYgKG5ld0lkKSB7XHJcbiAgICAgICAgICAgIG5leHRJZC5jdXJyZW50ID0gbnVsbDtcclxuICAgICAgICAgICAgc2V0VmFsdWUobmV3SWQpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlcztcclxufVxyXG5mdW5jdGlvbiAkYmRiMTEwMTBjZWY3MDIzNiRleHBvcnQkY2Q4YzljYjY4Zjg0MjYyOShpZEEsIGlkQikge1xyXG4gICAgaWYgKGlkQSA9PT0gaWRCKSByZXR1cm4gaWRBO1xyXG4gICAgbGV0IHNldElkQSA9ICRiZGIxMTAxMGNlZjcwMjM2JHZhciRpZHNVcGRhdGVyTWFwLmdldChpZEEpO1xyXG4gICAgaWYgKHNldElkQSkge1xyXG4gICAgICAgIHNldElkQShpZEIpO1xyXG4gICAgICAgIHJldHVybiBpZEI7XHJcbiAgICB9XHJcbiAgICBsZXQgc2V0SWRCID0gJGJkYjExMDEwY2VmNzAyMzYkdmFyJGlkc1VwZGF0ZXJNYXAuZ2V0KGlkQik7XHJcbiAgICBpZiAoc2V0SWRCKSB7XHJcbiAgICAgICAgc2V0SWRCKGlkQSk7XHJcbiAgICAgICAgcmV0dXJuIGlkQTtcclxuICAgIH1cclxuICAgIHJldHVybiBpZEI7XHJcbn1cclxuZnVuY3Rpb24gJGJkYjExMDEwY2VmNzAyMzYkZXhwb3J0JGI0Y2MwOWM1OTJlOGZkYjgoZGVwQXJyYXkgPSBbXSkge1xyXG4gICAgbGV0IGlkID0gJGJkYjExMDEwY2VmNzAyMzYkZXhwb3J0JGY2ODA4NzdhMzQ3MTFlMzcoKTtcclxuICAgIGxldCBbcmVzb2x2ZWRJZCwgc2V0UmVzb2x2ZWRJZF0gPSAoMCwgJDFkYmVjYmUyN2EwNGY5YWYkZXhwb3J0JDE0ZDIzOGYzNDI3MjNmMjUpKGlkKTtcclxuICAgIGxldCB1cGRhdGVJZCA9ICgwLCAkMTJ1R3AkdXNlQ2FsbGJhY2spKCgpPT57XHJcbiAgICAgICAgc2V0UmVzb2x2ZWRJZChmdW5jdGlvbiooKSB7XHJcbiAgICAgICAgICAgIHlpZWxkIGlkO1xyXG4gICAgICAgICAgICB5aWVsZCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkgPyBpZCA6IHVuZGVmaW5lZDtcclxuICAgICAgICB9KTtcclxuICAgIH0sIFtcclxuICAgICAgICBpZCxcclxuICAgICAgICBzZXRSZXNvbHZlZElkXHJcbiAgICBdKTtcclxuICAgICgwLCAkZjBhMDRjY2Q4ZGJkZDgzYiRleHBvcnQkZTVjNWE1ZjkxN2E1ODcxYykodXBkYXRlSWQsIFtcclxuICAgICAgICBpZCxcclxuICAgICAgICB1cGRhdGVJZCxcclxuICAgICAgICAuLi5kZXBBcnJheVxyXG4gICAgXSk7XHJcbiAgICByZXR1cm4gcmVzb2x2ZWRJZDtcclxufVxyXG5cclxuXHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIC8qKlxyXG4gKiBDYWxscyBhbGwgZnVuY3Rpb25zIGluIHRoZSBvcmRlciB0aGV5IHdlcmUgY2hhaW5lZCB3aXRoIHRoZSBzYW1lIGFyZ3VtZW50cy5cclxuICovIGZ1bmN0aW9uICRmZjU5NjNlYjFmY2NmNTUyJGV4cG9ydCRlMDhlM2I2N2UzOTIxMDFlKC4uLmNhbGxiYWNrcykge1xyXG4gICAgcmV0dXJuICguLi5hcmdzKT0+e1xyXG4gICAgICAgIGZvciAobGV0IGNhbGxiYWNrIG9mIGNhbGxiYWNrcylpZiAodHlwZW9mIGNhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIpIGNhbGxiYWNrKC4uLmFyZ3MpO1xyXG4gICAgfTtcclxufVxyXG5cclxuXHJcbmNvbnN0ICQ0MzFmYmQ4NmNhN2RjMjE2JGV4cG9ydCRiMjA0YWYxNTgwNDJmYmFjID0gKGVsKT0+e1xyXG4gICAgdmFyIF9lbF9vd25lckRvY3VtZW50O1xyXG4gICAgcmV0dXJuIChfZWxfb3duZXJEb2N1bWVudCA9IGVsID09PSBudWxsIHx8IGVsID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlbC5vd25lckRvY3VtZW50KSAhPT0gbnVsbCAmJiBfZWxfb3duZXJEb2N1bWVudCAhPT0gdm9pZCAwID8gX2VsX293bmVyRG9jdW1lbnQgOiBkb2N1bWVudDtcclxufTtcclxuY29uc3QgJDQzMWZiZDg2Y2E3ZGMyMTYkZXhwb3J0JGYyMWExZmZhZTI2MDE0NWEgPSAoZWwpPT57XHJcbiAgICBpZiAoZWwgJiYgXCJ3aW5kb3dcIiBpbiBlbCAmJiBlbC53aW5kb3cgPT09IGVsKSByZXR1cm4gZWw7XHJcbiAgICBjb25zdCBkb2MgPSAkNDMxZmJkODZjYTdkYzIxNiRleHBvcnQkYjIwNGFmMTU4MDQyZmJhYyhlbCk7XHJcbiAgICByZXR1cm4gZG9jLmRlZmF1bHRWaWV3IHx8IHdpbmRvdztcclxufTtcclxuXHJcblxyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxyXG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyBcclxuXHJcblxyXG5mdW5jdGlvbiAkM2VmNDI1NzVkZjg0YjMwYiRleHBvcnQkOWQxNjExYzc3YzJmZTkyOCguLi5hcmdzKSB7XHJcbiAgICAvLyBTdGFydCB3aXRoIGEgYmFzZSBjbG9uZSBvZiB0aGUgZmlyc3QgYXJndW1lbnQuIFRoaXMgaXMgYSBsb3QgZmFzdGVyIHRoYW4gc3RhcnRpbmdcclxuICAgIC8vIHdpdGggYW4gZW1wdHkgb2JqZWN0IGFuZCBhZGRpbmcgcHJvcGVydGllcyBhcyB3ZSBnby5cclxuICAgIGxldCByZXN1bHQgPSB7XHJcbiAgICAgICAgLi4uYXJnc1swXVxyXG4gICAgfTtcclxuICAgIGZvcihsZXQgaSA9IDE7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBsZXQgcHJvcHMgPSBhcmdzW2ldO1xyXG4gICAgICAgIGZvcihsZXQga2V5IGluIHByb3BzKXtcclxuICAgICAgICAgICAgbGV0IGEgPSByZXN1bHRba2V5XTtcclxuICAgICAgICAgICAgbGV0IGIgPSBwcm9wc1trZXldO1xyXG4gICAgICAgICAgICAvLyBDaGFpbiBldmVudHNcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBhID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIGIgPT09IFwiZnVuY3Rpb25cIiAmJiAvLyBUaGlzIGlzIGEgbG90IGZhc3RlciB0aGFuIGEgcmVnZXguXHJcbiAgICAgICAgICAgIGtleVswXSA9PT0gXCJvXCIgJiYga2V5WzFdID09PSBcIm5cIiAmJiBrZXkuY2hhckNvZGVBdCgyKSA+PSAvKiAnQScgKi8gNjUgJiYga2V5LmNoYXJDb2RlQXQoMikgPD0gLyogJ1onICovIDkwKSByZXN1bHRba2V5XSA9ICgwLCAkZmY1OTYzZWIxZmNjZjU1MiRleHBvcnQkZTA4ZTNiNjdlMzkyMTAxZSkoYSwgYik7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKChrZXkgPT09IFwiY2xhc3NOYW1lXCIgfHwga2V5ID09PSBcIlVOU0FGRV9jbGFzc05hbWVcIikgJiYgdHlwZW9mIGEgPT09IFwic3RyaW5nXCIgJiYgdHlwZW9mIGIgPT09IFwic3RyaW5nXCIpIHJlc3VsdFtrZXldID0gKDAsICQxMnVHcCRjbHN4KShhLCBiKTtcclxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBcImlkXCIgJiYgYSAmJiBiKSByZXN1bHQuaWQgPSAoMCwgJGJkYjExMDEwY2VmNzAyMzYkZXhwb3J0JGNkOGM5Y2I2OGY4NDI2MjkpKGEsIGIpO1xyXG4gICAgICAgICAgICBlbHNlIHJlc3VsdFtrZXldID0gYiAhPT0gdW5kZWZpbmVkID8gYiA6IGE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuXHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIGZ1bmN0aW9uICQ1ZGM5NTg5OWIzMDZmNjMwJGV4cG9ydCRjOTA1ODMxNjc2NGMxNDBlKC4uLnJlZnMpIHtcclxuICAgIGlmIChyZWZzLmxlbmd0aCA9PT0gMSkgcmV0dXJuIHJlZnNbMF07XHJcbiAgICByZXR1cm4gKHZhbHVlKT0+e1xyXG4gICAgICAgIGZvciAobGV0IHJlZiBvZiByZWZzKXtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiByZWYgPT09IFwiZnVuY3Rpb25cIikgcmVmKHZhbHVlKTtcclxuICAgICAgICAgICAgZWxzZSBpZiAocmVmICE9IG51bGwpIHJlZi5jdXJyZW50ID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuXHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIGNvbnN0ICQ2NTQ4NGQwMmRjYjdlYjNlJHZhciRET01Qcm9wTmFtZXMgPSBuZXcgU2V0KFtcclxuICAgIFwiaWRcIlxyXG5dKTtcclxuY29uc3QgJDY1NDg0ZDAyZGNiN2ViM2UkdmFyJGxhYmVsYWJsZVByb3BOYW1lcyA9IG5ldyBTZXQoW1xyXG4gICAgXCJhcmlhLWxhYmVsXCIsXHJcbiAgICBcImFyaWEtbGFiZWxsZWRieVwiLFxyXG4gICAgXCJhcmlhLWRlc2NyaWJlZGJ5XCIsXHJcbiAgICBcImFyaWEtZGV0YWlsc1wiXHJcbl0pO1xyXG4vLyBTZWUgTGlua0RPTVByb3BzIGluIGRvbS5kLnRzLlxyXG5jb25zdCAkNjU0ODRkMDJkY2I3ZWIzZSR2YXIkbGlua1Byb3BOYW1lcyA9IG5ldyBTZXQoW1xyXG4gICAgXCJocmVmXCIsXHJcbiAgICBcInRhcmdldFwiLFxyXG4gICAgXCJyZWxcIixcclxuICAgIFwiZG93bmxvYWRcIixcclxuICAgIFwicGluZ1wiLFxyXG4gICAgXCJyZWZlcnJlclBvbGljeVwiXHJcbl0pO1xyXG5jb25zdCAkNjU0ODRkMDJkY2I3ZWIzZSR2YXIkcHJvcFJlID0gL14oZGF0YS0uKikkLztcclxuZnVuY3Rpb24gJDY1NDg0ZDAyZGNiN2ViM2UkZXhwb3J0JDQ1N2MzZDY1MThkZDRjNmYocHJvcHMsIG9wdHMgPSB7fSkge1xyXG4gICAgbGV0IHsgbGFiZWxhYmxlOiBsYWJlbGFibGUsIGlzTGluazogaXNMaW5rLCBwcm9wTmFtZXM6IHByb3BOYW1lcyB9ID0gb3B0cztcclxuICAgIGxldCBmaWx0ZXJlZFByb3BzID0ge307XHJcbiAgICBmb3IoY29uc3QgcHJvcCBpbiBwcm9wcylpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHByb3BzLCBwcm9wKSAmJiAoJDY1NDg0ZDAyZGNiN2ViM2UkdmFyJERPTVByb3BOYW1lcy5oYXMocHJvcCkgfHwgbGFiZWxhYmxlICYmICQ2NTQ4NGQwMmRjYjdlYjNlJHZhciRsYWJlbGFibGVQcm9wTmFtZXMuaGFzKHByb3ApIHx8IGlzTGluayAmJiAkNjU0ODRkMDJkY2I3ZWIzZSR2YXIkbGlua1Byb3BOYW1lcy5oYXMocHJvcCkgfHwgKHByb3BOYW1lcyA9PT0gbnVsbCB8fCBwcm9wTmFtZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHByb3BOYW1lcy5oYXMocHJvcCkpIHx8ICQ2NTQ4NGQwMmRjYjdlYjNlJHZhciRwcm9wUmUudGVzdChwcm9wKSkpIGZpbHRlcmVkUHJvcHNbcHJvcF0gPSBwcm9wc1twcm9wXTtcclxuICAgIHJldHVybiBmaWx0ZXJlZFByb3BzO1xyXG59XHJcblxyXG5cclxuLypcclxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gZnVuY3Rpb24gJDcyMTVhZmM2ZGU2MDZkNmIkZXhwb3J0JGRlNzllMmM2OTVlMDUyZjMoZWxlbWVudCkge1xyXG4gICAgaWYgKCQ3MjE1YWZjNmRlNjA2ZDZiJHZhciRzdXBwb3J0c1ByZXZlbnRTY3JvbGwoKSkgZWxlbWVudC5mb2N1cyh7XHJcbiAgICAgICAgcHJldmVudFNjcm9sbDogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBsZXQgc2Nyb2xsYWJsZUVsZW1lbnRzID0gJDcyMTVhZmM2ZGU2MDZkNmIkdmFyJGdldFNjcm9sbGFibGVFbGVtZW50cyhlbGVtZW50KTtcclxuICAgICAgICBlbGVtZW50LmZvY3VzKCk7XHJcbiAgICAgICAgJDcyMTVhZmM2ZGU2MDZkNmIkdmFyJHJlc3RvcmVTY3JvbGxQb3NpdGlvbihzY3JvbGxhYmxlRWxlbWVudHMpO1xyXG4gICAgfVxyXG59XHJcbmxldCAkNzIxNWFmYzZkZTYwNmQ2YiR2YXIkc3VwcG9ydHNQcmV2ZW50U2Nyb2xsQ2FjaGVkID0gbnVsbDtcclxuZnVuY3Rpb24gJDcyMTVhZmM2ZGU2MDZkNmIkdmFyJHN1cHBvcnRzUHJldmVudFNjcm9sbCgpIHtcclxuICAgIGlmICgkNzIxNWFmYzZkZTYwNmQ2YiR2YXIkc3VwcG9ydHNQcmV2ZW50U2Nyb2xsQ2FjaGVkID09IG51bGwpIHtcclxuICAgICAgICAkNzIxNWFmYzZkZTYwNmQ2YiR2YXIkc3VwcG9ydHNQcmV2ZW50U2Nyb2xsQ2FjaGVkID0gZmFsc2U7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGV0IGZvY3VzRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIGZvY3VzRWxlbS5mb2N1cyh7XHJcbiAgICAgICAgICAgICAgICBnZXQgcHJldmVudFNjcm9sbCAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJDcyMTVhZmM2ZGU2MDZkNmIkdmFyJHN1cHBvcnRzUHJldmVudFNjcm9sbENhY2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyBJZ25vcmVcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJDcyMTVhZmM2ZGU2MDZkNmIkdmFyJHN1cHBvcnRzUHJldmVudFNjcm9sbENhY2hlZDtcclxufVxyXG5mdW5jdGlvbiAkNzIxNWFmYzZkZTYwNmQ2YiR2YXIkZ2V0U2Nyb2xsYWJsZUVsZW1lbnRzKGVsZW1lbnQpIHtcclxuICAgIGxldCBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XHJcbiAgICBsZXQgc2Nyb2xsYWJsZUVsZW1lbnRzID0gW107XHJcbiAgICBsZXQgcm9vdFNjcm9sbGluZ0VsZW1lbnQgPSBkb2N1bWVudC5zY3JvbGxpbmdFbGVtZW50IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcclxuICAgIHdoaWxlKHBhcmVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ICYmIHBhcmVudCAhPT0gcm9vdFNjcm9sbGluZ0VsZW1lbnQpe1xyXG4gICAgICAgIGlmIChwYXJlbnQub2Zmc2V0SGVpZ2h0IDwgcGFyZW50LnNjcm9sbEhlaWdodCB8fCBwYXJlbnQub2Zmc2V0V2lkdGggPCBwYXJlbnQuc2Nyb2xsV2lkdGgpIHNjcm9sbGFibGVFbGVtZW50cy5wdXNoKHtcclxuICAgICAgICAgICAgZWxlbWVudDogcGFyZW50LFxyXG4gICAgICAgICAgICBzY3JvbGxUb3A6IHBhcmVudC5zY3JvbGxUb3AsXHJcbiAgICAgICAgICAgIHNjcm9sbExlZnQ6IHBhcmVudC5zY3JvbGxMZWZ0XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7XHJcbiAgICB9XHJcbiAgICBpZiAocm9vdFNjcm9sbGluZ0VsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkgc2Nyb2xsYWJsZUVsZW1lbnRzLnB1c2goe1xyXG4gICAgICAgIGVsZW1lbnQ6IHJvb3RTY3JvbGxpbmdFbGVtZW50LFxyXG4gICAgICAgIHNjcm9sbFRvcDogcm9vdFNjcm9sbGluZ0VsZW1lbnQuc2Nyb2xsVG9wLFxyXG4gICAgICAgIHNjcm9sbExlZnQ6IHJvb3RTY3JvbGxpbmdFbGVtZW50LnNjcm9sbExlZnRcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHNjcm9sbGFibGVFbGVtZW50cztcclxufVxyXG5mdW5jdGlvbiAkNzIxNWFmYzZkZTYwNmQ2YiR2YXIkcmVzdG9yZVNjcm9sbFBvc2l0aW9uKHNjcm9sbGFibGVFbGVtZW50cykge1xyXG4gICAgZm9yIChsZXQgeyBlbGVtZW50OiBlbGVtZW50LCBzY3JvbGxUb3A6IHNjcm9sbFRvcCwgc2Nyb2xsTGVmdDogc2Nyb2xsTGVmdCB9IG9mIHNjcm9sbGFibGVFbGVtZW50cyl7XHJcbiAgICAgICAgZWxlbWVudC5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7XHJcbiAgICAgICAgZWxlbWVudC5zY3JvbGxMZWZ0ID0gc2Nyb2xsTGVmdDtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIGZ1bmN0aW9uICRhYjcxZGFkYjAzYTZmYjJlJGV4cG9ydCQ2MjJjZWE0NDVhMWM1YjdkKGVsZW1lbnQsIHJldmVyc2UsIG9yaWVudGF0aW9uID0gXCJob3Jpem9udGFsXCIpIHtcclxuICAgIGxldCByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGlmIChyZXZlcnNlKSByZXR1cm4gb3JpZW50YXRpb24gPT09IFwiaG9yaXpvbnRhbFwiID8gcmVjdC5yaWdodCA6IHJlY3QuYm90dG9tO1xyXG4gICAgcmV0dXJuIG9yaWVudGF0aW9uID09PSBcImhvcml6b250YWxcIiA/IHJlY3QubGVmdCA6IHJlY3QudG9wO1xyXG59XHJcblxyXG5cclxuLypcclxuICogQ29weXJpZ2h0IDIwMjMgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gLypcclxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gZnVuY3Rpb24gJGM4NzMxMTQyNGVhMzBhMDUkdmFyJHRlc3RVc2VyQWdlbnQocmUpIHtcclxuICAgIHZhciBfd2luZG93X25hdmlnYXRvcl91c2VyQWdlbnREYXRhO1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgd2luZG93Lm5hdmlnYXRvciA9PSBudWxsKSByZXR1cm4gZmFsc2U7XHJcbiAgICByZXR1cm4gKChfd2luZG93X25hdmlnYXRvcl91c2VyQWdlbnREYXRhID0gd2luZG93Lm5hdmlnYXRvcltcInVzZXJBZ2VudERhdGFcIl0pID09PSBudWxsIHx8IF93aW5kb3dfbmF2aWdhdG9yX3VzZXJBZ2VudERhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF93aW5kb3dfbmF2aWdhdG9yX3VzZXJBZ2VudERhdGEuYnJhbmRzLnNvbWUoKGJyYW5kKT0+cmUudGVzdChicmFuZC5icmFuZCkpKSB8fCByZS50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KTtcclxufVxyXG5mdW5jdGlvbiAkYzg3MzExNDI0ZWEzMGEwNSR2YXIkdGVzdFBsYXRmb3JtKHJlKSB7XHJcbiAgICB2YXIgX3dpbmRvd19uYXZpZ2F0b3JfdXNlckFnZW50RGF0YTtcclxuICAgIHJldHVybiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5uYXZpZ2F0b3IgIT0gbnVsbCA/IHJlLnRlc3QoKChfd2luZG93X25hdmlnYXRvcl91c2VyQWdlbnREYXRhID0gd2luZG93Lm5hdmlnYXRvcltcInVzZXJBZ2VudERhdGFcIl0pID09PSBudWxsIHx8IF93aW5kb3dfbmF2aWdhdG9yX3VzZXJBZ2VudERhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF93aW5kb3dfbmF2aWdhdG9yX3VzZXJBZ2VudERhdGEucGxhdGZvcm0pIHx8IHdpbmRvdy5uYXZpZ2F0b3IucGxhdGZvcm0pIDogZmFsc2U7XHJcbn1cclxuZnVuY3Rpb24gJGM4NzMxMTQyNGVhMzBhMDUkZXhwb3J0JDlhYzEwMGU0MDYxM2VhMTAoKSB7XHJcbiAgICByZXR1cm4gJGM4NzMxMTQyNGVhMzBhMDUkdmFyJHRlc3RQbGF0Zm9ybSgvXk1hYy9pKTtcclxufVxyXG5mdW5jdGlvbiAkYzg3MzExNDI0ZWEzMGEwNSRleHBvcnQkMTg2YzY5NjRjYTE3ZDk5KCkge1xyXG4gICAgcmV0dXJuICRjODczMTE0MjRlYTMwYTA1JHZhciR0ZXN0UGxhdGZvcm0oL15pUGhvbmUvaSk7XHJcbn1cclxuZnVuY3Rpb24gJGM4NzMxMTQyNGVhMzBhMDUkZXhwb3J0JDdiZWYwNDljZTkyZTQyMjQoKSB7XHJcbiAgICByZXR1cm4gJGM4NzMxMTQyNGVhMzBhMDUkdmFyJHRlc3RQbGF0Zm9ybSgvXmlQYWQvaSkgfHwgLy8gaVBhZE9TIDEzIGxpZXMgYW5kIHNheXMgaXQncyBhIE1hYywgYnV0IHdlIGNhbiBkaXN0aW5ndWlzaCBieSBkZXRlY3RpbmcgdG91Y2ggc3VwcG9ydC5cclxuICAgICRjODczMTE0MjRlYTMwYTA1JGV4cG9ydCQ5YWMxMDBlNDA2MTNlYTEwKCkgJiYgbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzID4gMTtcclxufVxyXG5mdW5jdGlvbiAkYzg3MzExNDI0ZWEzMGEwNSRleHBvcnQkZmVkYjM2OWNiNzAyMDdmMSgpIHtcclxuICAgIHJldHVybiAkYzg3MzExNDI0ZWEzMGEwNSRleHBvcnQkMTg2YzY5NjRjYTE3ZDk5KCkgfHwgJGM4NzMxMTQyNGVhMzBhMDUkZXhwb3J0JDdiZWYwNDljZTkyZTQyMjQoKTtcclxufVxyXG5mdW5jdGlvbiAkYzg3MzExNDI0ZWEzMGEwNSRleHBvcnQkZTE4NjVjM2JlZGNkODIyYigpIHtcclxuICAgIHJldHVybiAkYzg3MzExNDI0ZWEzMGEwNSRleHBvcnQkOWFjMTAwZTQwNjEzZWExMCgpIHx8ICRjODczMTE0MjRlYTMwYTA1JGV4cG9ydCRmZWRiMzY5Y2I3MDIwN2YxKCk7XHJcbn1cclxuZnVuY3Rpb24gJGM4NzMxMTQyNGVhMzBhMDUkZXhwb3J0JDc4NTUxMDQzNTgyYTZhOTgoKSB7XHJcbiAgICByZXR1cm4gJGM4NzMxMTQyNGVhMzBhMDUkdmFyJHRlc3RVc2VyQWdlbnQoL0FwcGxlV2ViS2l0L2kpICYmICEkYzg3MzExNDI0ZWEzMGEwNSRleHBvcnQkNjQ0NmExODZkMDllMzc5ZSgpO1xyXG59XHJcbmZ1bmN0aW9uICRjODczMTE0MjRlYTMwYTA1JGV4cG9ydCQ2NDQ2YTE4NmQwOWUzNzllKCkge1xyXG4gICAgcmV0dXJuICRjODczMTE0MjRlYTMwYTA1JHZhciR0ZXN0VXNlckFnZW50KC9DaHJvbWUvaSk7XHJcbn1cclxuZnVuY3Rpb24gJGM4NzMxMTQyNGVhMzBhMDUkZXhwb3J0JGExMWIwMDU5OTAwY2VlYzgoKSB7XHJcbiAgICByZXR1cm4gJGM4NzMxMTQyNGVhMzBhMDUkdmFyJHRlc3RVc2VyQWdlbnQoL0FuZHJvaWQvaSk7XHJcbn1cclxuZnVuY3Rpb24gJGM4NzMxMTQyNGVhMzBhMDUkZXhwb3J0JGI3ZDc4OTkzYjc0Zjc2NmQoKSB7XHJcbiAgICByZXR1cm4gJGM4NzMxMTQyNGVhMzBhMDUkdmFyJHRlc3RVc2VyQWdlbnQoL0ZpcmVmb3gvaSk7XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbmNvbnN0ICRlYThkY2JjYjllYTFiNTU2JHZhciRSb3V0ZXJDb250ZXh0ID0gLyojX19QVVJFX18qLyAoMCwgJDEydUdwJGNyZWF0ZUNvbnRleHQpKHtcclxuICAgIGlzTmF0aXZlOiB0cnVlLFxyXG4gICAgb3BlbjogJGVhOGRjYmNiOWVhMWI1NTYkdmFyJG9wZW5TeW50aGV0aWNMaW5rXHJcbn0pO1xyXG5mdW5jdGlvbiAkZWE4ZGNiY2I5ZWExYjU1NiRleHBvcnQkMzIzZTRmYzJmYTQ3NTNmYihwcm9wcykge1xyXG4gICAgbGV0IHsgY2hpbGRyZW46IGNoaWxkcmVuLCBuYXZpZ2F0ZTogbmF2aWdhdGUgfSA9IHByb3BzO1xyXG4gICAgbGV0IGN0eCA9ICgwLCAkMTJ1R3AkdXNlTWVtbykoKCk9Pih7XHJcbiAgICAgICAgICAgIGlzTmF0aXZlOiBmYWxzZSxcclxuICAgICAgICAgICAgb3BlbjogKHRhcmdldCwgbW9kaWZpZXJzKT0+e1xyXG4gICAgICAgICAgICAgICAgJGVhOGRjYmNiOWVhMWI1NTYkdmFyJGdldFN5bnRoZXRpY0xpbmsodGFyZ2V0LCAobGluayk9PntcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJGVhOGRjYmNiOWVhMWI1NTYkZXhwb3J0JGVmYThjOTA5OWU1MzAyMzUobGluaywgbW9kaWZpZXJzKSkgbmF2aWdhdGUobGluay5wYXRobmFtZSArIGxpbmsuc2VhcmNoICsgbGluay5oYXNoKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlICRlYThkY2JjYjllYTFiNTU2JGV4cG9ydCQ5NTE4NWQ2OTllMDVkNGQ3KGxpbmssIG1vZGlmaWVycyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLCBbXHJcbiAgICAgICAgbmF2aWdhdGVcclxuICAgIF0pO1xyXG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi8gKDAsICQxMnVHcCRyZWFjdCkuY3JlYXRlRWxlbWVudCgkZWE4ZGNiY2I5ZWExYjU1NiR2YXIkUm91dGVyQ29udGV4dC5Qcm92aWRlciwge1xyXG4gICAgICAgIHZhbHVlOiBjdHhcclxuICAgIH0sIGNoaWxkcmVuKTtcclxufVxyXG5mdW5jdGlvbiAkZWE4ZGNiY2I5ZWExYjU1NiRleHBvcnQkOWEzMDJhNDVmNjVkMDU3MigpIHtcclxuICAgIHJldHVybiAoMCwgJDEydUdwJHVzZUNvbnRleHQpKCRlYThkY2JjYjllYTFiNTU2JHZhciRSb3V0ZXJDb250ZXh0KTtcclxufVxyXG5mdW5jdGlvbiAkZWE4ZGNiY2I5ZWExYjU1NiRleHBvcnQkZWZhOGM5MDk5ZTUzMDIzNShsaW5rLCBtb2RpZmllcnMpIHtcclxuICAgIC8vIFVzZSBnZXRBdHRyaWJ1dGUgaGVyZSBpbnN0ZWFkIG9mIGxpbmsudGFyZ2V0LiBGaXJlZm94IHdpbGwgZGVmYXVsdCBsaW5rLnRhcmdldCB0byBcIl9wYXJlbnRcIiB3aGVuIGluc2lkZSBhbiBpZnJhbWUuXHJcbiAgICBsZXQgdGFyZ2V0ID0gbGluay5nZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIik7XHJcbiAgICByZXR1cm4gKCF0YXJnZXQgfHwgdGFyZ2V0ID09PSBcIl9zZWxmXCIpICYmIGxpbmsub3JpZ2luID09PSBsb2NhdGlvbi5vcmlnaW4gJiYgIWxpbmsuaGFzQXR0cmlidXRlKFwiZG93bmxvYWRcIikgJiYgIW1vZGlmaWVycy5tZXRhS2V5ICYmIC8vIG9wZW4gaW4gbmV3IHRhYiAobWFjKVxyXG4gICAgIW1vZGlmaWVycy5jdHJsS2V5ICYmIC8vIG9wZW4gaW4gbmV3IHRhYiAod2luZG93cylcclxuICAgICFtb2RpZmllcnMuYWx0S2V5ICYmIC8vIGRvd25sb2FkXHJcbiAgICAhbW9kaWZpZXJzLnNoaWZ0S2V5O1xyXG59XHJcbmZ1bmN0aW9uICRlYThkY2JjYjllYTFiNTU2JGV4cG9ydCQ5NTE4NWQ2OTllMDVkNGQ3KHRhcmdldCwgbW9kaWZpZXJzLCBzZXRPcGVuaW5nID0gdHJ1ZSkge1xyXG4gICAgdmFyIF93aW5kb3dfZXZlbnRfdHlwZSwgX3dpbmRvd19ldmVudDtcclxuICAgIGxldCB7IG1ldGFLZXk6IG1ldGFLZXksIGN0cmxLZXk6IGN0cmxLZXksIGFsdEtleTogYWx0S2V5LCBzaGlmdEtleTogc2hpZnRLZXkgfSA9IG1vZGlmaWVycztcclxuICAgIC8vIEZpcmVmb3ggZG9lcyBub3QgcmVjb2duaXplIGtleWJvYXJkIGV2ZW50cyBhcyBhIHVzZXIgYWN0aW9uIGJ5IGRlZmF1bHQsIGFuZCB0aGUgcG9wdXAgYmxvY2tlclxyXG4gICAgLy8gd2lsbCBwcmV2ZW50IGxpbmtzIHdpdGggdGFyZ2V0PVwiX2JsYW5rXCIgZnJvbSBvcGVuaW5nLiBIb3dldmVyLCBpdCBkb2VzIGFsbG93IHRoZSBldmVudCBpZiB0aGVcclxuICAgIC8vIENvbW1hbmQvQ29udHJvbCBrZXkgaXMgaGVsZCwgd2hpY2ggb3BlbnMgdGhlIGxpbmsgaW4gYSBiYWNrZ3JvdW5kIHRhYi4gVGhpcyBzZWVtcyBsaWtlIHRoZSBiZXN0IHdlIGNhbiBkby5cclxuICAgIC8vIFNlZSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0yNTc4NzAgYW5kIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTc0NjY0MC5cclxuICAgIGlmICgoMCwgJGM4NzMxMTQyNGVhMzBhMDUkZXhwb3J0JGI3ZDc4OTkzYjc0Zjc2NmQpKCkgJiYgKChfd2luZG93X2V2ZW50ID0gd2luZG93LmV2ZW50KSA9PT0gbnVsbCB8fCBfd2luZG93X2V2ZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3dpbmRvd19ldmVudF90eXBlID0gX3dpbmRvd19ldmVudC50eXBlKSA9PT0gbnVsbCB8fCBfd2luZG93X2V2ZW50X3R5cGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF93aW5kb3dfZXZlbnRfdHlwZS5zdGFydHNXaXRoKFwia2V5XCIpKSAmJiB0YXJnZXQudGFyZ2V0ID09PSBcIl9ibGFua1wiKSB7XHJcbiAgICAgICAgaWYgKCgwLCAkYzg3MzExNDI0ZWEzMGEwNSRleHBvcnQkOWFjMTAwZTQwNjEzZWExMCkoKSkgbWV0YUtleSA9IHRydWU7XHJcbiAgICAgICAgZWxzZSBjdHJsS2V5ID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIC8vIFdlYktpdCBkb2VzIG5vdCBzdXBwb3J0IGZpcmluZyBjbGljayBldmVudHMgd2l0aCBtb2RpZmllciBrZXlzLCBidXQgZG9lcyBzdXBwb3J0IGtleWJvYXJkIGV2ZW50cy5cclxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9XZWJLaXQvV2ViS2l0L2Jsb2IvYzAzZDBhYzZlNmRiMTc4ZjkwOTIzYTBhNjMwODBiNWNhMjEwZDI1Zi9Tb3VyY2UvV2ViQ29yZS9odG1sL0hUTUxBbmNob3JFbGVtZW50LmNwcCNMMTg0XHJcbiAgICBsZXQgZXZlbnQgPSAoMCwgJGM4NzMxMTQyNGVhMzBhMDUkZXhwb3J0JDc4NTUxMDQzNTgyYTZhOTgpKCkgJiYgKDAsICRjODczMTE0MjRlYTMwYTA1JGV4cG9ydCQ5YWMxMDBlNDA2MTNlYTEwKSgpICYmICEoMCwgJGM4NzMxMTQyNGVhMzBhMDUkZXhwb3J0JDdiZWYwNDljZTkyZTQyMjQpKCkgJiYgdHJ1ZSA/IG5ldyBLZXlib2FyZEV2ZW50KFwia2V5ZG93blwiLCB7XHJcbiAgICAgICAga2V5SWRlbnRpZmllcjogXCJFbnRlclwiLFxyXG4gICAgICAgIG1ldGFLZXk6IG1ldGFLZXksXHJcbiAgICAgICAgY3RybEtleTogY3RybEtleSxcclxuICAgICAgICBhbHRLZXk6IGFsdEtleSxcclxuICAgICAgICBzaGlmdEtleTogc2hpZnRLZXlcclxuICAgIH0pIDogbmV3IE1vdXNlRXZlbnQoXCJjbGlja1wiLCB7XHJcbiAgICAgICAgbWV0YUtleTogbWV0YUtleSxcclxuICAgICAgICBjdHJsS2V5OiBjdHJsS2V5LFxyXG4gICAgICAgIGFsdEtleTogYWx0S2V5LFxyXG4gICAgICAgIHNoaWZ0S2V5OiBzaGlmdEtleSxcclxuICAgICAgICBidWJibGVzOiB0cnVlLFxyXG4gICAgICAgIGNhbmNlbGFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgJGVhOGRjYmNiOWVhMWI1NTYkZXhwb3J0JDk1MTg1ZDY5OWUwNWQ0ZDcuaXNPcGVuaW5nID0gc2V0T3BlbmluZztcclxuICAgICgwLCAkNzIxNWFmYzZkZTYwNmQ2YiRleHBvcnQkZGU3OWUyYzY5NWUwNTJmMykodGFyZ2V0KTtcclxuICAgIHRhcmdldC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuICAgICRlYThkY2JjYjllYTFiNTU2JGV4cG9ydCQ5NTE4NWQ2OTllMDVkNGQ3LmlzT3BlbmluZyA9IGZhbHNlO1xyXG59XHJcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9wYXJjZWwtYnVuZGxlci9wYXJjZWwvaXNzdWVzLzg3MjRcclxuJGVhOGRjYmNiOWVhMWI1NTYkZXhwb3J0JDk1MTg1ZDY5OWUwNWQ0ZDcuaXNPcGVuaW5nID0gZmFsc2U7XHJcbmZ1bmN0aW9uICRlYThkY2JjYjllYTFiNTU2JHZhciRnZXRTeW50aGV0aWNMaW5rKHRhcmdldCwgb3Blbikge1xyXG4gICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIEhUTUxBbmNob3JFbGVtZW50KSBvcGVuKHRhcmdldCk7XHJcbiAgICBlbHNlIGlmICh0YXJnZXQuaGFzQXR0cmlidXRlKFwiZGF0YS1ocmVmXCIpKSB7XHJcbiAgICAgICAgbGV0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICAgICAgICBsaW5rLmhyZWYgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1ocmVmXCIpO1xyXG4gICAgICAgIGlmICh0YXJnZXQuaGFzQXR0cmlidXRlKFwiZGF0YS10YXJnZXRcIikpIGxpbmsudGFyZ2V0ID0gdGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtdGFyZ2V0XCIpO1xyXG4gICAgICAgIGlmICh0YXJnZXQuaGFzQXR0cmlidXRlKFwiZGF0YS1yZWxcIikpIGxpbmsucmVsID0gdGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtcmVsXCIpO1xyXG4gICAgICAgIGlmICh0YXJnZXQuaGFzQXR0cmlidXRlKFwiZGF0YS1kb3dubG9hZFwiKSkgbGluay5kb3dubG9hZCA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWRvd25sb2FkXCIpO1xyXG4gICAgICAgIGlmICh0YXJnZXQuaGFzQXR0cmlidXRlKFwiZGF0YS1waW5nXCIpKSBsaW5rLnBpbmcgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1waW5nXCIpO1xyXG4gICAgICAgIGlmICh0YXJnZXQuaGFzQXR0cmlidXRlKFwiZGF0YS1yZWZlcnJlci1wb2xpY3lcIikpIGxpbmsucmVmZXJyZXJQb2xpY3kgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1yZWZlcnJlci1wb2xpY3lcIik7XHJcbiAgICAgICAgdGFyZ2V0LmFwcGVuZENoaWxkKGxpbmspO1xyXG4gICAgICAgIG9wZW4obGluayk7XHJcbiAgICAgICAgdGFyZ2V0LnJlbW92ZUNoaWxkKGxpbmspO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uICRlYThkY2JjYjllYTFiNTU2JHZhciRvcGVuU3ludGhldGljTGluayh0YXJnZXQsIG1vZGlmaWVycykge1xyXG4gICAgJGVhOGRjYmNiOWVhMWI1NTYkdmFyJGdldFN5bnRoZXRpY0xpbmsodGFyZ2V0LCAobGluayk9PiRlYThkY2JjYjllYTFiNTU2JGV4cG9ydCQ5NTE4NWQ2OTllMDVkNGQ3KGxpbmssIG1vZGlmaWVycykpO1xyXG59XHJcbmZ1bmN0aW9uICRlYThkY2JjYjllYTFiNTU2JGV4cG9ydCQ1MTQzN2Q1MDMzNzNkMjIzKHByb3BzKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIFwiZGF0YS1ocmVmXCI6IHByb3BzLmhyZWYsXHJcbiAgICAgICAgXCJkYXRhLXRhcmdldFwiOiBwcm9wcy50YXJnZXQsXHJcbiAgICAgICAgXCJkYXRhLXJlbFwiOiBwcm9wcy5yZWwsXHJcbiAgICAgICAgXCJkYXRhLWRvd25sb2FkXCI6IHByb3BzLmRvd25sb2FkLFxyXG4gICAgICAgIFwiZGF0YS1waW5nXCI6IHByb3BzLnBpbmcsXHJcbiAgICAgICAgXCJkYXRhLXJlZmVycmVyLXBvbGljeVwiOiBwcm9wcy5yZWZlcnJlclBvbGljeVxyXG4gICAgfTtcclxufVxyXG5cclxuXHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIC8vIFdlIHN0b3JlIGEgZ2xvYmFsIGxpc3Qgb2YgZWxlbWVudHMgdGhhdCBhcmUgY3VycmVudGx5IHRyYW5zaXRpb25pbmcsXHJcbi8vIG1hcHBlZCB0byBhIHNldCBvZiBDU1MgcHJvcGVydGllcyB0aGF0IGFyZSB0cmFuc2l0aW9uaW5nIGZvciB0aGF0IGVsZW1lbnQuXHJcbi8vIFRoaXMgaXMgbmVjZXNzYXJ5IHJhdGhlciB0aGFuIGEgc2ltcGxlIGNvdW50IG9mIHRyYW5zaXRpb25zIGJlY2F1c2Ugb2YgYnJvd3NlclxyXG4vLyBidWdzLCBlLmcuIENocm9tZSBzb21ldGltZXMgZmlyZXMgYm90aCB0cmFuc2l0aW9uZW5kIGFuZCB0cmFuc2l0aW9uY2FuY2VsIHJhdGhlclxyXG4vLyB0aGFuIG9uZSBvciB0aGUgb3RoZXIuIFNvIHdlIG5lZWQgdG8gdHJhY2sgd2hhdCdzIGFjdHVhbGx5IHRyYW5zaXRpb25pbmcgc28gdGhhdFxyXG4vLyB3ZSBjYW4gaWdub3JlIHRoZXNlIGR1cGxpY2F0ZSBldmVudHMuXHJcbmxldCAkYmJlZDhiNDFmODU3YmNjMCR2YXIkdHJhbnNpdGlvbnNCeUVsZW1lbnQgPSBuZXcgTWFwKCk7XHJcbi8vIEEgbGlzdCBvZiBjYWxsYmFja3MgdG8gY2FsbCBvbmNlIHRoZXJlIGFyZSBubyB0cmFuc2l0aW9uaW5nIGVsZW1lbnRzLlxyXG5sZXQgJGJiZWQ4YjQxZjg1N2JjYzAkdmFyJHRyYW5zaXRpb25DYWxsYmFja3MgPSBuZXcgU2V0KCk7XHJcbmZ1bmN0aW9uICRiYmVkOGI0MWY4NTdiY2MwJHZhciRzZXR1cEdsb2JhbEV2ZW50cygpIHtcclxuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm47XHJcbiAgICBmdW5jdGlvbiBpc1RyYW5zaXRpb25FdmVudChldmVudCkge1xyXG4gICAgICAgIHJldHVybiBcInByb3BlcnR5TmFtZVwiIGluIGV2ZW50O1xyXG4gICAgfVxyXG4gICAgbGV0IG9uVHJhbnNpdGlvblN0YXJ0ID0gKGUpPT57XHJcbiAgICAgICAgaWYgKCFpc1RyYW5zaXRpb25FdmVudChlKSB8fCAhZS50YXJnZXQpIHJldHVybjtcclxuICAgICAgICAvLyBBZGQgdGhlIHRyYW5zaXRpb25pbmcgcHJvcGVydHkgdG8gdGhlIGxpc3QgZm9yIHRoaXMgZWxlbWVudC5cclxuICAgICAgICBsZXQgdHJhbnNpdGlvbnMgPSAkYmJlZDhiNDFmODU3YmNjMCR2YXIkdHJhbnNpdGlvbnNCeUVsZW1lbnQuZ2V0KGUudGFyZ2V0KTtcclxuICAgICAgICBpZiAoIXRyYW5zaXRpb25zKSB7XHJcbiAgICAgICAgICAgIHRyYW5zaXRpb25zID0gbmV3IFNldCgpO1xyXG4gICAgICAgICAgICAkYmJlZDhiNDFmODU3YmNjMCR2YXIkdHJhbnNpdGlvbnNCeUVsZW1lbnQuc2V0KGUudGFyZ2V0LCB0cmFuc2l0aW9ucyk7XHJcbiAgICAgICAgICAgIC8vIFRoZSB0cmFuc2l0aW9uY2FuY2VsIGV2ZW50IG11c3QgYmUgcmVnaXN0ZXJlZCBvbiB0aGUgZWxlbWVudCBpdHNlbGYsIHJhdGhlciB0aGFuIGFzIGEgZ2xvYmFsXHJcbiAgICAgICAgICAgIC8vIGV2ZW50LiBUaGlzIGVuYWJsZXMgdXMgdG8gaGFuZGxlIHdoZW4gdGhlIG5vZGUgaXMgZGVsZXRlZCBmcm9tIHRoZSBkb2N1bWVudCB3aGlsZSBpdCBpcyB0cmFuc2l0aW9uaW5nLlxyXG4gICAgICAgICAgICAvLyBJbiB0aGF0IGNhc2UsIHRoZSBjYW5jZWwgZXZlbnQgd291bGQgaGF2ZSBub3doZXJlIHRvIGJ1YmJsZSB0byBzbyB3ZSBuZWVkIHRvIGhhbmRsZSBpdCBkaXJlY3RseS5cclxuICAgICAgICAgICAgZS50YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25jYW5jZWxcIiwgb25UcmFuc2l0aW9uRW5kLCB7XHJcbiAgICAgICAgICAgICAgICBvbmNlOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cmFuc2l0aW9ucy5hZGQoZS5wcm9wZXJ0eU5hbWUpO1xyXG4gICAgfTtcclxuICAgIGxldCBvblRyYW5zaXRpb25FbmQgPSAoZSk9PntcclxuICAgICAgICBpZiAoIWlzVHJhbnNpdGlvbkV2ZW50KGUpIHx8ICFlLnRhcmdldCkgcmV0dXJuO1xyXG4gICAgICAgIC8vIFJlbW92ZSBwcm9wZXJ0eSBmcm9tIGxpc3Qgb2YgdHJhbnNpdGlvbmluZyBwcm9wZXJ0aWVzLlxyXG4gICAgICAgIGxldCBwcm9wZXJ0aWVzID0gJGJiZWQ4YjQxZjg1N2JjYzAkdmFyJHRyYW5zaXRpb25zQnlFbGVtZW50LmdldChlLnRhcmdldCk7XHJcbiAgICAgICAgaWYgKCFwcm9wZXJ0aWVzKSByZXR1cm47XHJcbiAgICAgICAgcHJvcGVydGllcy5kZWxldGUoZS5wcm9wZXJ0eU5hbWUpO1xyXG4gICAgICAgIC8vIElmIGVtcHR5LCByZW1vdmUgdHJhbnNpdGlvbmNhbmNlbCBldmVudCwgYW5kIHJlbW92ZSB0aGUgZWxlbWVudCBmcm9tIHRoZSBsaXN0IG9mIHRyYW5zaXRpb25pbmcgZWxlbWVudHMuXHJcbiAgICAgICAgaWYgKHByb3BlcnRpZXMuc2l6ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICBlLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmNhbmNlbFwiLCBvblRyYW5zaXRpb25FbmQpO1xyXG4gICAgICAgICAgICAkYmJlZDhiNDFmODU3YmNjMCR2YXIkdHJhbnNpdGlvbnNCeUVsZW1lbnQuZGVsZXRlKGUudGFyZ2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgbm8gdHJhbnNpdGlvbmluZyBlbGVtZW50cywgY2FsbCBhbGwgb2YgdGhlIHF1ZXVlZCBjYWxsYmFja3MuXHJcbiAgICAgICAgaWYgKCRiYmVkOGI0MWY4NTdiY2MwJHZhciR0cmFuc2l0aW9uc0J5RWxlbWVudC5zaXplID09PSAwKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGNiIG9mICRiYmVkOGI0MWY4NTdiY2MwJHZhciR0cmFuc2l0aW9uQ2FsbGJhY2tzKWNiKCk7XHJcbiAgICAgICAgICAgICRiYmVkOGI0MWY4NTdiY2MwJHZhciR0cmFuc2l0aW9uQ2FsbGJhY2tzLmNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25ydW5cIiwgb25UcmFuc2l0aW9uU3RhcnQpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBvblRyYW5zaXRpb25FbmQpO1xyXG59XHJcbmlmICh0eXBlb2YgZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9PSBcImxvYWRpbmdcIikgJGJiZWQ4YjQxZjg1N2JjYzAkdmFyJHNldHVwR2xvYmFsRXZlbnRzKCk7XHJcbiAgICBlbHNlIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICRiYmVkOGI0MWY4NTdiY2MwJHZhciRzZXR1cEdsb2JhbEV2ZW50cyk7XHJcbn1cclxuZnVuY3Rpb24gJGJiZWQ4YjQxZjg1N2JjYzAkZXhwb3J0JDI0NDkwMzE2Zjc2NGM0MzAoZm4pIHtcclxuICAgIC8vIFdhaXQgb25lIGZyYW1lIHRvIHNlZSBpZiBhbiBhbmltYXRpb24gc3RhcnRzLCBlLmcuIGEgdHJhbnNpdGlvbiBvbiBtb3VudC5cclxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKT0+e1xyXG4gICAgICAgIC8vIElmIG5vIHRyYW5zaXRpb25zIGFyZSBydW5uaW5nLCBjYWxsIHRoZSBmdW5jdGlvbiBpbW1lZGlhdGVseS5cclxuICAgICAgICAvLyBPdGhlcndpc2UsIGFkZCBpdCB0byBhIGxpc3Qgb2YgY2FsbGJhY2tzIHRvIHJ1biBhdCB0aGUgZW5kIG9mIHRoZSBhbmltYXRpb24uXHJcbiAgICAgICAgaWYgKCRiYmVkOGI0MWY4NTdiY2MwJHZhciR0cmFuc2l0aW9uc0J5RWxlbWVudC5zaXplID09PSAwKSBmbigpO1xyXG4gICAgICAgIGVsc2UgJGJiZWQ4YjQxZjg1N2JjYzAkdmFyJHRyYW5zaXRpb25DYWxsYmFja3MuYWRkKGZuKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuLypcclxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gLyogZXNsaW50LWRpc2FibGUgcnVsZXNkaXIvcHVyZS1yZW5kZXIgKi8gXHJcblxyXG4vLyBLZWVwIHRyYWNrIG9mIGVsZW1lbnRzIHRoYXQgd2UgYXJlIGN1cnJlbnRseSBoYW5kbGluZyBkcmFnZ2luZyBmb3IgdmlhIHVzZURyYWcxRC5cclxuLy8gSWYgdGhlcmUncyBhbiBhbmNlc3RvciBhbmQgYSBkZXNjZW5kYW50IGJvdGggdXNpbmcgdXNlRHJhZzFEKCksIGFuZCB0aGUgdXNlciBzdGFydHNcclxuLy8gZHJhZ2dpbmcgdGhlIGRlc2NlbmRhbnQsIHdlIGRvbid0IHdhbnQgdXNlRHJhZzFEIGV2ZW50cyB0byBmaXJlIGZvciB0aGUgYW5jZXN0b3IuXHJcbmNvbnN0ICQ5Y2MwOWRmOWZkNzY3NmJlJHZhciRkcmFnZ2luZ0VsZW1lbnRzID0gW107XHJcbmZ1bmN0aW9uICQ5Y2MwOWRmOWZkNzY3NmJlJGV4cG9ydCQ3YmJlZDc1ZmViYTM5NzA2KHByb3BzKSB7XHJcbiAgICBjb25zb2xlLndhcm4oXCJ1c2VEcmFnMUQgaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBgdXNlTW92ZWAgaW5zdGVhZCBodHRwczovL3JlYWN0LXNwZWN0cnVtLmFkb2JlLmNvbS9yZWFjdC1hcmlhL3VzZU1vdmUuaHRtbFwiKTtcclxuICAgIGxldCB7IGNvbnRhaW5lclJlZjogY29udGFpbmVyUmVmLCByZXZlcnNlOiByZXZlcnNlLCBvcmllbnRhdGlvbjogb3JpZW50YXRpb24sIG9uSG92ZXI6IG9uSG92ZXIsIG9uRHJhZzogb25EcmFnLCBvblBvc2l0aW9uQ2hhbmdlOiBvblBvc2l0aW9uQ2hhbmdlLCBvbkluY3JlbWVudDogb25JbmNyZW1lbnQsIG9uRGVjcmVtZW50OiBvbkRlY3JlbWVudCwgb25JbmNyZW1lbnRUb01heDogb25JbmNyZW1lbnRUb01heCwgb25EZWNyZW1lbnRUb01pbjogb25EZWNyZW1lbnRUb01pbiwgb25Db2xsYXBzZVRvZ2dsZTogb25Db2xsYXBzZVRvZ2dsZSB9ID0gcHJvcHM7XHJcbiAgICBsZXQgZ2V0UG9zaXRpb24gPSAoZSk9Pm9yaWVudGF0aW9uID09PSBcImhvcml6b250YWxcIiA/IGUuY2xpZW50WCA6IGUuY2xpZW50WTtcclxuICAgIGxldCBnZXROZXh0T2Zmc2V0ID0gKGUpPT57XHJcbiAgICAgICAgbGV0IGNvbnRhaW5lck9mZnNldCA9ICgwLCAkYWI3MWRhZGIwM2E2ZmIyZSRleHBvcnQkNjIyY2VhNDQ1YTFjNWI3ZCkoY29udGFpbmVyUmVmLmN1cnJlbnQsIHJldmVyc2UsIG9yaWVudGF0aW9uKTtcclxuICAgICAgICBsZXQgbW91c2VPZmZzZXQgPSBnZXRQb3NpdGlvbihlKTtcclxuICAgICAgICBsZXQgbmV4dE9mZnNldCA9IHJldmVyc2UgPyBjb250YWluZXJPZmZzZXQgLSBtb3VzZU9mZnNldCA6IG1vdXNlT2Zmc2V0IC0gY29udGFpbmVyT2Zmc2V0O1xyXG4gICAgICAgIHJldHVybiBuZXh0T2Zmc2V0O1xyXG4gICAgfTtcclxuICAgIGxldCBkcmFnZ2luZyA9ICgwLCAkMTJ1R3AkdXNlUmVmKShmYWxzZSk7XHJcbiAgICBsZXQgcHJldlBvc2l0aW9uID0gKDAsICQxMnVHcCR1c2VSZWYpKDApO1xyXG4gICAgLy8gS2VlcCB0cmFjayBvZiB0aGUgY3VycmVudCBoYW5kbGVycyBpbiBhIHJlZiBzbyB0aGF0IHRoZSBldmVudHMgY2FuIGFjY2VzcyB0aGVtLlxyXG4gICAgbGV0IGhhbmRsZXJzID0gKDAsICQxMnVHcCR1c2VSZWYpKHtcclxuICAgICAgICBvblBvc2l0aW9uQ2hhbmdlOiBvblBvc2l0aW9uQ2hhbmdlLFxyXG4gICAgICAgIG9uRHJhZzogb25EcmFnXHJcbiAgICB9KTtcclxuICAgIGhhbmRsZXJzLmN1cnJlbnQub25EcmFnID0gb25EcmFnO1xyXG4gICAgaGFuZGxlcnMuY3VycmVudC5vblBvc2l0aW9uQ2hhbmdlID0gb25Qb3NpdGlvbkNoYW5nZTtcclxuICAgIGxldCBvbk1vdXNlRHJhZ2dlZCA9IChlKT0+e1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBsZXQgbmV4dE9mZnNldCA9IGdldE5leHRPZmZzZXQoZSk7XHJcbiAgICAgICAgaWYgKCFkcmFnZ2luZy5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgIGRyYWdnaW5nLmN1cnJlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAoaGFuZGxlcnMuY3VycmVudC5vbkRyYWcpIGhhbmRsZXJzLmN1cnJlbnQub25EcmFnKHRydWUpO1xyXG4gICAgICAgICAgICBpZiAoaGFuZGxlcnMuY3VycmVudC5vblBvc2l0aW9uQ2hhbmdlKSBoYW5kbGVycy5jdXJyZW50Lm9uUG9zaXRpb25DaGFuZ2UobmV4dE9mZnNldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwcmV2UG9zaXRpb24uY3VycmVudCA9PT0gbmV4dE9mZnNldCkgcmV0dXJuO1xyXG4gICAgICAgIHByZXZQb3NpdGlvbi5jdXJyZW50ID0gbmV4dE9mZnNldDtcclxuICAgICAgICBpZiAob25Qb3NpdGlvbkNoYW5nZSkgb25Qb3NpdGlvbkNoYW5nZShuZXh0T2Zmc2V0KTtcclxuICAgIH07XHJcbiAgICBsZXQgb25Nb3VzZVVwID0gKGUpPT57XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XHJcbiAgICAgICAgZHJhZ2dpbmcuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBuZXh0T2Zmc2V0ID0gZ2V0TmV4dE9mZnNldChlKTtcclxuICAgICAgICBpZiAoaGFuZGxlcnMuY3VycmVudC5vbkRyYWcpIGhhbmRsZXJzLmN1cnJlbnQub25EcmFnKGZhbHNlKTtcclxuICAgICAgICBpZiAoaGFuZGxlcnMuY3VycmVudC5vblBvc2l0aW9uQ2hhbmdlKSBoYW5kbGVycy5jdXJyZW50Lm9uUG9zaXRpb25DaGFuZ2UobmV4dE9mZnNldCk7XHJcbiAgICAgICAgJDljYzA5ZGY5ZmQ3Njc2YmUkdmFyJGRyYWdnaW5nRWxlbWVudHMuc3BsaWNlKCQ5Y2MwOWRmOWZkNzY3NmJlJHZhciRkcmFnZ2luZ0VsZW1lbnRzLmluZGV4T2YodGFyZ2V0KSwgMSk7XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIG9uTW91c2VVcCwgZmFsc2UpO1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG9uTW91c2VEcmFnZ2VkLCBmYWxzZSk7XHJcbiAgICB9O1xyXG4gICAgbGV0IG9uTW91c2VEb3duID0gKGUpPT57XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0O1xyXG4gICAgICAgIC8vIElmIHdlJ3JlIGFscmVhZHkgaGFuZGxpbmcgZHJhZ2dpbmcgb24gYSBkZXNjZW5kYW50IHdpdGggdXNlRHJhZzFELCB0aGVuXHJcbiAgICAgICAgLy8gd2UgZG9uJ3Qgd2FudCB0byBoYW5kbGUgdGhlIGRyYWcgbW90aW9uIG9uIHRoaXMgdGFyZ2V0IGFzIHdlbGwuXHJcbiAgICAgICAgaWYgKCQ5Y2MwOWRmOWZkNzY3NmJlJHZhciRkcmFnZ2luZ0VsZW1lbnRzLnNvbWUoKGVsdCk9PnRhcmdldC5jb250YWlucyhlbHQpKSkgcmV0dXJuO1xyXG4gICAgICAgICQ5Y2MwOWRmOWZkNzY3NmJlJHZhciRkcmFnZ2luZ0VsZW1lbnRzLnB1c2godGFyZ2V0KTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBvbk1vdXNlRHJhZ2dlZCwgZmFsc2UpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBvbk1vdXNlVXAsIGZhbHNlKTtcclxuICAgIH07XHJcbiAgICBsZXQgb25Nb3VzZUVudGVyID0gKCk9PntcclxuICAgICAgICBpZiAob25Ib3Zlcikgb25Ib3Zlcih0cnVlKTtcclxuICAgIH07XHJcbiAgICBsZXQgb25Nb3VzZU91dCA9ICgpPT57XHJcbiAgICAgICAgaWYgKG9uSG92ZXIpIG9uSG92ZXIoZmFsc2UpO1xyXG4gICAgfTtcclxuICAgIGxldCBvbktleURvd24gPSAoZSk9PntcclxuICAgICAgICBzd2l0Y2goZS5rZXkpe1xyXG4gICAgICAgICAgICBjYXNlIFwiTGVmdFwiOlxyXG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dMZWZ0XCI6XHJcbiAgICAgICAgICAgICAgICBpZiAob3JpZW50YXRpb24gPT09IFwiaG9yaXpvbnRhbFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvbkRlY3JlbWVudCAmJiAhcmV2ZXJzZSkgb25EZWNyZW1lbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvbkluY3JlbWVudCAmJiByZXZlcnNlKSBvbkluY3JlbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJVcFwiOlxyXG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dVcFwiOlxyXG4gICAgICAgICAgICAgICAgaWYgKG9yaWVudGF0aW9uID09PSBcInZlcnRpY2FsXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9uRGVjcmVtZW50ICYmICFyZXZlcnNlKSBvbkRlY3JlbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9uSW5jcmVtZW50ICYmIHJldmVyc2UpIG9uSW5jcmVtZW50KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIlJpZ2h0XCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJBcnJvd1JpZ2h0XCI6XHJcbiAgICAgICAgICAgICAgICBpZiAob3JpZW50YXRpb24gPT09IFwiaG9yaXpvbnRhbFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvbkluY3JlbWVudCAmJiAhcmV2ZXJzZSkgb25JbmNyZW1lbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvbkRlY3JlbWVudCAmJiByZXZlcnNlKSBvbkRlY3JlbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJEb3duXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJBcnJvd0Rvd25cIjpcclxuICAgICAgICAgICAgICAgIGlmIChvcmllbnRhdGlvbiA9PT0gXCJ2ZXJ0aWNhbFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvbkluY3JlbWVudCAmJiAhcmV2ZXJzZSkgb25JbmNyZW1lbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvbkRlY3JlbWVudCAmJiByZXZlcnNlKSBvbkRlY3JlbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJIb21lXCI6XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAob25EZWNyZW1lbnRUb01pbikgb25EZWNyZW1lbnRUb01pbigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJFbmRcIjpcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChvbkluY3JlbWVudFRvTWF4KSBvbkluY3JlbWVudFRvTWF4KCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIkVudGVyXCI6XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAob25Db2xsYXBzZVRvZ2dsZSkgb25Db2xsYXBzZVRvZ2dsZSgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgb25Nb3VzZURvd246IG9uTW91c2VEb3duLFxyXG4gICAgICAgIG9uTW91c2VFbnRlcjogb25Nb3VzZUVudGVyLFxyXG4gICAgICAgIG9uTW91c2VPdXQ6IG9uTW91c2VPdXQsXHJcbiAgICAgICAgb25LZXlEb3duOiBvbktleURvd25cclxuICAgIH07XHJcbn1cclxuXHJcblxyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxyXG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyBcclxuZnVuY3Rpb24gJDAzZGViMjNmZjE0OTIwYzQkZXhwb3J0JDRlYWYwNGU1NGFhOGVlZDYoKSB7XHJcbiAgICBsZXQgZ2xvYmFsTGlzdGVuZXJzID0gKDAsICQxMnVHcCR1c2VSZWYpKG5ldyBNYXAoKSk7XHJcbiAgICBsZXQgYWRkR2xvYmFsTGlzdGVuZXIgPSAoMCwgJDEydUdwJHVzZUNhbGxiYWNrKSgoZXZlbnRUYXJnZXQsIHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKT0+e1xyXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSByZW1vdmUgdGhlIGxpc3RlbmVyIGFmdGVyIGl0IGlzIGNhbGxlZCB3aXRoIHRoZSBgb25jZWAgb3B0aW9uLlxyXG4gICAgICAgIGxldCBmbiA9IChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMub25jZSkgPyAoLi4uYXJncyk9PntcclxuICAgICAgICAgICAgZ2xvYmFsTGlzdGVuZXJzLmN1cnJlbnQuZGVsZXRlKGxpc3RlbmVyKTtcclxuICAgICAgICAgICAgbGlzdGVuZXIoLi4uYXJncyk7XHJcbiAgICAgICAgfSA6IGxpc3RlbmVyO1xyXG4gICAgICAgIGdsb2JhbExpc3RlbmVycy5jdXJyZW50LnNldChsaXN0ZW5lciwge1xyXG4gICAgICAgICAgICB0eXBlOiB0eXBlLFxyXG4gICAgICAgICAgICBldmVudFRhcmdldDogZXZlbnRUYXJnZXQsXHJcbiAgICAgICAgICAgIGZuOiBmbixcclxuICAgICAgICAgICAgb3B0aW9uczogb3B0aW9uc1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpO1xyXG4gICAgfSwgW10pO1xyXG4gICAgbGV0IHJlbW92ZUdsb2JhbExpc3RlbmVyID0gKDAsICQxMnVHcCR1c2VDYWxsYmFjaykoKGV2ZW50VGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgb3B0aW9ucyk9PntcclxuICAgICAgICB2YXIgX2dsb2JhbExpc3RlbmVyc19jdXJyZW50X2dldDtcclxuICAgICAgICBsZXQgZm4gPSAoKF9nbG9iYWxMaXN0ZW5lcnNfY3VycmVudF9nZXQgPSBnbG9iYWxMaXN0ZW5lcnMuY3VycmVudC5nZXQobGlzdGVuZXIpKSA9PT0gbnVsbCB8fCBfZ2xvYmFsTGlzdGVuZXJzX2N1cnJlbnRfZ2V0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZ2xvYmFsTGlzdGVuZXJzX2N1cnJlbnRfZ2V0LmZuKSB8fCBsaXN0ZW5lcjtcclxuICAgICAgICBldmVudFRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGZuLCBvcHRpb25zKTtcclxuICAgICAgICBnbG9iYWxMaXN0ZW5lcnMuY3VycmVudC5kZWxldGUobGlzdGVuZXIpO1xyXG4gICAgfSwgW10pO1xyXG4gICAgbGV0IHJlbW92ZUFsbEdsb2JhbExpc3RlbmVycyA9ICgwLCAkMTJ1R3AkdXNlQ2FsbGJhY2spKCgpPT57XHJcbiAgICAgICAgZ2xvYmFsTGlzdGVuZXJzLmN1cnJlbnQuZm9yRWFjaCgodmFsdWUsIGtleSk9PntcclxuICAgICAgICAgICAgcmVtb3ZlR2xvYmFsTGlzdGVuZXIodmFsdWUuZXZlbnRUYXJnZXQsIHZhbHVlLnR5cGUsIGtleSwgdmFsdWUub3B0aW9ucyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCBbXHJcbiAgICAgICAgcmVtb3ZlR2xvYmFsTGlzdGVuZXJcclxuICAgIF0pO1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGFycm93LWJvZHktc3R5bGVcclxuICAgICgwLCAkMTJ1R3AkdXNlRWZmZWN0KSgoKT0+e1xyXG4gICAgICAgIHJldHVybiByZW1vdmVBbGxHbG9iYWxMaXN0ZW5lcnM7XHJcbiAgICB9LCBbXHJcbiAgICAgICAgcmVtb3ZlQWxsR2xvYmFsTGlzdGVuZXJzXHJcbiAgICBdKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYWRkR2xvYmFsTGlzdGVuZXI6IGFkZEdsb2JhbExpc3RlbmVyLFxyXG4gICAgICAgIHJlbW92ZUdsb2JhbExpc3RlbmVyOiByZW1vdmVHbG9iYWxMaXN0ZW5lcixcclxuICAgICAgICByZW1vdmVBbGxHbG9iYWxMaXN0ZW5lcnM6IHJlbW92ZUFsbEdsb2JhbExpc3RlbmVyc1xyXG4gICAgfTtcclxufVxyXG5cclxuXHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIFxyXG5mdW5jdGlvbiAkMzEzYjk4ODYxZWU1ZGQ2YyRleHBvcnQkZDY4NzUxMjIxOTRjN2I0NChwcm9wcywgZGVmYXVsdExhYmVsKSB7XHJcbiAgICBsZXQgeyBpZDogaWQsIFwiYXJpYS1sYWJlbFwiOiBsYWJlbCwgXCJhcmlhLWxhYmVsbGVkYnlcIjogbGFiZWxsZWRCeSB9ID0gcHJvcHM7XHJcbiAgICAvLyBJZiB0aGVyZSBpcyBib3RoIGFuIGFyaWEtbGFiZWwgYW5kIGFyaWEtbGFiZWxsZWRieSxcclxuICAgIC8vIGNvbWJpbmUgdGhlbSBieSBwb2ludGluZyB0byB0aGUgZWxlbWVudCBpdHNlbGYuXHJcbiAgICBpZCA9ICgwLCAkYmRiMTEwMTBjZWY3MDIzNiRleHBvcnQkZjY4MDg3N2EzNDcxMWUzNykoaWQpO1xyXG4gICAgaWYgKGxhYmVsbGVkQnkgJiYgbGFiZWwpIHtcclxuICAgICAgICBsZXQgaWRzID0gbmV3IFNldChbXHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICAuLi5sYWJlbGxlZEJ5LnRyaW0oKS5zcGxpdCgvXFxzKy8pXHJcbiAgICAgICAgXSk7XHJcbiAgICAgICAgbGFiZWxsZWRCeSA9IFtcclxuICAgICAgICAgICAgLi4uaWRzXHJcbiAgICAgICAgXS5qb2luKFwiIFwiKTtcclxuICAgIH0gZWxzZSBpZiAobGFiZWxsZWRCeSkgbGFiZWxsZWRCeSA9IGxhYmVsbGVkQnkudHJpbSgpLnNwbGl0KC9cXHMrLykuam9pbihcIiBcIik7XHJcbiAgICAvLyBJZiBubyBsYWJlbHMgYXJlIHByb3ZpZGVkLCB1c2UgdGhlIGRlZmF1bHRcclxuICAgIGlmICghbGFiZWwgJiYgIWxhYmVsbGVkQnkgJiYgZGVmYXVsdExhYmVsKSBsYWJlbCA9IGRlZmF1bHRMYWJlbDtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaWQ6IGlkLFxyXG4gICAgICAgIFwiYXJpYS1sYWJlbFwiOiBsYWJlbCxcclxuICAgICAgICBcImFyaWEtbGFiZWxsZWRieVwiOiBsYWJlbGxlZEJ5XHJcbiAgICB9O1xyXG59XHJcblxyXG5cclxuLypcclxuICogQ29weXJpZ2h0IDIwMjEgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gXHJcbmZ1bmN0aW9uICRkZjU2MTY0ZGZmNTc4NWUyJGV4cG9ydCQ0MzM4YjUzMzE1YWJmNjY2KGZvcndhcmRlZFJlZikge1xyXG4gICAgY29uc3Qgb2JqUmVmID0gKDAsICQxMnVHcCR1c2VSZWYpKG51bGwpO1xyXG4gICAgcmV0dXJuICgwLCAkMTJ1R3AkdXNlTWVtbykoKCk9Pih7XHJcbiAgICAgICAgICAgIGdldCBjdXJyZW50ICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmpSZWYuY3VycmVudDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0IGN1cnJlbnQgKHZhbHVlKXtcclxuICAgICAgICAgICAgICAgIG9ialJlZi5jdXJyZW50ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGZvcndhcmRlZFJlZiA9PT0gXCJmdW5jdGlvblwiKSBmb3J3YXJkZWRSZWYodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZm9yd2FyZGVkUmVmKSBmb3J3YXJkZWRSZWYuY3VycmVudCA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSksIFtcclxuICAgICAgICBmb3J3YXJkZWRSZWZcclxuICAgIF0pO1xyXG59XHJcblxyXG5cclxuLypcclxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gXHJcbmZ1bmN0aW9uICQ0ZjU4YzVmNzJiY2Y3OWY3JGV4cG9ydCQ0OTYzMTVhMTYwOGQ5NjAyKGVmZmVjdCwgZGVwZW5kZW5jaWVzKSB7XHJcbiAgICBjb25zdCBpc0luaXRpYWxNb3VudCA9ICgwLCAkMTJ1R3AkdXNlUmVmKSh0cnVlKTtcclxuICAgIGNvbnN0IGxhc3REZXBzID0gKDAsICQxMnVHcCR1c2VSZWYpKG51bGwpO1xyXG4gICAgKDAsICQxMnVHcCR1c2VFZmZlY3QpKCgpPT57XHJcbiAgICAgICAgaXNJbml0aWFsTW91bnQuY3VycmVudCA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuICgpPT57XHJcbiAgICAgICAgICAgIGlzSW5pdGlhbE1vdW50LmN1cnJlbnQgPSBmYWxzZTtcclxuICAgICAgICB9O1xyXG4gICAgfSwgW10pO1xyXG4gICAgKDAsICQxMnVHcCR1c2VFZmZlY3QpKCgpPT57XHJcbiAgICAgICAgaWYgKGlzSW5pdGlhbE1vdW50LmN1cnJlbnQpIGlzSW5pdGlhbE1vdW50LmN1cnJlbnQgPSBmYWxzZTtcclxuICAgICAgICBlbHNlIGlmICghbGFzdERlcHMuY3VycmVudCB8fCBkZXBlbmRlbmNpZXMuc29tZSgoZGVwLCBpKT0+IU9iamVjdC5pcyhkZXAsIGxhc3REZXBzW2ldKSkpIGVmZmVjdCgpO1xyXG4gICAgICAgIGxhc3REZXBzLmN1cnJlbnQgPSBkZXBlbmRlbmNpZXM7XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXHJcbiAgICB9LCBkZXBlbmRlbmNpZXMpO1xyXG59XHJcblxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiAkOWRhYWIwMmQ0NjE4MDlkYiR2YXIkaGFzUmVzaXplT2JzZXJ2ZXIoKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHdpbmRvdy5SZXNpemVPYnNlcnZlciAhPT0gXCJ1bmRlZmluZWRcIjtcclxufVxyXG5mdW5jdGlvbiAkOWRhYWIwMmQ0NjE4MDlkYiRleHBvcnQkNjgzNDgwZjE5MWMwZTNlYShvcHRpb25zKSB7XHJcbiAgICBjb25zdCB7IHJlZjogcmVmLCBvblJlc2l6ZTogb25SZXNpemUgfSA9IG9wdGlvbnM7XHJcbiAgICAoMCwgJDEydUdwJHVzZUVmZmVjdCkoKCk9PntcclxuICAgICAgICBsZXQgZWxlbWVudCA9IHJlZiA9PT0gbnVsbCB8fCByZWYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlZi5jdXJyZW50O1xyXG4gICAgICAgIGlmICghZWxlbWVudCkgcmV0dXJuO1xyXG4gICAgICAgIGlmICghJDlkYWFiMDJkNDYxODA5ZGIkdmFyJGhhc1Jlc2l6ZU9ic2VydmVyKCkpIHtcclxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgb25SZXNpemUsIGZhbHNlKTtcclxuICAgICAgICAgICAgcmV0dXJuICgpPT57XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBvblJlc2l6ZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc2l6ZU9ic2VydmVySW5zdGFuY2UgPSBuZXcgd2luZG93LlJlc2l6ZU9ic2VydmVyKChlbnRyaWVzKT0+e1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlbnRyaWVzLmxlbmd0aCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgb25SZXNpemUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJlc2l6ZU9ic2VydmVySW5zdGFuY2Uub2JzZXJ2ZShlbGVtZW50KTtcclxuICAgICAgICAgICAgcmV0dXJuICgpPT57XHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCkgcmVzaXplT2JzZXJ2ZXJJbnN0YW5jZS51bm9ic2VydmUoZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfSwgW1xyXG4gICAgICAgIG9uUmVzaXplLFxyXG4gICAgICAgIHJlZlxyXG4gICAgXSk7XHJcbn1cclxuXHJcblxyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxyXG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyBcclxuZnVuY3Rpb24gJGU3ODAxYmU4MmI0YjJhNTMkZXhwb3J0JDRkZWJkYjFhM2YwZmE3OWUoY29udGV4dCwgcmVmKSB7XHJcbiAgICAoMCwgJGYwYTA0Y2NkOGRiZGQ4M2IkZXhwb3J0JGU1YzVhNWY5MTdhNTg3MWMpKCgpPT57XHJcbiAgICAgICAgaWYgKGNvbnRleHQgJiYgY29udGV4dC5yZWYgJiYgcmVmKSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQucmVmLmN1cnJlbnQgPSByZWYuY3VycmVudDtcclxuICAgICAgICAgICAgcmV0dXJuICgpPT57XHJcbiAgICAgICAgICAgICAgICBpZiAoY29udGV4dC5yZWYpIGNvbnRleHQucmVmLmN1cnJlbnQgPSBudWxsO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuLypcclxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gZnVuY3Rpb24gJDYyZDhkZWQ5Mjk2ZjM4NzIkZXhwb3J0JGNmYTIyMjVlODc5Mzg3ODEobm9kZSwgY2hlY2tGb3JPdmVyZmxvdykge1xyXG4gICAgbGV0IHNjcm9sbGFibGVOb2RlID0gbm9kZTtcclxuICAgIGlmICgkNjJkOGRlZDkyOTZmMzg3MiRleHBvcnQkMmJiNzQ3NDBjNGUxOWRlZihzY3JvbGxhYmxlTm9kZSwgY2hlY2tGb3JPdmVyZmxvdykpIHNjcm9sbGFibGVOb2RlID0gc2Nyb2xsYWJsZU5vZGUucGFyZW50RWxlbWVudDtcclxuICAgIHdoaWxlKHNjcm9sbGFibGVOb2RlICYmICEkNjJkOGRlZDkyOTZmMzg3MiRleHBvcnQkMmJiNzQ3NDBjNGUxOWRlZihzY3JvbGxhYmxlTm9kZSwgY2hlY2tGb3JPdmVyZmxvdykpc2Nyb2xsYWJsZU5vZGUgPSBzY3JvbGxhYmxlTm9kZS5wYXJlbnRFbGVtZW50O1xyXG4gICAgcmV0dXJuIHNjcm9sbGFibGVOb2RlIHx8IGRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xyXG59XHJcbmZ1bmN0aW9uICQ2MmQ4ZGVkOTI5NmYzODcyJGV4cG9ydCQyYmI3NDc0MGM0ZTE5ZGVmKG5vZGUsIGNoZWNrRm9yT3ZlcmZsb3cpIHtcclxuICAgIGxldCBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG5vZGUpO1xyXG4gICAgbGV0IGlzU2Nyb2xsYWJsZSA9IC8oYXV0b3xzY3JvbGwpLy50ZXN0KHN0eWxlLm92ZXJmbG93ICsgc3R5bGUub3ZlcmZsb3dYICsgc3R5bGUub3ZlcmZsb3dZKTtcclxuICAgIGlmIChpc1Njcm9sbGFibGUgJiYgY2hlY2tGb3JPdmVyZmxvdykgaXNTY3JvbGxhYmxlID0gbm9kZS5zY3JvbGxIZWlnaHQgIT09IG5vZGUuY2xpZW50SGVpZ2h0IHx8IG5vZGUuc2Nyb2xsV2lkdGggIT09IG5vZGUuY2xpZW50V2lkdGg7XHJcbiAgICByZXR1cm4gaXNTY3JvbGxhYmxlO1xyXG59XHJcblxyXG5cclxuLypcclxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gXHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmxldCAkNWRmNjRiMzgwN2RjMTVlZSR2YXIkdmlzdWFsVmlld3BvcnQgPSB0eXBlb2YgZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LnZpc3VhbFZpZXdwb3J0O1xyXG5mdW5jdGlvbiAkNWRmNjRiMzgwN2RjMTVlZSRleHBvcnQkZDY5OTkwNWRkNTdjNzNjYSgpIHtcclxuICAgIGxldCBpc1NTUiA9ICgwLCAkMTJ1R3AkdXNlSXNTU1IpKCk7XHJcbiAgICBsZXQgW3NpemUsIHNldFNpemVdID0gKDAsICQxMnVHcCR1c2VTdGF0ZSkoKCk9PmlzU1NSID8ge1xyXG4gICAgICAgICAgICB3aWR0aDogMCxcclxuICAgICAgICAgICAgaGVpZ2h0OiAwXHJcbiAgICAgICAgfSA6ICQ1ZGY2NGIzODA3ZGMxNWVlJHZhciRnZXRWaWV3cG9ydFNpemUoKSk7XHJcbiAgICAoMCwgJDEydUdwJHVzZUVmZmVjdCkoKCk9PntcclxuICAgICAgICAvLyBVc2UgdmlzdWFsVmlld3BvcnQgYXBpIHRvIHRyYWNrIGF2YWlsYWJsZSBoZWlnaHQgZXZlbiBvbiBpT1MgdmlydHVhbCBrZXlib2FyZCBvcGVuaW5nXHJcbiAgICAgICAgbGV0IG9uUmVzaXplID0gKCk9PntcclxuICAgICAgICAgICAgc2V0U2l6ZSgoc2l6ZSk9PntcclxuICAgICAgICAgICAgICAgIGxldCBuZXdTaXplID0gJDVkZjY0YjM4MDdkYzE1ZWUkdmFyJGdldFZpZXdwb3J0U2l6ZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5ld1NpemUud2lkdGggPT09IHNpemUud2lkdGggJiYgbmV3U2l6ZS5oZWlnaHQgPT09IHNpemUuaGVpZ2h0KSByZXR1cm4gc2l6ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXdTaXplO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICghJDVkZjY0YjM4MDdkYzE1ZWUkdmFyJHZpc3VhbFZpZXdwb3J0KSB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBvblJlc2l6ZSk7XHJcbiAgICAgICAgZWxzZSAkNWRmNjRiMzgwN2RjMTVlZSR2YXIkdmlzdWFsVmlld3BvcnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBvblJlc2l6ZSk7XHJcbiAgICAgICAgcmV0dXJuICgpPT57XHJcbiAgICAgICAgICAgIGlmICghJDVkZjY0YjM4MDdkYzE1ZWUkdmFyJHZpc3VhbFZpZXdwb3J0KSB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBvblJlc2l6ZSk7XHJcbiAgICAgICAgICAgIGVsc2UgJDVkZjY0YjM4MDdkYzE1ZWUkdmFyJHZpc3VhbFZpZXdwb3J0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgb25SZXNpemUpO1xyXG4gICAgICAgIH07XHJcbiAgICB9LCBbXSk7XHJcbiAgICByZXR1cm4gc2l6ZTtcclxufVxyXG5mdW5jdGlvbiAkNWRmNjRiMzgwN2RjMTVlZSR2YXIkZ2V0Vmlld3BvcnRTaXplKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB3aWR0aDogJDVkZjY0YjM4MDdkYzE1ZWUkdmFyJHZpc3VhbFZpZXdwb3J0ICYmICgkNWRmNjRiMzgwN2RjMTVlZSR2YXIkdmlzdWFsVmlld3BvcnQgPT09IG51bGwgfHwgJDVkZjY0YjM4MDdkYzE1ZWUkdmFyJHZpc3VhbFZpZXdwb3J0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAkNWRmNjRiMzgwN2RjMTVlZSR2YXIkdmlzdWFsVmlld3BvcnQud2lkdGgpIHx8IHdpbmRvdy5pbm5lcldpZHRoLFxyXG4gICAgICAgIGhlaWdodDogJDVkZjY0YjM4MDdkYzE1ZWUkdmFyJHZpc3VhbFZpZXdwb3J0ICYmICgkNWRmNjRiMzgwN2RjMTVlZSR2YXIkdmlzdWFsVmlld3BvcnQgPT09IG51bGwgfHwgJDVkZjY0YjM4MDdkYzE1ZWUkdmFyJHZpc3VhbFZpZXdwb3J0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAkNWRmNjRiMzgwN2RjMTVlZSR2YXIkdmlzdWFsVmlld3BvcnQuaGVpZ2h0KSB8fCB3aW5kb3cuaW5uZXJIZWlnaHRcclxuICAgIH07XHJcbn1cclxuXHJcblxyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxyXG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyBcclxuXHJcbmxldCAkZWYwNjI1NjA3OTY4NmJhMCR2YXIkZGVzY3JpcHRpb25JZCA9IDA7XHJcbmNvbnN0ICRlZjA2MjU2MDc5Njg2YmEwJHZhciRkZXNjcmlwdGlvbk5vZGVzID0gbmV3IE1hcCgpO1xyXG5mdW5jdGlvbiAkZWYwNjI1NjA3OTY4NmJhMCRleHBvcnQkZjhhZWRhN2IxMDc1M2ZhMShkZXNjcmlwdGlvbikge1xyXG4gICAgbGV0IFtpZCwgc2V0SWRdID0gKDAsICQxMnVHcCR1c2VTdGF0ZSkoKTtcclxuICAgICgwLCAkZjBhMDRjY2Q4ZGJkZDgzYiRleHBvcnQkZTVjNWE1ZjkxN2E1ODcxYykoKCk9PntcclxuICAgICAgICBpZiAoIWRlc2NyaXB0aW9uKSByZXR1cm47XHJcbiAgICAgICAgbGV0IGRlc2MgPSAkZWYwNjI1NjA3OTY4NmJhMCR2YXIkZGVzY3JpcHRpb25Ob2Rlcy5nZXQoZGVzY3JpcHRpb24pO1xyXG4gICAgICAgIGlmICghZGVzYykge1xyXG4gICAgICAgICAgICBsZXQgaWQgPSBgcmVhY3QtYXJpYS1kZXNjcmlwdGlvbi0keyRlZjA2MjU2MDc5Njg2YmEwJHZhciRkZXNjcmlwdGlvbklkKyt9YDtcclxuICAgICAgICAgICAgc2V0SWQoaWQpO1xyXG4gICAgICAgICAgICBsZXQgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIG5vZGUuaWQgPSBpZDtcclxuICAgICAgICAgICAgbm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgIG5vZGUudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChub2RlKTtcclxuICAgICAgICAgICAgZGVzYyA9IHtcclxuICAgICAgICAgICAgICAgIHJlZkNvdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgZWxlbWVudDogbm9kZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAkZWYwNjI1NjA3OTY4NmJhMCR2YXIkZGVzY3JpcHRpb25Ob2Rlcy5zZXQoZGVzY3JpcHRpb24sIGRlc2MpO1xyXG4gICAgICAgIH0gZWxzZSBzZXRJZChkZXNjLmVsZW1lbnQuaWQpO1xyXG4gICAgICAgIGRlc2MucmVmQ291bnQrKztcclxuICAgICAgICByZXR1cm4gKCk9PntcclxuICAgICAgICAgICAgaWYgKGRlc2MgJiYgLS1kZXNjLnJlZkNvdW50ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBkZXNjLmVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAkZWYwNjI1NjA3OTY4NmJhMCR2YXIkZGVzY3JpcHRpb25Ob2Rlcy5kZWxldGUoZGVzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0sIFtcclxuICAgICAgICBkZXNjcmlwdGlvblxyXG4gICAgXSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIFwiYXJpYS1kZXNjcmliZWRieVwiOiBkZXNjcmlwdGlvbiA/IGlkIDogdW5kZWZpbmVkXHJcbiAgICB9O1xyXG59XHJcblxyXG5cclxuXHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDIxIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIFxyXG5cclxuZnVuY3Rpb24gJGU5ZmFhZmI2NDFlMTY3ZGIkZXhwb3J0JDkwZmMzYTE3ZDkzZjcwNGMocmVmLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucykge1xyXG4gICAgbGV0IGhhbmRsZUV2ZW50ID0gKDAsICQ4YWUwNWVhYTVjMTE0ZTljJGV4cG9ydCQ3ZjU0ZmMzMTgwNTA4YTUyKShoYW5kbGVyKTtcclxuICAgIGxldCBpc0Rpc2FibGVkID0gaGFuZGxlciA9PSBudWxsO1xyXG4gICAgKDAsICQxMnVHcCR1c2VFZmZlY3QpKCgpPT57XHJcbiAgICAgICAgaWYgKGlzRGlzYWJsZWQgfHwgIXJlZi5jdXJyZW50KSByZXR1cm47XHJcbiAgICAgICAgbGV0IGVsZW1lbnQgPSByZWYuY3VycmVudDtcclxuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZUV2ZW50LCBvcHRpb25zKTtcclxuICAgICAgICByZXR1cm4gKCk9PntcclxuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVFdmVudCwgb3B0aW9ucyk7XHJcbiAgICAgICAgfTtcclxuICAgIH0sIFtcclxuICAgICAgICByZWYsXHJcbiAgICAgICAgZXZlbnQsXHJcbiAgICAgICAgb3B0aW9ucyxcclxuICAgICAgICBpc0Rpc2FibGVkLFxyXG4gICAgICAgIGhhbmRsZUV2ZW50XHJcbiAgICBdKTtcclxufVxyXG5cclxuXHJcblxyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxyXG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcclxuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXHJcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqLyBcclxuZnVuY3Rpb24gJDJmMDRjYmM0NGVlMzBjZTAkZXhwb3J0JDUzYTA5MTBmMDM4MzM3YmQoc2Nyb2xsVmlldywgZWxlbWVudCkge1xyXG4gICAgbGV0IG9mZnNldFggPSAkMmYwNGNiYzQ0ZWUzMGNlMCR2YXIkcmVsYXRpdmVPZmZzZXQoc2Nyb2xsVmlldywgZWxlbWVudCwgXCJsZWZ0XCIpO1xyXG4gICAgbGV0IG9mZnNldFkgPSAkMmYwNGNiYzQ0ZWUzMGNlMCR2YXIkcmVsYXRpdmVPZmZzZXQoc2Nyb2xsVmlldywgZWxlbWVudCwgXCJ0b3BcIik7XHJcbiAgICBsZXQgd2lkdGggPSBlbGVtZW50Lm9mZnNldFdpZHRoO1xyXG4gICAgbGV0IGhlaWdodCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xyXG4gICAgbGV0IHggPSBzY3JvbGxWaWV3LnNjcm9sbExlZnQ7XHJcbiAgICBsZXQgeSA9IHNjcm9sbFZpZXcuc2Nyb2xsVG9wO1xyXG4gICAgLy8gQWNjb3VudCBmb3IgdG9wL2xlZnQgYm9yZGVyIG9mZnNldHRpbmcgdGhlIHNjcm9sbCB0b3AvTGVmdFxyXG4gICAgbGV0IHsgYm9yZGVyVG9wV2lkdGg6IGJvcmRlclRvcFdpZHRoLCBib3JkZXJMZWZ0V2lkdGg6IGJvcmRlckxlZnRXaWR0aCB9ID0gZ2V0Q29tcHV0ZWRTdHlsZShzY3JvbGxWaWV3KTtcclxuICAgIGxldCBib3JkZXJBZGp1c3RlZFggPSBzY3JvbGxWaWV3LnNjcm9sbExlZnQgKyBwYXJzZUludChib3JkZXJMZWZ0V2lkdGgsIDEwKTtcclxuICAgIGxldCBib3JkZXJBZGp1c3RlZFkgPSBzY3JvbGxWaWV3LnNjcm9sbFRvcCArIHBhcnNlSW50KGJvcmRlclRvcFdpZHRoLCAxMCk7XHJcbiAgICAvLyBJZ25vcmUgZW5kL2JvdHRvbSBib3JkZXIgdmlhIGNsaWVudEhlaWdodC9XaWR0aCBpbnN0ZWFkIG9mIG9mZnNldEhlaWdodC9XaWR0aFxyXG4gICAgbGV0IG1heFggPSBib3JkZXJBZGp1c3RlZFggKyBzY3JvbGxWaWV3LmNsaWVudFdpZHRoO1xyXG4gICAgbGV0IG1heFkgPSBib3JkZXJBZGp1c3RlZFkgKyBzY3JvbGxWaWV3LmNsaWVudEhlaWdodDtcclxuICAgIGlmIChvZmZzZXRYIDw9IHgpIHggPSBvZmZzZXRYIC0gcGFyc2VJbnQoYm9yZGVyTGVmdFdpZHRoLCAxMCk7XHJcbiAgICBlbHNlIGlmIChvZmZzZXRYICsgd2lkdGggPiBtYXhYKSB4ICs9IG9mZnNldFggKyB3aWR0aCAtIG1heFg7XHJcbiAgICBpZiAob2Zmc2V0WSA8PSBib3JkZXJBZGp1c3RlZFkpIHkgPSBvZmZzZXRZIC0gcGFyc2VJbnQoYm9yZGVyVG9wV2lkdGgsIDEwKTtcclxuICAgIGVsc2UgaWYgKG9mZnNldFkgKyBoZWlnaHQgPiBtYXhZKSB5ICs9IG9mZnNldFkgKyBoZWlnaHQgLSBtYXhZO1xyXG4gICAgc2Nyb2xsVmlldy5zY3JvbGxMZWZ0ID0geDtcclxuICAgIHNjcm9sbFZpZXcuc2Nyb2xsVG9wID0geTtcclxufVxyXG4vKipcclxuICogQ29tcHV0ZXMgdGhlIG9mZnNldCBsZWZ0IG9yIHRvcCBmcm9tIGNoaWxkIHRvIGFuY2VzdG9yIGJ5IGFjY3VtdWxhdGluZ1xyXG4gKiBvZmZzZXRMZWZ0IG9yIG9mZnNldFRvcCB0aHJvdWdoIGludGVydmVuaW5nIG9mZnNldFBhcmVudHMuXHJcbiAqLyBmdW5jdGlvbiAkMmYwNGNiYzQ0ZWUzMGNlMCR2YXIkcmVsYXRpdmVPZmZzZXQoYW5jZXN0b3IsIGNoaWxkLCBheGlzKSB7XHJcbiAgICBjb25zdCBwcm9wID0gYXhpcyA9PT0gXCJsZWZ0XCIgPyBcIm9mZnNldExlZnRcIiA6IFwib2Zmc2V0VG9wXCI7XHJcbiAgICBsZXQgc3VtID0gMDtcclxuICAgIHdoaWxlKGNoaWxkLm9mZnNldFBhcmVudCl7XHJcbiAgICAgICAgc3VtICs9IGNoaWxkW3Byb3BdO1xyXG4gICAgICAgIGlmIChjaGlsZC5vZmZzZXRQYXJlbnQgPT09IGFuY2VzdG9yKSBicmVhaztcclxuICAgICAgICBlbHNlIGlmIChjaGlsZC5vZmZzZXRQYXJlbnQuY29udGFpbnMoYW5jZXN0b3IpKSB7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBhbmNlc3RvciBpcyBub3QgYHBvc2l0aW9uOnJlbGF0aXZlYCwgdGhlbiB3ZSBzdG9wIGF0XHJcbiAgICAgICAgICAgIC8vIF9pdHNfIG9mZnNldCBwYXJlbnQsIGFuZCB3ZSBzdWJ0cmFjdCBvZmYgX2l0c18gb2Zmc2V0LCBzbyB0aGF0XHJcbiAgICAgICAgICAgIC8vIHdlIGVuZCB1cCB3aXRoIHRoZSBwcm9wZXIgb2Zmc2V0IGZyb20gY2hpbGQgdG8gYW5jZXN0b3IuXHJcbiAgICAgICAgICAgIHN1bSAtPSBhbmNlc3Rvcltwcm9wXTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNoaWxkID0gY2hpbGQub2Zmc2V0UGFyZW50O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN1bTtcclxufVxyXG5mdW5jdGlvbiAkMmYwNGNiYzQ0ZWUzMGNlMCRleHBvcnQkYzgyNjg2MDc5NjMwOWQxYih0YXJnZXRFbGVtZW50LCBvcHRzKSB7XHJcbiAgICBpZiAoZG9jdW1lbnQuY29udGFpbnModGFyZ2V0RWxlbWVudCkpIHtcclxuICAgICAgICBsZXQgcm9vdCA9IGRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xyXG4gICAgICAgIGxldCBpc1Njcm9sbFByZXZlbnRlZCA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHJvb3QpLm92ZXJmbG93ID09PSBcImhpZGRlblwiO1xyXG4gICAgICAgIC8vIElmIHNjcm9sbGluZyBpcyBub3QgY3VycmVudGx5IHByZXZlbnRlZCB0aGVuIHdlIGFyZW7igJl0IGluIGEgb3ZlcmxheSBub3IgaXMgYSBvdmVybGF5IG9wZW4sIGp1c3QgdXNlIGVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcgdG8gYnJpbmcgdGhlIGVsZW1lbnQgaW50byB2aWV3XHJcbiAgICAgICAgaWYgKCFpc1Njcm9sbFByZXZlbnRlZCkge1xyXG4gICAgICAgICAgICB2YXIgLy8gdXNlIHNjcm9sbEludG9WaWV3KHtibG9jazogJ25lYXJlc3QnfSkgaW5zdGVhZCBvZiAuZm9jdXMgdG8gY2hlY2sgaWYgdGhlIGVsZW1lbnQgaXMgZnVsbHkgaW4gdmlldyBvciBub3Qgc2luY2UgLmZvY3VzKClcclxuICAgICAgICAgICAgLy8gd29uJ3QgY2F1c2UgYSBzY3JvbGwgaWYgdGhlIGVsZW1lbnQgaXMgYWxyZWFkeSBmb2N1c2VkIGFuZCBkb2Vzbid0IGJlaGF2ZSBjb25zaXN0ZW50bHkgd2hlbiBhbiBlbGVtZW50IGlzIHBhcnRpYWxseSBvdXQgb2YgdmlldyBob3Jpem9udGFsbHkgdnMgdmVydGljYWxseVxyXG4gICAgICAgICAgICBfdGFyZ2V0RWxlbWVudF9zY3JvbGxJbnRvVmlldztcclxuICAgICAgICAgICAgbGV0IHsgbGVmdDogb3JpZ2luYWxMZWZ0LCB0b3A6IG9yaWdpbmFsVG9wIH0gPSB0YXJnZXRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICB0YXJnZXRFbGVtZW50ID09PSBudWxsIHx8IHRhcmdldEVsZW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGFyZ2V0RWxlbWVudF9zY3JvbGxJbnRvVmlldyA9IHRhcmdldEVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcpID09PSBudWxsIHx8IF90YXJnZXRFbGVtZW50X3Njcm9sbEludG9WaWV3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGFyZ2V0RWxlbWVudF9zY3JvbGxJbnRvVmlldy5jYWxsKHRhcmdldEVsZW1lbnQsIHtcclxuICAgICAgICAgICAgICAgIGJsb2NrOiBcIm5lYXJlc3RcIlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbGV0IHsgbGVmdDogbmV3TGVmdCwgdG9wOiBuZXdUb3AgfSA9IHRhcmdldEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIC8vIEFjY291bnQgZm9yIHN1YiBwaXhlbCBkaWZmZXJlbmNlcyBmcm9tIHJvdW5kaW5nXHJcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhvcmlnaW5hbExlZnQgLSBuZXdMZWZ0KSA+IDEgfHwgTWF0aC5hYnMob3JpZ2luYWxUb3AgLSBuZXdUb3ApID4gMSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9vcHRzX2NvbnRhaW5pbmdFbGVtZW50X3Njcm9sbEludG9WaWV3LCBfb3B0c19jb250YWluaW5nRWxlbWVudCwgX3RhcmdldEVsZW1lbnRfc2Nyb2xsSW50b1ZpZXcxO1xyXG4gICAgICAgICAgICAgICAgb3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX29wdHNfY29udGFpbmluZ0VsZW1lbnQgPSBvcHRzLmNvbnRhaW5pbmdFbGVtZW50KSA9PT0gbnVsbCB8fCBfb3B0c19jb250YWluaW5nRWxlbWVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9vcHRzX2NvbnRhaW5pbmdFbGVtZW50X3Njcm9sbEludG9WaWV3ID0gX29wdHNfY29udGFpbmluZ0VsZW1lbnQuc2Nyb2xsSW50b1ZpZXcpID09PSBudWxsIHx8IF9vcHRzX2NvbnRhaW5pbmdFbGVtZW50X3Njcm9sbEludG9WaWV3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0c19jb250YWluaW5nRWxlbWVudF9zY3JvbGxJbnRvVmlldy5jYWxsKF9vcHRzX2NvbnRhaW5pbmdFbGVtZW50LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2s6IFwiY2VudGVyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5saW5lOiBcImNlbnRlclwiXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIChfdGFyZ2V0RWxlbWVudF9zY3JvbGxJbnRvVmlldzEgPSB0YXJnZXRFbGVtZW50LnNjcm9sbEludG9WaWV3KSA9PT0gbnVsbCB8fCBfdGFyZ2V0RWxlbWVudF9zY3JvbGxJbnRvVmlldzEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90YXJnZXRFbGVtZW50X3Njcm9sbEludG9WaWV3MS5jYWxsKHRhcmdldEVsZW1lbnQsIHtcclxuICAgICAgICAgICAgICAgICAgICBibG9jazogXCJuZWFyZXN0XCJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IHNjcm9sbFBhcmVudCA9ICgwLCAkNjJkOGRlZDkyOTZmMzg3MiRleHBvcnQkY2ZhMjIyNWU4NzkzODc4MSkodGFyZ2V0RWxlbWVudCk7XHJcbiAgICAgICAgICAgIC8vIElmIHNjcm9sbGluZyBpcyBwcmV2ZW50ZWQsIHdlIGRvbid0IHdhbnQgdG8gc2Nyb2xsIHRoZSBib2R5IHNpbmNlIGl0IG1pZ2h0IG1vdmUgdGhlIG92ZXJsYXkgcGFydGlhbGx5IG9mZnNjcmVlbiBhbmQgdGhlIHVzZXIgY2FuJ3Qgc2Nyb2xsIGl0IGJhY2sgaW50byB2aWV3LlxyXG4gICAgICAgICAgICB3aGlsZSh0YXJnZXRFbGVtZW50ICYmIHNjcm9sbFBhcmVudCAmJiB0YXJnZXRFbGVtZW50ICE9PSByb290ICYmIHNjcm9sbFBhcmVudCAhPT0gcm9vdCl7XHJcbiAgICAgICAgICAgICAgICAkMmYwNGNiYzQ0ZWUzMGNlMCRleHBvcnQkNTNhMDkxMGYwMzgzMzdiZChzY3JvbGxQYXJlbnQsIHRhcmdldEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0RWxlbWVudCA9IHNjcm9sbFBhcmVudDtcclxuICAgICAgICAgICAgICAgIHNjcm9sbFBhcmVudCA9ICgwLCAkNjJkOGRlZDkyOTZmMzg3MiRleHBvcnQkY2ZhMjIyNWU4NzkzODc4MSkodGFyZ2V0RWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuLypcclxuICogQ29weXJpZ2h0IDIwMjIgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcclxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXHJcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi8gXHJcbmZ1bmN0aW9uICQ2YTdkYjg1NDMyNDQ4ZjdmJGV4cG9ydCQ2MDI3ODg3MTQ1NzYyMmRlKGV2ZW50KSB7XHJcbiAgICAvLyBKQVdTL05WREEgd2l0aCBGaXJlZm94LlxyXG4gICAgaWYgKGV2ZW50Lm1veklucHV0U291cmNlID09PSAwICYmIGV2ZW50LmlzVHJ1c3RlZCkgcmV0dXJuIHRydWU7XHJcbiAgICAvLyBBbmRyb2lkIFRhbGtCYWNrJ3MgZGV0YWlsIHZhbHVlIHZhcmllcyBkZXBlbmRpbmcgb24gdGhlIGV2ZW50IGxpc3RlbmVyIHByb3ZpZGluZyB0aGUgZXZlbnQgc28gd2UgaGF2ZSBzcGVjaWZpYyBsb2dpYyBoZXJlIGluc3RlYWRcclxuICAgIC8vIElmIHBvaW50ZXJUeXBlIGlzIGRlZmluZWQsIGV2ZW50IGlzIGZyb20gYSBjbGljayBsaXN0ZW5lci4gRm9yIGV2ZW50cyBmcm9tIG1vdXNlZG93biBsaXN0ZW5lciwgZGV0YWlsID09PSAwIGlzIGEgc3VmZmljaWVudCBjaGVja1xyXG4gICAgLy8gdG8gZGV0ZWN0IFRhbGtCYWNrIHZpcnR1YWwgY2xpY2tzLlxyXG4gICAgaWYgKCgwLCAkYzg3MzExNDI0ZWEzMGEwNSRleHBvcnQkYTExYjAwNTk5MDBjZWVjOCkoKSAmJiBldmVudC5wb2ludGVyVHlwZSkgcmV0dXJuIGV2ZW50LnR5cGUgPT09IFwiY2xpY2tcIiAmJiBldmVudC5idXR0b25zID09PSAxO1xyXG4gICAgcmV0dXJuIGV2ZW50LmRldGFpbCA9PT0gMCAmJiAhZXZlbnQucG9pbnRlclR5cGU7XHJcbn1cclxuZnVuY3Rpb24gJDZhN2RiODU0MzI0NDhmN2YkZXhwb3J0JDI5YmYxYjVmMmM1NmNmNjMoZXZlbnQpIHtcclxuICAgIC8vIElmIHRoZSBwb2ludGVyIHNpemUgaXMgemVybywgdGhlbiB3ZSBhc3N1bWUgaXQncyBmcm9tIGEgc2NyZWVuIHJlYWRlci5cclxuICAgIC8vIEFuZHJvaWQgVGFsa0JhY2sgZG91YmxlIHRhcCB3aWxsIHNvbWV0aW1lcyByZXR1cm4gYSBldmVudCB3aXRoIHdpZHRoIGFuZCBoZWlnaHQgb2YgMVxyXG4gICAgLy8gYW5kIHBvaW50ZXJUeXBlID09PSAnbW91c2UnIHNvIHdlIG5lZWQgdG8gY2hlY2sgZm9yIGEgc3BlY2lmaWMgY29tYmluYXRpb24gb2YgZXZlbnQgYXR0cmlidXRlcy5cclxuICAgIC8vIENhbm5vdCB1c2UgXCJldmVudC5wcmVzc3VyZSA9PT0gMFwiIGFzIHRoZSBzb2xlIGNoZWNrIGR1ZSB0byBTYWZhcmkgcG9pbnRlciBldmVudHMgYWx3YXlzIHJldHVybmluZyBwcmVzc3VyZSA9PT0gMFxyXG4gICAgLy8gaW5zdGVhZCBvZiAuNSwgc2VlIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yMDYyMTYuIGV2ZW50LnBvaW50ZXJUeXBlID09PSAnbW91c2UnIGlzIHRvIGRpc3Rpbmd1c2hcclxuICAgIC8vIFRhbGtiYWNrIGRvdWJsZSB0YXAgZnJvbSBXaW5kb3dzIEZpcmVmb3ggdG91Y2ggc2NyZWVuIHByZXNzXHJcbiAgICByZXR1cm4gISgwLCAkYzg3MzExNDI0ZWEzMGEwNSRleHBvcnQkYTExYjAwNTk5MDBjZWVjOCkoKSAmJiBldmVudC53aWR0aCA9PT0gMCAmJiBldmVudC5oZWlnaHQgPT09IDAgfHwgZXZlbnQud2lkdGggPT09IDEgJiYgZXZlbnQuaGVpZ2h0ID09PSAxICYmIGV2ZW50LnByZXNzdXJlID09PSAwICYmIGV2ZW50LmRldGFpbCA9PT0gMCAmJiBldmVudC5wb2ludGVyVHlwZSA9PT0gXCJtb3VzZVwiO1xyXG59XHJcblxyXG5cclxuXHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDIzIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIC8qIGVzbGludC1kaXNhYmxlIHJ1bGVzZGlyL3B1cmUtcmVuZGVyICovIFxyXG5mdW5jdGlvbiAkNWEzODdjYzQ5MzUwZTZkYiRleHBvcnQkNzIyZGViYzBlNTZmZWEzOSh2YWx1ZSwgaXNFcXVhbCkge1xyXG4gICAgLy8gVXNpbmcgYSByZWYgZHVyaW5nIHJlbmRlciBpcyBvayBoZXJlIGJlY2F1c2UgaXQncyBvbmx5IGFuIG9wdGltaXphdGlvbiDigJMgYm90aCB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQuXHJcbiAgICAvLyBJZiBhIHJlbmRlciBpcyB0aHJvd24gYXdheSwgaXQnbGwgc3RpbGwgd29yayB0aGUgc2FtZSBubyBtYXR0ZXIgaWYgdGhlIG5leHQgcmVuZGVyIGlzIHRoZSBzYW1lIG9yIG5vdC5cclxuICAgIGxldCBsYXN0VmFsdWUgPSAoMCwgJDEydUdwJHVzZVJlZikobnVsbCk7XHJcbiAgICBpZiAodmFsdWUgJiYgbGFzdFZhbHVlLmN1cnJlbnQgJiYgaXNFcXVhbCh2YWx1ZSwgbGFzdFZhbHVlLmN1cnJlbnQpKSB2YWx1ZSA9IGxhc3RWYWx1ZS5jdXJyZW50O1xyXG4gICAgbGFzdFZhbHVlLmN1cnJlbnQgPSB2YWx1ZTtcclxuICAgIHJldHVybiB2YWx1ZTtcclxufVxyXG5cclxuXHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDIzIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XHJcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xyXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcclxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovIFxyXG5cclxuZnVuY3Rpb24gJDk5ZmFjYWI3MzI2NmY2NjIkZXhwb3J0JDVhZGQxZDAwNjI5M2QxMzYocmVmLCBpbml0aWFsVmFsdWUsIG9uUmVzZXQpIHtcclxuICAgIGxldCByZXNldFZhbHVlID0gKDAsICQxMnVHcCR1c2VSZWYpKGluaXRpYWxWYWx1ZSk7XHJcbiAgICBsZXQgaGFuZGxlUmVzZXQgPSAoMCwgJDhhZTA1ZWFhNWMxMTRlOWMkZXhwb3J0JDdmNTRmYzMxODA1MDhhNTIpKCgpPT57XHJcbiAgICAgICAgaWYgKG9uUmVzZXQpIG9uUmVzZXQocmVzZXRWYWx1ZS5jdXJyZW50KTtcclxuICAgIH0pO1xyXG4gICAgKDAsICQxMnVHcCR1c2VFZmZlY3QpKCgpPT57XHJcbiAgICAgICAgdmFyIF9yZWZfY3VycmVudDtcclxuICAgICAgICBsZXQgZm9ybSA9IHJlZiA9PT0gbnVsbCB8fCByZWYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfcmVmX2N1cnJlbnQgPSByZWYuY3VycmVudCkgPT09IG51bGwgfHwgX3JlZl9jdXJyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVmX2N1cnJlbnQuZm9ybTtcclxuICAgICAgICBmb3JtID09PSBudWxsIHx8IGZvcm0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInJlc2V0XCIsIGhhbmRsZVJlc2V0KTtcclxuICAgICAgICByZXR1cm4gKCk9PntcclxuICAgICAgICAgICAgZm9ybSA9PT0gbnVsbCB8fCBmb3JtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmb3JtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNldFwiLCBoYW5kbGVSZXNldCk7XHJcbiAgICAgICAgfTtcclxuICAgIH0sIFtcclxuICAgICAgICByZWYsXHJcbiAgICAgICAgaGFuZGxlUmVzZXRcclxuICAgIF0pO1xyXG59XHJcblxyXG5cclxuXHJcblxyXG5leHBvcnQgeyRiZGIxMTAxMGNlZjcwMjM2JGV4cG9ydCRmNjgwODc3YTM0NzExZTM3IGFzIHVzZUlkLCAkYmRiMTEwMTBjZWY3MDIzNiRleHBvcnQkY2Q4YzljYjY4Zjg0MjYyOSBhcyBtZXJnZUlkcywgJGJkYjExMDEwY2VmNzAyMzYkZXhwb3J0JGI0Y2MwOWM1OTJlOGZkYjggYXMgdXNlU2xvdElkLCAkZmY1OTYzZWIxZmNjZjU1MiRleHBvcnQkZTA4ZTNiNjdlMzkyMTAxZSBhcyBjaGFpbiwgJDQzMWZiZDg2Y2E3ZGMyMTYkZXhwb3J0JGIyMDRhZjE1ODA0MmZiYWMgYXMgZ2V0T3duZXJEb2N1bWVudCwgJDQzMWZiZDg2Y2E3ZGMyMTYkZXhwb3J0JGYyMWExZmZhZTI2MDE0NWEgYXMgZ2V0T3duZXJXaW5kb3csICQzZWY0MjU3NWRmODRiMzBiJGV4cG9ydCQ5ZDE2MTFjNzdjMmZlOTI4IGFzIG1lcmdlUHJvcHMsICQ1ZGM5NTg5OWIzMDZmNjMwJGV4cG9ydCRjOTA1ODMxNjc2NGMxNDBlIGFzIG1lcmdlUmVmcywgJDY1NDg0ZDAyZGNiN2ViM2UkZXhwb3J0JDQ1N2MzZDY1MThkZDRjNmYgYXMgZmlsdGVyRE9NUHJvcHMsICQ3MjE1YWZjNmRlNjA2ZDZiJGV4cG9ydCRkZTc5ZTJjNjk1ZTA1MmYzIGFzIGZvY3VzV2l0aG91dFNjcm9sbGluZywgJGFiNzFkYWRiMDNhNmZiMmUkZXhwb3J0JDYyMmNlYTQ0NWExYzViN2QgYXMgZ2V0T2Zmc2V0LCAkZWE4ZGNiY2I5ZWExYjU1NiRleHBvcnQkOTUxODVkNjk5ZTA1ZDRkNyBhcyBvcGVuTGluaywgJGVhOGRjYmNiOWVhMWI1NTYkZXhwb3J0JDUxNDM3ZDUwMzM3M2QyMjMgYXMgZ2V0U3ludGhldGljTGlua1Byb3BzLCAkZWE4ZGNiY2I5ZWExYjU1NiRleHBvcnQkMzIzZTRmYzJmYTQ3NTNmYiBhcyBSb3V0ZXJQcm92aWRlciwgJGVhOGRjYmNiOWVhMWI1NTYkZXhwb3J0JGVmYThjOTA5OWU1MzAyMzUgYXMgc2hvdWxkQ2xpZW50TmF2aWdhdGUsICRlYThkY2JjYjllYTFiNTU2JGV4cG9ydCQ5YTMwMmE0NWY2NWQwNTcyIGFzIHVzZVJvdXRlciwgJGJiZWQ4YjQxZjg1N2JjYzAkZXhwb3J0JDI0NDkwMzE2Zjc2NGM0MzAgYXMgcnVuQWZ0ZXJUcmFuc2l0aW9uLCAkOWNjMDlkZjlmZDc2NzZiZSRleHBvcnQkN2JiZWQ3NWZlYmEzOTcwNiBhcyB1c2VEcmFnMUQsICQwM2RlYjIzZmYxNDkyMGM0JGV4cG9ydCQ0ZWFmMDRlNTRhYThlZWQ2IGFzIHVzZUdsb2JhbExpc3RlbmVycywgJDMxM2I5ODg2MWVlNWRkNmMkZXhwb3J0JGQ2ODc1MTIyMTk0YzdiNDQgYXMgdXNlTGFiZWxzLCAkZGY1NjE2NGRmZjU3ODVlMiRleHBvcnQkNDMzOGI1MzMxNWFiZjY2NiBhcyB1c2VPYmplY3RSZWYsICQ0ZjU4YzVmNzJiY2Y3OWY3JGV4cG9ydCQ0OTYzMTVhMTYwOGQ5NjAyIGFzIHVzZVVwZGF0ZUVmZmVjdCwgJGYwYTA0Y2NkOGRiZGQ4M2IkZXhwb3J0JGU1YzVhNWY5MTdhNTg3MWMgYXMgdXNlTGF5b3V0RWZmZWN0LCAkOWRhYWIwMmQ0NjE4MDlkYiRleHBvcnQkNjgzNDgwZjE5MWMwZTNlYSBhcyB1c2VSZXNpemVPYnNlcnZlciwgJGU3ODAxYmU4MmI0YjJhNTMkZXhwb3J0JDRkZWJkYjFhM2YwZmE3OWUgYXMgdXNlU3luY1JlZiwgJDYyZDhkZWQ5Mjk2ZjM4NzIkZXhwb3J0JGNmYTIyMjVlODc5Mzg3ODEgYXMgZ2V0U2Nyb2xsUGFyZW50LCAkNjJkOGRlZDkyOTZmMzg3MiRleHBvcnQkMmJiNzQ3NDBjNGUxOWRlZiBhcyBpc1Njcm9sbGFibGUsICQ1ZGY2NGIzODA3ZGMxNWVlJGV4cG9ydCRkNjk5OTA1ZGQ1N2M3M2NhIGFzIHVzZVZpZXdwb3J0U2l6ZSwgJGVmMDYyNTYwNzk2ODZiYTAkZXhwb3J0JGY4YWVkYTdiMTA3NTNmYTEgYXMgdXNlRGVzY3JpcHRpb24sICRjODczMTE0MjRlYTMwYTA1JGV4cG9ydCQ5YWMxMDBlNDA2MTNlYTEwIGFzIGlzTWFjLCAkYzg3MzExNDI0ZWEzMGEwNSRleHBvcnQkMTg2YzY5NjRjYTE3ZDk5IGFzIGlzSVBob25lLCAkYzg3MzExNDI0ZWEzMGEwNSRleHBvcnQkN2JlZjA0OWNlOTJlNDIyNCBhcyBpc0lQYWQsICRjODczMTE0MjRlYTMwYTA1JGV4cG9ydCRmZWRiMzY5Y2I3MDIwN2YxIGFzIGlzSU9TLCAkYzg3MzExNDI0ZWEzMGEwNSRleHBvcnQkZTE4NjVjM2JlZGNkODIyYiBhcyBpc0FwcGxlRGV2aWNlLCAkYzg3MzExNDI0ZWEzMGEwNSRleHBvcnQkNzg1NTEwNDM1ODJhNmE5OCBhcyBpc1dlYktpdCwgJGM4NzMxMTQyNGVhMzBhMDUkZXhwb3J0JDY0NDZhMTg2ZDA5ZTM3OWUgYXMgaXNDaHJvbWUsICRjODczMTE0MjRlYTMwYTA1JGV4cG9ydCRhMTFiMDA1OTkwMGNlZWM4IGFzIGlzQW5kcm9pZCwgJGM4NzMxMTQyNGVhMzBhMDUkZXhwb3J0JGI3ZDc4OTkzYjc0Zjc2NmQgYXMgaXNGaXJlZm94LCAkZTlmYWFmYjY0MWUxNjdkYiRleHBvcnQkOTBmYzNhMTdkOTNmNzA0YyBhcyB1c2VFdmVudCwgJDFkYmVjYmUyN2EwNGY5YWYkZXhwb3J0JDE0ZDIzOGYzNDI3MjNmMjUgYXMgdXNlVmFsdWVFZmZlY3QsICQyZjA0Y2JjNDRlZTMwY2UwJGV4cG9ydCQ1M2EwOTEwZjAzODMzN2JkIGFzIHNjcm9sbEludG9WaWV3LCAkMmYwNGNiYzQ0ZWUzMGNlMCRleHBvcnQkYzgyNjg2MDc5NjMwOWQxYiBhcyBzY3JvbGxJbnRvVmlld3BvcnQsICQ0NTA3NDYxYTFiODcwMTIzJHJlX2V4cG9ydCRjbGFtcCBhcyBjbGFtcCwgJDQ1MDc0NjFhMWI4NzAxMjMkcmVfZXhwb3J0JHNuYXBWYWx1ZVRvU3RlcCBhcyBzbmFwVmFsdWVUb1N0ZXAsICQ2YTdkYjg1NDMyNDQ4ZjdmJGV4cG9ydCQ2MDI3ODg3MTQ1NzYyMmRlIGFzIGlzVmlydHVhbENsaWNrLCAkNmE3ZGI4NTQzMjQ0OGY3ZiRleHBvcnQkMjliZjFiNWYyYzU2Y2Y2MyBhcyBpc1ZpcnR1YWxQb2ludGVyRXZlbnQsICQ4YWUwNWVhYTVjMTE0ZTljJGV4cG9ydCQ3ZjU0ZmMzMTgwNTA4YTUyIGFzIHVzZUVmZmVjdEV2ZW50LCAkNWEzODdjYzQ5MzUwZTZkYiRleHBvcnQkNzIyZGViYzBlNTZmZWEzOSBhcyB1c2VEZWVwTWVtbywgJDk5ZmFjYWI3MzI2NmY2NjIkZXhwb3J0JDVhZGQxZDAwNjI5M2QxMzYgYXMgdXNlRm9ybVJlc2V0fTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bW9kdWxlLmpzLm1hcFxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-aria/utils/dist/import.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-aria/utils/node_modules/clsx/dist/clsx.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@react-aria/utils/node_modules/clsx/dist/clsx.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clsx: () => (/* binding */ clsx),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nfunction r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (clsx);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvdXRpbHMvbm9kZV9tb2R1bGVzL2Nsc3gvZGlzdC9jbHN4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLGNBQWMsYUFBYSwrQ0FBK0MsZ0RBQWdELGVBQWUsUUFBUSxJQUFJLDBDQUEwQyx5Q0FBeUMsU0FBZ0IsZ0JBQWdCLHdDQUF3QyxJQUFJLG1EQUFtRCxTQUFTLGlFQUFlLElBQUkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9udXRyaS1zbWFydC8uL25vZGVfbW9kdWxlcy9AcmVhY3QtYXJpYS91dGlscy9ub2RlX21vZHVsZXMvY2xzeC9kaXN0L2Nsc3gubWpzPzY1MjQiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gcihlKXt2YXIgdCxmLG49XCJcIjtpZihcInN0cmluZ1wiPT10eXBlb2YgZXx8XCJudW1iZXJcIj09dHlwZW9mIGUpbis9ZTtlbHNlIGlmKFwib2JqZWN0XCI9PXR5cGVvZiBlKWlmKEFycmF5LmlzQXJyYXkoZSkpe3ZhciBvPWUubGVuZ3RoO2Zvcih0PTA7dDxvO3QrKyllW3RdJiYoZj1yKGVbdF0pKSYmKG4mJihuKz1cIiBcIiksbis9Zil9ZWxzZSBmb3IoZiBpbiBlKWVbZl0mJihuJiYobis9XCIgXCIpLG4rPWYpO3JldHVybiBufWV4cG9ydCBmdW5jdGlvbiBjbHN4KCl7Zm9yKHZhciBlLHQsZj0wLG49XCJcIixvPWFyZ3VtZW50cy5sZW5ndGg7ZjxvO2YrKykoZT1hcmd1bWVudHNbZl0pJiYodD1yKGUpKSYmKG4mJihuKz1cIiBcIiksbis9dCk7cmV0dXJuIG59ZXhwb3J0IGRlZmF1bHQgY2xzeDsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-aria/utils/node_modules/clsx/dist/clsx.mjs\n");

/***/ })

};
;